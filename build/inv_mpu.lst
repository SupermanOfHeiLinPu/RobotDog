ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"inv_mpu.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.get_accel_prod_shift,"ax",%progbits
  17              		.align	1
  18              		.arch armv7e-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-d16
  24              	get_accel_prod_shift:
  25              	.LVL0:
  26              	.LFB185:
  27              		.file 1 "task/attitude/eMPL/inv_mpu.c"
   1:task/attitude/eMPL/inv_mpu.c **** /*
   2:task/attitude/eMPL/inv_mpu.c ****  $License:
   3:task/attitude/eMPL/inv_mpu.c ****     Copyright (C) 2011-2012 InvenSense Corporation, All Rights Reserved.
   4:task/attitude/eMPL/inv_mpu.c ****     See included License.txt for License information.
   5:task/attitude/eMPL/inv_mpu.c ****  $
   6:task/attitude/eMPL/inv_mpu.c ****  */
   7:task/attitude/eMPL/inv_mpu.c **** /**
   8:task/attitude/eMPL/inv_mpu.c ****  *  @addtogroup  DRIVERS Sensor Driver Layer
   9:task/attitude/eMPL/inv_mpu.c ****  *  @brief       Hardware drivers to communicate with sensors via I2C.
  10:task/attitude/eMPL/inv_mpu.c ****  *
  11:task/attitude/eMPL/inv_mpu.c ****  *  @{
  12:task/attitude/eMPL/inv_mpu.c ****  *      @file       inv_mpu.c
  13:task/attitude/eMPL/inv_mpu.c ****  *      @brief      An I2C-based driver for Invensense gyroscopes.
  14:task/attitude/eMPL/inv_mpu.c ****  *      @details    This driver currently works for the following devices:
  15:task/attitude/eMPL/inv_mpu.c ****  *                  MPU6050
  16:task/attitude/eMPL/inv_mpu.c ****  *                  MPU6500
  17:task/attitude/eMPL/inv_mpu.c ****  *                  MPU9150 (or MPU6050 w/ AK8975 on the auxiliary bus)
  18:task/attitude/eMPL/inv_mpu.c ****  *                  MPU9250 (or MPU6500 w/ AK8963 on the auxiliary bus)
  19:task/attitude/eMPL/inv_mpu.c ****  */
  20:task/attitude/eMPL/inv_mpu.c **** #include <stdio.h>
  21:task/attitude/eMPL/inv_mpu.c **** #include <stdint.h>
  22:task/attitude/eMPL/inv_mpu.c **** #include <stdlib.h>
  23:task/attitude/eMPL/inv_mpu.c **** #include <string.h>
  24:task/attitude/eMPL/inv_mpu.c **** #include <math.h>
  25:task/attitude/eMPL/inv_mpu.c **** #include "inv_mpu.h"
  26:task/attitude/eMPL/inv_mpu.c **** 
  27:task/attitude/eMPL/inv_mpu.c **** /* The following functions must be defined for this platform:
  28:task/attitude/eMPL/inv_mpu.c ****  * i2c_write(unsigned char slave_addr, unsigned char reg_addr,
  29:task/attitude/eMPL/inv_mpu.c ****  *      unsigned char length, unsigned char const *data)
  30:task/attitude/eMPL/inv_mpu.c ****  * i2c_read(unsigned char slave_addr, unsigned char reg_addr,
  31:task/attitude/eMPL/inv_mpu.c ****  *      unsigned char length, unsigned char *data)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 2


  32:task/attitude/eMPL/inv_mpu.c ****  * delay_ms(unsigned long num_ms)
  33:task/attitude/eMPL/inv_mpu.c ****  * get_ms(unsigned long *count)
  34:task/attitude/eMPL/inv_mpu.c ****  * reg_int_cb(void (*cb)(void), unsigned char port, unsigned char pin)
  35:task/attitude/eMPL/inv_mpu.c ****  * labs(long x)
  36:task/attitude/eMPL/inv_mpu.c ****  * fabsf(float x)
  37:task/attitude/eMPL/inv_mpu.c ****  * min(int a, int b)
  38:task/attitude/eMPL/inv_mpu.c ****  */
  39:task/attitude/eMPL/inv_mpu.c **** #if defined EMPL_TARGET_STM32F4
  40:task/attitude/eMPL/inv_mpu.c **** #include "bsp_i2c.h"
  41:task/attitude/eMPL/inv_mpu.c **** #include "main.h"
  42:task/attitude/eMPL/inv_mpu.c **** 
  43:task/attitude/eMPL/inv_mpu.c **** #define i2c_write Sensors_I2C_WriteRegister
  44:task/attitude/eMPL/inv_mpu.c **** #define i2c_read Sensors_I2C_ReadRegister
  45:task/attitude/eMPL/inv_mpu.c **** #define delay_ms bsp_i2c_Delay
  46:task/attitude/eMPL/inv_mpu.c **** #define get_ms get_tick_count
  47:task/attitude/eMPL/inv_mpu.c **** #define log_i printf
  48:task/attitude/eMPL/inv_mpu.c **** #define log_e printf
  49:task/attitude/eMPL/inv_mpu.c **** #define min(a, b) ((a < b) ? a : b)
  50:task/attitude/eMPL/inv_mpu.c **** 
  51:task/attitude/eMPL/inv_mpu.c **** #elif defined MOTION_DRIVER_TARGET_MSP430
  52:task/attitude/eMPL/inv_mpu.c **** #include "msp430.h"
  53:task/attitude/eMPL/inv_mpu.c **** #include "msp430_i2c.h"
  54:task/attitude/eMPL/inv_mpu.c **** #include "msp430_clock.h"
  55:task/attitude/eMPL/inv_mpu.c **** #include "msp430_interrupt.h"
  56:task/attitude/eMPL/inv_mpu.c **** #define i2c_write msp430_i2c_write
  57:task/attitude/eMPL/inv_mpu.c **** #define i2c_read msp430_i2c_read
  58:task/attitude/eMPL/inv_mpu.c **** #define delay_ms msp430_delay_ms
  59:task/attitude/eMPL/inv_mpu.c **** #define get_ms msp430_get_clock_ms
  60:task/attitude/eMPL/inv_mpu.c **** static inline int reg_int_cb(struct int_param_s *int_param)
  61:task/attitude/eMPL/inv_mpu.c **** {
  62:task/attitude/eMPL/inv_mpu.c ****     return msp430_reg_int_cb(int_param->cb, int_param->pin, int_param->lp_exit,
  63:task/attitude/eMPL/inv_mpu.c ****                              int_param->active_low);
  64:task/attitude/eMPL/inv_mpu.c **** }
  65:task/attitude/eMPL/inv_mpu.c **** #define log_i(...) \
  66:task/attitude/eMPL/inv_mpu.c ****     do             \
  67:task/attitude/eMPL/inv_mpu.c ****     {              \
  68:task/attitude/eMPL/inv_mpu.c ****     } while (0)
  69:task/attitude/eMPL/inv_mpu.c **** #define log_e(...) \
  70:task/attitude/eMPL/inv_mpu.c ****     do             \
  71:task/attitude/eMPL/inv_mpu.c ****     {              \
  72:task/attitude/eMPL/inv_mpu.c ****     } while (0)
  73:task/attitude/eMPL/inv_mpu.c **** /* labs is already defined by TI's toolchain. */
  74:task/attitude/eMPL/inv_mpu.c **** /* fabs is for doubles. fabsf is for floats. */
  75:task/attitude/eMPL/inv_mpu.c **** #define fabs fabsf
  76:task/attitude/eMPL/inv_mpu.c **** #define min(a, b) ((a < b) ? a : b)
  77:task/attitude/eMPL/inv_mpu.c **** #elif defined EMPL_TARGET_MSP430
  78:task/attitude/eMPL/inv_mpu.c **** #include "msp430.h"
  79:task/attitude/eMPL/inv_mpu.c **** #include "msp430_i2c.h"
  80:task/attitude/eMPL/inv_mpu.c **** #include "msp430_clock.h"
  81:task/attitude/eMPL/inv_mpu.c **** #include "msp430_interrupt.h"
  82:task/attitude/eMPL/inv_mpu.c **** #include "log.h"
  83:task/attitude/eMPL/inv_mpu.c **** #define i2c_write msp430_i2c_write
  84:task/attitude/eMPL/inv_mpu.c **** #define i2c_read msp430_i2c_read
  85:task/attitude/eMPL/inv_mpu.c **** #define delay_ms msp430_delay_ms
  86:task/attitude/eMPL/inv_mpu.c **** #define get_ms msp430_get_clock_ms
  87:task/attitude/eMPL/inv_mpu.c **** static inline int reg_int_cb(struct int_param_s *int_param)
  88:task/attitude/eMPL/inv_mpu.c **** {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 3


  89:task/attitude/eMPL/inv_mpu.c ****     return msp430_reg_int_cb(int_param->cb, int_param->pin, int_param->lp_exit,
  90:task/attitude/eMPL/inv_mpu.c ****                              int_param->active_low);
  91:task/attitude/eMPL/inv_mpu.c **** }
  92:task/attitude/eMPL/inv_mpu.c **** #define log_i MPL_LOGI
  93:task/attitude/eMPL/inv_mpu.c **** #define log_e MPL_LOGE
  94:task/attitude/eMPL/inv_mpu.c **** /* labs is already defined by TI's toolchain. */
  95:task/attitude/eMPL/inv_mpu.c **** /* fabs is for doubles. fabsf is for floats. */
  96:task/attitude/eMPL/inv_mpu.c **** #define fabs fabsf
  97:task/attitude/eMPL/inv_mpu.c **** #define min(a, b) ((a < b) ? a : b)
  98:task/attitude/eMPL/inv_mpu.c **** #elif defined EMPL_TARGET_UC3L0
  99:task/attitude/eMPL/inv_mpu.c **** /* Instead of using the standard TWI driver from the ASF library, we're using
 100:task/attitude/eMPL/inv_mpu.c ****  * a TWI driver that follows the slave address + register address convention.
 101:task/attitude/eMPL/inv_mpu.c ****  */
 102:task/attitude/eMPL/inv_mpu.c **** #include "twi.h"
 103:task/attitude/eMPL/inv_mpu.c **** #include "delay.h"
 104:task/attitude/eMPL/inv_mpu.c **** #include "sysclk.h"
 105:task/attitude/eMPL/inv_mpu.c **** #include "log.h"
 106:task/attitude/eMPL/inv_mpu.c **** #include "sensors_xplained.h"
 107:task/attitude/eMPL/inv_mpu.c **** #include "uc3l0_clock.h"
 108:task/attitude/eMPL/inv_mpu.c **** #define i2c_write(a, b, c, d) twi_write(a, b, d, c)
 109:task/attitude/eMPL/inv_mpu.c **** #define i2c_read(a, b, c, d) twi_read(a, b, d, c)
 110:task/attitude/eMPL/inv_mpu.c **** /* delay_ms is a function already defined in ASF. */
 111:task/attitude/eMPL/inv_mpu.c **** #define get_ms uc3l0_get_clock_ms
 112:task/attitude/eMPL/inv_mpu.c **** static inline int reg_int_cb(struct int_param_s *int_param)
 113:task/attitude/eMPL/inv_mpu.c **** {
 114:task/attitude/eMPL/inv_mpu.c ****     sensor_board_irq_connect(int_param->pin, int_param->cb, int_param->arg);
 115:task/attitude/eMPL/inv_mpu.c ****     return 0;
 116:task/attitude/eMPL/inv_mpu.c **** }
 117:task/attitude/eMPL/inv_mpu.c **** #define log_i MPL_LOGI
 118:task/attitude/eMPL/inv_mpu.c **** #define log_e MPL_LOGE
 119:task/attitude/eMPL/inv_mpu.c **** /* UC3 is a 32-bit processor, so abs and labs are equivalent. */
 120:task/attitude/eMPL/inv_mpu.c **** #define labs abs
 121:task/attitude/eMPL/inv_mpu.c **** #define fabs(x) (((x) > 0) ? (x) : -(x))
 122:task/attitude/eMPL/inv_mpu.c **** #else
 123:task/attitude/eMPL/inv_mpu.c **** #error Gyro driver is missing the system layer implementations.
 124:task/attitude/eMPL/inv_mpu.c **** #endif
 125:task/attitude/eMPL/inv_mpu.c **** 
 126:task/attitude/eMPL/inv_mpu.c **** #if !defined MPU6050 && !defined MPU9150 && !defined MPU6500 && !defined MPU9250
 127:task/attitude/eMPL/inv_mpu.c **** #error Which gyro are you using? Define MPUxxxx in your compiler options.
 128:task/attitude/eMPL/inv_mpu.c **** #endif
 129:task/attitude/eMPL/inv_mpu.c **** 
 130:task/attitude/eMPL/inv_mpu.c **** /* Time for some messy macro work. =]
 131:task/attitude/eMPL/inv_mpu.c ****  * #define MPU9150
 132:task/attitude/eMPL/inv_mpu.c ****  * is equivalent to..
 133:task/attitude/eMPL/inv_mpu.c ****  * #define MPU6050
 134:task/attitude/eMPL/inv_mpu.c ****  * #define AK8975_SECONDARY
 135:task/attitude/eMPL/inv_mpu.c ****  *
 136:task/attitude/eMPL/inv_mpu.c ****  * #define MPU9250
 137:task/attitude/eMPL/inv_mpu.c ****  * is equivalent to..
 138:task/attitude/eMPL/inv_mpu.c ****  * #define MPU6500
 139:task/attitude/eMPL/inv_mpu.c ****  * #define AK8963_SECONDARY
 140:task/attitude/eMPL/inv_mpu.c ****  */
 141:task/attitude/eMPL/inv_mpu.c **** #if defined MPU9150
 142:task/attitude/eMPL/inv_mpu.c **** #ifndef MPU6050
 143:task/attitude/eMPL/inv_mpu.c **** #define MPU6050
 144:task/attitude/eMPL/inv_mpu.c **** #endif /* #ifndef MPU6050 */
 145:task/attitude/eMPL/inv_mpu.c **** #if defined AK8963_SECONDARY
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 4


 146:task/attitude/eMPL/inv_mpu.c **** #error "MPU9150 and AK8963_SECONDARY cannot both be defined."
 147:task/attitude/eMPL/inv_mpu.c **** #elif !defined AK8975_SECONDARY /* #if defined AK8963_SECONDARY */
 148:task/attitude/eMPL/inv_mpu.c **** #define AK8975_SECONDARY
 149:task/attitude/eMPL/inv_mpu.c **** #endif                /* #if defined AK8963_SECONDARY */
 150:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU9250 /* #if defined MPU9150 */
 151:task/attitude/eMPL/inv_mpu.c **** #ifndef MPU6500
 152:task/attitude/eMPL/inv_mpu.c **** #define MPU6500
 153:task/attitude/eMPL/inv_mpu.c **** #endif /* #ifndef MPU6500 */
 154:task/attitude/eMPL/inv_mpu.c **** #if defined AK8975_SECONDARY
 155:task/attitude/eMPL/inv_mpu.c **** #error "MPU9250 and AK8975_SECONDARY cannot both be defined."
 156:task/attitude/eMPL/inv_mpu.c **** #elif !defined AK8963_SECONDARY /* #if defined AK8975_SECONDARY */
 157:task/attitude/eMPL/inv_mpu.c **** #define AK8963_SECONDARY
 158:task/attitude/eMPL/inv_mpu.c **** #endif /* #if defined AK8975_SECONDARY */
 159:task/attitude/eMPL/inv_mpu.c **** #endif /* #if defined MPU9150 */
 160:task/attitude/eMPL/inv_mpu.c **** 
 161:task/attitude/eMPL/inv_mpu.c **** #if defined AK8975_SECONDARY || defined AK8963_SECONDARY
 162:task/attitude/eMPL/inv_mpu.c **** #define AK89xx_SECONDARY
 163:task/attitude/eMPL/inv_mpu.c **** #else
 164:task/attitude/eMPL/inv_mpu.c **** /* #warning "No compass = less profit for Invensense. Lame." */
 165:task/attitude/eMPL/inv_mpu.c **** #endif
 166:task/attitude/eMPL/inv_mpu.c **** 
 167:task/attitude/eMPL/inv_mpu.c **** static int set_int_enable(unsigned char enable);
 168:task/attitude/eMPL/inv_mpu.c **** 
 169:task/attitude/eMPL/inv_mpu.c **** /* Hardware registers needed by driver. */
 170:task/attitude/eMPL/inv_mpu.c **** struct gyro_reg_s
 171:task/attitude/eMPL/inv_mpu.c **** {
 172:task/attitude/eMPL/inv_mpu.c ****     unsigned char who_am_i;
 173:task/attitude/eMPL/inv_mpu.c ****     unsigned char rate_div;
 174:task/attitude/eMPL/inv_mpu.c ****     unsigned char lpf;
 175:task/attitude/eMPL/inv_mpu.c ****     unsigned char prod_id;
 176:task/attitude/eMPL/inv_mpu.c ****     unsigned char user_ctrl;
 177:task/attitude/eMPL/inv_mpu.c ****     unsigned char fifo_en;
 178:task/attitude/eMPL/inv_mpu.c ****     unsigned char gyro_cfg;
 179:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_cfg;
 180:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_cfg2;
 181:task/attitude/eMPL/inv_mpu.c ****     unsigned char lp_accel_odr;
 182:task/attitude/eMPL/inv_mpu.c ****     unsigned char motion_thr;
 183:task/attitude/eMPL/inv_mpu.c ****     unsigned char motion_dur;
 184:task/attitude/eMPL/inv_mpu.c ****     unsigned char fifo_count_h;
 185:task/attitude/eMPL/inv_mpu.c ****     unsigned char fifo_r_w;
 186:task/attitude/eMPL/inv_mpu.c ****     unsigned char raw_gyro;
 187:task/attitude/eMPL/inv_mpu.c ****     unsigned char raw_accel;
 188:task/attitude/eMPL/inv_mpu.c ****     unsigned char temp;
 189:task/attitude/eMPL/inv_mpu.c ****     unsigned char int_enable;
 190:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_int_status;
 191:task/attitude/eMPL/inv_mpu.c ****     unsigned char int_status;
 192:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_intel;
 193:task/attitude/eMPL/inv_mpu.c ****     unsigned char pwr_mgmt_1;
 194:task/attitude/eMPL/inv_mpu.c ****     unsigned char pwr_mgmt_2;
 195:task/attitude/eMPL/inv_mpu.c ****     unsigned char int_pin_cfg;
 196:task/attitude/eMPL/inv_mpu.c ****     unsigned char mem_r_w;
 197:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_offs;
 198:task/attitude/eMPL/inv_mpu.c ****     unsigned char i2c_mst;
 199:task/attitude/eMPL/inv_mpu.c ****     unsigned char bank_sel;
 200:task/attitude/eMPL/inv_mpu.c ****     unsigned char mem_start_addr;
 201:task/attitude/eMPL/inv_mpu.c ****     unsigned char prgm_start_h;
 202:task/attitude/eMPL/inv_mpu.c **** #if defined AK89xx_SECONDARY
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 5


 203:task/attitude/eMPL/inv_mpu.c ****     unsigned char s0_addr;
 204:task/attitude/eMPL/inv_mpu.c ****     unsigned char s0_reg;
 205:task/attitude/eMPL/inv_mpu.c ****     unsigned char s0_ctrl;
 206:task/attitude/eMPL/inv_mpu.c ****     unsigned char s1_addr;
 207:task/attitude/eMPL/inv_mpu.c ****     unsigned char s1_reg;
 208:task/attitude/eMPL/inv_mpu.c ****     unsigned char s1_ctrl;
 209:task/attitude/eMPL/inv_mpu.c ****     unsigned char s4_ctrl;
 210:task/attitude/eMPL/inv_mpu.c ****     unsigned char s0_do;
 211:task/attitude/eMPL/inv_mpu.c ****     unsigned char s1_do;
 212:task/attitude/eMPL/inv_mpu.c ****     unsigned char i2c_delay_ctrl;
 213:task/attitude/eMPL/inv_mpu.c ****     unsigned char raw_compass;
 214:task/attitude/eMPL/inv_mpu.c ****     /* The I2C_MST_VDDIO bit is in this register. */
 215:task/attitude/eMPL/inv_mpu.c ****     unsigned char yg_offs_tc;
 216:task/attitude/eMPL/inv_mpu.c **** #endif
 217:task/attitude/eMPL/inv_mpu.c **** };
 218:task/attitude/eMPL/inv_mpu.c **** 
 219:task/attitude/eMPL/inv_mpu.c **** /* Information specific to a particular device. */
 220:task/attitude/eMPL/inv_mpu.c **** struct hw_s
 221:task/attitude/eMPL/inv_mpu.c **** {
 222:task/attitude/eMPL/inv_mpu.c ****     unsigned char addr;
 223:task/attitude/eMPL/inv_mpu.c ****     unsigned short max_fifo;
 224:task/attitude/eMPL/inv_mpu.c ****     unsigned char num_reg;
 225:task/attitude/eMPL/inv_mpu.c ****     unsigned short temp_sens;
 226:task/attitude/eMPL/inv_mpu.c ****     short temp_offset;
 227:task/attitude/eMPL/inv_mpu.c ****     unsigned short bank_size;
 228:task/attitude/eMPL/inv_mpu.c **** #if defined AK89xx_SECONDARY
 229:task/attitude/eMPL/inv_mpu.c ****     unsigned short compass_fsr;
 230:task/attitude/eMPL/inv_mpu.c **** #endif
 231:task/attitude/eMPL/inv_mpu.c **** };
 232:task/attitude/eMPL/inv_mpu.c **** 
 233:task/attitude/eMPL/inv_mpu.c **** /* When entering motion interrupt mode, the driver keeps track of the
 234:task/attitude/eMPL/inv_mpu.c ****  * previous state so that it can be restored at a later time.
 235:task/attitude/eMPL/inv_mpu.c ****  * TODO: This is tacky. Fix it.
 236:task/attitude/eMPL/inv_mpu.c ****  */
 237:task/attitude/eMPL/inv_mpu.c **** struct motion_int_cache_s
 238:task/attitude/eMPL/inv_mpu.c **** {
 239:task/attitude/eMPL/inv_mpu.c ****     unsigned short gyro_fsr;
 240:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_fsr;
 241:task/attitude/eMPL/inv_mpu.c ****     unsigned short lpf;
 242:task/attitude/eMPL/inv_mpu.c ****     unsigned short sample_rate;
 243:task/attitude/eMPL/inv_mpu.c ****     unsigned char sensors_on;
 244:task/attitude/eMPL/inv_mpu.c ****     unsigned char fifo_sensors;
 245:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_on;
 246:task/attitude/eMPL/inv_mpu.c **** };
 247:task/attitude/eMPL/inv_mpu.c **** 
 248:task/attitude/eMPL/inv_mpu.c **** /* Cached chip configuration data.
 249:task/attitude/eMPL/inv_mpu.c ****  * TODO: A lot of these can be handled with a bitmask.
 250:task/attitude/eMPL/inv_mpu.c ****  */
 251:task/attitude/eMPL/inv_mpu.c **** struct chip_cfg_s
 252:task/attitude/eMPL/inv_mpu.c **** {
 253:task/attitude/eMPL/inv_mpu.c ****     /* Matches gyro_cfg >> 3 & 0x03 */
 254:task/attitude/eMPL/inv_mpu.c ****     unsigned char gyro_fsr;
 255:task/attitude/eMPL/inv_mpu.c ****     /* Matches accel_cfg >> 3 & 0x03 */
 256:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_fsr;
 257:task/attitude/eMPL/inv_mpu.c ****     /* Enabled sensors. Uses same masks as fifo_en, NOT pwr_mgmt_2. */
 258:task/attitude/eMPL/inv_mpu.c ****     unsigned char sensors;
 259:task/attitude/eMPL/inv_mpu.c ****     /* Matches config register. */
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 6


 260:task/attitude/eMPL/inv_mpu.c ****     unsigned char lpf;
 261:task/attitude/eMPL/inv_mpu.c ****     unsigned char clk_src;
 262:task/attitude/eMPL/inv_mpu.c ****     /* Sample rate, NOT rate divider. */
 263:task/attitude/eMPL/inv_mpu.c ****     unsigned short sample_rate;
 264:task/attitude/eMPL/inv_mpu.c ****     /* Matches fifo_en register. */
 265:task/attitude/eMPL/inv_mpu.c ****     unsigned char fifo_enable;
 266:task/attitude/eMPL/inv_mpu.c ****     /* Matches int enable register. */
 267:task/attitude/eMPL/inv_mpu.c ****     unsigned char int_enable;
 268:task/attitude/eMPL/inv_mpu.c ****     /* 1 if devices on auxiliary I2C bus appear on the primary. */
 269:task/attitude/eMPL/inv_mpu.c ****     unsigned char bypass_mode;
 270:task/attitude/eMPL/inv_mpu.c ****     /* 1 if half-sensitivity.
 271:task/attitude/eMPL/inv_mpu.c ****      * NOTE: This doesn't belong here, but everything else in hw_s is const,
 272:task/attitude/eMPL/inv_mpu.c ****      * and this allows us to save some precious RAM.
 273:task/attitude/eMPL/inv_mpu.c ****      */
 274:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_half;
 275:task/attitude/eMPL/inv_mpu.c ****     /* 1 if device in low-power accel-only mode. */
 276:task/attitude/eMPL/inv_mpu.c ****     unsigned char lp_accel_mode;
 277:task/attitude/eMPL/inv_mpu.c ****     /* 1 if interrupts are only triggered on motion events. */
 278:task/attitude/eMPL/inv_mpu.c ****     unsigned char int_motion_only;
 279:task/attitude/eMPL/inv_mpu.c ****     struct motion_int_cache_s cache;
 280:task/attitude/eMPL/inv_mpu.c ****     /* 1 for active low interrupts. */
 281:task/attitude/eMPL/inv_mpu.c ****     unsigned char active_low_int;
 282:task/attitude/eMPL/inv_mpu.c ****     /* 1 for latched interrupts. */
 283:task/attitude/eMPL/inv_mpu.c ****     unsigned char latched_int;
 284:task/attitude/eMPL/inv_mpu.c ****     /* 1 if DMP is enabled. */
 285:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_on;
 286:task/attitude/eMPL/inv_mpu.c ****     /* Ensures that DMP will only be loaded once. */
 287:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_loaded;
 288:task/attitude/eMPL/inv_mpu.c ****     /* Sampling rate used when DMP is enabled. */
 289:task/attitude/eMPL/inv_mpu.c ****     unsigned short dmp_sample_rate;
 290:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 291:task/attitude/eMPL/inv_mpu.c ****     /* Compass sample rate. */
 292:task/attitude/eMPL/inv_mpu.c ****     unsigned short compass_sample_rate;
 293:task/attitude/eMPL/inv_mpu.c ****     unsigned char compass_addr;
 294:task/attitude/eMPL/inv_mpu.c ****     short mag_sens_adj[3];
 295:task/attitude/eMPL/inv_mpu.c **** #endif
 296:task/attitude/eMPL/inv_mpu.c **** };
 297:task/attitude/eMPL/inv_mpu.c **** 
 298:task/attitude/eMPL/inv_mpu.c **** /* Information for self-test. */
 299:task/attitude/eMPL/inv_mpu.c **** struct test_s
 300:task/attitude/eMPL/inv_mpu.c **** {
 301:task/attitude/eMPL/inv_mpu.c ****     unsigned long gyro_sens;
 302:task/attitude/eMPL/inv_mpu.c ****     unsigned long accel_sens;
 303:task/attitude/eMPL/inv_mpu.c ****     unsigned char reg_rate_div;
 304:task/attitude/eMPL/inv_mpu.c ****     unsigned char reg_lpf;
 305:task/attitude/eMPL/inv_mpu.c ****     unsigned char reg_gyro_fsr;
 306:task/attitude/eMPL/inv_mpu.c ****     unsigned char reg_accel_fsr;
 307:task/attitude/eMPL/inv_mpu.c ****     unsigned short wait_ms;
 308:task/attitude/eMPL/inv_mpu.c ****     unsigned char packet_thresh;
 309:task/attitude/eMPL/inv_mpu.c ****     float min_dps;
 310:task/attitude/eMPL/inv_mpu.c ****     float max_dps;
 311:task/attitude/eMPL/inv_mpu.c ****     float max_gyro_var;
 312:task/attitude/eMPL/inv_mpu.c ****     float min_g;
 313:task/attitude/eMPL/inv_mpu.c ****     float max_g;
 314:task/attitude/eMPL/inv_mpu.c ****     float max_accel_var;
 315:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6500
 316:task/attitude/eMPL/inv_mpu.c ****     float max_g_offset;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 7


 317:task/attitude/eMPL/inv_mpu.c ****     unsigned short sample_wait_ms;
 318:task/attitude/eMPL/inv_mpu.c **** #endif
 319:task/attitude/eMPL/inv_mpu.c **** };
 320:task/attitude/eMPL/inv_mpu.c **** 
 321:task/attitude/eMPL/inv_mpu.c **** /* Gyro driver state variables. */
 322:task/attitude/eMPL/inv_mpu.c **** struct gyro_state_s
 323:task/attitude/eMPL/inv_mpu.c **** {
 324:task/attitude/eMPL/inv_mpu.c ****     const struct gyro_reg_s *reg;
 325:task/attitude/eMPL/inv_mpu.c ****     const struct hw_s *hw;
 326:task/attitude/eMPL/inv_mpu.c ****     struct chip_cfg_s chip_cfg;
 327:task/attitude/eMPL/inv_mpu.c ****     const struct test_s *test;
 328:task/attitude/eMPL/inv_mpu.c **** };
 329:task/attitude/eMPL/inv_mpu.c **** 
 330:task/attitude/eMPL/inv_mpu.c **** /* Filter configurations. */
 331:task/attitude/eMPL/inv_mpu.c **** enum lpf_e
 332:task/attitude/eMPL/inv_mpu.c **** {
 333:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_256HZ_NOLPF2 = 0,
 334:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_188HZ,
 335:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_98HZ,
 336:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_42HZ,
 337:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_20HZ,
 338:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_10HZ,
 339:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_5HZ,
 340:task/attitude/eMPL/inv_mpu.c ****     INV_FILTER_2100HZ_NOLPF,
 341:task/attitude/eMPL/inv_mpu.c ****     NUM_FILTER
 342:task/attitude/eMPL/inv_mpu.c **** };
 343:task/attitude/eMPL/inv_mpu.c **** 
 344:task/attitude/eMPL/inv_mpu.c **** /* Full scale ranges. */
 345:task/attitude/eMPL/inv_mpu.c **** enum gyro_fsr_e
 346:task/attitude/eMPL/inv_mpu.c **** {
 347:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_250DPS = 0,
 348:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_500DPS,
 349:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_1000DPS,
 350:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_2000DPS,
 351:task/attitude/eMPL/inv_mpu.c ****     NUM_GYRO_FSR
 352:task/attitude/eMPL/inv_mpu.c **** };
 353:task/attitude/eMPL/inv_mpu.c **** 
 354:task/attitude/eMPL/inv_mpu.c **** /* Full scale ranges. */
 355:task/attitude/eMPL/inv_mpu.c **** enum accel_fsr_e
 356:task/attitude/eMPL/inv_mpu.c **** {
 357:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_2G = 0,
 358:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_4G,
 359:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_8G,
 360:task/attitude/eMPL/inv_mpu.c ****     INV_FSR_16G,
 361:task/attitude/eMPL/inv_mpu.c ****     NUM_ACCEL_FSR
 362:task/attitude/eMPL/inv_mpu.c **** };
 363:task/attitude/eMPL/inv_mpu.c **** 
 364:task/attitude/eMPL/inv_mpu.c **** /* Clock sources. */
 365:task/attitude/eMPL/inv_mpu.c **** enum clock_sel_e
 366:task/attitude/eMPL/inv_mpu.c **** {
 367:task/attitude/eMPL/inv_mpu.c ****     INV_CLK_INTERNAL = 0,
 368:task/attitude/eMPL/inv_mpu.c ****     INV_CLK_PLL,
 369:task/attitude/eMPL/inv_mpu.c ****     NUM_CLK
 370:task/attitude/eMPL/inv_mpu.c **** };
 371:task/attitude/eMPL/inv_mpu.c **** 
 372:task/attitude/eMPL/inv_mpu.c **** /* Low-power accel wakeup rates. */
 373:task/attitude/eMPL/inv_mpu.c **** enum lp_accel_rate_e
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 8


 374:task/attitude/eMPL/inv_mpu.c **** {
 375:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6050
 376:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_1_25HZ,
 377:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_5HZ,
 378:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_20HZ,
 379:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_40HZ
 380:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU6500
 381:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_0_3125HZ,
 382:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_0_625HZ,
 383:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_1_25HZ,
 384:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_2_5HZ,
 385:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_5HZ,
 386:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_10HZ,
 387:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_20HZ,
 388:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_40HZ,
 389:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_80HZ,
 390:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_160HZ,
 391:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_320HZ,
 392:task/attitude/eMPL/inv_mpu.c ****     INV_LPA_640HZ
 393:task/attitude/eMPL/inv_mpu.c **** #endif
 394:task/attitude/eMPL/inv_mpu.c **** };
 395:task/attitude/eMPL/inv_mpu.c **** 
 396:task/attitude/eMPL/inv_mpu.c **** #define BIT_I2C_MST_VDDIO (0x80)
 397:task/attitude/eMPL/inv_mpu.c **** #define BIT_FIFO_EN (0x40)
 398:task/attitude/eMPL/inv_mpu.c **** #define BIT_DMP_EN (0x80)
 399:task/attitude/eMPL/inv_mpu.c **** #define BIT_FIFO_RST (0x04)
 400:task/attitude/eMPL/inv_mpu.c **** #define BIT_DMP_RST (0x08)
 401:task/attitude/eMPL/inv_mpu.c **** #define BIT_FIFO_OVERFLOW (0x10)
 402:task/attitude/eMPL/inv_mpu.c **** #define BIT_DATA_RDY_EN (0x01)
 403:task/attitude/eMPL/inv_mpu.c **** #define BIT_DMP_INT_EN (0x02)
 404:task/attitude/eMPL/inv_mpu.c **** #define BIT_MOT_INT_EN (0x40)
 405:task/attitude/eMPL/inv_mpu.c **** #define BITS_FSR (0x18)
 406:task/attitude/eMPL/inv_mpu.c **** #define BITS_LPF (0x07)
 407:task/attitude/eMPL/inv_mpu.c **** #define BITS_HPF (0x07)
 408:task/attitude/eMPL/inv_mpu.c **** #define BITS_CLK (0x07)
 409:task/attitude/eMPL/inv_mpu.c **** #define BIT_FIFO_SIZE_1024 (0x40)
 410:task/attitude/eMPL/inv_mpu.c **** #define BIT_FIFO_SIZE_2048 (0x80)
 411:task/attitude/eMPL/inv_mpu.c **** #define BIT_FIFO_SIZE_4096 (0xC0)
 412:task/attitude/eMPL/inv_mpu.c **** #define BIT_RESET (0x80)
 413:task/attitude/eMPL/inv_mpu.c **** #define BIT_SLEEP (0x40)
 414:task/attitude/eMPL/inv_mpu.c **** #define BIT_S0_DELAY_EN (0x01)
 415:task/attitude/eMPL/inv_mpu.c **** #define BIT_S2_DELAY_EN (0x04)
 416:task/attitude/eMPL/inv_mpu.c **** #define BITS_SLAVE_LENGTH (0x0F)
 417:task/attitude/eMPL/inv_mpu.c **** #define BIT_SLAVE_BYTE_SW (0x40)
 418:task/attitude/eMPL/inv_mpu.c **** #define BIT_SLAVE_GROUP (0x10)
 419:task/attitude/eMPL/inv_mpu.c **** #define BIT_SLAVE_EN (0x80)
 420:task/attitude/eMPL/inv_mpu.c **** #define BIT_I2C_READ (0x80)
 421:task/attitude/eMPL/inv_mpu.c **** #define BITS_I2C_MASTER_DLY (0x1F)
 422:task/attitude/eMPL/inv_mpu.c **** #define BIT_AUX_IF_EN (0x20)
 423:task/attitude/eMPL/inv_mpu.c **** #define BIT_ACTL (0x80)
 424:task/attitude/eMPL/inv_mpu.c **** #define BIT_LATCH_EN (0x20)
 425:task/attitude/eMPL/inv_mpu.c **** #define BIT_ANY_RD_CLR (0x10)
 426:task/attitude/eMPL/inv_mpu.c **** #define BIT_BYPASS_EN (0x02)
 427:task/attitude/eMPL/inv_mpu.c **** #define BITS_WOM_EN (0xC0)
 428:task/attitude/eMPL/inv_mpu.c **** #define BIT_LPA_CYCLE (0x20)
 429:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_XA (0x20)
 430:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_YA (0x10)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 9


 431:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_ZA (0x08)
 432:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_XG (0x04)
 433:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_YG (0x02)
 434:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_ZG (0x01)
 435:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_XYZA (BIT_STBY_XA | BIT_STBY_YA | BIT_STBY_ZA)
 436:task/attitude/eMPL/inv_mpu.c **** #define BIT_STBY_XYZG (BIT_STBY_XG | BIT_STBY_YG | BIT_STBY_ZG)
 437:task/attitude/eMPL/inv_mpu.c **** 
 438:task/attitude/eMPL/inv_mpu.c **** #if defined AK8975_SECONDARY
 439:task/attitude/eMPL/inv_mpu.c **** #define SUPPORTS_AK89xx_HIGH_SENS (0x00)
 440:task/attitude/eMPL/inv_mpu.c **** #define AK89xx_FSR (9830)
 441:task/attitude/eMPL/inv_mpu.c **** #elif defined AK8963_SECONDARY
 442:task/attitude/eMPL/inv_mpu.c **** #define SUPPORTS_AK89xx_HIGH_SENS (0x10)
 443:task/attitude/eMPL/inv_mpu.c **** #define AK89xx_FSR (4915)
 444:task/attitude/eMPL/inv_mpu.c **** #endif
 445:task/attitude/eMPL/inv_mpu.c **** 
 446:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 447:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_WHOAMI (0x00)
 448:task/attitude/eMPL/inv_mpu.c **** 
 449:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_ST1 (0x02)
 450:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_HXL (0x03)
 451:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_ST2 (0x09)
 452:task/attitude/eMPL/inv_mpu.c **** 
 453:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_CNTL (0x0A)
 454:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_ASTC (0x0C)
 455:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_ASAX (0x10)
 456:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_ASAY (0x11)
 457:task/attitude/eMPL/inv_mpu.c **** #define AKM_REG_ASAZ (0x12)
 458:task/attitude/eMPL/inv_mpu.c **** 
 459:task/attitude/eMPL/inv_mpu.c **** #define AKM_DATA_READY (0x01)
 460:task/attitude/eMPL/inv_mpu.c **** #define AKM_DATA_OVERRUN (0x02)
 461:task/attitude/eMPL/inv_mpu.c **** #define AKM_OVERFLOW (0x80)
 462:task/attitude/eMPL/inv_mpu.c **** #define AKM_DATA_ERROR (0x40)
 463:task/attitude/eMPL/inv_mpu.c **** 
 464:task/attitude/eMPL/inv_mpu.c **** #define AKM_BIT_SELF_TEST (0x40)
 465:task/attitude/eMPL/inv_mpu.c **** 
 466:task/attitude/eMPL/inv_mpu.c **** #define AKM_POWER_DOWN (0x00 | SUPPORTS_AK89xx_HIGH_SENS)
 467:task/attitude/eMPL/inv_mpu.c **** #define AKM_SINGLE_MEASUREMENT (0x01 | SUPPORTS_AK89xx_HIGH_SENS)
 468:task/attitude/eMPL/inv_mpu.c **** #define AKM_FUSE_ROM_ACCESS (0x0F | SUPPORTS_AK89xx_HIGH_SENS)
 469:task/attitude/eMPL/inv_mpu.c **** #define AKM_MODE_SELF_TEST (0x08 | SUPPORTS_AK89xx_HIGH_SENS)
 470:task/attitude/eMPL/inv_mpu.c **** 
 471:task/attitude/eMPL/inv_mpu.c **** #define AKM_WHOAMI (0x48)
 472:task/attitude/eMPL/inv_mpu.c **** #endif
 473:task/attitude/eMPL/inv_mpu.c **** 
 474:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6050
 475:task/attitude/eMPL/inv_mpu.c **** const struct gyro_reg_s reg = {
 476:task/attitude/eMPL/inv_mpu.c ****     .who_am_i = 0x75,
 477:task/attitude/eMPL/inv_mpu.c ****     .rate_div = 0x19,
 478:task/attitude/eMPL/inv_mpu.c ****     .lpf = 0x1A,
 479:task/attitude/eMPL/inv_mpu.c ****     .prod_id = 0x0C,
 480:task/attitude/eMPL/inv_mpu.c ****     .user_ctrl = 0x6A,
 481:task/attitude/eMPL/inv_mpu.c ****     .fifo_en = 0x23,
 482:task/attitude/eMPL/inv_mpu.c ****     .gyro_cfg = 0x1B,
 483:task/attitude/eMPL/inv_mpu.c ****     .accel_cfg = 0x1C,
 484:task/attitude/eMPL/inv_mpu.c ****     .motion_thr = 0x1F,
 485:task/attitude/eMPL/inv_mpu.c ****     .motion_dur = 0x20,
 486:task/attitude/eMPL/inv_mpu.c ****     .fifo_count_h = 0x72,
 487:task/attitude/eMPL/inv_mpu.c ****     .fifo_r_w = 0x74,
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 10


 488:task/attitude/eMPL/inv_mpu.c ****     .raw_gyro = 0x43,
 489:task/attitude/eMPL/inv_mpu.c ****     .raw_accel = 0x3B,
 490:task/attitude/eMPL/inv_mpu.c ****     .temp = 0x41,
 491:task/attitude/eMPL/inv_mpu.c ****     .int_enable = 0x38,
 492:task/attitude/eMPL/inv_mpu.c ****     .dmp_int_status = 0x39,
 493:task/attitude/eMPL/inv_mpu.c ****     .int_status = 0x3A,
 494:task/attitude/eMPL/inv_mpu.c ****     .pwr_mgmt_1 = 0x6B,
 495:task/attitude/eMPL/inv_mpu.c ****     .pwr_mgmt_2 = 0x6C,
 496:task/attitude/eMPL/inv_mpu.c ****     .int_pin_cfg = 0x37,
 497:task/attitude/eMPL/inv_mpu.c ****     .mem_r_w = 0x6F,
 498:task/attitude/eMPL/inv_mpu.c ****     .accel_offs = 0x06,
 499:task/attitude/eMPL/inv_mpu.c ****     .i2c_mst = 0x24,
 500:task/attitude/eMPL/inv_mpu.c ****     .bank_sel = 0x6D,
 501:task/attitude/eMPL/inv_mpu.c ****     .mem_start_addr = 0x6E,
 502:task/attitude/eMPL/inv_mpu.c ****     .prgm_start_h = 0x70
 503:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 504:task/attitude/eMPL/inv_mpu.c ****     ,
 505:task/attitude/eMPL/inv_mpu.c ****     .raw_compass = 0x49,
 506:task/attitude/eMPL/inv_mpu.c ****     .yg_offs_tc = 0x01,
 507:task/attitude/eMPL/inv_mpu.c ****     .s0_addr = 0x25,
 508:task/attitude/eMPL/inv_mpu.c ****     .s0_reg = 0x26,
 509:task/attitude/eMPL/inv_mpu.c ****     .s0_ctrl = 0x27,
 510:task/attitude/eMPL/inv_mpu.c ****     .s1_addr = 0x28,
 511:task/attitude/eMPL/inv_mpu.c ****     .s1_reg = 0x29,
 512:task/attitude/eMPL/inv_mpu.c ****     .s1_ctrl = 0x2A,
 513:task/attitude/eMPL/inv_mpu.c ****     .s4_ctrl = 0x34,
 514:task/attitude/eMPL/inv_mpu.c ****     .s0_do = 0x63,
 515:task/attitude/eMPL/inv_mpu.c ****     .s1_do = 0x64,
 516:task/attitude/eMPL/inv_mpu.c ****     .i2c_delay_ctrl = 0x67
 517:task/attitude/eMPL/inv_mpu.c **** #endif
 518:task/attitude/eMPL/inv_mpu.c **** };
 519:task/attitude/eMPL/inv_mpu.c **** const struct hw_s hw = {
 520:task/attitude/eMPL/inv_mpu.c ****     .addr = 0x68,
 521:task/attitude/eMPL/inv_mpu.c ****     .max_fifo = 1024,
 522:task/attitude/eMPL/inv_mpu.c ****     .num_reg = 118,
 523:task/attitude/eMPL/inv_mpu.c ****     .temp_sens = 340,
 524:task/attitude/eMPL/inv_mpu.c ****     .temp_offset = -521,
 525:task/attitude/eMPL/inv_mpu.c ****     .bank_size = 256
 526:task/attitude/eMPL/inv_mpu.c **** #if defined AK89xx_SECONDARY
 527:task/attitude/eMPL/inv_mpu.c ****     ,
 528:task/attitude/eMPL/inv_mpu.c ****     .compass_fsr = AK89xx_FSR
 529:task/attitude/eMPL/inv_mpu.c **** #endif
 530:task/attitude/eMPL/inv_mpu.c **** };
 531:task/attitude/eMPL/inv_mpu.c **** 
 532:task/attitude/eMPL/inv_mpu.c **** const struct test_s test = {
 533:task/attitude/eMPL/inv_mpu.c ****     .gyro_sens = 32768 / 250,
 534:task/attitude/eMPL/inv_mpu.c ****     .accel_sens = 32768 / 16,
 535:task/attitude/eMPL/inv_mpu.c ****     .reg_rate_div = 0,     /* 1kHz. */
 536:task/attitude/eMPL/inv_mpu.c ****     .reg_lpf = 1,          /* 188Hz. */
 537:task/attitude/eMPL/inv_mpu.c ****     .reg_gyro_fsr = 0,     /* 250dps. */
 538:task/attitude/eMPL/inv_mpu.c ****     .reg_accel_fsr = 0x18, /* 16g. */
 539:task/attitude/eMPL/inv_mpu.c ****     .wait_ms = 50,
 540:task/attitude/eMPL/inv_mpu.c ****     .packet_thresh = 5, /* 5% */
 541:task/attitude/eMPL/inv_mpu.c ****     .min_dps = 10.f,
 542:task/attitude/eMPL/inv_mpu.c ****     .max_dps = 105.f,
 543:task/attitude/eMPL/inv_mpu.c ****     .max_gyro_var = 0.14f,
 544:task/attitude/eMPL/inv_mpu.c ****     .min_g = 0.3f,
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 11


 545:task/attitude/eMPL/inv_mpu.c ****     .max_g = 0.95f,
 546:task/attitude/eMPL/inv_mpu.c ****     .max_accel_var = 0.14f};
 547:task/attitude/eMPL/inv_mpu.c **** 
 548:task/attitude/eMPL/inv_mpu.c **** static struct gyro_state_s st = {
 549:task/attitude/eMPL/inv_mpu.c ****     .reg = &reg,
 550:task/attitude/eMPL/inv_mpu.c ****     .hw = &hw,
 551:task/attitude/eMPL/inv_mpu.c ****     .test = &test};
 552:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU6500
 553:task/attitude/eMPL/inv_mpu.c **** const struct gyro_reg_s reg = {
 554:task/attitude/eMPL/inv_mpu.c ****     .who_am_i = 0x75,
 555:task/attitude/eMPL/inv_mpu.c ****     .rate_div = 0x19,
 556:task/attitude/eMPL/inv_mpu.c ****     .lpf = 0x1A,
 557:task/attitude/eMPL/inv_mpu.c ****     .prod_id = 0x0C,
 558:task/attitude/eMPL/inv_mpu.c ****     .user_ctrl = 0x6A,
 559:task/attitude/eMPL/inv_mpu.c ****     .fifo_en = 0x23,
 560:task/attitude/eMPL/inv_mpu.c ****     .gyro_cfg = 0x1B,
 561:task/attitude/eMPL/inv_mpu.c ****     .accel_cfg = 0x1C,
 562:task/attitude/eMPL/inv_mpu.c ****     .accel_cfg2 = 0x1D,
 563:task/attitude/eMPL/inv_mpu.c ****     .lp_accel_odr = 0x1E,
 564:task/attitude/eMPL/inv_mpu.c ****     .motion_thr = 0x1F,
 565:task/attitude/eMPL/inv_mpu.c ****     .motion_dur = 0x20,
 566:task/attitude/eMPL/inv_mpu.c ****     .fifo_count_h = 0x72,
 567:task/attitude/eMPL/inv_mpu.c ****     .fifo_r_w = 0x74,
 568:task/attitude/eMPL/inv_mpu.c ****     .raw_gyro = 0x43,
 569:task/attitude/eMPL/inv_mpu.c ****     .raw_accel = 0x3B,
 570:task/attitude/eMPL/inv_mpu.c ****     .temp = 0x41,
 571:task/attitude/eMPL/inv_mpu.c ****     .int_enable = 0x38,
 572:task/attitude/eMPL/inv_mpu.c ****     .dmp_int_status = 0x39,
 573:task/attitude/eMPL/inv_mpu.c ****     .int_status = 0x3A,
 574:task/attitude/eMPL/inv_mpu.c ****     .accel_intel = 0x69,
 575:task/attitude/eMPL/inv_mpu.c ****     .pwr_mgmt_1 = 0x6B,
 576:task/attitude/eMPL/inv_mpu.c ****     .pwr_mgmt_2 = 0x6C,
 577:task/attitude/eMPL/inv_mpu.c ****     .int_pin_cfg = 0x37,
 578:task/attitude/eMPL/inv_mpu.c ****     .mem_r_w = 0x6F,
 579:task/attitude/eMPL/inv_mpu.c ****     .accel_offs = 0x77,
 580:task/attitude/eMPL/inv_mpu.c ****     .i2c_mst = 0x24,
 581:task/attitude/eMPL/inv_mpu.c ****     .bank_sel = 0x6D,
 582:task/attitude/eMPL/inv_mpu.c ****     .mem_start_addr = 0x6E,
 583:task/attitude/eMPL/inv_mpu.c ****     .prgm_start_h = 0x70
 584:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 585:task/attitude/eMPL/inv_mpu.c ****     ,
 586:task/attitude/eMPL/inv_mpu.c ****     .raw_compass = 0x49,
 587:task/attitude/eMPL/inv_mpu.c ****     .s0_addr = 0x25,
 588:task/attitude/eMPL/inv_mpu.c ****     .s0_reg = 0x26,
 589:task/attitude/eMPL/inv_mpu.c ****     .s0_ctrl = 0x27,
 590:task/attitude/eMPL/inv_mpu.c ****     .s1_addr = 0x28,
 591:task/attitude/eMPL/inv_mpu.c ****     .s1_reg = 0x29,
 592:task/attitude/eMPL/inv_mpu.c ****     .s1_ctrl = 0x2A,
 593:task/attitude/eMPL/inv_mpu.c ****     .s4_ctrl = 0x34,
 594:task/attitude/eMPL/inv_mpu.c ****     .s0_do = 0x63,
 595:task/attitude/eMPL/inv_mpu.c ****     .s1_do = 0x64,
 596:task/attitude/eMPL/inv_mpu.c ****     .i2c_delay_ctrl = 0x67
 597:task/attitude/eMPL/inv_mpu.c **** #endif
 598:task/attitude/eMPL/inv_mpu.c **** };
 599:task/attitude/eMPL/inv_mpu.c **** const struct hw_s hw = {
 600:task/attitude/eMPL/inv_mpu.c ****     .addr = 0x68,
 601:task/attitude/eMPL/inv_mpu.c ****     .max_fifo = 1024,
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 12


 602:task/attitude/eMPL/inv_mpu.c ****     .num_reg = 128,
 603:task/attitude/eMPL/inv_mpu.c ****     .temp_sens = 321,
 604:task/attitude/eMPL/inv_mpu.c ****     .temp_offset = 0,
 605:task/attitude/eMPL/inv_mpu.c ****     .bank_size = 256
 606:task/attitude/eMPL/inv_mpu.c **** #if defined AK89xx_SECONDARY
 607:task/attitude/eMPL/inv_mpu.c ****     ,
 608:task/attitude/eMPL/inv_mpu.c ****     .compass_fsr = AK89xx_FSR
 609:task/attitude/eMPL/inv_mpu.c **** #endif
 610:task/attitude/eMPL/inv_mpu.c **** };
 611:task/attitude/eMPL/inv_mpu.c **** 
 612:task/attitude/eMPL/inv_mpu.c **** const struct test_s test = {
 613:task/attitude/eMPL/inv_mpu.c ****     .gyro_sens = 32768 / 250,
 614:task/attitude/eMPL/inv_mpu.c ****     .accel_sens = 32768 / 2, //FSR = +-2G = 16384 LSB/G
 615:task/attitude/eMPL/inv_mpu.c ****     .reg_rate_div = 0,       /* 1kHz. */
 616:task/attitude/eMPL/inv_mpu.c ****     .reg_lpf = 2,            /* 92Hz low pass filter*/
 617:task/attitude/eMPL/inv_mpu.c ****     .reg_gyro_fsr = 0,       /* 250dps. */
 618:task/attitude/eMPL/inv_mpu.c ****     .reg_accel_fsr = 0x0,    /* Accel FSR setting = 2g. */
 619:task/attitude/eMPL/inv_mpu.c ****     .wait_ms = 200,          //200ms stabilization time
 620:task/attitude/eMPL/inv_mpu.c ****     .packet_thresh = 200,    /* 200 samples */
 621:task/attitude/eMPL/inv_mpu.c ****     .min_dps = 20.f,         //20 dps for Gyro Criteria C
 622:task/attitude/eMPL/inv_mpu.c ****     .max_dps = 60.f,         //Must exceed 60 dps threshold for Gyro Criteria B
 623:task/attitude/eMPL/inv_mpu.c ****     .max_gyro_var = .5f,     //Must exceed +50% variation for Gyro Criteria A
 624:task/attitude/eMPL/inv_mpu.c ****     .min_g = .225f,          //Accel must exceed Min 225 mg for Criteria B
 625:task/attitude/eMPL/inv_mpu.c ****     .max_g = .675f,          //Accel cannot exceed Max 675 mg for Criteria B
 626:task/attitude/eMPL/inv_mpu.c ****     .max_accel_var = .5f,    //Accel must be within 50% variation for Criteria A
 627:task/attitude/eMPL/inv_mpu.c ****     .max_g_offset = .5f,     //500 mg for Accel Criteria C
 628:task/attitude/eMPL/inv_mpu.c ****     .sample_wait_ms = 10     //10ms sample time wait
 629:task/attitude/eMPL/inv_mpu.c **** };
 630:task/attitude/eMPL/inv_mpu.c **** 
 631:task/attitude/eMPL/inv_mpu.c **** static struct gyro_state_s st = {
 632:task/attitude/eMPL/inv_mpu.c ****     .reg = &reg,
 633:task/attitude/eMPL/inv_mpu.c ****     .hw = &hw,
 634:task/attitude/eMPL/inv_mpu.c ****     .test = &test};
 635:task/attitude/eMPL/inv_mpu.c **** #endif
 636:task/attitude/eMPL/inv_mpu.c **** 
 637:task/attitude/eMPL/inv_mpu.c **** #define MAX_PACKET_LENGTH (12)
 638:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6500
 639:task/attitude/eMPL/inv_mpu.c **** #define HWST_MAX_PACKET_LENGTH (512)
 640:task/attitude/eMPL/inv_mpu.c **** #endif
 641:task/attitude/eMPL/inv_mpu.c **** 
 642:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 643:task/attitude/eMPL/inv_mpu.c **** static int setup_compass(void);
 644:task/attitude/eMPL/inv_mpu.c **** #define MAX_COMPASS_SAMPLE_RATE (100)
 645:task/attitude/eMPL/inv_mpu.c **** #endif
 646:task/attitude/eMPL/inv_mpu.c **** 
 647:task/attitude/eMPL/inv_mpu.c **** /**
 648:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Enable/disable data ready interrupt.
 649:task/attitude/eMPL/inv_mpu.c ****  *  If the DMP is on, the DMP interrupt is enabled. Otherwise, the data ready
 650:task/attitude/eMPL/inv_mpu.c ****  *  interrupt is used.
 651:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  enable      1 to enable interrupt.
 652:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 653:task/attitude/eMPL/inv_mpu.c ****  */
 654:task/attitude/eMPL/inv_mpu.c **** static int set_int_enable(unsigned char enable)
 655:task/attitude/eMPL/inv_mpu.c **** {
 656:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 657:task/attitude/eMPL/inv_mpu.c **** 
 658:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 13


 659:task/attitude/eMPL/inv_mpu.c ****     {
 660:task/attitude/eMPL/inv_mpu.c ****         if (enable)
 661:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_DMP_INT_EN;
 662:task/attitude/eMPL/inv_mpu.c ****         else
 663:task/attitude/eMPL/inv_mpu.c ****             tmp = 0x00;
 664:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 665:task/attitude/eMPL/inv_mpu.c ****             return -1;
 666:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.int_enable = tmp;
 667:task/attitude/eMPL/inv_mpu.c ****     }
 668:task/attitude/eMPL/inv_mpu.c ****     else
 669:task/attitude/eMPL/inv_mpu.c ****     {
 670:task/attitude/eMPL/inv_mpu.c ****         if (!st.chip_cfg.sensors)
 671:task/attitude/eMPL/inv_mpu.c ****             return -1;
 672:task/attitude/eMPL/inv_mpu.c ****         if (enable && st.chip_cfg.int_enable)
 673:task/attitude/eMPL/inv_mpu.c ****             return 0;
 674:task/attitude/eMPL/inv_mpu.c ****         if (enable)
 675:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_DATA_RDY_EN;
 676:task/attitude/eMPL/inv_mpu.c ****         else
 677:task/attitude/eMPL/inv_mpu.c ****             tmp = 0x00;
 678:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 679:task/attitude/eMPL/inv_mpu.c ****             return -1;
 680:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.int_enable = tmp;
 681:task/attitude/eMPL/inv_mpu.c ****     }
 682:task/attitude/eMPL/inv_mpu.c ****     return 0;
 683:task/attitude/eMPL/inv_mpu.c **** }
 684:task/attitude/eMPL/inv_mpu.c **** 
 685:task/attitude/eMPL/inv_mpu.c **** /**
 686:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Register dump for testing.
 687:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 688:task/attitude/eMPL/inv_mpu.c ****  */
 689:task/attitude/eMPL/inv_mpu.c **** int mpu_reg_dump(void)
 690:task/attitude/eMPL/inv_mpu.c **** {
 691:task/attitude/eMPL/inv_mpu.c ****     unsigned char ii;
 692:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 693:task/attitude/eMPL/inv_mpu.c **** 
 694:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < st.hw->num_reg; ii++)
 695:task/attitude/eMPL/inv_mpu.c ****     {
 696:task/attitude/eMPL/inv_mpu.c ****         if (ii == st.reg->fifo_r_w || ii == st.reg->mem_r_w)
 697:task/attitude/eMPL/inv_mpu.c ****             continue;
 698:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, ii, 1, &data))
 699:task/attitude/eMPL/inv_mpu.c ****             return -1;
 700:task/attitude/eMPL/inv_mpu.c ****         log_i("%#5x: %#5x\r\n", ii, data);
 701:task/attitude/eMPL/inv_mpu.c ****     }
 702:task/attitude/eMPL/inv_mpu.c ****     return 0;
 703:task/attitude/eMPL/inv_mpu.c **** }
 704:task/attitude/eMPL/inv_mpu.c **** 
 705:task/attitude/eMPL/inv_mpu.c **** /**
 706:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read from a single register.
 707:task/attitude/eMPL/inv_mpu.c ****  *  NOTE: The memory and FIFO read/write registers cannot be accessed.
 708:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  reg     Register address.
 709:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] data    Register data.
 710:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 711:task/attitude/eMPL/inv_mpu.c ****  */
 712:task/attitude/eMPL/inv_mpu.c **** int mpu_read_reg(unsigned char reg, unsigned char *data)
 713:task/attitude/eMPL/inv_mpu.c **** {
 714:task/attitude/eMPL/inv_mpu.c ****     if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 715:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 14


 716:task/attitude/eMPL/inv_mpu.c ****     if (reg >= st.hw->num_reg)
 717:task/attitude/eMPL/inv_mpu.c ****         return -1;
 718:task/attitude/eMPL/inv_mpu.c ****     return i2c_read(st.hw->addr, reg, 1, data);
 719:task/attitude/eMPL/inv_mpu.c **** }
 720:task/attitude/eMPL/inv_mpu.c **** 
 721:task/attitude/eMPL/inv_mpu.c **** /**
 722:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Initialize hardware.
 723:task/attitude/eMPL/inv_mpu.c ****  *  Initial configuration:\n
 724:task/attitude/eMPL/inv_mpu.c ****  *  Gyro FSR: +/- 2000DPS\n
 725:task/attitude/eMPL/inv_mpu.c ****  *  Accel FSR +/- 2G\n
 726:task/attitude/eMPL/inv_mpu.c ****  *  DLPF: 42Hz\n
 727:task/attitude/eMPL/inv_mpu.c ****  *  FIFO rate: 50Hz\n
 728:task/attitude/eMPL/inv_mpu.c ****  *  Clock source: Gyro PLL\n
 729:task/attitude/eMPL/inv_mpu.c ****  *  FIFO: Disabled.\n
 730:task/attitude/eMPL/inv_mpu.c ****  *  Data ready interrupt: Disabled, active low, unlatched.
 731:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  int_param   Platform-specific parameters to interrupt API.
 732:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 733:task/attitude/eMPL/inv_mpu.c ****  */
 734:task/attitude/eMPL/inv_mpu.c **** int mpu_init(struct int_param_s *int_param)
 735:task/attitude/eMPL/inv_mpu.c **** {
 736:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 737:task/attitude/eMPL/inv_mpu.c **** 
 738:task/attitude/eMPL/inv_mpu.c ****     /* Reset device. */
 739:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_RESET;
 740:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 741:task/attitude/eMPL/inv_mpu.c ****         return -1;
 742:task/attitude/eMPL/inv_mpu.c ****     delay_ms(100);
 743:task/attitude/eMPL/inv_mpu.c **** 
 744:task/attitude/eMPL/inv_mpu.c ****     /* Wake up chip. */
 745:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0x00;
 746:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 747:task/attitude/eMPL/inv_mpu.c ****         return -1;
 748:task/attitude/eMPL/inv_mpu.c **** 
 749:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_half = 0;
 750:task/attitude/eMPL/inv_mpu.c **** 
 751:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6500
 752:task/attitude/eMPL/inv_mpu.c ****     /* MPU6500 shares 4kB of memory between the DMP and the FIFO. Since the
 753:task/attitude/eMPL/inv_mpu.c ****      * first 3kB are needed by the DMP, we'll use the last 1kB for the FIFO.
 754:task/attitude/eMPL/inv_mpu.c ****      */
 755:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_FIFO_SIZE_1024 | 0x8;
 756:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg2, 1, data))
 757:task/attitude/eMPL/inv_mpu.c ****         return -1;
 758:task/attitude/eMPL/inv_mpu.c **** #endif
 759:task/attitude/eMPL/inv_mpu.c **** 
 760:task/attitude/eMPL/inv_mpu.c ****     /* Set to invalid values to ensure no I2C writes are skipped. */
 761:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = 0xFF;
 762:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = 0xFF;
 763:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
 764:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
 765:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
 766:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
 767:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.bypass_mode = 0xFF;
 768:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 769:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.compass_sample_rate = 0xFFFF;
 770:task/attitude/eMPL/inv_mpu.c **** #endif
 771:task/attitude/eMPL/inv_mpu.c ****     /* mpu_set_sensors always preserves this setting. */
 772:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = INV_CLK_PLL;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 15


 773:task/attitude/eMPL/inv_mpu.c ****     /* Handled in next call to mpu_set_bypass. */
 774:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.active_low_int = 1;
 775:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.latched_int = 0;
 776:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.int_motion_only = 0;
 777:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 0;
 778:task/attitude/eMPL/inv_mpu.c ****     memset(&st.chip_cfg.cache, 0, sizeof(st.chip_cfg.cache));
 779:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_on = 0;
 780:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_loaded = 0;
 781:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_sample_rate = 0;
 782:task/attitude/eMPL/inv_mpu.c **** 
 783:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_gyro_fsr(2000))
 784:task/attitude/eMPL/inv_mpu.c ****         return -1;
 785:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_accel_fsr(2))
 786:task/attitude/eMPL/inv_mpu.c ****         return -1;
 787:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_lpf(42))
 788:task/attitude/eMPL/inv_mpu.c ****         return -1;
 789:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_sample_rate(50))
 790:task/attitude/eMPL/inv_mpu.c ****         return -1;
 791:task/attitude/eMPL/inv_mpu.c ****     if (mpu_configure_fifo(0))
 792:task/attitude/eMPL/inv_mpu.c ****         return -1;
 793:task/attitude/eMPL/inv_mpu.c **** 
 794:task/attitude/eMPL/inv_mpu.c **** #ifndef EMPL_TARGET_STM32F4
 795:task/attitude/eMPL/inv_mpu.c ****     if (int_param)
 796:task/attitude/eMPL/inv_mpu.c ****         reg_int_cb(int_param);
 797:task/attitude/eMPL/inv_mpu.c **** #endif
 798:task/attitude/eMPL/inv_mpu.c **** 
 799:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 800:task/attitude/eMPL/inv_mpu.c ****     setup_compass();
 801:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_compass_sample_rate(10))
 802:task/attitude/eMPL/inv_mpu.c ****         return -1;
 803:task/attitude/eMPL/inv_mpu.c **** #else
 804:task/attitude/eMPL/inv_mpu.c ****     /* Already disabled by setup_compass. */
 805:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_bypass(0))
 806:task/attitude/eMPL/inv_mpu.c ****         return -1;
 807:task/attitude/eMPL/inv_mpu.c **** #endif
 808:task/attitude/eMPL/inv_mpu.c **** 
 809:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sensors(0);
 810:task/attitude/eMPL/inv_mpu.c ****     return 0;
 811:task/attitude/eMPL/inv_mpu.c **** }
 812:task/attitude/eMPL/inv_mpu.c **** 
 813:task/attitude/eMPL/inv_mpu.c **** /**
 814:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Enter low-power accel-only mode.
 815:task/attitude/eMPL/inv_mpu.c ****  *  In low-power accel mode, the chip goes to sleep and only wakes up to sample
 816:task/attitude/eMPL/inv_mpu.c ****  *  the accelerometer at one of the following frequencies:
 817:task/attitude/eMPL/inv_mpu.c ****  *  \n MPU6050: 1.25Hz, 5Hz, 20Hz, 40Hz
 818:task/attitude/eMPL/inv_mpu.c ****  *  \n MPU6500: 1.25Hz, 2.5Hz, 5Hz, 10Hz, 20Hz, 40Hz, 80Hz, 160Hz, 320Hz, 640Hz
 819:task/attitude/eMPL/inv_mpu.c ****  *  \n If the requested rate is not one listed above, the device will be set to
 820:task/attitude/eMPL/inv_mpu.c ****  *  the next highest rate. Requesting a rate above the maximum supported
 821:task/attitude/eMPL/inv_mpu.c ****  *  frequency will result in an error.
 822:task/attitude/eMPL/inv_mpu.c ****  *  \n To select a fractional wake-up frequency, round down the value passed to
 823:task/attitude/eMPL/inv_mpu.c ****  *  @e rate.
 824:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  rate        Minimum sampling rate, or zero to disable LP
 825:task/attitude/eMPL/inv_mpu.c ****  *                          accel mode.
 826:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 827:task/attitude/eMPL/inv_mpu.c ****  */
 828:task/attitude/eMPL/inv_mpu.c **** int mpu_lp_accel_mode(unsigned short rate)
 829:task/attitude/eMPL/inv_mpu.c **** {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 16


 830:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 831:task/attitude/eMPL/inv_mpu.c **** 
 832:task/attitude/eMPL/inv_mpu.c ****     if (rate > 40)
 833:task/attitude/eMPL/inv_mpu.c ****         return -1;
 834:task/attitude/eMPL/inv_mpu.c **** 
 835:task/attitude/eMPL/inv_mpu.c ****     if (!rate)
 836:task/attitude/eMPL/inv_mpu.c ****     {
 837:task/attitude/eMPL/inv_mpu.c ****         mpu_set_int_latched(0);
 838:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = 0;
 839:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = BIT_STBY_XYZG;
 840:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 841:task/attitude/eMPL/inv_mpu.c ****             return -1;
 842:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.lp_accel_mode = 0;
 843:task/attitude/eMPL/inv_mpu.c ****         return 0;
 844:task/attitude/eMPL/inv_mpu.c ****     }
 845:task/attitude/eMPL/inv_mpu.c ****     /* For LP accel, we automatically configure the hardware to produce latched
 846:task/attitude/eMPL/inv_mpu.c ****      * interrupts. In LP accel mode, the hardware cycles into sleep mode before
 847:task/attitude/eMPL/inv_mpu.c ****      * it gets a chance to deassert the interrupt pin; therefore, we shift this
 848:task/attitude/eMPL/inv_mpu.c ****      * responsibility over to the MCU.
 849:task/attitude/eMPL/inv_mpu.c ****      *
 850:task/attitude/eMPL/inv_mpu.c ****      * Any register read will clear the interrupt.
 851:task/attitude/eMPL/inv_mpu.c ****      */
 852:task/attitude/eMPL/inv_mpu.c ****     mpu_set_int_latched(1);
 853:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6050
 854:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = BIT_LPA_CYCLE;
 855:task/attitude/eMPL/inv_mpu.c ****     if (rate == 1)
 856:task/attitude/eMPL/inv_mpu.c ****     {
 857:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = INV_LPA_1_25HZ;
 858:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(5);
 859:task/attitude/eMPL/inv_mpu.c ****     }
 860:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 5)
 861:task/attitude/eMPL/inv_mpu.c ****     {
 862:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = INV_LPA_5HZ;
 863:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(5);
 864:task/attitude/eMPL/inv_mpu.c ****     }
 865:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 20)
 866:task/attitude/eMPL/inv_mpu.c ****     {
 867:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = INV_LPA_20HZ;
 868:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(10);
 869:task/attitude/eMPL/inv_mpu.c ****     }
 870:task/attitude/eMPL/inv_mpu.c ****     else
 871:task/attitude/eMPL/inv_mpu.c ****     {
 872:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = INV_LPA_40HZ;
 873:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(20);
 874:task/attitude/eMPL/inv_mpu.c ****     }
 875:task/attitude/eMPL/inv_mpu.c ****     tmp[1] = (tmp[1] << 6) | BIT_STBY_XYZG;
 876:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 877:task/attitude/eMPL/inv_mpu.c ****         return -1;
 878:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU6500
 879:task/attitude/eMPL/inv_mpu.c ****     /* Set wake frequency. */
 880:task/attitude/eMPL/inv_mpu.c ****     if (rate == 1)
 881:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_1_25HZ;
 882:task/attitude/eMPL/inv_mpu.c ****     else if (rate == 2)
 883:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_2_5HZ;
 884:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 5)
 885:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_5HZ;
 886:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 10)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 17


 887:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_10HZ;
 888:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 20)
 889:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_20HZ;
 890:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 40)
 891:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_40HZ;
 892:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 80)
 893:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_80HZ;
 894:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 160)
 895:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_160HZ;
 896:task/attitude/eMPL/inv_mpu.c ****     else if (rate <= 320)
 897:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_320HZ;
 898:task/attitude/eMPL/inv_mpu.c ****     else
 899:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = INV_LPA_640HZ;
 900:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lp_accel_odr, 1, tmp))
 901:task/attitude/eMPL/inv_mpu.c ****         return -1;
 902:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = BIT_LPA_CYCLE;
 903:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, tmp))
 904:task/attitude/eMPL/inv_mpu.c ****         return -1;
 905:task/attitude/eMPL/inv_mpu.c **** #endif
 906:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = INV_XYZ_ACCEL;
 907:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = 0;
 908:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 1;
 909:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(0);
 910:task/attitude/eMPL/inv_mpu.c **** 
 911:task/attitude/eMPL/inv_mpu.c ****     return 0;
 912:task/attitude/eMPL/inv_mpu.c **** }
 913:task/attitude/eMPL/inv_mpu.c **** 
 914:task/attitude/eMPL/inv_mpu.c **** /**
 915:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read raw gyro data directly from the registers.
 916:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] data        Raw data in hardware units.
 917:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
 918:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 919:task/attitude/eMPL/inv_mpu.c ****  */
 920:task/attitude/eMPL/inv_mpu.c **** int mpu_get_gyro_reg(short *data, unsigned long *timestamp)
 921:task/attitude/eMPL/inv_mpu.c **** {
 922:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
 923:task/attitude/eMPL/inv_mpu.c **** 
 924:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors & INV_XYZ_GYRO))
 925:task/attitude/eMPL/inv_mpu.c ****         return -1;
 926:task/attitude/eMPL/inv_mpu.c **** 
 927:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->raw_gyro, 6, tmp))
 928:task/attitude/eMPL/inv_mpu.c ****         return -1;
 929:task/attitude/eMPL/inv_mpu.c ****     data[0] = (tmp[0] << 8) | tmp[1];
 930:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 931:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 932:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 933:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 934:task/attitude/eMPL/inv_mpu.c ****     return 0;
 935:task/attitude/eMPL/inv_mpu.c **** }
 936:task/attitude/eMPL/inv_mpu.c **** 
 937:task/attitude/eMPL/inv_mpu.c **** /**
 938:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read raw accel data directly from the registers.
 939:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] data        Raw data in hardware units.
 940:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
 941:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 942:task/attitude/eMPL/inv_mpu.c ****  */
 943:task/attitude/eMPL/inv_mpu.c **** int mpu_get_accel_reg(short *data, unsigned long *timestamp)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 18


 944:task/attitude/eMPL/inv_mpu.c **** {
 945:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
 946:task/attitude/eMPL/inv_mpu.c **** 
 947:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors & INV_XYZ_ACCEL))
 948:task/attitude/eMPL/inv_mpu.c ****         return -1;
 949:task/attitude/eMPL/inv_mpu.c **** 
 950:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->raw_accel, 6, tmp))
 951:task/attitude/eMPL/inv_mpu.c ****         return -1;
 952:task/attitude/eMPL/inv_mpu.c ****     data[0] = (tmp[0] << 8) | tmp[1];
 953:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 954:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 955:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 956:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 957:task/attitude/eMPL/inv_mpu.c ****     return 0;
 958:task/attitude/eMPL/inv_mpu.c **** }
 959:task/attitude/eMPL/inv_mpu.c **** 
 960:task/attitude/eMPL/inv_mpu.c **** /**
 961:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read temperature data directly from the registers.
 962:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] data        Data in q16 format.
 963:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
 964:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 965:task/attitude/eMPL/inv_mpu.c ****  */
 966:task/attitude/eMPL/inv_mpu.c **** int mpu_get_temperature(long *data, unsigned long *timestamp)
 967:task/attitude/eMPL/inv_mpu.c **** {
 968:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 969:task/attitude/eMPL/inv_mpu.c ****     short raw;
 970:task/attitude/eMPL/inv_mpu.c **** 
 971:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors))
 972:task/attitude/eMPL/inv_mpu.c ****         return -1;
 973:task/attitude/eMPL/inv_mpu.c **** 
 974:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->temp, 2, tmp))
 975:task/attitude/eMPL/inv_mpu.c ****         return -1;
 976:task/attitude/eMPL/inv_mpu.c ****     raw = (tmp[0] << 8) | tmp[1];
 977:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 978:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 979:task/attitude/eMPL/inv_mpu.c **** 
 980:task/attitude/eMPL/inv_mpu.c ****     data[0] = (long)((35 + ((raw - (float)st.hw->temp_offset) / st.hw->temp_sens)) * 65536L);
 981:task/attitude/eMPL/inv_mpu.c ****     return 0;
 982:task/attitude/eMPL/inv_mpu.c **** }
 983:task/attitude/eMPL/inv_mpu.c **** 
 984:task/attitude/eMPL/inv_mpu.c **** /**
 985:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read biases to the accel bias 6500 registers.
 986:task/attitude/eMPL/inv_mpu.c ****  *  This function reads from the MPU6500 accel offset cancellations registers.
 987:task/attitude/eMPL/inv_mpu.c ****  *  The format are G in +-8G format. The register is initialized with OTP 
 988:task/attitude/eMPL/inv_mpu.c ****  *  factory trim values.
 989:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  accel_bias  returned structure with the accel bias
 990:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
 991:task/attitude/eMPL/inv_mpu.c ****  */
 992:task/attitude/eMPL/inv_mpu.c **** int mpu_read_6500_accel_bias(long *accel_bias)
 993:task/attitude/eMPL/inv_mpu.c **** {
 994:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 995:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x77, 2, &data[0]))
 996:task/attitude/eMPL/inv_mpu.c ****         return -1;
 997:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x7A, 2, &data[2]))
 998:task/attitude/eMPL/inv_mpu.c ****         return -1;
 999:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x7D, 2, &data[4]))
1000:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 19


1001:task/attitude/eMPL/inv_mpu.c ****     accel_bias[0] = ((long)data[0] << 8) | data[1];
1002:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
1003:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
1004:task/attitude/eMPL/inv_mpu.c ****     return 0;
1005:task/attitude/eMPL/inv_mpu.c **** }
1006:task/attitude/eMPL/inv_mpu.c **** 
1007:task/attitude/eMPL/inv_mpu.c **** /**
1008:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read biases to the accel bias 6050 registers.
1009:task/attitude/eMPL/inv_mpu.c ****  *  This function reads from the MPU6050 accel offset cancellations registers.
1010:task/attitude/eMPL/inv_mpu.c ****  *  The format are G in +-8G format. The register is initialized with OTP 
1011:task/attitude/eMPL/inv_mpu.c ****  *  factory trim values.
1012:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  accel_bias  returned structure with the accel bias
1013:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1014:task/attitude/eMPL/inv_mpu.c ****  */
1015:task/attitude/eMPL/inv_mpu.c **** int mpu_read_6050_accel_bias(long *accel_bias)
1016:task/attitude/eMPL/inv_mpu.c **** {
1017:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
1018:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x06, 2, &data[0]))
1019:task/attitude/eMPL/inv_mpu.c ****         return -1;
1020:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x08, 2, &data[2]))
1021:task/attitude/eMPL/inv_mpu.c ****         return -1;
1022:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x0A, 2, &data[4]))
1023:task/attitude/eMPL/inv_mpu.c ****         return -1;
1024:task/attitude/eMPL/inv_mpu.c ****     accel_bias[0] = ((long)data[0] << 8) | data[1];
1025:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
1026:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
1027:task/attitude/eMPL/inv_mpu.c ****     return 0;
1028:task/attitude/eMPL/inv_mpu.c **** }
1029:task/attitude/eMPL/inv_mpu.c **** 
1030:task/attitude/eMPL/inv_mpu.c **** int mpu_read_6500_gyro_bias(long *gyro_bias)
1031:task/attitude/eMPL/inv_mpu.c **** {
1032:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
1033:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x13, 2, &data[0]))
1034:task/attitude/eMPL/inv_mpu.c ****         return -1;
1035:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x15, 2, &data[2]))
1036:task/attitude/eMPL/inv_mpu.c ****         return -1;
1037:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x17, 2, &data[4]))
1038:task/attitude/eMPL/inv_mpu.c ****         return -1;
1039:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[0] = ((long)data[0] << 8) | data[1];
1040:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[1] = ((long)data[2] << 8) | data[3];
1041:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[2] = ((long)data[4] << 8) | data[5];
1042:task/attitude/eMPL/inv_mpu.c ****     return 0;
1043:task/attitude/eMPL/inv_mpu.c **** }
1044:task/attitude/eMPL/inv_mpu.c **** 
1045:task/attitude/eMPL/inv_mpu.c **** /**
1046:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Push biases to the gyro bias 6500/6050 registers.
1047:task/attitude/eMPL/inv_mpu.c ****  *  This function expects biases relative to the current sensor output, and
1048:task/attitude/eMPL/inv_mpu.c ****  *  these biases will be added to the factory-supplied values. Bias inputs are LSB
1049:task/attitude/eMPL/inv_mpu.c ****  *  in +-1000dps format.
1050:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  gyro_bias  New biases.
1051:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1052:task/attitude/eMPL/inv_mpu.c ****  */
1053:task/attitude/eMPL/inv_mpu.c **** int mpu_set_gyro_bias_reg(long *gyro_bias)
1054:task/attitude/eMPL/inv_mpu.c **** {
1055:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
1056:task/attitude/eMPL/inv_mpu.c ****     int i = 0;
1057:task/attitude/eMPL/inv_mpu.c ****     for (i = 0; i < 3; i++)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 20


1058:task/attitude/eMPL/inv_mpu.c ****     {
1059:task/attitude/eMPL/inv_mpu.c ****         gyro_bias[i] = (-gyro_bias[i]);
1060:task/attitude/eMPL/inv_mpu.c ****     }
1061:task/attitude/eMPL/inv_mpu.c ****     data[0] = (gyro_bias[0] >> 8) & 0xff;
1062:task/attitude/eMPL/inv_mpu.c ****     data[1] = (gyro_bias[0]) & 0xff;
1063:task/attitude/eMPL/inv_mpu.c ****     data[2] = (gyro_bias[1] >> 8) & 0xff;
1064:task/attitude/eMPL/inv_mpu.c ****     data[3] = (gyro_bias[1]) & 0xff;
1065:task/attitude/eMPL/inv_mpu.c ****     data[4] = (gyro_bias[2] >> 8) & 0xff;
1066:task/attitude/eMPL/inv_mpu.c ****     data[5] = (gyro_bias[2]) & 0xff;
1067:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x13, 2, &data[0]))
1068:task/attitude/eMPL/inv_mpu.c ****         return -1;
1069:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x15, 2, &data[2]))
1070:task/attitude/eMPL/inv_mpu.c ****         return -1;
1071:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x17, 2, &data[4]))
1072:task/attitude/eMPL/inv_mpu.c ****         return -1;
1073:task/attitude/eMPL/inv_mpu.c ****     return 0;
1074:task/attitude/eMPL/inv_mpu.c **** }
1075:task/attitude/eMPL/inv_mpu.c **** 
1076:task/attitude/eMPL/inv_mpu.c **** /**
1077:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Push biases to the accel bias 6050 registers.
1078:task/attitude/eMPL/inv_mpu.c ****  *  This function expects biases relative to the current sensor output, and
1079:task/attitude/eMPL/inv_mpu.c ****  *  these biases will be added to the factory-supplied values. Bias inputs are LSB
1080:task/attitude/eMPL/inv_mpu.c ****  *  in +-16G format.
1081:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  accel_bias  New biases.
1082:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1083:task/attitude/eMPL/inv_mpu.c ****  */
1084:task/attitude/eMPL/inv_mpu.c **** int mpu_set_accel_bias_6050_reg(const long *accel_bias)
1085:task/attitude/eMPL/inv_mpu.c **** {
1086:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
1087:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
1088:task/attitude/eMPL/inv_mpu.c **** 
1089:task/attitude/eMPL/inv_mpu.c ****     if (mpu_read_6050_accel_bias(accel_reg_bias))
1090:task/attitude/eMPL/inv_mpu.c ****         return -1;
1091:task/attitude/eMPL/inv_mpu.c **** 
1092:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[0] -= (accel_bias[0] & ~1);
1093:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
1094:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
1095:task/attitude/eMPL/inv_mpu.c **** 
1096:task/attitude/eMPL/inv_mpu.c ****     data[0] = (accel_reg_bias[0] >> 8) & 0xff;
1097:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
1098:task/attitude/eMPL/inv_mpu.c ****     data[2] = (accel_reg_bias[1] >> 8) & 0xff;
1099:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
1100:task/attitude/eMPL/inv_mpu.c ****     data[4] = (accel_reg_bias[2] >> 8) & 0xff;
1101:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
1102:task/attitude/eMPL/inv_mpu.c **** 
1103:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x06, 2, &data[0]))
1104:task/attitude/eMPL/inv_mpu.c ****         return -1;
1105:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x08, 2, &data[2]))
1106:task/attitude/eMPL/inv_mpu.c ****         return -1;
1107:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x0A, 2, &data[4]))
1108:task/attitude/eMPL/inv_mpu.c ****         return -1;
1109:task/attitude/eMPL/inv_mpu.c **** 
1110:task/attitude/eMPL/inv_mpu.c ****     return 0;
1111:task/attitude/eMPL/inv_mpu.c **** }
1112:task/attitude/eMPL/inv_mpu.c **** 
1113:task/attitude/eMPL/inv_mpu.c **** /**
1114:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Push biases to the accel bias 6500 registers.
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 21


1115:task/attitude/eMPL/inv_mpu.c ****  *  This function expects biases relative to the current sensor output, and
1116:task/attitude/eMPL/inv_mpu.c ****  *  these biases will be added to the factory-supplied values. Bias inputs are LSB
1117:task/attitude/eMPL/inv_mpu.c ****  *  in +-16G format.
1118:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  accel_bias  New biases.
1119:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1120:task/attitude/eMPL/inv_mpu.c ****  */
1121:task/attitude/eMPL/inv_mpu.c **** int mpu_set_accel_bias_6500_reg(const long *accel_bias)
1122:task/attitude/eMPL/inv_mpu.c **** {
1123:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
1124:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
1125:task/attitude/eMPL/inv_mpu.c **** 
1126:task/attitude/eMPL/inv_mpu.c ****     if (mpu_read_6500_accel_bias(accel_reg_bias))
1127:task/attitude/eMPL/inv_mpu.c ****         return -1;
1128:task/attitude/eMPL/inv_mpu.c **** 
1129:task/attitude/eMPL/inv_mpu.c ****     // Preserve bit 0 of factory value (for temperature compensation)
1130:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[0] -= (accel_bias[0] & ~1);
1131:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
1132:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
1133:task/attitude/eMPL/inv_mpu.c **** 
1134:task/attitude/eMPL/inv_mpu.c ****     data[0] = (accel_reg_bias[0] >> 8) & 0xff;
1135:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
1136:task/attitude/eMPL/inv_mpu.c ****     data[2] = (accel_reg_bias[1] >> 8) & 0xff;
1137:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
1138:task/attitude/eMPL/inv_mpu.c ****     data[4] = (accel_reg_bias[2] >> 8) & 0xff;
1139:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
1140:task/attitude/eMPL/inv_mpu.c **** 
1141:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x77, 2, &data[0]))
1142:task/attitude/eMPL/inv_mpu.c ****         return -1;
1143:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x7A, 2, &data[2]))
1144:task/attitude/eMPL/inv_mpu.c ****         return -1;
1145:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x7D, 2, &data[4]))
1146:task/attitude/eMPL/inv_mpu.c ****         return -1;
1147:task/attitude/eMPL/inv_mpu.c **** 
1148:task/attitude/eMPL/inv_mpu.c ****     return 0;
1149:task/attitude/eMPL/inv_mpu.c **** }
1150:task/attitude/eMPL/inv_mpu.c **** 
1151:task/attitude/eMPL/inv_mpu.c **** /**
1152:task/attitude/eMPL/inv_mpu.c ****  *  @brief  Reset FIFO read/write pointers.
1153:task/attitude/eMPL/inv_mpu.c ****  *  @return 0 if successful.
1154:task/attitude/eMPL/inv_mpu.c ****  */
1155:task/attitude/eMPL/inv_mpu.c **** int mpu_reset_fifo(void)
1156:task/attitude/eMPL/inv_mpu.c **** {
1157:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
1158:task/attitude/eMPL/inv_mpu.c **** 
1159:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors))
1160:task/attitude/eMPL/inv_mpu.c ****         return -1;
1161:task/attitude/eMPL/inv_mpu.c **** 
1162:task/attitude/eMPL/inv_mpu.c ****     data = 0;
1163:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
1164:task/attitude/eMPL/inv_mpu.c ****         return -1;
1165:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
1166:task/attitude/eMPL/inv_mpu.c ****         return -1;
1167:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1168:task/attitude/eMPL/inv_mpu.c ****         return -1;
1169:task/attitude/eMPL/inv_mpu.c **** 
1170:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1171:task/attitude/eMPL/inv_mpu.c ****     {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 22


1172:task/attitude/eMPL/inv_mpu.c ****         data = BIT_FIFO_RST | BIT_DMP_RST;
1173:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1174:task/attitude/eMPL/inv_mpu.c ****             return -1;
1175:task/attitude/eMPL/inv_mpu.c ****         delay_ms(50);
1176:task/attitude/eMPL/inv_mpu.c ****         data = BIT_DMP_EN | BIT_FIFO_EN;
1177:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
1178:task/attitude/eMPL/inv_mpu.c ****             data |= BIT_AUX_IF_EN;
1179:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1180:task/attitude/eMPL/inv_mpu.c ****             return -1;
1181:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.int_enable)
1182:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DMP_INT_EN;
1183:task/attitude/eMPL/inv_mpu.c ****         else
1184:task/attitude/eMPL/inv_mpu.c ****             data = 0;
1185:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
1186:task/attitude/eMPL/inv_mpu.c ****             return -1;
1187:task/attitude/eMPL/inv_mpu.c ****         data = 0;
1188:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
1189:task/attitude/eMPL/inv_mpu.c ****             return -1;
1190:task/attitude/eMPL/inv_mpu.c ****     }
1191:task/attitude/eMPL/inv_mpu.c ****     else
1192:task/attitude/eMPL/inv_mpu.c ****     {
1193:task/attitude/eMPL/inv_mpu.c ****         data = BIT_FIFO_RST;
1194:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1195:task/attitude/eMPL/inv_mpu.c ****             return -1;
1196:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.bypass_mode || !(st.chip_cfg.sensors & INV_XYZ_COMPASS))
1197:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN;
1198:task/attitude/eMPL/inv_mpu.c ****         else
1199:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN | BIT_AUX_IF_EN;
1200:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
1201:task/attitude/eMPL/inv_mpu.c ****             return -1;
1202:task/attitude/eMPL/inv_mpu.c ****         delay_ms(50);
1203:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.int_enable)
1204:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DATA_RDY_EN;
1205:task/attitude/eMPL/inv_mpu.c ****         else
1206:task/attitude/eMPL/inv_mpu.c ****             data = 0;
1207:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
1208:task/attitude/eMPL/inv_mpu.c ****             return -1;
1209:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &st.chip_cfg.fifo_enable))
1210:task/attitude/eMPL/inv_mpu.c ****             return -1;
1211:task/attitude/eMPL/inv_mpu.c ****     }
1212:task/attitude/eMPL/inv_mpu.c ****     return 0;
1213:task/attitude/eMPL/inv_mpu.c **** }
1214:task/attitude/eMPL/inv_mpu.c **** 
1215:task/attitude/eMPL/inv_mpu.c **** /**
1216:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get the gyro full-scale range.
1217:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] fsr Current full-scale range.
1218:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1219:task/attitude/eMPL/inv_mpu.c ****  */
1220:task/attitude/eMPL/inv_mpu.c **** int mpu_get_gyro_fsr(unsigned short *fsr)
1221:task/attitude/eMPL/inv_mpu.c **** {
1222:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.gyro_fsr)
1223:task/attitude/eMPL/inv_mpu.c ****     {
1224:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_250DPS:
1225:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 250;
1226:task/attitude/eMPL/inv_mpu.c ****         break;
1227:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_500DPS:
1228:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 500;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 23


1229:task/attitude/eMPL/inv_mpu.c ****         break;
1230:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_1000DPS:
1231:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 1000;
1232:task/attitude/eMPL/inv_mpu.c ****         break;
1233:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2000DPS:
1234:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 2000;
1235:task/attitude/eMPL/inv_mpu.c ****         break;
1236:task/attitude/eMPL/inv_mpu.c ****     default:
1237:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 0;
1238:task/attitude/eMPL/inv_mpu.c ****         break;
1239:task/attitude/eMPL/inv_mpu.c ****     }
1240:task/attitude/eMPL/inv_mpu.c ****     return 0;
1241:task/attitude/eMPL/inv_mpu.c **** }
1242:task/attitude/eMPL/inv_mpu.c **** 
1243:task/attitude/eMPL/inv_mpu.c **** /**
1244:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set the gyro full-scale range.
1245:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  fsr Desired full-scale range.
1246:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1247:task/attitude/eMPL/inv_mpu.c ****  */
1248:task/attitude/eMPL/inv_mpu.c **** int mpu_set_gyro_fsr(unsigned short fsr)
1249:task/attitude/eMPL/inv_mpu.c **** {
1250:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
1251:task/attitude/eMPL/inv_mpu.c **** 
1252:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors))
1253:task/attitude/eMPL/inv_mpu.c ****         return -1;
1254:task/attitude/eMPL/inv_mpu.c **** 
1255:task/attitude/eMPL/inv_mpu.c ****     switch (fsr)
1256:task/attitude/eMPL/inv_mpu.c ****     {
1257:task/attitude/eMPL/inv_mpu.c ****     case 250:
1258:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_250DPS << 3;
1259:task/attitude/eMPL/inv_mpu.c ****         break;
1260:task/attitude/eMPL/inv_mpu.c ****     case 500:
1261:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_500DPS << 3;
1262:task/attitude/eMPL/inv_mpu.c ****         break;
1263:task/attitude/eMPL/inv_mpu.c ****     case 1000:
1264:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_1000DPS << 3;
1265:task/attitude/eMPL/inv_mpu.c ****         break;
1266:task/attitude/eMPL/inv_mpu.c ****     case 2000:
1267:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_2000DPS << 3;
1268:task/attitude/eMPL/inv_mpu.c ****         break;
1269:task/attitude/eMPL/inv_mpu.c ****     default:
1270:task/attitude/eMPL/inv_mpu.c ****         return -1;
1271:task/attitude/eMPL/inv_mpu.c ****     }
1272:task/attitude/eMPL/inv_mpu.c **** 
1273:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.gyro_fsr == (data >> 3))
1274:task/attitude/eMPL/inv_mpu.c ****         return 0;
1275:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, &data))
1276:task/attitude/eMPL/inv_mpu.c ****         return -1;
1277:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = data >> 3;
1278:task/attitude/eMPL/inv_mpu.c ****     return 0;
1279:task/attitude/eMPL/inv_mpu.c **** }
1280:task/attitude/eMPL/inv_mpu.c **** 
1281:task/attitude/eMPL/inv_mpu.c **** /**
1282:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get the accel full-scale range.
1283:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] fsr Current full-scale range.
1284:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1285:task/attitude/eMPL/inv_mpu.c ****  */
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 24


1286:task/attitude/eMPL/inv_mpu.c **** int mpu_get_accel_fsr(unsigned char *fsr)
1287:task/attitude/eMPL/inv_mpu.c **** {
1288:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.accel_fsr)
1289:task/attitude/eMPL/inv_mpu.c ****     {
1290:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2G:
1291:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 2;
1292:task/attitude/eMPL/inv_mpu.c ****         break;
1293:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_4G:
1294:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 4;
1295:task/attitude/eMPL/inv_mpu.c ****         break;
1296:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_8G:
1297:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 8;
1298:task/attitude/eMPL/inv_mpu.c ****         break;
1299:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_16G:
1300:task/attitude/eMPL/inv_mpu.c ****         fsr[0] = 16;
1301:task/attitude/eMPL/inv_mpu.c ****         break;
1302:task/attitude/eMPL/inv_mpu.c ****     default:
1303:task/attitude/eMPL/inv_mpu.c ****         return -1;
1304:task/attitude/eMPL/inv_mpu.c ****     }
1305:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.accel_half)
1306:task/attitude/eMPL/inv_mpu.c ****         fsr[0] <<= 1;
1307:task/attitude/eMPL/inv_mpu.c ****     return 0;
1308:task/attitude/eMPL/inv_mpu.c **** }
1309:task/attitude/eMPL/inv_mpu.c **** 
1310:task/attitude/eMPL/inv_mpu.c **** /**
1311:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set the accel full-scale range.
1312:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  fsr Desired full-scale range.
1313:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1314:task/attitude/eMPL/inv_mpu.c ****  */
1315:task/attitude/eMPL/inv_mpu.c **** int mpu_set_accel_fsr(unsigned char fsr)
1316:task/attitude/eMPL/inv_mpu.c **** {
1317:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
1318:task/attitude/eMPL/inv_mpu.c **** 
1319:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors))
1320:task/attitude/eMPL/inv_mpu.c ****         return -1;
1321:task/attitude/eMPL/inv_mpu.c **** 
1322:task/attitude/eMPL/inv_mpu.c ****     switch (fsr)
1323:task/attitude/eMPL/inv_mpu.c ****     {
1324:task/attitude/eMPL/inv_mpu.c ****     case 2:
1325:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_2G << 3;
1326:task/attitude/eMPL/inv_mpu.c ****         break;
1327:task/attitude/eMPL/inv_mpu.c ****     case 4:
1328:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_4G << 3;
1329:task/attitude/eMPL/inv_mpu.c ****         break;
1330:task/attitude/eMPL/inv_mpu.c ****     case 8:
1331:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_8G << 3;
1332:task/attitude/eMPL/inv_mpu.c ****         break;
1333:task/attitude/eMPL/inv_mpu.c ****     case 16:
1334:task/attitude/eMPL/inv_mpu.c ****         data = INV_FSR_16G << 3;
1335:task/attitude/eMPL/inv_mpu.c ****         break;
1336:task/attitude/eMPL/inv_mpu.c ****     default:
1337:task/attitude/eMPL/inv_mpu.c ****         return -1;
1338:task/attitude/eMPL/inv_mpu.c ****     }
1339:task/attitude/eMPL/inv_mpu.c **** 
1340:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.accel_fsr == (data >> 3))
1341:task/attitude/eMPL/inv_mpu.c ****         return 0;
1342:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, &data))
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 25


1343:task/attitude/eMPL/inv_mpu.c ****         return -1;
1344:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = data >> 3;
1345:task/attitude/eMPL/inv_mpu.c ****     return 0;
1346:task/attitude/eMPL/inv_mpu.c **** }
1347:task/attitude/eMPL/inv_mpu.c **** 
1348:task/attitude/eMPL/inv_mpu.c **** /**
1349:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get the current DLPF setting.
1350:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] lpf Current LPF setting.
1351:task/attitude/eMPL/inv_mpu.c ****  *  0 if successful.
1352:task/attitude/eMPL/inv_mpu.c ****  */
1353:task/attitude/eMPL/inv_mpu.c **** int mpu_get_lpf(unsigned short *lpf)
1354:task/attitude/eMPL/inv_mpu.c **** {
1355:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.lpf)
1356:task/attitude/eMPL/inv_mpu.c ****     {
1357:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_188HZ:
1358:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 188;
1359:task/attitude/eMPL/inv_mpu.c ****         break;
1360:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_98HZ:
1361:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 98;
1362:task/attitude/eMPL/inv_mpu.c ****         break;
1363:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_42HZ:
1364:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 42;
1365:task/attitude/eMPL/inv_mpu.c ****         break;
1366:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_20HZ:
1367:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 20;
1368:task/attitude/eMPL/inv_mpu.c ****         break;
1369:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_10HZ:
1370:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 10;
1371:task/attitude/eMPL/inv_mpu.c ****         break;
1372:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_5HZ:
1373:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 5;
1374:task/attitude/eMPL/inv_mpu.c ****         break;
1375:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_256HZ_NOLPF2:
1376:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_2100HZ_NOLPF:
1377:task/attitude/eMPL/inv_mpu.c ****     default:
1378:task/attitude/eMPL/inv_mpu.c ****         lpf[0] = 0;
1379:task/attitude/eMPL/inv_mpu.c ****         break;
1380:task/attitude/eMPL/inv_mpu.c ****     }
1381:task/attitude/eMPL/inv_mpu.c ****     return 0;
1382:task/attitude/eMPL/inv_mpu.c **** }
1383:task/attitude/eMPL/inv_mpu.c **** 
1384:task/attitude/eMPL/inv_mpu.c **** /**
1385:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set digital low pass filter.
1386:task/attitude/eMPL/inv_mpu.c ****  *  The following LPF settings are supported: 188, 98, 42, 20, 10, 5.
1387:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  lpf Desired LPF setting.
1388:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1389:task/attitude/eMPL/inv_mpu.c ****  */
1390:task/attitude/eMPL/inv_mpu.c **** int mpu_set_lpf(unsigned short lpf)
1391:task/attitude/eMPL/inv_mpu.c **** {
1392:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
1393:task/attitude/eMPL/inv_mpu.c **** 
1394:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors))
1395:task/attitude/eMPL/inv_mpu.c ****         return -1;
1396:task/attitude/eMPL/inv_mpu.c **** 
1397:task/attitude/eMPL/inv_mpu.c ****     if (lpf >= 188)
1398:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_188HZ;
1399:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 98)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 26


1400:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_98HZ;
1401:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 42)
1402:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_42HZ;
1403:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 20)
1404:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_20HZ;
1405:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 10)
1406:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_10HZ;
1407:task/attitude/eMPL/inv_mpu.c ****     else
1408:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_5HZ;
1409:task/attitude/eMPL/inv_mpu.c **** 
1410:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.lpf == data)
1411:task/attitude/eMPL/inv_mpu.c ****         return 0;
1412:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lpf, 1, &data))
1413:task/attitude/eMPL/inv_mpu.c ****         return -1;
1414:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = data;
1415:task/attitude/eMPL/inv_mpu.c ****     return 0;
1416:task/attitude/eMPL/inv_mpu.c **** }
1417:task/attitude/eMPL/inv_mpu.c **** 
1418:task/attitude/eMPL/inv_mpu.c **** /**
1419:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get sampling rate.
1420:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] rate    Current sampling rate (Hz).
1421:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1422:task/attitude/eMPL/inv_mpu.c ****  */
1423:task/attitude/eMPL/inv_mpu.c **** int mpu_get_sample_rate(unsigned short *rate)
1424:task/attitude/eMPL/inv_mpu.c **** {
1425:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1426:task/attitude/eMPL/inv_mpu.c ****         return -1;
1427:task/attitude/eMPL/inv_mpu.c ****     else
1428:task/attitude/eMPL/inv_mpu.c ****         rate[0] = st.chip_cfg.sample_rate;
1429:task/attitude/eMPL/inv_mpu.c ****     return 0;
1430:task/attitude/eMPL/inv_mpu.c **** }
1431:task/attitude/eMPL/inv_mpu.c **** 
1432:task/attitude/eMPL/inv_mpu.c **** /**
1433:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set sampling rate.
1434:task/attitude/eMPL/inv_mpu.c ****  *  Sampling rate must be between 4Hz and 1kHz.
1435:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  rate    Desired sampling rate (Hz).
1436:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1437:task/attitude/eMPL/inv_mpu.c ****  */
1438:task/attitude/eMPL/inv_mpu.c **** int mpu_set_sample_rate(unsigned short rate)
1439:task/attitude/eMPL/inv_mpu.c **** {
1440:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
1441:task/attitude/eMPL/inv_mpu.c **** 
1442:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors))
1443:task/attitude/eMPL/inv_mpu.c ****         return -1;
1444:task/attitude/eMPL/inv_mpu.c **** 
1445:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1446:task/attitude/eMPL/inv_mpu.c ****         return -1;
1447:task/attitude/eMPL/inv_mpu.c ****     else
1448:task/attitude/eMPL/inv_mpu.c ****     {
1449:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.lp_accel_mode)
1450:task/attitude/eMPL/inv_mpu.c ****         {
1451:task/attitude/eMPL/inv_mpu.c ****             if (rate && (rate <= 40))
1452:task/attitude/eMPL/inv_mpu.c ****             {
1453:task/attitude/eMPL/inv_mpu.c ****                 /* Just stay in low-power accel mode. */
1454:task/attitude/eMPL/inv_mpu.c ****                 mpu_lp_accel_mode(rate);
1455:task/attitude/eMPL/inv_mpu.c ****                 return 0;
1456:task/attitude/eMPL/inv_mpu.c ****             }
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 27


1457:task/attitude/eMPL/inv_mpu.c ****             /* Requested rate exceeds the allowed frequencies in LP accel mode,
1458:task/attitude/eMPL/inv_mpu.c ****              * switch back to full-power mode.
1459:task/attitude/eMPL/inv_mpu.c ****              */
1460:task/attitude/eMPL/inv_mpu.c ****             mpu_lp_accel_mode(0);
1461:task/attitude/eMPL/inv_mpu.c ****         }
1462:task/attitude/eMPL/inv_mpu.c ****         if (rate < 4)
1463:task/attitude/eMPL/inv_mpu.c ****             rate = 4;
1464:task/attitude/eMPL/inv_mpu.c ****         else if (rate > 1000)
1465:task/attitude/eMPL/inv_mpu.c ****             rate = 1000;
1466:task/attitude/eMPL/inv_mpu.c **** 
1467:task/attitude/eMPL/inv_mpu.c ****         data = 1000 / rate - 1;
1468:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
1469:task/attitude/eMPL/inv_mpu.c ****             return -1;
1470:task/attitude/eMPL/inv_mpu.c **** 
1471:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.sample_rate = 1000 / (1 + data);
1472:task/attitude/eMPL/inv_mpu.c **** 
1473:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1474:task/attitude/eMPL/inv_mpu.c ****         mpu_set_compass_sample_rate(min(st.chip_cfg.compass_sample_rate, MAX_COMPASS_SAMPLE_RATE));
1475:task/attitude/eMPL/inv_mpu.c **** #endif
1476:task/attitude/eMPL/inv_mpu.c **** 
1477:task/attitude/eMPL/inv_mpu.c ****         /* Automatically set LPF to 1/2 sampling rate. */
1478:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(st.chip_cfg.sample_rate >> 1);
1479:task/attitude/eMPL/inv_mpu.c ****         return 0;
1480:task/attitude/eMPL/inv_mpu.c ****     }
1481:task/attitude/eMPL/inv_mpu.c **** }
1482:task/attitude/eMPL/inv_mpu.c **** 
1483:task/attitude/eMPL/inv_mpu.c **** /**
1484:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get compass sampling rate.
1485:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] rate    Current compass sampling rate (Hz).
1486:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1487:task/attitude/eMPL/inv_mpu.c ****  */
1488:task/attitude/eMPL/inv_mpu.c **** int mpu_get_compass_sample_rate(unsigned short *rate)
1489:task/attitude/eMPL/inv_mpu.c **** {
1490:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1491:task/attitude/eMPL/inv_mpu.c ****     rate[0] = st.chip_cfg.compass_sample_rate;
1492:task/attitude/eMPL/inv_mpu.c ****     return 0;
1493:task/attitude/eMPL/inv_mpu.c **** #else
1494:task/attitude/eMPL/inv_mpu.c ****     rate[0] = 0;
1495:task/attitude/eMPL/inv_mpu.c ****     return -1;
1496:task/attitude/eMPL/inv_mpu.c **** #endif
1497:task/attitude/eMPL/inv_mpu.c **** }
1498:task/attitude/eMPL/inv_mpu.c **** 
1499:task/attitude/eMPL/inv_mpu.c **** /**
1500:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set compass sampling rate.
1501:task/attitude/eMPL/inv_mpu.c ****  *  The compass on the auxiliary I2C bus is read by the MPU hardware at a
1502:task/attitude/eMPL/inv_mpu.c ****  *  maximum of 100Hz. The actual rate can be set to a fraction of the gyro
1503:task/attitude/eMPL/inv_mpu.c ****  *  sampling rate.
1504:task/attitude/eMPL/inv_mpu.c ****  *
1505:task/attitude/eMPL/inv_mpu.c ****  *  \n WARNING: The new rate may be different than what was requested. Call
1506:task/attitude/eMPL/inv_mpu.c ****  *  mpu_get_compass_sample_rate to check the actual setting.
1507:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  rate    Desired compass sampling rate (Hz).
1508:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1509:task/attitude/eMPL/inv_mpu.c ****  */
1510:task/attitude/eMPL/inv_mpu.c **** int mpu_set_compass_sample_rate(unsigned short rate)
1511:task/attitude/eMPL/inv_mpu.c **** {
1512:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1513:task/attitude/eMPL/inv_mpu.c ****     unsigned char div;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 28


1514:task/attitude/eMPL/inv_mpu.c ****     if (!rate || rate > st.chip_cfg.sample_rate || rate > MAX_COMPASS_SAMPLE_RATE)
1515:task/attitude/eMPL/inv_mpu.c ****         return -1;
1516:task/attitude/eMPL/inv_mpu.c **** 
1517:task/attitude/eMPL/inv_mpu.c ****     div = st.chip_cfg.sample_rate / rate - 1;
1518:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s4_ctrl, 1, &div))
1519:task/attitude/eMPL/inv_mpu.c ****         return -1;
1520:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.compass_sample_rate = st.chip_cfg.sample_rate / (div + 1);
1521:task/attitude/eMPL/inv_mpu.c ****     return 0;
1522:task/attitude/eMPL/inv_mpu.c **** #else
1523:task/attitude/eMPL/inv_mpu.c ****     return -1;
1524:task/attitude/eMPL/inv_mpu.c **** #endif
1525:task/attitude/eMPL/inv_mpu.c **** }
1526:task/attitude/eMPL/inv_mpu.c **** 
1527:task/attitude/eMPL/inv_mpu.c **** /**
1528:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get gyro sensitivity scale factor.
1529:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] sens    Conversion from hardware units to dps.
1530:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1531:task/attitude/eMPL/inv_mpu.c ****  */
1532:task/attitude/eMPL/inv_mpu.c **** int mpu_get_gyro_sens(float *sens)
1533:task/attitude/eMPL/inv_mpu.c **** {
1534:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.gyro_fsr)
1535:task/attitude/eMPL/inv_mpu.c ****     {
1536:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_250DPS:
1537:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 131.f;
1538:task/attitude/eMPL/inv_mpu.c ****         break;
1539:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_500DPS:
1540:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 65.5f;
1541:task/attitude/eMPL/inv_mpu.c ****         break;
1542:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_1000DPS:
1543:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 32.8f;
1544:task/attitude/eMPL/inv_mpu.c ****         break;
1545:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2000DPS:
1546:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 16.4f;
1547:task/attitude/eMPL/inv_mpu.c ****         break;
1548:task/attitude/eMPL/inv_mpu.c ****     default:
1549:task/attitude/eMPL/inv_mpu.c ****         return -1;
1550:task/attitude/eMPL/inv_mpu.c ****     }
1551:task/attitude/eMPL/inv_mpu.c ****     return 0;
1552:task/attitude/eMPL/inv_mpu.c **** }
1553:task/attitude/eMPL/inv_mpu.c **** 
1554:task/attitude/eMPL/inv_mpu.c **** /**
1555:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get accel sensitivity scale factor.
1556:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] sens    Conversion from hardware units to g's.
1557:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1558:task/attitude/eMPL/inv_mpu.c ****  */
1559:task/attitude/eMPL/inv_mpu.c **** int mpu_get_accel_sens(unsigned short *sens)
1560:task/attitude/eMPL/inv_mpu.c **** {
1561:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.accel_fsr)
1562:task/attitude/eMPL/inv_mpu.c ****     {
1563:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2G:
1564:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 16384;
1565:task/attitude/eMPL/inv_mpu.c ****         break;
1566:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_4G:
1567:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 8192;
1568:task/attitude/eMPL/inv_mpu.c ****         break;
1569:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_8G:
1570:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 4096;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 29


1571:task/attitude/eMPL/inv_mpu.c ****         break;
1572:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_16G:
1573:task/attitude/eMPL/inv_mpu.c ****         sens[0] = 2048;
1574:task/attitude/eMPL/inv_mpu.c ****         break;
1575:task/attitude/eMPL/inv_mpu.c ****     default:
1576:task/attitude/eMPL/inv_mpu.c ****         return -1;
1577:task/attitude/eMPL/inv_mpu.c ****     }
1578:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.accel_half)
1579:task/attitude/eMPL/inv_mpu.c ****         sens[0] >>= 1;
1580:task/attitude/eMPL/inv_mpu.c ****     return 0;
1581:task/attitude/eMPL/inv_mpu.c **** }
1582:task/attitude/eMPL/inv_mpu.c **** 
1583:task/attitude/eMPL/inv_mpu.c **** /**
1584:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get current FIFO configuration.
1585:task/attitude/eMPL/inv_mpu.c ****  *  @e sensors can contain a combination of the following flags:
1586:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1587:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1588:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1589:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] sensors Mask of sensors in FIFO.
1590:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1591:task/attitude/eMPL/inv_mpu.c ****  */
1592:task/attitude/eMPL/inv_mpu.c **** int mpu_get_fifo_config(unsigned char *sensors)
1593:task/attitude/eMPL/inv_mpu.c **** {
1594:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = st.chip_cfg.fifo_enable;
1595:task/attitude/eMPL/inv_mpu.c ****     return 0;
1596:task/attitude/eMPL/inv_mpu.c **** }
1597:task/attitude/eMPL/inv_mpu.c **** 
1598:task/attitude/eMPL/inv_mpu.c **** /**
1599:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Select which sensors are pushed to FIFO.
1600:task/attitude/eMPL/inv_mpu.c ****  *  @e sensors can contain a combination of the following flags:
1601:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1602:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1603:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1604:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  sensors Mask of sensors to push to FIFO.
1605:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1606:task/attitude/eMPL/inv_mpu.c ****  */
1607:task/attitude/eMPL/inv_mpu.c **** int mpu_configure_fifo(unsigned char sensors)
1608:task/attitude/eMPL/inv_mpu.c **** {
1609:task/attitude/eMPL/inv_mpu.c ****     unsigned char prev;
1610:task/attitude/eMPL/inv_mpu.c ****     int result = 0;
1611:task/attitude/eMPL/inv_mpu.c **** 
1612:task/attitude/eMPL/inv_mpu.c ****     /* Compass data isn't going into the FIFO. Stop trying. */
1613:task/attitude/eMPL/inv_mpu.c ****     sensors &= ~INV_XYZ_COMPASS;
1614:task/attitude/eMPL/inv_mpu.c **** 
1615:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1616:task/attitude/eMPL/inv_mpu.c ****         return 0;
1617:task/attitude/eMPL/inv_mpu.c ****     else
1618:task/attitude/eMPL/inv_mpu.c ****     {
1619:task/attitude/eMPL/inv_mpu.c ****         if (!(st.chip_cfg.sensors))
1620:task/attitude/eMPL/inv_mpu.c ****             return -1;
1621:task/attitude/eMPL/inv_mpu.c ****         prev = st.chip_cfg.fifo_enable;
1622:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.fifo_enable = sensors & st.chip_cfg.sensors;
1623:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.fifo_enable != sensors)
1624:task/attitude/eMPL/inv_mpu.c ****             /* You're not getting what you asked for. Some sensors are
1625:task/attitude/eMPL/inv_mpu.c ****              * asleep.
1626:task/attitude/eMPL/inv_mpu.c ****              */
1627:task/attitude/eMPL/inv_mpu.c ****             result = -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 30


1628:task/attitude/eMPL/inv_mpu.c ****         else
1629:task/attitude/eMPL/inv_mpu.c ****             result = 0;
1630:task/attitude/eMPL/inv_mpu.c ****         if (sensors || st.chip_cfg.lp_accel_mode)
1631:task/attitude/eMPL/inv_mpu.c ****             set_int_enable(1);
1632:task/attitude/eMPL/inv_mpu.c ****         else
1633:task/attitude/eMPL/inv_mpu.c ****             set_int_enable(0);
1634:task/attitude/eMPL/inv_mpu.c ****         if (sensors)
1635:task/attitude/eMPL/inv_mpu.c ****         {
1636:task/attitude/eMPL/inv_mpu.c ****             if (mpu_reset_fifo())
1637:task/attitude/eMPL/inv_mpu.c ****             {
1638:task/attitude/eMPL/inv_mpu.c ****                 st.chip_cfg.fifo_enable = prev;
1639:task/attitude/eMPL/inv_mpu.c ****                 return -1;
1640:task/attitude/eMPL/inv_mpu.c ****             }
1641:task/attitude/eMPL/inv_mpu.c ****         }
1642:task/attitude/eMPL/inv_mpu.c ****     }
1643:task/attitude/eMPL/inv_mpu.c **** 
1644:task/attitude/eMPL/inv_mpu.c ****     return result;
1645:task/attitude/eMPL/inv_mpu.c **** }
1646:task/attitude/eMPL/inv_mpu.c **** 
1647:task/attitude/eMPL/inv_mpu.c **** /**
1648:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get current power state.
1649:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  power_on    1 if turned on, 0 if suspended.
1650:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1651:task/attitude/eMPL/inv_mpu.c ****  */
1652:task/attitude/eMPL/inv_mpu.c **** int mpu_get_power_state(unsigned char *power_on)
1653:task/attitude/eMPL/inv_mpu.c **** {
1654:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.sensors)
1655:task/attitude/eMPL/inv_mpu.c ****         power_on[0] = 1;
1656:task/attitude/eMPL/inv_mpu.c ****     else
1657:task/attitude/eMPL/inv_mpu.c ****         power_on[0] = 0;
1658:task/attitude/eMPL/inv_mpu.c ****     return 0;
1659:task/attitude/eMPL/inv_mpu.c **** }
1660:task/attitude/eMPL/inv_mpu.c **** 
1661:task/attitude/eMPL/inv_mpu.c **** /**
1662:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Turn specific sensors on/off.
1663:task/attitude/eMPL/inv_mpu.c ****  *  @e sensors can contain a combination of the following flags:
1664:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1665:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1666:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1667:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_COMPASS
1668:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  sensors    Mask of sensors to wake.
1669:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1670:task/attitude/eMPL/inv_mpu.c ****  */
1671:task/attitude/eMPL/inv_mpu.c **** int mpu_set_sensors(unsigned char sensors)
1672:task/attitude/eMPL/inv_mpu.c **** {
1673:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
1674:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1675:task/attitude/eMPL/inv_mpu.c ****     unsigned char user_ctrl;
1676:task/attitude/eMPL/inv_mpu.c **** #endif
1677:task/attitude/eMPL/inv_mpu.c **** 
1678:task/attitude/eMPL/inv_mpu.c ****     if (sensors & INV_XYZ_GYRO)
1679:task/attitude/eMPL/inv_mpu.c ****         data = INV_CLK_PLL;
1680:task/attitude/eMPL/inv_mpu.c ****     else if (sensors)
1681:task/attitude/eMPL/inv_mpu.c ****         data = 0;
1682:task/attitude/eMPL/inv_mpu.c ****     else
1683:task/attitude/eMPL/inv_mpu.c ****         data = BIT_SLEEP;
1684:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, &data))
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 31


1685:task/attitude/eMPL/inv_mpu.c ****     {
1686:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.sensors = 0;
1687:task/attitude/eMPL/inv_mpu.c ****         return -1;
1688:task/attitude/eMPL/inv_mpu.c ****     }
1689:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = data & ~BIT_SLEEP;
1690:task/attitude/eMPL/inv_mpu.c **** 
1691:task/attitude/eMPL/inv_mpu.c ****     data = 0;
1692:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_X_GYRO))
1693:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_XG;
1694:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_Y_GYRO))
1695:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_YG;
1696:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_Z_GYRO))
1697:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_ZG;
1698:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_XYZ_ACCEL))
1699:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_XYZA;
1700:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_2, 1, &data))
1701:task/attitude/eMPL/inv_mpu.c ****     {
1702:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.sensors = 0;
1703:task/attitude/eMPL/inv_mpu.c ****         return -1;
1704:task/attitude/eMPL/inv_mpu.c ****     }
1705:task/attitude/eMPL/inv_mpu.c **** 
1706:task/attitude/eMPL/inv_mpu.c ****     if (sensors && (sensors != INV_XYZ_ACCEL))
1707:task/attitude/eMPL/inv_mpu.c ****         /* Latched interrupts only used in LP accel mode. */
1708:task/attitude/eMPL/inv_mpu.c ****         mpu_set_int_latched(0);
1709:task/attitude/eMPL/inv_mpu.c **** 
1710:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
1711:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_BYPASS
1712:task/attitude/eMPL/inv_mpu.c ****     if (sensors & INV_XYZ_COMPASS)
1713:task/attitude/eMPL/inv_mpu.c ****         mpu_set_bypass(1);
1714:task/attitude/eMPL/inv_mpu.c ****     else
1715:task/attitude/eMPL/inv_mpu.c ****         mpu_set_bypass(0);
1716:task/attitude/eMPL/inv_mpu.c **** #else
1717:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &user_ctrl))
1718:task/attitude/eMPL/inv_mpu.c ****         return -1;
1719:task/attitude/eMPL/inv_mpu.c ****     /* Handle AKM power management. */
1720:task/attitude/eMPL/inv_mpu.c ****     if (sensors & INV_XYZ_COMPASS)
1721:task/attitude/eMPL/inv_mpu.c ****     {
1722:task/attitude/eMPL/inv_mpu.c ****         data = AKM_SINGLE_MEASUREMENT;
1723:task/attitude/eMPL/inv_mpu.c ****         user_ctrl |= BIT_AUX_IF_EN;
1724:task/attitude/eMPL/inv_mpu.c ****     }
1725:task/attitude/eMPL/inv_mpu.c ****     else
1726:task/attitude/eMPL/inv_mpu.c ****     {
1727:task/attitude/eMPL/inv_mpu.c ****         data = AKM_POWER_DOWN;
1728:task/attitude/eMPL/inv_mpu.c ****         user_ctrl &= ~BIT_AUX_IF_EN;
1729:task/attitude/eMPL/inv_mpu.c ****     }
1730:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1731:task/attitude/eMPL/inv_mpu.c ****         user_ctrl |= BIT_DMP_EN;
1732:task/attitude/eMPL/inv_mpu.c ****     else
1733:task/attitude/eMPL/inv_mpu.c ****         user_ctrl &= ~BIT_DMP_EN;
1734:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_do, 1, &data))
1735:task/attitude/eMPL/inv_mpu.c ****         return -1;
1736:task/attitude/eMPL/inv_mpu.c ****     /* Enable/disable I2C master mode. */
1737:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &user_ctrl))
1738:task/attitude/eMPL/inv_mpu.c ****         return -1;
1739:task/attitude/eMPL/inv_mpu.c **** #endif
1740:task/attitude/eMPL/inv_mpu.c **** #endif
1741:task/attitude/eMPL/inv_mpu.c **** 
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 32


1742:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = sensors;
1743:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 0;
1744:task/attitude/eMPL/inv_mpu.c ****     delay_ms(50);
1745:task/attitude/eMPL/inv_mpu.c ****     return 0;
1746:task/attitude/eMPL/inv_mpu.c **** }
1747:task/attitude/eMPL/inv_mpu.c **** 
1748:task/attitude/eMPL/inv_mpu.c **** /**
1749:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read the MPU interrupt status registers.
1750:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] status  Mask of interrupt bits.
1751:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1752:task/attitude/eMPL/inv_mpu.c ****  */
1753:task/attitude/eMPL/inv_mpu.c **** int mpu_get_int_status(short *status)
1754:task/attitude/eMPL/inv_mpu.c **** {
1755:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
1756:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
1757:task/attitude/eMPL/inv_mpu.c ****         return -1;
1758:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->dmp_int_status, 2, tmp))
1759:task/attitude/eMPL/inv_mpu.c ****         return -1;
1760:task/attitude/eMPL/inv_mpu.c ****     status[0] = (tmp[0] << 8) | tmp[1];
1761:task/attitude/eMPL/inv_mpu.c ****     return 0;
1762:task/attitude/eMPL/inv_mpu.c **** }
1763:task/attitude/eMPL/inv_mpu.c **** 
1764:task/attitude/eMPL/inv_mpu.c **** /**
1765:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get one packet from the FIFO.
1766:task/attitude/eMPL/inv_mpu.c ****  *  If @e sensors does not contain a particular sensor, disregard the data
1767:task/attitude/eMPL/inv_mpu.c ****  *  returned to that pointer.
1768:task/attitude/eMPL/inv_mpu.c ****  *  \n @e sensors can contain a combination of the following flags:
1769:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_X_GYRO, INV_Y_GYRO, INV_Z_GYRO
1770:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_GYRO
1771:task/attitude/eMPL/inv_mpu.c ****  *  \n INV_XYZ_ACCEL
1772:task/attitude/eMPL/inv_mpu.c ****  *  \n If the FIFO has no new data, @e sensors will be zero.
1773:task/attitude/eMPL/inv_mpu.c ****  *  \n If the FIFO is disabled, @e sensors will be zero and this function will
1774:task/attitude/eMPL/inv_mpu.c ****  *  return a non-zero error code.
1775:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] gyro        Gyro data in hardware units.
1776:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] accel       Accel data in hardware units.
1777:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds.
1778:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] sensors     Mask of sensors read from FIFO.
1779:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] more        Number of remaining packets.
1780:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1781:task/attitude/eMPL/inv_mpu.c ****  */
1782:task/attitude/eMPL/inv_mpu.c **** int mpu_read_fifo(short *gyro, short *accel, unsigned long *timestamp,
1783:task/attitude/eMPL/inv_mpu.c ****                   unsigned char *sensors, unsigned char *more)
1784:task/attitude/eMPL/inv_mpu.c **** {
1785:task/attitude/eMPL/inv_mpu.c ****     /* Assumes maximum packet size is gyro (6) + accel (6). */
1786:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[MAX_PACKET_LENGTH];
1787:task/attitude/eMPL/inv_mpu.c ****     unsigned char packet_size = 0;
1788:task/attitude/eMPL/inv_mpu.c ****     unsigned short fifo_count, index = 0;
1789:task/attitude/eMPL/inv_mpu.c **** 
1790:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
1791:task/attitude/eMPL/inv_mpu.c ****         return -1;
1792:task/attitude/eMPL/inv_mpu.c **** 
1793:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = 0;
1794:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
1795:task/attitude/eMPL/inv_mpu.c ****         return -1;
1796:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.fifo_enable)
1797:task/attitude/eMPL/inv_mpu.c ****         return -1;
1798:task/attitude/eMPL/inv_mpu.c **** 
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 33


1799:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_X_GYRO)
1800:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
1801:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_Y_GYRO)
1802:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
1803:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_Z_GYRO)
1804:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
1805:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
1806:task/attitude/eMPL/inv_mpu.c ****         packet_size += 6;
1807:task/attitude/eMPL/inv_mpu.c **** 
1808:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, data))
1809:task/attitude/eMPL/inv_mpu.c ****         return -1;
1810:task/attitude/eMPL/inv_mpu.c ****     fifo_count = (data[0] << 8) | data[1];
1811:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < packet_size)
1812:task/attitude/eMPL/inv_mpu.c ****         return 0;
1813:task/attitude/eMPL/inv_mpu.c ****     //    log_i("FIFO count: %hd\n", fifo_count);
1814:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count > (st.hw->max_fifo >> 1))
1815:task/attitude/eMPL/inv_mpu.c ****     {
1816:task/attitude/eMPL/inv_mpu.c ****         /* FIFO is 50% full, better check overflow bit. */
1817:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->int_status, 1, data))
1818:task/attitude/eMPL/inv_mpu.c ****             return -1;
1819:task/attitude/eMPL/inv_mpu.c ****         if (data[0] & BIT_FIFO_OVERFLOW)
1820:task/attitude/eMPL/inv_mpu.c ****         {
1821:task/attitude/eMPL/inv_mpu.c ****             mpu_reset_fifo();
1822:task/attitude/eMPL/inv_mpu.c ****             return -2;
1823:task/attitude/eMPL/inv_mpu.c ****         }
1824:task/attitude/eMPL/inv_mpu.c ****     }
1825:task/attitude/eMPL/inv_mpu.c ****     get_ms((unsigned long *)timestamp);
1826:task/attitude/eMPL/inv_mpu.c **** 
1827:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->fifo_r_w, packet_size, data))
1828:task/attitude/eMPL/inv_mpu.c ****         return -1;
1829:task/attitude/eMPL/inv_mpu.c ****     more[0] = fifo_count / packet_size - 1;
1830:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = 0;
1831:task/attitude/eMPL/inv_mpu.c **** 
1832:task/attitude/eMPL/inv_mpu.c ****     if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
1833:task/attitude/eMPL/inv_mpu.c ****     {
1834:task/attitude/eMPL/inv_mpu.c ****         accel[0] = (data[index + 0] << 8) | data[index + 1];
1835:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (data[index + 2] << 8) | data[index + 3];
1836:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (data[index + 4] << 8) | data[index + 5];
1837:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_XYZ_ACCEL;
1838:task/attitude/eMPL/inv_mpu.c ****         index += 6;
1839:task/attitude/eMPL/inv_mpu.c ****     }
1840:task/attitude/eMPL/inv_mpu.c ****     if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_X_GYRO)
1841:task/attitude/eMPL/inv_mpu.c ****     {
1842:task/attitude/eMPL/inv_mpu.c ****         gyro[0] = (data[index + 0] << 8) | data[index + 1];
1843:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
1844:task/attitude/eMPL/inv_mpu.c ****         index += 2;
1845:task/attitude/eMPL/inv_mpu.c ****     }
1846:task/attitude/eMPL/inv_mpu.c ****     if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_Y_GYRO)
1847:task/attitude/eMPL/inv_mpu.c ****     {
1848:task/attitude/eMPL/inv_mpu.c ****         gyro[1] = (data[index + 0] << 8) | data[index + 1];
1849:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
1850:task/attitude/eMPL/inv_mpu.c ****         index += 2;
1851:task/attitude/eMPL/inv_mpu.c ****     }
1852:task/attitude/eMPL/inv_mpu.c ****     if ((index != packet_size) && st.chip_cfg.fifo_enable & INV_Z_GYRO)
1853:task/attitude/eMPL/inv_mpu.c ****     {
1854:task/attitude/eMPL/inv_mpu.c ****         gyro[2] = (data[index + 0] << 8) | data[index + 1];
1855:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 34


1856:task/attitude/eMPL/inv_mpu.c ****         index += 2;
1857:task/attitude/eMPL/inv_mpu.c ****     }
1858:task/attitude/eMPL/inv_mpu.c **** 
1859:task/attitude/eMPL/inv_mpu.c ****     return 0;
1860:task/attitude/eMPL/inv_mpu.c **** }
1861:task/attitude/eMPL/inv_mpu.c **** 
1862:task/attitude/eMPL/inv_mpu.c **** /**
1863:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get one unparsed packet from the FIFO.
1864:task/attitude/eMPL/inv_mpu.c ****  *  This function should be used if the packet is to be parsed elsewhere.
1865:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  length  Length of one FIFO packet.
1866:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  data    FIFO packet.
1867:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  more    Number of remaining packets.
1868:task/attitude/eMPL/inv_mpu.c ****  */
1869:task/attitude/eMPL/inv_mpu.c **** int mpu_read_fifo_stream(unsigned short length, unsigned char *data,
1870:task/attitude/eMPL/inv_mpu.c ****                          unsigned char *more)
1871:task/attitude/eMPL/inv_mpu.c **** {
1872:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
1873:task/attitude/eMPL/inv_mpu.c ****     unsigned short fifo_count;
1874:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.dmp_on)
1875:task/attitude/eMPL/inv_mpu.c ****         return -1;
1876:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
1877:task/attitude/eMPL/inv_mpu.c ****         return -1;
1878:task/attitude/eMPL/inv_mpu.c **** 
1879:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, tmp))
1880:task/attitude/eMPL/inv_mpu.c ****         return -1;
1881:task/attitude/eMPL/inv_mpu.c ****     fifo_count = (tmp[0] << 8) | tmp[1];
1882:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < length)
1883:task/attitude/eMPL/inv_mpu.c ****     {
1884:task/attitude/eMPL/inv_mpu.c ****         more[0] = 0;
1885:task/attitude/eMPL/inv_mpu.c ****         return -1;
1886:task/attitude/eMPL/inv_mpu.c ****     }
1887:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count > (st.hw->max_fifo >> 1))
1888:task/attitude/eMPL/inv_mpu.c ****     {
1889:task/attitude/eMPL/inv_mpu.c ****         /* FIFO is 50% full, better check overflow bit. */
1890:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->int_status, 1, tmp))
1891:task/attitude/eMPL/inv_mpu.c ****             return -1;
1892:task/attitude/eMPL/inv_mpu.c ****         if (tmp[0] & BIT_FIFO_OVERFLOW)
1893:task/attitude/eMPL/inv_mpu.c ****         {
1894:task/attitude/eMPL/inv_mpu.c ****             mpu_reset_fifo();
1895:task/attitude/eMPL/inv_mpu.c ****             return -2;
1896:task/attitude/eMPL/inv_mpu.c ****         }
1897:task/attitude/eMPL/inv_mpu.c ****     }
1898:task/attitude/eMPL/inv_mpu.c **** 
1899:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->fifo_r_w, length, data))
1900:task/attitude/eMPL/inv_mpu.c ****         return -1;
1901:task/attitude/eMPL/inv_mpu.c ****     more[0] = fifo_count / length - 1;
1902:task/attitude/eMPL/inv_mpu.c ****     return 0;
1903:task/attitude/eMPL/inv_mpu.c **** }
1904:task/attitude/eMPL/inv_mpu.c **** 
1905:task/attitude/eMPL/inv_mpu.c **** /**
1906:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set device to bypass mode.
1907:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  bypass_on   1 to enable bypass mode.
1908:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1909:task/attitude/eMPL/inv_mpu.c ****  */
1910:task/attitude/eMPL/inv_mpu.c **** int mpu_set_bypass(unsigned char bypass_on)
1911:task/attitude/eMPL/inv_mpu.c **** {
1912:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 35


1913:task/attitude/eMPL/inv_mpu.c **** 
1914:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.bypass_mode == bypass_on)
1915:task/attitude/eMPL/inv_mpu.c ****         return 0;
1916:task/attitude/eMPL/inv_mpu.c **** 
1917:task/attitude/eMPL/inv_mpu.c ****     if (bypass_on)
1918:task/attitude/eMPL/inv_mpu.c ****     {
1919:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1920:task/attitude/eMPL/inv_mpu.c ****             return -1;
1921:task/attitude/eMPL/inv_mpu.c ****         tmp &= ~BIT_AUX_IF_EN;
1922:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1923:task/attitude/eMPL/inv_mpu.c ****             return -1;
1924:task/attitude/eMPL/inv_mpu.c ****         delay_ms(3);
1925:task/attitude/eMPL/inv_mpu.c ****         tmp = BIT_BYPASS_EN;
1926:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.active_low_int)
1927:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_ACTL;
1928:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.latched_int)
1929:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
1930:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
1931:task/attitude/eMPL/inv_mpu.c ****             return -1;
1932:task/attitude/eMPL/inv_mpu.c ****     }
1933:task/attitude/eMPL/inv_mpu.c ****     else
1934:task/attitude/eMPL/inv_mpu.c ****     {
1935:task/attitude/eMPL/inv_mpu.c ****         /* Enable I2C master mode if compass is being used. */
1936:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1937:task/attitude/eMPL/inv_mpu.c ****             return -1;
1938:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
1939:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_AUX_IF_EN;
1940:task/attitude/eMPL/inv_mpu.c ****         else
1941:task/attitude/eMPL/inv_mpu.c ****             tmp &= ~BIT_AUX_IF_EN;
1942:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
1943:task/attitude/eMPL/inv_mpu.c ****             return -1;
1944:task/attitude/eMPL/inv_mpu.c ****         delay_ms(3);
1945:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.active_low_int)
1946:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_ACTL;
1947:task/attitude/eMPL/inv_mpu.c ****         else
1948:task/attitude/eMPL/inv_mpu.c ****             tmp = 0;
1949:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.latched_int)
1950:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
1951:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
1952:task/attitude/eMPL/inv_mpu.c ****             return -1;
1953:task/attitude/eMPL/inv_mpu.c ****     }
1954:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.bypass_mode = bypass_on;
1955:task/attitude/eMPL/inv_mpu.c ****     return 0;
1956:task/attitude/eMPL/inv_mpu.c **** }
1957:task/attitude/eMPL/inv_mpu.c **** 
1958:task/attitude/eMPL/inv_mpu.c **** /**
1959:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Set interrupt level.
1960:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  active_low  1 for active low, 0 for active high.
1961:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1962:task/attitude/eMPL/inv_mpu.c ****  */
1963:task/attitude/eMPL/inv_mpu.c **** int mpu_set_int_level(unsigned char active_low)
1964:task/attitude/eMPL/inv_mpu.c **** {
1965:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.active_low_int = active_low;
1966:task/attitude/eMPL/inv_mpu.c ****     return 0;
1967:task/attitude/eMPL/inv_mpu.c **** }
1968:task/attitude/eMPL/inv_mpu.c **** 
1969:task/attitude/eMPL/inv_mpu.c **** /**
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 36


1970:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Enable latched interrupts.
1971:task/attitude/eMPL/inv_mpu.c ****  *  Any MPU register will clear the interrupt.
1972:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  enable  1 to enable, 0 to disable.
1973:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
1974:task/attitude/eMPL/inv_mpu.c ****  */
1975:task/attitude/eMPL/inv_mpu.c **** int mpu_set_int_latched(unsigned char enable)
1976:task/attitude/eMPL/inv_mpu.c **** {
1977:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
1978:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.latched_int == enable)
1979:task/attitude/eMPL/inv_mpu.c ****         return 0;
1980:task/attitude/eMPL/inv_mpu.c **** 
1981:task/attitude/eMPL/inv_mpu.c ****     if (enable)
1982:task/attitude/eMPL/inv_mpu.c ****         tmp = BIT_LATCH_EN | BIT_ANY_RD_CLR;
1983:task/attitude/eMPL/inv_mpu.c ****     else
1984:task/attitude/eMPL/inv_mpu.c ****         tmp = 0;
1985:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.bypass_mode)
1986:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_BYPASS_EN;
1987:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.active_low_int)
1988:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_ACTL;
1989:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
1990:task/attitude/eMPL/inv_mpu.c ****         return -1;
1991:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.latched_int = enable;
1992:task/attitude/eMPL/inv_mpu.c ****     return 0;
1993:task/attitude/eMPL/inv_mpu.c **** }
1994:task/attitude/eMPL/inv_mpu.c **** 
1995:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6050
1996:task/attitude/eMPL/inv_mpu.c **** static int get_accel_prod_shift(float *st_shift)
1997:task/attitude/eMPL/inv_mpu.c **** {
  28              		.loc 1 1997 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 1997 1 is_stmt 0 view .LVU1
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 82B0     		sub	sp, sp, #8
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 24
  43 0004 0646     		mov	r6, r0
1998:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[4], shift_code[3], ii;
  44              		.loc 1 1998 5 is_stmt 1 view .LVU2
1999:task/attitude/eMPL/inv_mpu.c **** 
2000:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x0D, 4, tmp))
  45              		.loc 1 2000 5 view .LVU3
  46              		.loc 1 2000 20 is_stmt 0 view .LVU4
  47 0006 2B4B     		ldr	r3, .L11
  48 0008 5868     		ldr	r0, [r3, #4]
  49              	.LVL1:
  50              		.loc 1 2000 9 view .LVU5
  51 000a 01AB     		add	r3, sp, #4
  52 000c 0422     		movs	r2, #4
  53 000e 0D21     		movs	r1, #13
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 37


  54 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  55 0012 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
  56              	.LVL2:
  57              		.loc 1 2000 8 view .LVU6
  58 0016 0028     		cmp	r0, #0
  59 0018 48D1     		bne	.L9
2001:task/attitude/eMPL/inv_mpu.c ****         return 0x07;
2002:task/attitude/eMPL/inv_mpu.c **** 
2003:task/attitude/eMPL/inv_mpu.c ****     shift_code[0] = ((tmp[0] & 0xE0) >> 3) | ((tmp[3] & 0x30) >> 4);
  60              		.loc 1 2003 5 is_stmt 1 view .LVU7
  61              		.loc 1 2003 26 is_stmt 0 view .LVU8
  62 001a 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
  63              		.loc 1 2003 38 view .LVU9
  64 001e D210     		asrs	r2, r2, #3
  65 0020 02F01C02 		and	r2, r2, #28
  66              		.loc 1 2003 51 view .LVU10
  67 0024 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
  68              		.loc 1 2003 63 view .LVU11
  69 0028 C1F30113 		ubfx	r3, r1, #4, #2
  70              		.loc 1 2003 44 view .LVU12
  71 002c 1A43     		orrs	r2, r2, r3
  72              		.loc 1 2003 19 view .LVU13
  73 002e 8DF80020 		strb	r2, [sp]
2004:task/attitude/eMPL/inv_mpu.c ****     shift_code[1] = ((tmp[1] & 0xE0) >> 3) | ((tmp[3] & 0x0C) >> 2);
  74              		.loc 1 2004 5 is_stmt 1 view .LVU14
  75              		.loc 1 2004 26 is_stmt 0 view .LVU15
  76 0032 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
  77              		.loc 1 2004 38 view .LVU16
  78 0036 D210     		asrs	r2, r2, #3
  79 0038 02F01C02 		and	r2, r2, #28
  80              		.loc 1 2004 63 view .LVU17
  81 003c C1F38103 		ubfx	r3, r1, #2, #2
  82              		.loc 1 2004 44 view .LVU18
  83 0040 1A43     		orrs	r2, r2, r3
  84              		.loc 1 2004 19 view .LVU19
  85 0042 8DF80120 		strb	r2, [sp, #1]
2005:task/attitude/eMPL/inv_mpu.c ****     shift_code[2] = ((tmp[2] & 0xE0) >> 3) | (tmp[3] & 0x03);
  86              		.loc 1 2005 5 is_stmt 1 view .LVU20
  87              		.loc 1 2005 26 is_stmt 0 view .LVU21
  88 0046 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
  89              		.loc 1 2005 38 view .LVU22
  90 004a DB10     		asrs	r3, r3, #3
  91 004c 03F01C03 		and	r3, r3, #28
  92              		.loc 1 2005 54 view .LVU23
  93 0050 01F00301 		and	r1, r1, #3
  94              		.loc 1 2005 44 view .LVU24
  95 0054 0B43     		orrs	r3, r3, r1
  96              		.loc 1 2005 19 view .LVU25
  97 0056 8DF80230 		strb	r3, [sp, #2]
2006:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < 3; ii++)
  98              		.loc 1 2006 5 is_stmt 1 view .LVU26
  99              	.LVL3:
 100              		.loc 1 2006 13 is_stmt 0 view .LVU27
 101 005a 0021     		movs	r1, #0
 102              		.loc 1 2006 5 view .LVU28
 103 005c 18E0     		b	.L3
 104              	.LVL4:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 38


 105              	.L4:
2007:task/attitude/eMPL/inv_mpu.c ****     {
2008:task/attitude/eMPL/inv_mpu.c ****         if (!shift_code[ii])
2009:task/attitude/eMPL/inv_mpu.c ****         {
2010:task/attitude/eMPL/inv_mpu.c ****             st_shift[ii] = 0.f;
2011:task/attitude/eMPL/inv_mpu.c ****             continue;
2012:task/attitude/eMPL/inv_mpu.c ****         }
2013:task/attitude/eMPL/inv_mpu.c ****         /* Equivalent to..
2014:task/attitude/eMPL/inv_mpu.c ****          * st_shift[ii] = 0.34f * powf(0.92f/0.34f, (shift_code[ii]-1) / 30.f)
2015:task/attitude/eMPL/inv_mpu.c ****          */
2016:task/attitude/eMPL/inv_mpu.c ****         st_shift[ii] = 0.34f;
 106              		.loc 1 2016 9 is_stmt 1 view .LVU29
 107              		.loc 1 2016 17 is_stmt 0 view .LVU30
 108 005e 06EB8104 		add	r4, r6, r1, lsl #2
 109              		.loc 1 2016 22 view .LVU31
 110 0062 154B     		ldr	r3, .L11+4
 111 0064 2360     		str	r3, [r4]	@ float
2017:task/attitude/eMPL/inv_mpu.c ****         while (--shift_code[ii])
 112              		.loc 1 2017 9 is_stmt 1 view .LVU32
 113              		.loc 1 2017 15 is_stmt 0 view .LVU33
 114 0066 07E0     		b	.L6
 115              	.L7:
2018:task/attitude/eMPL/inv_mpu.c ****             st_shift[ii] *= 1.034f;
 116              		.loc 1 2018 13 is_stmt 1 view .LVU34
 117              		.loc 1 2018 26 is_stmt 0 view .LVU35
 118 0068 D4ED007A 		vldr.32	s15, [r4]
 119 006c 9FED137A 		vldr.32	s14, .L11+8
 120 0070 67EE877A 		vmul.f32	s15, s15, s14
 121 0074 C4ED007A 		vstr.32	s15, [r4]
 122              	.L6:
2017:task/attitude/eMPL/inv_mpu.c ****         while (--shift_code[ii])
 123              		.loc 1 2017 15 is_stmt 1 view .LVU36
2017:task/attitude/eMPL/inv_mpu.c ****         while (--shift_code[ii])
 124              		.loc 1 2017 28 is_stmt 0 view .LVU37
 125 0078 02AB     		add	r3, sp, #8
 126 007a 5A19     		adds	r2, r3, r5
 127 007c 12F8083C 		ldrb	r3, [r2, #-8]	@ zero_extendqisi2
2017:task/attitude/eMPL/inv_mpu.c ****         while (--shift_code[ii])
 128              		.loc 1 2017 16 view .LVU38
 129 0080 013B     		subs	r3, r3, #1
 130 0082 DBB2     		uxtb	r3, r3
2017:task/attitude/eMPL/inv_mpu.c ****         while (--shift_code[ii])
 131              		.loc 1 2017 15 view .LVU39
 132 0084 02F8083C 		strb	r3, [r2, #-8]
 133 0088 002B     		cmp	r3, #0
 134 008a EDD1     		bne	.L7
 135              	.L5:
2006:task/attitude/eMPL/inv_mpu.c ****     {
 136              		.loc 1 2006 26 is_stmt 1 discriminator 2 view .LVU40
2006:task/attitude/eMPL/inv_mpu.c ****     {
 137              		.loc 1 2006 28 is_stmt 0 discriminator 2 view .LVU41
 138 008c 0131     		adds	r1, r1, #1
 139              	.LVL5:
2006:task/attitude/eMPL/inv_mpu.c ****     {
 140              		.loc 1 2006 28 discriminator 2 view .LVU42
 141 008e C9B2     		uxtb	r1, r1
 142              	.LVL6:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 39


 143              	.L3:
2006:task/attitude/eMPL/inv_mpu.c ****     {
 144              		.loc 1 2006 18 is_stmt 1 discriminator 1 view .LVU43
2006:task/attitude/eMPL/inv_mpu.c ****     {
 145              		.loc 1 2006 5 is_stmt 0 discriminator 1 view .LVU44
 146 0090 0229     		cmp	r1, #2
 147 0092 0CD8     		bhi	.L1
2008:task/attitude/eMPL/inv_mpu.c ****         {
 148              		.loc 1 2008 9 is_stmt 1 view .LVU45
2008:task/attitude/eMPL/inv_mpu.c ****         {
 149              		.loc 1 2008 24 is_stmt 0 view .LVU46
 150 0094 0D46     		mov	r5, r1
 151 0096 02AB     		add	r3, sp, #8
 152 0098 0B44     		add	r3, r3, r1
 153 009a 13F8083C 		ldrb	r3, [r3, #-8]	@ zero_extendqisi2
2008:task/attitude/eMPL/inv_mpu.c ****         {
 154              		.loc 1 2008 12 view .LVU47
 155 009e 002B     		cmp	r3, #0
 156 00a0 DDD1     		bne	.L4
2010:task/attitude/eMPL/inv_mpu.c ****             continue;
 157              		.loc 1 2010 13 is_stmt 1 view .LVU48
2010:task/attitude/eMPL/inv_mpu.c ****             continue;
 158              		.loc 1 2010 21 is_stmt 0 view .LVU49
 159 00a2 06EB8103 		add	r3, r6, r1, lsl #2
2010:task/attitude/eMPL/inv_mpu.c ****             continue;
 160              		.loc 1 2010 26 view .LVU50
 161 00a6 0022     		movs	r2, #0
 162 00a8 1A60     		str	r2, [r3]	@ float
2011:task/attitude/eMPL/inv_mpu.c ****         }
 163              		.loc 1 2011 13 is_stmt 1 view .LVU51
 164 00aa EFE7     		b	.L5
 165              	.LVL7:
 166              	.L9:
2001:task/attitude/eMPL/inv_mpu.c **** 
 167              		.loc 1 2001 16 is_stmt 0 view .LVU52
 168 00ac 0720     		movs	r0, #7
 169              	.L1:
2019:task/attitude/eMPL/inv_mpu.c ****     }
2020:task/attitude/eMPL/inv_mpu.c ****     return 0;
2021:task/attitude/eMPL/inv_mpu.c **** }
 170              		.loc 1 2021 1 view .LVU53
 171 00ae 02B0     		add	sp, sp, #8
 172              	.LCFI2:
 173              		.cfi_def_cfa_offset 16
 174              		@ sp needed
 175 00b0 70BD     		pop	{r4, r5, r6, pc}
 176              	.LVL8:
 177              	.L12:
 178              		.loc 1 2021 1 view .LVU54
 179 00b2 00BF     		.align	2
 180              	.L11:
 181 00b4 00000000 		.word	.LANCHOR0
 182 00b8 7B14AE3E 		.word	1051595899
 183 00bc 1D5A843F 		.word	1065638429
 184              		.cfi_endproc
 185              	.LFE185:
 187              		.section	.text.accel_self_test,"ax",%progbits
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 40


 188              		.align	1
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 192              		.fpu fpv5-d16
 194              	accel_self_test:
 195              	.LVL9:
 196              	.LFB186:
2022:task/attitude/eMPL/inv_mpu.c **** 
2023:task/attitude/eMPL/inv_mpu.c **** static int accel_self_test(long *bias_regular, long *bias_st)
2024:task/attitude/eMPL/inv_mpu.c **** {
 197              		.loc 1 2024 1 is_stmt 1 view -0
 198              		.cfi_startproc
 199              		@ args = 0, pretend = 0, frame = 16
 200              		@ frame_needed = 0, uses_anonymous_args = 0
 201              		.loc 1 2024 1 is_stmt 0 view .LVU56
 202 0000 30B5     		push	{r4, r5, lr}
 203              	.LCFI3:
 204              		.cfi_def_cfa_offset 12
 205              		.cfi_offset 4, -12
 206              		.cfi_offset 5, -8
 207              		.cfi_offset 14, -4
 208 0002 85B0     		sub	sp, sp, #20
 209              	.LCFI4:
 210              		.cfi_def_cfa_offset 32
 211 0004 0546     		mov	r5, r0
 212 0006 0C46     		mov	r4, r1
2025:task/attitude/eMPL/inv_mpu.c ****     int jj, result = 0;
 213              		.loc 1 2025 5 is_stmt 1 view .LVU57
 214              	.LVL10:
2026:task/attitude/eMPL/inv_mpu.c ****     float st_shift[3], st_shift_cust, st_shift_var;
 215              		.loc 1 2026 5 view .LVU58
2027:task/attitude/eMPL/inv_mpu.c **** 
2028:task/attitude/eMPL/inv_mpu.c ****     get_accel_prod_shift(st_shift);
 216              		.loc 1 2028 5 view .LVU59
 217 0008 01A8     		add	r0, sp, #4
 218              	.LVL11:
 219              		.loc 1 2028 5 is_stmt 0 view .LVU60
 220 000a FFF7FEFF 		bl	get_accel_prod_shift
 221              	.LVL12:
2029:task/attitude/eMPL/inv_mpu.c ****     for (jj = 0; jj < 3; jj++)
 222              		.loc 1 2029 5 is_stmt 1 view .LVU61
2025:task/attitude/eMPL/inv_mpu.c ****     float st_shift[3], st_shift_cust, st_shift_var;
 223              		.loc 1 2025 13 is_stmt 0 view .LVU62
 224 000e 0020     		movs	r0, #0
 225              		.loc 1 2029 13 view .LVU63
 226 0010 0246     		mov	r2, r0
 227              		.loc 1 2029 5 view .LVU64
 228 0012 11E0     		b	.L14
 229              	.LVL13:
 230              	.L15:
2030:task/attitude/eMPL/inv_mpu.c ****     {
2031:task/attitude/eMPL/inv_mpu.c ****         st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
2032:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
2033:task/attitude/eMPL/inv_mpu.c ****         {
2034:task/attitude/eMPL/inv_mpu.c ****             st_shift_var = st_shift_cust / st_shift[jj] - 1.f;
2035:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_var) > test.max_accel_var)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 41


2036:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << jj;
2037:task/attitude/eMPL/inv_mpu.c ****         }
2038:task/attitude/eMPL/inv_mpu.c ****         else if ((st_shift_cust < test.min_g) ||
 231              		.loc 1 2038 14 is_stmt 1 view .LVU65
 232              		.loc 1 2038 17 is_stmt 0 view .LVU66
 233 0014 9FED217A 		vldr.32	s14, .L24
 234 0018 F4EEC77A 		vcmpe.f32	s15, s14
 235 001c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 236 0020 06D4     		bmi	.L18
 237              		.loc 1 2038 47 discriminator 1 view .LVU67
 238 0022 9FED1F7A 		vldr.32	s14, .L24+4
 239 0026 F4EEC77A 		vcmpe.f32	s15, s14
 240 002a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 241 002e 02DD     		ble	.L16
 242              	.L18:
2039:task/attitude/eMPL/inv_mpu.c ****                  (st_shift_cust > test.max_g))
2040:task/attitude/eMPL/inv_mpu.c ****             result |= 1 << jj;
 243              		.loc 1 2040 13 is_stmt 1 view .LVU68
 244              		.loc 1 2040 25 is_stmt 0 view .LVU69
 245 0030 0123     		movs	r3, #1
 246 0032 9340     		lsls	r3, r3, r2
 247              		.loc 1 2040 20 view .LVU70
 248 0034 1843     		orrs	r0, r0, r3
 249              	.LVL14:
 250              	.L16:
2029:task/attitude/eMPL/inv_mpu.c ****     {
 251              		.loc 1 2029 26 is_stmt 1 discriminator 2 view .LVU71
2029:task/attitude/eMPL/inv_mpu.c ****     {
 252              		.loc 1 2029 28 is_stmt 0 discriminator 2 view .LVU72
 253 0036 0132     		adds	r2, r2, #1
 254              	.LVL15:
 255              	.L14:
2029:task/attitude/eMPL/inv_mpu.c ****     {
 256              		.loc 1 2029 18 is_stmt 1 discriminator 1 view .LVU73
2029:task/attitude/eMPL/inv_mpu.c ****     {
 257              		.loc 1 2029 5 is_stmt 0 discriminator 1 view .LVU74
 258 0038 022A     		cmp	r2, #2
 259 003a 2CDC     		bgt	.L23
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 260              		.loc 1 2031 9 is_stmt 1 view .LVU75
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 261              		.loc 1 2031 42 is_stmt 0 view .LVU76
 262 003c 55F82230 		ldr	r3, [r5, r2, lsl #2]
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 263              		.loc 1 2031 56 view .LVU77
 264 0040 54F82210 		ldr	r1, [r4, r2, lsl #2]
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 265              		.loc 1 2031 47 view .LVU78
 266 0044 5B1A     		subs	r3, r3, r1
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 267              		.loc 1 2031 25 view .LVU79
 268 0046 002B     		cmp	r3, #0
 269 0048 B8BF     		it	lt
 270 004a 5B42     		rsblt	r3, r3, #0
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 271              		.loc 1 2031 62 view .LVU80
 272 004c 07EE903A 		vmov	s15, r3	@ int
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 42


 273 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
2031:task/attitude/eMPL/inv_mpu.c ****         if (st_shift[jj])
 274              		.loc 1 2031 23 view .LVU81
 275 0054 9FED137A 		vldr.32	s14, .L24+8
 276 0058 67EE877A 		vmul.f32	s15, s15, s14
 277              	.LVL16:
2032:task/attitude/eMPL/inv_mpu.c ****         {
 278              		.loc 1 2032 9 is_stmt 1 view .LVU82
2032:task/attitude/eMPL/inv_mpu.c ****         {
 279              		.loc 1 2032 21 is_stmt 0 view .LVU83
 280 005c 04AB     		add	r3, sp, #16
 281 005e 03EB8203 		add	r3, r3, r2, lsl #2
 282 0062 53ED036A 		vldr.32	s13, [r3, #-12]
2032:task/attitude/eMPL/inv_mpu.c ****         {
 283              		.loc 1 2032 12 view .LVU84
 284 0066 F5EE406A 		vcmp.f32	s13, #0
 285 006a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 286 006e D1D0     		beq	.L15
2034:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_var) > test.max_accel_var)
 287              		.loc 1 2034 13 is_stmt 1 view .LVU85
2034:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_var) > test.max_accel_var)
 288              		.loc 1 2034 42 is_stmt 0 view .LVU86
 289 0070 87EEA67A 		vdiv.f32	s14, s15, s13
2034:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_var) > test.max_accel_var)
 290              		.loc 1 2034 26 view .LVU87
 291 0074 F7EE007A 		vmov.f32	s15, #1.0e+0
 292              	.LVL17:
2034:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_var) > test.max_accel_var)
 293              		.loc 1 2034 26 view .LVU88
 294 0078 77EE677A 		vsub.f32	s15, s14, s15
 295              	.LVL18:
2035:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << jj;
 296              		.loc 1 2035 13 is_stmt 1 view .LVU89
2035:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << jj;
 297              		.loc 1 2035 17 is_stmt 0 view .LVU90
 298 007c F0EEE77A 		vabs.f32	s15, s15
 299              	.LVL19:
2035:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << jj;
 300              		.loc 1 2035 16 view .LVU91
 301 0080 9FED097A 		vldr.32	s14, .L24+12
 302              	.LVL20:
2035:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << jj;
 303              		.loc 1 2035 16 view .LVU92
 304 0084 F4EEC77A 		vcmpe.f32	s15, s14
 305 0088 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 306 008c D3DD     		ble	.L16
2036:task/attitude/eMPL/inv_mpu.c ****         }
 307              		.loc 1 2036 17 is_stmt 1 view .LVU93
2036:task/attitude/eMPL/inv_mpu.c ****         }
 308              		.loc 1 2036 29 is_stmt 0 view .LVU94
 309 008e 0123     		movs	r3, #1
 310 0090 9340     		lsls	r3, r3, r2
2036:task/attitude/eMPL/inv_mpu.c ****         }
 311              		.loc 1 2036 24 view .LVU95
 312 0092 1843     		orrs	r0, r0, r3
 313              	.LVL21:
2036:task/attitude/eMPL/inv_mpu.c ****         }
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 43


 314              		.loc 1 2036 24 view .LVU96
 315 0094 CFE7     		b	.L16
 316              	.LVL22:
 317              	.L23:
2041:task/attitude/eMPL/inv_mpu.c ****     }
2042:task/attitude/eMPL/inv_mpu.c **** 
2043:task/attitude/eMPL/inv_mpu.c ****     return result;
2044:task/attitude/eMPL/inv_mpu.c **** }
 318              		.loc 1 2044 1 view .LVU97
 319 0096 05B0     		add	sp, sp, #20
 320              	.LCFI5:
 321              		.cfi_def_cfa_offset 12
 322              		@ sp needed
 323 0098 30BD     		pop	{r4, r5, pc}
 324              	.LVL23:
 325              	.L25:
 326              		.loc 1 2044 1 view .LVU98
 327 009a 00BF     		.align	2
 328              	.L24:
 329 009c 9A99993E 		.word	1050253722
 330 00a0 3333733F 		.word	1064514355
 331 00a4 00008037 		.word	931135488
 332 00a8 295C0F3E 		.word	1041194025
 333              		.cfi_endproc
 334              	.LFE186:
 336              		.section	.text.gyro_self_test,"ax",%progbits
 337              		.align	1
 338              		.syntax unified
 339              		.thumb
 340              		.thumb_func
 341              		.fpu fpv5-d16
 343              	gyro_self_test:
 344              	.LVL24:
 345              	.LFB187:
2045:task/attitude/eMPL/inv_mpu.c **** 
2046:task/attitude/eMPL/inv_mpu.c **** static int gyro_self_test(long *bias_regular, long *bias_st)
2047:task/attitude/eMPL/inv_mpu.c **** {
 346              		.loc 1 2047 1 is_stmt 1 view -0
 347              		.cfi_startproc
 348              		@ args = 0, pretend = 0, frame = 8
 349              		@ frame_needed = 0, uses_anonymous_args = 0
 350              		.loc 1 2047 1 is_stmt 0 view .LVU100
 351 0000 30B5     		push	{r4, r5, lr}
 352              	.LCFI6:
 353              		.cfi_def_cfa_offset 12
 354              		.cfi_offset 4, -12
 355              		.cfi_offset 5, -8
 356              		.cfi_offset 14, -4
 357 0002 83B0     		sub	sp, sp, #12
 358              	.LCFI7:
 359              		.cfi_def_cfa_offset 24
 360 0004 0446     		mov	r4, r0
 361 0006 0D46     		mov	r5, r1
2048:task/attitude/eMPL/inv_mpu.c ****     int jj, result = 0;
 362              		.loc 1 2048 5 is_stmt 1 view .LVU101
 363              	.LVL25:
2049:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[3];
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 44


 364              		.loc 1 2049 5 view .LVU102
2050:task/attitude/eMPL/inv_mpu.c ****     float st_shift, st_shift_cust, st_shift_var;
 365              		.loc 1 2050 5 view .LVU103
2051:task/attitude/eMPL/inv_mpu.c **** 
2052:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x0D, 3, tmp))
 366              		.loc 1 2052 5 view .LVU104
 367              		.loc 1 2052 20 is_stmt 0 view .LVU105
 368 0008 374B     		ldr	r3, .L43
 369 000a 5868     		ldr	r0, [r3, #4]
 370              	.LVL26:
 371              		.loc 1 2052 9 view .LVU106
 372 000c 01AB     		add	r3, sp, #4
 373 000e 0322     		movs	r2, #3
 374 0010 0D21     		movs	r1, #13
 375              	.LVL27:
 376              		.loc 1 2052 9 view .LVU107
 377 0012 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 378 0014 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 379              	.LVL28:
 380              		.loc 1 2052 8 view .LVU108
 381 0018 0028     		cmp	r0, #0
 382 001a 62D1     		bne	.L37
 383 001c 0246     		mov	r2, r0
2053:task/attitude/eMPL/inv_mpu.c ****         return 0x07;
2054:task/attitude/eMPL/inv_mpu.c **** 
2055:task/attitude/eMPL/inv_mpu.c ****     tmp[0] &= 0x1F;
 384              		.loc 1 2055 5 is_stmt 1 view .LVU109
 385              		.loc 1 2055 12 is_stmt 0 view .LVU110
 386 001e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 387 0022 03F01F03 		and	r3, r3, #31
 388 0026 8DF80430 		strb	r3, [sp, #4]
2056:task/attitude/eMPL/inv_mpu.c ****     tmp[1] &= 0x1F;
 389              		.loc 1 2056 5 is_stmt 1 view .LVU111
 390              		.loc 1 2056 12 is_stmt 0 view .LVU112
 391 002a 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 392 002e 03F01F03 		and	r3, r3, #31
 393 0032 8DF80530 		strb	r3, [sp, #5]
2057:task/attitude/eMPL/inv_mpu.c ****     tmp[2] &= 0x1F;
 394              		.loc 1 2057 5 is_stmt 1 view .LVU113
 395              		.loc 1 2057 12 is_stmt 0 view .LVU114
 396 0036 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 397 003a 03F01F03 		and	r3, r3, #31
 398 003e 8DF80630 		strb	r3, [sp, #6]
2058:task/attitude/eMPL/inv_mpu.c **** 
2059:task/attitude/eMPL/inv_mpu.c ****     for (jj = 0; jj < 3; jj++)
 399              		.loc 1 2059 5 is_stmt 1 view .LVU115
 400              	.LVL29:
 401              		.loc 1 2059 5 is_stmt 0 view .LVU116
 402 0042 27E0     		b	.L28
 403              	.LVL30:
 404              	.L31:
2060:task/attitude/eMPL/inv_mpu.c ****     {
2061:task/attitude/eMPL/inv_mpu.c ****         st_shift_cust = labs(bias_regular[jj] - bias_st[jj]) / 65536.f;
2062:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
2063:task/attitude/eMPL/inv_mpu.c ****         {
2064:task/attitude/eMPL/inv_mpu.c ****             st_shift = 3275.f / test.gyro_sens;
2065:task/attitude/eMPL/inv_mpu.c ****             while (--tmp[jj])
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 45


2066:task/attitude/eMPL/inv_mpu.c ****                 st_shift *= 1.046f;
 405              		.loc 1 2066 17 is_stmt 1 view .LVU117
 406              		.loc 1 2066 26 is_stmt 0 view .LVU118
 407 0044 DFED296A 		vldr.32	s13, .L43+4
 408 0048 27EE267A 		vmul.f32	s14, s14, s13
 409              	.LVL31:
 410              	.L29:
2065:task/attitude/eMPL/inv_mpu.c ****                 st_shift *= 1.046f;
 411              		.loc 1 2065 19 is_stmt 1 view .LVU119
2065:task/attitude/eMPL/inv_mpu.c ****                 st_shift *= 1.046f;
 412              		.loc 1 2065 25 is_stmt 0 view .LVU120
 413 004c 02AB     		add	r3, sp, #8
 414 004e 9918     		adds	r1, r3, r2
 415 0050 11F8043C 		ldrb	r3, [r1, #-4]	@ zero_extendqisi2
2065:task/attitude/eMPL/inv_mpu.c ****                 st_shift *= 1.046f;
 416              		.loc 1 2065 20 view .LVU121
 417 0054 013B     		subs	r3, r3, #1
 418 0056 DBB2     		uxtb	r3, r3
2065:task/attitude/eMPL/inv_mpu.c ****                 st_shift *= 1.046f;
 419              		.loc 1 2065 19 view .LVU122
 420 0058 01F8043C 		strb	r3, [r1, #-4]
 421 005c 002B     		cmp	r3, #0
 422 005e F1D1     		bne	.L31
2067:task/attitude/eMPL/inv_mpu.c ****             st_shift_var = st_shift_cust / st_shift - 1.f;
 423              		.loc 1 2067 13 is_stmt 1 view .LVU123
 424              		.loc 1 2067 42 is_stmt 0 view .LVU124
 425 0060 C7EE876A 		vdiv.f32	s13, s15, s14
 426              		.loc 1 2067 26 view .LVU125
 427 0064 F7EE007A 		vmov.f32	s15, #1.0e+0
 428              	.LVL32:
 429              		.loc 1 2067 26 view .LVU126
 430 0068 76EEE77A 		vsub.f32	s15, s13, s15
 431              	.LVL33:
2068:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_var) > test.max_gyro_var)
 432              		.loc 1 2068 13 is_stmt 1 view .LVU127
 433              		.loc 1 2068 17 is_stmt 0 view .LVU128
 434 006c F0EEE77A 		vabs.f32	s15, s15
 435              	.LVL34:
 436              		.loc 1 2068 16 view .LVU129
 437 0070 9FED1F7A 		vldr.32	s14, .L43+8
 438              	.LVL35:
 439              		.loc 1 2068 16 view .LVU130
 440 0074 F4EEC77A 		vcmpe.f32	s15, s14
 441 0078 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 442 007c 09DD     		ble	.L32
2069:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << jj;
 443              		.loc 1 2069 17 is_stmt 1 view .LVU131
 444              		.loc 1 2069 29 is_stmt 0 view .LVU132
 445 007e 0123     		movs	r3, #1
 446 0080 9340     		lsls	r3, r3, r2
 447              		.loc 1 2069 24 view .LVU133
 448 0082 1843     		orrs	r0, r0, r3
 449              	.LVL36:
 450              		.loc 1 2069 24 view .LVU134
 451 0084 05E0     		b	.L32
 452              	.LVL37:
 453              	.L42:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 46


2064:task/attitude/eMPL/inv_mpu.c ****             while (--tmp[jj])
 454              		.loc 1 2064 22 view .LVU135
 455 0086 B3EE097A 		vmov.f32	s14, #2.5e+1
 456 008a DFE7     		b	.L29
 457              	.L34:
2070:task/attitude/eMPL/inv_mpu.c ****         }
2071:task/attitude/eMPL/inv_mpu.c ****         else if ((st_shift_cust < test.min_dps) ||
2072:task/attitude/eMPL/inv_mpu.c ****                  (st_shift_cust > test.max_dps))
2073:task/attitude/eMPL/inv_mpu.c ****             result |= 1 << jj;
 458              		.loc 1 2073 13 is_stmt 1 view .LVU136
 459              		.loc 1 2073 25 is_stmt 0 view .LVU137
 460 008c 0123     		movs	r3, #1
 461 008e 9340     		lsls	r3, r3, r2
 462              		.loc 1 2073 20 view .LVU138
 463 0090 1843     		orrs	r0, r0, r3
 464              	.LVL38:
 465              	.L32:
2059:task/attitude/eMPL/inv_mpu.c ****     {
 466              		.loc 1 2059 26 is_stmt 1 discriminator 2 view .LVU139
2059:task/attitude/eMPL/inv_mpu.c ****     {
 467              		.loc 1 2059 28 is_stmt 0 discriminator 2 view .LVU140
 468 0092 0132     		adds	r2, r2, #1
 469              	.LVL39:
 470              	.L28:
2059:task/attitude/eMPL/inv_mpu.c ****     {
 471              		.loc 1 2059 18 is_stmt 1 discriminator 1 view .LVU141
2059:task/attitude/eMPL/inv_mpu.c ****     {
 472              		.loc 1 2059 5 is_stmt 0 discriminator 1 view .LVU142
 473 0094 022A     		cmp	r2, #2
 474 0096 25DC     		bgt	.L26
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 475              		.loc 1 2061 9 is_stmt 1 view .LVU143
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 476              		.loc 1 2061 42 is_stmt 0 view .LVU144
 477 0098 54F82230 		ldr	r3, [r4, r2, lsl #2]
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 478              		.loc 1 2061 56 view .LVU145
 479 009c 55F82210 		ldr	r1, [r5, r2, lsl #2]
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 480              		.loc 1 2061 47 view .LVU146
 481 00a0 5B1A     		subs	r3, r3, r1
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 482              		.loc 1 2061 25 view .LVU147
 483 00a2 002B     		cmp	r3, #0
 484 00a4 B8BF     		it	lt
 485 00a6 5B42     		rsblt	r3, r3, #0
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 486              		.loc 1 2061 62 view .LVU148
 487 00a8 07EE903A 		vmov	s15, r3	@ int
 488 00ac F8EEE77A 		vcvt.f32.s32	s15, s15
2061:task/attitude/eMPL/inv_mpu.c ****         if (tmp[jj])
 489              		.loc 1 2061 23 view .LVU149
 490 00b0 9FED107A 		vldr.32	s14, .L43+12
 491 00b4 67EE877A 		vmul.f32	s15, s15, s14
 492              	.LVL40:
2062:task/attitude/eMPL/inv_mpu.c ****         {
 493              		.loc 1 2062 9 is_stmt 1 view .LVU150
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 47


2062:task/attitude/eMPL/inv_mpu.c ****         {
 494              		.loc 1 2062 16 is_stmt 0 view .LVU151
 495 00b8 02AB     		add	r3, sp, #8
 496 00ba 1344     		add	r3, r3, r2
 497 00bc 13F8043C 		ldrb	r3, [r3, #-4]	@ zero_extendqisi2
2062:task/attitude/eMPL/inv_mpu.c ****         {
 498              		.loc 1 2062 12 view .LVU152
 499 00c0 002B     		cmp	r3, #0
 500 00c2 E0D1     		bne	.L42
2071:task/attitude/eMPL/inv_mpu.c ****                  (st_shift_cust > test.max_dps))
 501              		.loc 1 2071 14 is_stmt 1 view .LVU153
2071:task/attitude/eMPL/inv_mpu.c ****                  (st_shift_cust > test.max_dps))
 502              		.loc 1 2071 17 is_stmt 0 view .LVU154
 503 00c4 B2EE047A 		vmov.f32	s14, #1.0e+1
 504 00c8 F4EEC77A 		vcmpe.f32	s15, s14
 505 00cc F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 506 00d0 DCD4     		bmi	.L34
2071:task/attitude/eMPL/inv_mpu.c ****                  (st_shift_cust > test.max_dps))
 507              		.loc 1 2071 49 discriminator 1 view .LVU155
 508 00d2 9FED097A 		vldr.32	s14, .L43+16
 509 00d6 F4EEC77A 		vcmpe.f32	s15, s14
 510 00da F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 511 00de D8DD     		ble	.L32
 512 00e0 D4E7     		b	.L34
 513              	.LVL41:
 514              	.L37:
2053:task/attitude/eMPL/inv_mpu.c **** 
 515              		.loc 1 2053 16 view .LVU156
 516 00e2 0720     		movs	r0, #7
 517              	.LVL42:
 518              	.L26:
2074:task/attitude/eMPL/inv_mpu.c ****     }
2075:task/attitude/eMPL/inv_mpu.c ****     return result;
2076:task/attitude/eMPL/inv_mpu.c **** }
 519              		.loc 1 2076 1 view .LVU157
 520 00e4 03B0     		add	sp, sp, #12
 521              	.LCFI8:
 522              		.cfi_def_cfa_offset 12
 523              		@ sp needed
 524 00e6 30BD     		pop	{r4, r5, pc}
 525              	.LVL43:
 526              	.L44:
 527              		.loc 1 2076 1 view .LVU158
 528              		.align	2
 529              	.L43:
 530 00e8 00000000 		.word	.LANCHOR0
 531 00ec 54E3853F 		.word	1065739092
 532 00f0 295C0F3E 		.word	1041194025
 533 00f4 00008037 		.word	931135488
 534 00f8 0000D242 		.word	1121058816
 535              		.cfi_endproc
 536              	.LFE187:
 538              		.section	.text.set_int_enable,"ax",%progbits
 539              		.align	1
 540              		.syntax unified
 541              		.thumb
 542              		.thumb_func
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 48


 543              		.fpu fpv5-d16
 545              	set_int_enable:
 546              	.LVL44:
 547              	.LFB148:
 655:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 548              		.loc 1 655 1 is_stmt 1 view -0
 549              		.cfi_startproc
 550              		@ args = 0, pretend = 0, frame = 8
 551              		@ frame_needed = 0, uses_anonymous_args = 0
 655:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 552              		.loc 1 655 1 is_stmt 0 view .LVU160
 553 0000 00B5     		push	{lr}
 554              	.LCFI9:
 555              		.cfi_def_cfa_offset 4
 556              		.cfi_offset 14, -4
 557 0002 83B0     		sub	sp, sp, #12
 558              	.LCFI10:
 559              		.cfi_def_cfa_offset 16
 656:task/attitude/eMPL/inv_mpu.c **** 
 560              		.loc 1 656 5 is_stmt 1 view .LVU161
 658:task/attitude/eMPL/inv_mpu.c ****     {
 561              		.loc 1 658 5 view .LVU162
 658:task/attitude/eMPL/inv_mpu.c ****     {
 562              		.loc 1 658 20 is_stmt 0 view .LVU163
 563 0004 234B     		ldr	r3, .L58
 564 0006 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 658:task/attitude/eMPL/inv_mpu.c ****     {
 565              		.loc 1 658 8 view .LVU164
 566 000a CBB1     		cbz	r3, .L46
 660:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_DMP_INT_EN;
 567              		.loc 1 660 9 is_stmt 1 view .LVU165
 660:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_DMP_INT_EN;
 568              		.loc 1 660 12 is_stmt 0 view .LVU166
 569 000c A0B1     		cbz	r0, .L47
 661:task/attitude/eMPL/inv_mpu.c ****         else
 570              		.loc 1 661 13 is_stmt 1 view .LVU167
 661:task/attitude/eMPL/inv_mpu.c ****         else
 571              		.loc 1 661 17 is_stmt 0 view .LVU168
 572 000e 0223     		movs	r3, #2
 573 0010 8DF80730 		strb	r3, [sp, #7]
 574              	.L48:
 664:task/attitude/eMPL/inv_mpu.c ****             return -1;
 575              		.loc 1 664 9 is_stmt 1 view .LVU169
 664:task/attitude/eMPL/inv_mpu.c ****             return -1;
 576              		.loc 1 664 25 is_stmt 0 view .LVU170
 577 0014 1F4B     		ldr	r3, .L58
 578 0016 5868     		ldr	r0, [r3, #4]
 579              	.LVL45:
 664:task/attitude/eMPL/inv_mpu.c ****             return -1;
 580              		.loc 1 664 38 view .LVU171
 581 0018 1968     		ldr	r1, [r3]
 664:task/attitude/eMPL/inv_mpu.c ****             return -1;
 582              		.loc 1 664 13 view .LVU172
 583 001a 0DF10703 		add	r3, sp, #7
 584 001e 0122     		movs	r2, #1
 585 0020 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 586 0022 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 49


 587 0024 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 588              	.LVL46:
 664:task/attitude/eMPL/inv_mpu.c ****             return -1;
 589              		.loc 1 664 12 view .LVU173
 590 0028 48BB     		cbnz	r0, .L53
 666:task/attitude/eMPL/inv_mpu.c ****     }
 591              		.loc 1 666 9 is_stmt 1 view .LVU174
 666:task/attitude/eMPL/inv_mpu.c ****     }
 592              		.loc 1 666 32 is_stmt 0 view .LVU175
 593 002a 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 594 002e 194B     		ldr	r3, .L58
 595 0030 5A74     		strb	r2, [r3, #17]
 596              	.L45:
 683:task/attitude/eMPL/inv_mpu.c **** 
 597              		.loc 1 683 1 view .LVU176
 598 0032 03B0     		add	sp, sp, #12
 599              	.LCFI11:
 600              		.cfi_remember_state
 601              		.cfi_def_cfa_offset 4
 602              		@ sp needed
 603 0034 5DF804FB 		ldr	pc, [sp], #4
 604              	.LVL47:
 605              	.L47:
 606              	.LCFI12:
 607              		.cfi_restore_state
 663:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 608              		.loc 1 663 13 is_stmt 1 view .LVU177
 663:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 609              		.loc 1 663 17 is_stmt 0 view .LVU178
 610 0038 0023     		movs	r3, #0
 611 003a 8DF80730 		strb	r3, [sp, #7]
 612 003e E9E7     		b	.L48
 613              	.L46:
 670:task/attitude/eMPL/inv_mpu.c ****             return -1;
 614              		.loc 1 670 9 is_stmt 1 view .LVU179
 670:task/attitude/eMPL/inv_mpu.c ****             return -1;
 615              		.loc 1 670 25 is_stmt 0 view .LVU180
 616 0040 144B     		ldr	r3, .L58
 617 0042 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 670:task/attitude/eMPL/inv_mpu.c ****             return -1;
 618              		.loc 1 670 12 view .LVU181
 619 0044 F3B1     		cbz	r3, .L54
 672:task/attitude/eMPL/inv_mpu.c ****             return 0;
 620              		.loc 1 672 9 is_stmt 1 view .LVU182
 672:task/attitude/eMPL/inv_mpu.c ****             return 0;
 621              		.loc 1 672 12 is_stmt 0 view .LVU183
 622 0046 10B1     		cbz	r0, .L50
 672:task/attitude/eMPL/inv_mpu.c ****             return 0;
 623              		.loc 1 672 34 discriminator 1 view .LVU184
 624 0048 124B     		ldr	r3, .L58
 625 004a 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 672:task/attitude/eMPL/inv_mpu.c ****             return 0;
 626              		.loc 1 672 20 discriminator 1 view .LVU185
 627 004c EBB9     		cbnz	r3, .L55
 628              	.L50:
 674:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_DATA_RDY_EN;
 629              		.loc 1 674 9 is_stmt 1 view .LVU186
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 50


 674:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_DATA_RDY_EN;
 630              		.loc 1 674 12 is_stmt 0 view .LVU187
 631 004e 90B1     		cbz	r0, .L51
 675:task/attitude/eMPL/inv_mpu.c ****         else
 632              		.loc 1 675 13 is_stmt 1 view .LVU188
 675:task/attitude/eMPL/inv_mpu.c ****         else
 633              		.loc 1 675 17 is_stmt 0 view .LVU189
 634 0050 0123     		movs	r3, #1
 635 0052 8DF80730 		strb	r3, [sp, #7]
 636              	.L52:
 678:task/attitude/eMPL/inv_mpu.c ****             return -1;
 637              		.loc 1 678 9 is_stmt 1 view .LVU190
 678:task/attitude/eMPL/inv_mpu.c ****             return -1;
 638              		.loc 1 678 25 is_stmt 0 view .LVU191
 639 0056 0F4B     		ldr	r3, .L58
 640 0058 5868     		ldr	r0, [r3, #4]
 641              	.LVL48:
 678:task/attitude/eMPL/inv_mpu.c ****             return -1;
 642              		.loc 1 678 38 view .LVU192
 643 005a 1968     		ldr	r1, [r3]
 678:task/attitude/eMPL/inv_mpu.c ****             return -1;
 644              		.loc 1 678 13 view .LVU193
 645 005c 0DF10703 		add	r3, sp, #7
 646 0060 0122     		movs	r2, #1
 647 0062 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 648 0064 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 649 0066 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 650              	.LVL49:
 678:task/attitude/eMPL/inv_mpu.c ****             return -1;
 651              		.loc 1 678 12 view .LVU194
 652 006a 80B9     		cbnz	r0, .L56
 680:task/attitude/eMPL/inv_mpu.c ****     }
 653              		.loc 1 680 9 is_stmt 1 view .LVU195
 680:task/attitude/eMPL/inv_mpu.c ****     }
 654              		.loc 1 680 32 is_stmt 0 view .LVU196
 655 006c 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 656 0070 084B     		ldr	r3, .L58
 657 0072 5A74     		strb	r2, [r3, #17]
 658 0074 DDE7     		b	.L45
 659              	.LVL50:
 660              	.L51:
 677:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 661              		.loc 1 677 13 is_stmt 1 view .LVU197
 677:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &tmp))
 662              		.loc 1 677 17 is_stmt 0 view .LVU198
 663 0076 0023     		movs	r3, #0
 664 0078 8DF80730 		strb	r3, [sp, #7]
 665 007c EBE7     		b	.L52
 666              	.LVL51:
 667              	.L53:
 665:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.int_enable = tmp;
 668              		.loc 1 665 20 view .LVU199
 669 007e 4FF0FF30 		mov	r0, #-1
 670 0082 D6E7     		b	.L45
 671              	.LVL52:
 672              	.L54:
 671:task/attitude/eMPL/inv_mpu.c ****         if (enable && st.chip_cfg.int_enable)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 51


 673              		.loc 1 671 20 view .LVU200
 674 0084 4FF0FF30 		mov	r0, #-1
 675              	.LVL53:
 671:task/attitude/eMPL/inv_mpu.c ****         if (enable && st.chip_cfg.int_enable)
 676              		.loc 1 671 20 view .LVU201
 677 0088 D3E7     		b	.L45
 678              	.LVL54:
 679              	.L55:
 673:task/attitude/eMPL/inv_mpu.c ****         if (enable)
 680              		.loc 1 673 20 view .LVU202
 681 008a 0020     		movs	r0, #0
 682              	.LVL55:
 673:task/attitude/eMPL/inv_mpu.c ****         if (enable)
 683              		.loc 1 673 20 view .LVU203
 684 008c D1E7     		b	.L45
 685              	.L56:
 679:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.int_enable = tmp;
 686              		.loc 1 679 20 view .LVU204
 687 008e 4FF0FF30 		mov	r0, #-1
 688 0092 CEE7     		b	.L45
 689              	.L59:
 690              		.align	2
 691              	.L58:
 692 0094 00000000 		.word	.LANCHOR0
 693              		.cfi_endproc
 694              	.LFE148:
 696              		.global	__aeabi_ldivmod
 697              		.section	.text.get_st_biases,"ax",%progbits
 698              		.align	1
 699              		.syntax unified
 700              		.thumb
 701              		.thumb_func
 702              		.fpu fpv5-d16
 704              	get_st_biases:
 705              	.LVL56:
 706              	.LFB188:
2077:task/attitude/eMPL/inv_mpu.c **** 
2078:task/attitude/eMPL/inv_mpu.c **** #endif
2079:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2080:task/attitude/eMPL/inv_mpu.c **** static int compass_self_test(void)
2081:task/attitude/eMPL/inv_mpu.c **** {
2082:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
2083:task/attitude/eMPL/inv_mpu.c ****     unsigned char tries = 10;
2084:task/attitude/eMPL/inv_mpu.c ****     int result = 0x07;
2085:task/attitude/eMPL/inv_mpu.c ****     short data;
2086:task/attitude/eMPL/inv_mpu.c **** 
2087:task/attitude/eMPL/inv_mpu.c ****     mpu_set_bypass(1);
2088:task/attitude/eMPL/inv_mpu.c **** 
2089:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = AKM_POWER_DOWN;
2090:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp))
2091:task/attitude/eMPL/inv_mpu.c ****         return 0x07;
2092:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = AKM_BIT_SELF_TEST;
2093:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_ASTC, 1, tmp))
2094:task/attitude/eMPL/inv_mpu.c ****         goto AKM_restore;
2095:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = AKM_MODE_SELF_TEST;
2096:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp))
2097:task/attitude/eMPL/inv_mpu.c ****         goto AKM_restore;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 52


2098:task/attitude/eMPL/inv_mpu.c **** 
2099:task/attitude/eMPL/inv_mpu.c ****     do
2100:task/attitude/eMPL/inv_mpu.c ****     {
2101:task/attitude/eMPL/inv_mpu.c ****         delay_ms(10);
2102:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_ST1, 1, tmp))
2103:task/attitude/eMPL/inv_mpu.c ****             goto AKM_restore;
2104:task/attitude/eMPL/inv_mpu.c ****         if (tmp[0] & AKM_DATA_READY)
2105:task/attitude/eMPL/inv_mpu.c ****             break;
2106:task/attitude/eMPL/inv_mpu.c ****     } while (tries--);
2107:task/attitude/eMPL/inv_mpu.c ****     if (!(tmp[0] & AKM_DATA_READY))
2108:task/attitude/eMPL/inv_mpu.c ****         goto AKM_restore;
2109:task/attitude/eMPL/inv_mpu.c **** 
2110:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_HXL, 6, tmp))
2111:task/attitude/eMPL/inv_mpu.c ****         goto AKM_restore;
2112:task/attitude/eMPL/inv_mpu.c **** 
2113:task/attitude/eMPL/inv_mpu.c ****     result = 0;
2114:task/attitude/eMPL/inv_mpu.c **** #if defined MPU9150
2115:task/attitude/eMPL/inv_mpu.c ****     data = (short)(tmp[1] << 8) | tmp[0];
2116:task/attitude/eMPL/inv_mpu.c ****     if ((data > 100) || (data < -100))
2117:task/attitude/eMPL/inv_mpu.c ****         result |= 0x01;
2118:task/attitude/eMPL/inv_mpu.c ****     data = (short)(tmp[3] << 8) | tmp[2];
2119:task/attitude/eMPL/inv_mpu.c ****     if ((data > 100) || (data < -100))
2120:task/attitude/eMPL/inv_mpu.c ****         result |= 0x02;
2121:task/attitude/eMPL/inv_mpu.c ****     data = (short)(tmp[5] << 8) | tmp[4];
2122:task/attitude/eMPL/inv_mpu.c ****     if ((data > -300) || (data < -1000))
2123:task/attitude/eMPL/inv_mpu.c ****         result |= 0x04;
2124:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU9250
2125:task/attitude/eMPL/inv_mpu.c ****     data = (short)(tmp[1] << 8) | tmp[0];
2126:task/attitude/eMPL/inv_mpu.c ****     if ((data > 200) || (data < -200))
2127:task/attitude/eMPL/inv_mpu.c ****         result |= 0x01;
2128:task/attitude/eMPL/inv_mpu.c ****     data = (short)(tmp[3] << 8) | tmp[2];
2129:task/attitude/eMPL/inv_mpu.c ****     if ((data > 200) || (data < -200))
2130:task/attitude/eMPL/inv_mpu.c ****         result |= 0x02;
2131:task/attitude/eMPL/inv_mpu.c ****     data = (short)(tmp[5] << 8) | tmp[4];
2132:task/attitude/eMPL/inv_mpu.c ****     if ((data > -800) || (data < -3200))
2133:task/attitude/eMPL/inv_mpu.c ****         result |= 0x04;
2134:task/attitude/eMPL/inv_mpu.c **** #endif
2135:task/attitude/eMPL/inv_mpu.c **** AKM_restore:
2136:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = 0 | SUPPORTS_AK89xx_HIGH_SENS;
2137:task/attitude/eMPL/inv_mpu.c ****     i2c_write(st.chip_cfg.compass_addr, AKM_REG_ASTC, 1, tmp);
2138:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = SUPPORTS_AK89xx_HIGH_SENS;
2139:task/attitude/eMPL/inv_mpu.c ****     i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp);
2140:task/attitude/eMPL/inv_mpu.c ****     mpu_set_bypass(0);
2141:task/attitude/eMPL/inv_mpu.c ****     return result;
2142:task/attitude/eMPL/inv_mpu.c **** }
2143:task/attitude/eMPL/inv_mpu.c **** #endif
2144:task/attitude/eMPL/inv_mpu.c **** 
2145:task/attitude/eMPL/inv_mpu.c **** static int get_st_biases(long *gyro, long *accel, unsigned char hw_test)
2146:task/attitude/eMPL/inv_mpu.c **** {
 707              		.loc 1 2146 1 is_stmt 1 view -0
 708              		.cfi_startproc
 709              		@ args = 0, pretend = 0, frame = 16
 710              		@ frame_needed = 0, uses_anonymous_args = 0
 711              		.loc 1 2146 1 is_stmt 0 view .LVU206
 712 0000 2DE9F04D 		push	{r4, r5, r6, r7, r8, r10, fp, lr}
 713              	.LCFI13:
 714              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 53


 715              		.cfi_offset 4, -32
 716              		.cfi_offset 5, -28
 717              		.cfi_offset 6, -24
 718              		.cfi_offset 7, -20
 719              		.cfi_offset 8, -16
 720              		.cfi_offset 10, -12
 721              		.cfi_offset 11, -8
 722              		.cfi_offset 14, -4
 723 0004 84B0     		sub	sp, sp, #16
 724              	.LCFI14:
 725              		.cfi_def_cfa_offset 48
 726 0006 0446     		mov	r4, r0
 727 0008 0D46     		mov	r5, r1
 728 000a 1646     		mov	r6, r2
2147:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[MAX_PACKET_LENGTH];
 729              		.loc 1 2147 5 is_stmt 1 view .LVU207
2148:task/attitude/eMPL/inv_mpu.c ****     unsigned char packet_count, ii;
 730              		.loc 1 2148 5 view .LVU208
2149:task/attitude/eMPL/inv_mpu.c ****     unsigned short fifo_count;
 731              		.loc 1 2149 5 view .LVU209
2150:task/attitude/eMPL/inv_mpu.c **** 
2151:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0x01;
 732              		.loc 1 2151 5 view .LVU210
 733              		.loc 1 2151 13 is_stmt 0 view .LVU211
 734 000c 0123     		movs	r3, #1
 735 000e 8DF80430 		strb	r3, [sp, #4]
2152:task/attitude/eMPL/inv_mpu.c ****     data[1] = 0;
 736              		.loc 1 2152 5 is_stmt 1 view .LVU212
 737              		.loc 1 2152 13 is_stmt 0 view .LVU213
 738 0012 0023     		movs	r3, #0
 739 0014 8DF80530 		strb	r3, [sp, #5]
2153:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, data))
 740              		.loc 1 2153 5 is_stmt 1 view .LVU214
 741              		.loc 1 2153 21 is_stmt 0 view .LVU215
 742 0018 AC4B     		ldr	r3, .L95
 743 001a 5868     		ldr	r0, [r3, #4]
 744              	.LVL57:
 745              		.loc 1 2153 34 view .LVU216
 746 001c 1968     		ldr	r1, [r3]
 747              	.LVL58:
 748              		.loc 1 2153 9 view .LVU217
 749 001e 01AB     		add	r3, sp, #4
 750 0020 0222     		movs	r2, #2
 751              	.LVL59:
 752              		.loc 1 2153 9 view .LVU218
 753 0022 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 754 0024 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 755 0026 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 756              	.LVL60:
 757              		.loc 1 2153 8 view .LVU219
 758 002a 0028     		cmp	r0, #0
 759 002c 40F0DB81 		bne	.L73
2154:task/attitude/eMPL/inv_mpu.c ****         return -1;
2155:task/attitude/eMPL/inv_mpu.c ****     delay_ms(200);
 760              		.loc 1 2155 5 is_stmt 1 view .LVU220
 761 0030 C820     		movs	r0, #200
 762 0032 FFF7FEFF 		bl	vTaskDelay
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 54


 763              	.LVL61:
2156:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0;
 764              		.loc 1 2156 5 view .LVU221
 765              		.loc 1 2156 13 is_stmt 0 view .LVU222
 766 0036 0023     		movs	r3, #0
 767 0038 8DF80430 		strb	r3, [sp, #4]
2157:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_enable, 1, data))
 768              		.loc 1 2157 5 is_stmt 1 view .LVU223
 769              		.loc 1 2157 21 is_stmt 0 view .LVU224
 770 003c A34B     		ldr	r3, .L95
 771 003e 5868     		ldr	r0, [r3, #4]
 772              		.loc 1 2157 34 view .LVU225
 773 0040 1968     		ldr	r1, [r3]
 774              		.loc 1 2157 9 view .LVU226
 775 0042 01AB     		add	r3, sp, #4
 776 0044 0122     		movs	r2, #1
 777 0046 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 778 0048 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 779 004a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 780              	.LVL62:
 781              		.loc 1 2157 8 view .LVU227
 782 004e 0028     		cmp	r0, #0
 783 0050 40F0CC81 		bne	.L74
2158:task/attitude/eMPL/inv_mpu.c ****         return -1;
2159:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 784              		.loc 1 2159 5 is_stmt 1 view .LVU228
 785              		.loc 1 2159 21 is_stmt 0 view .LVU229
 786 0054 9D4B     		ldr	r3, .L95
 787 0056 5868     		ldr	r0, [r3, #4]
 788              		.loc 1 2159 34 view .LVU230
 789 0058 1968     		ldr	r1, [r3]
 790              		.loc 1 2159 9 view .LVU231
 791 005a 01AB     		add	r3, sp, #4
 792 005c 0122     		movs	r2, #1
 793 005e 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 794 0060 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 795 0062 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 796              	.LVL63:
 797              		.loc 1 2159 8 view .LVU232
 798 0066 0028     		cmp	r0, #0
 799 0068 40F0C381 		bne	.L75
2160:task/attitude/eMPL/inv_mpu.c ****         return -1;
2161:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 800              		.loc 1 2161 5 is_stmt 1 view .LVU233
 801              		.loc 1 2161 21 is_stmt 0 view .LVU234
 802 006c 974B     		ldr	r3, .L95
 803 006e 5868     		ldr	r0, [r3, #4]
 804              		.loc 1 2161 34 view .LVU235
 805 0070 1968     		ldr	r1, [r3]
 806              		.loc 1 2161 9 view .LVU236
 807 0072 01AB     		add	r3, sp, #4
 808 0074 0122     		movs	r2, #1
 809 0076 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 810 0078 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 811 007a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 812              	.LVL64:
 813              		.loc 1 2161 8 view .LVU237
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 55


 814 007e 0028     		cmp	r0, #0
 815 0080 40F0BA81 		bne	.L76
2162:task/attitude/eMPL/inv_mpu.c ****         return -1;
2163:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
 816              		.loc 1 2163 5 is_stmt 1 view .LVU238
 817              		.loc 1 2163 21 is_stmt 0 view .LVU239
 818 0084 914B     		ldr	r3, .L95
 819 0086 5868     		ldr	r0, [r3, #4]
 820              		.loc 1 2163 34 view .LVU240
 821 0088 1968     		ldr	r1, [r3]
 822              		.loc 1 2163 9 view .LVU241
 823 008a 01AB     		add	r3, sp, #4
 824 008c 0122     		movs	r2, #1
 825 008e 897E     		ldrb	r1, [r1, #26]	@ zero_extendqisi2
 826 0090 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 827 0092 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 828              	.LVL65:
 829              		.loc 1 2163 8 view .LVU242
 830 0096 0028     		cmp	r0, #0
 831 0098 40F0B181 		bne	.L77
2164:task/attitude/eMPL/inv_mpu.c ****         return -1;
2165:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 832              		.loc 1 2165 5 is_stmt 1 view .LVU243
 833              		.loc 1 2165 21 is_stmt 0 view .LVU244
 834 009c 8B4B     		ldr	r3, .L95
 835 009e 5868     		ldr	r0, [r3, #4]
 836              		.loc 1 2165 34 view .LVU245
 837 00a0 1968     		ldr	r1, [r3]
 838              		.loc 1 2165 9 view .LVU246
 839 00a2 01AB     		add	r3, sp, #4
 840 00a4 0122     		movs	r2, #1
 841 00a6 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 842 00a8 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 843 00aa FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 844              	.LVL66:
 845              		.loc 1 2165 8 view .LVU247
 846 00ae 0028     		cmp	r0, #0
 847 00b0 40F0A881 		bne	.L78
2166:task/attitude/eMPL/inv_mpu.c ****         return -1;
2167:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_FIFO_RST | BIT_DMP_RST;
 848              		.loc 1 2167 5 is_stmt 1 view .LVU248
 849              		.loc 1 2167 13 is_stmt 0 view .LVU249
 850 00b4 0C23     		movs	r3, #12
 851 00b6 8DF80430 		strb	r3, [sp, #4]
2168:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 852              		.loc 1 2168 5 is_stmt 1 view .LVU250
 853              		.loc 1 2168 21 is_stmt 0 view .LVU251
 854 00ba 844B     		ldr	r3, .L95
 855 00bc 5868     		ldr	r0, [r3, #4]
 856              		.loc 1 2168 34 view .LVU252
 857 00be 1968     		ldr	r1, [r3]
 858              		.loc 1 2168 9 view .LVU253
 859 00c0 01AB     		add	r3, sp, #4
 860 00c2 0122     		movs	r2, #1
 861 00c4 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 862 00c6 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 863 00c8 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 56


 864              	.LVL67:
 865              		.loc 1 2168 8 view .LVU254
 866 00cc 0028     		cmp	r0, #0
 867 00ce 40F09C81 		bne	.L79
2169:task/attitude/eMPL/inv_mpu.c ****         return -1;
2170:task/attitude/eMPL/inv_mpu.c ****     delay_ms(15);
 868              		.loc 1 2170 5 is_stmt 1 view .LVU255
 869 00d2 0F20     		movs	r0, #15
 870 00d4 FFF7FEFF 		bl	vTaskDelay
 871              	.LVL68:
2171:task/attitude/eMPL/inv_mpu.c ****     data[0] = st.test->reg_lpf;
 872              		.loc 1 2171 5 view .LVU256
 873              		.loc 1 2171 17 is_stmt 0 view .LVU257
 874 00d8 7C4B     		ldr	r3, .L95
 875 00da 9A6A     		ldr	r2, [r3, #40]
 876              		.loc 1 2171 22 view .LVU258
 877 00dc 527A     		ldrb	r2, [r2, #9]	@ zero_extendqisi2
 878              		.loc 1 2171 13 view .LVU259
 879 00de 8DF80420 		strb	r2, [sp, #4]
2172:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lpf, 1, data))
 880              		.loc 1 2172 5 is_stmt 1 view .LVU260
 881              		.loc 1 2172 21 is_stmt 0 view .LVU261
 882 00e2 5868     		ldr	r0, [r3, #4]
 883              		.loc 1 2172 34 view .LVU262
 884 00e4 1968     		ldr	r1, [r3]
 885              		.loc 1 2172 9 view .LVU263
 886 00e6 01AB     		add	r3, sp, #4
 887 00e8 0122     		movs	r2, #1
 888 00ea 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 889 00ec 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 890 00ee FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 891              	.LVL69:
 892              		.loc 1 2172 8 view .LVU264
 893 00f2 0028     		cmp	r0, #0
 894 00f4 40F08C81 		bne	.L80
2173:task/attitude/eMPL/inv_mpu.c ****         return -1;
2174:task/attitude/eMPL/inv_mpu.c ****     data[0] = st.test->reg_rate_div;
 895              		.loc 1 2174 5 is_stmt 1 view .LVU265
 896              		.loc 1 2174 17 is_stmt 0 view .LVU266
 897 00f8 744B     		ldr	r3, .L95
 898 00fa 9A6A     		ldr	r2, [r3, #40]
 899              		.loc 1 2174 22 view .LVU267
 900 00fc 127A     		ldrb	r2, [r2, #8]	@ zero_extendqisi2
 901              		.loc 1 2174 13 view .LVU268
 902 00fe 8DF80420 		strb	r2, [sp, #4]
2175:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->rate_div, 1, data))
 903              		.loc 1 2175 5 is_stmt 1 view .LVU269
 904              		.loc 1 2175 21 is_stmt 0 view .LVU270
 905 0102 5868     		ldr	r0, [r3, #4]
 906              		.loc 1 2175 34 view .LVU271
 907 0104 1968     		ldr	r1, [r3]
 908              		.loc 1 2175 9 view .LVU272
 909 0106 01AB     		add	r3, sp, #4
 910 0108 0122     		movs	r2, #1
 911 010a 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 912 010c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 913 010e FFF7FEFF 		bl	Sensors_I2C_WriteRegister
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 57


 914              	.LVL70:
 915              		.loc 1 2175 8 view .LVU273
 916 0112 0028     		cmp	r0, #0
 917 0114 40F07F81 		bne	.L81
2176:task/attitude/eMPL/inv_mpu.c ****         return -1;
2177:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
 918              		.loc 1 2177 5 is_stmt 1 view .LVU274
 919              		.loc 1 2177 8 is_stmt 0 view .LVU275
 920 0118 002E     		cmp	r6, #0
 921 011a 00F0C880 		beq	.L62
2178:task/attitude/eMPL/inv_mpu.c ****         data[0] = st.test->reg_gyro_fsr | 0xE0;
 922              		.loc 1 2178 9 is_stmt 1 view .LVU276
 923              		.loc 1 2178 21 is_stmt 0 view .LVU277
 924 011e 6B4B     		ldr	r3, .L95
 925 0120 9B6A     		ldr	r3, [r3, #40]
 926              		.loc 1 2178 26 view .LVU278
 927 0122 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 928              		.loc 1 2178 17 view .LVU279
 929 0124 63F01F03 		orn	r3, r3, #31
 930 0128 8DF80430 		strb	r3, [sp, #4]
 931              	.L63:
2179:task/attitude/eMPL/inv_mpu.c ****     else
2180:task/attitude/eMPL/inv_mpu.c ****         data[0] = st.test->reg_gyro_fsr;
2181:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 932              		.loc 1 2181 5 is_stmt 1 view .LVU280
 933              		.loc 1 2181 21 is_stmt 0 view .LVU281
 934 012c 674B     		ldr	r3, .L95
 935 012e 5868     		ldr	r0, [r3, #4]
 936              		.loc 1 2181 34 view .LVU282
 937 0130 1968     		ldr	r1, [r3]
 938              		.loc 1 2181 9 view .LVU283
 939 0132 01AB     		add	r3, sp, #4
 940 0134 0122     		movs	r2, #1
 941 0136 8979     		ldrb	r1, [r1, #6]	@ zero_extendqisi2
 942 0138 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 943 013a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 944              	.LVL71:
 945              		.loc 1 2181 8 view .LVU284
 946 013e 0028     		cmp	r0, #0
 947 0140 40F06C81 		bne	.L82
2182:task/attitude/eMPL/inv_mpu.c ****         return -1;
2183:task/attitude/eMPL/inv_mpu.c **** 
2184:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
 948              		.loc 1 2184 5 is_stmt 1 view .LVU285
 949              		.loc 1 2184 8 is_stmt 0 view .LVU286
 950 0144 002E     		cmp	r6, #0
 951 0146 00F0B880 		beq	.L64
2185:task/attitude/eMPL/inv_mpu.c ****         data[0] = st.test->reg_accel_fsr | 0xE0;
 952              		.loc 1 2185 9 is_stmt 1 view .LVU287
 953              		.loc 1 2185 21 is_stmt 0 view .LVU288
 954 014a 604B     		ldr	r3, .L95
 955 014c 9B6A     		ldr	r3, [r3, #40]
 956              		.loc 1 2185 26 view .LVU289
 957 014e DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 958              		.loc 1 2185 17 view .LVU290
 959 0150 63F01F03 		orn	r3, r3, #31
 960 0154 8DF80430 		strb	r3, [sp, #4]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 58


 961              	.L65:
2186:task/attitude/eMPL/inv_mpu.c ****     else
2187:task/attitude/eMPL/inv_mpu.c ****         data[0] = test.reg_accel_fsr;
2188:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
 962              		.loc 1 2188 5 is_stmt 1 view .LVU291
 963              		.loc 1 2188 21 is_stmt 0 view .LVU292
 964 0158 5C4B     		ldr	r3, .L95
 965 015a 5868     		ldr	r0, [r3, #4]
 966              		.loc 1 2188 34 view .LVU293
 967 015c 1968     		ldr	r1, [r3]
 968              		.loc 1 2188 9 view .LVU294
 969 015e 01AB     		add	r3, sp, #4
 970 0160 0122     		movs	r2, #1
 971 0162 C979     		ldrb	r1, [r1, #7]	@ zero_extendqisi2
 972 0164 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 973 0166 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 974              	.LVL72:
 975              		.loc 1 2188 8 view .LVU295
 976 016a 0028     		cmp	r0, #0
 977 016c 40F05981 		bne	.L83
2189:task/attitude/eMPL/inv_mpu.c ****         return -1;
2190:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
 978              		.loc 1 2190 5 is_stmt 1 view .LVU296
 979              		.loc 1 2190 8 is_stmt 0 view .LVU297
 980 0170 002E     		cmp	r6, #0
 981 0172 40F0A680 		bne	.L90
 982              	.L66:
2191:task/attitude/eMPL/inv_mpu.c ****         delay_ms(200);
2192:task/attitude/eMPL/inv_mpu.c **** 
2193:task/attitude/eMPL/inv_mpu.c ****     /* Fill FIFO for test.wait_ms milliseconds. */
2194:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_FIFO_EN;
 983              		.loc 1 2194 5 is_stmt 1 view .LVU298
 984              		.loc 1 2194 13 is_stmt 0 view .LVU299
 985 0176 4023     		movs	r3, #64
 986 0178 8DF80430 		strb	r3, [sp, #4]
2195:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 987              		.loc 1 2195 5 is_stmt 1 view .LVU300
 988              		.loc 1 2195 21 is_stmt 0 view .LVU301
 989 017c 534B     		ldr	r3, .L95
 990 017e 5868     		ldr	r0, [r3, #4]
 991              		.loc 1 2195 34 view .LVU302
 992 0180 1968     		ldr	r1, [r3]
 993              		.loc 1 2195 9 view .LVU303
 994 0182 01AB     		add	r3, sp, #4
 995 0184 0122     		movs	r2, #1
 996 0186 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 997 0188 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 998 018a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 999              	.LVL73:
 1000              		.loc 1 2195 8 view .LVU304
 1001 018e 0028     		cmp	r0, #0
 1002 0190 40F04A81 		bne	.L84
2196:task/attitude/eMPL/inv_mpu.c ****         return -1;
2197:task/attitude/eMPL/inv_mpu.c **** 
2198:task/attitude/eMPL/inv_mpu.c ****     data[0] = INV_XYZ_GYRO | INV_XYZ_ACCEL;
 1003              		.loc 1 2198 5 is_stmt 1 view .LVU305
 1004              		.loc 1 2198 13 is_stmt 0 view .LVU306
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 59


 1005 0194 7823     		movs	r3, #120
 1006 0196 8DF80430 		strb	r3, [sp, #4]
2199:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 1007              		.loc 1 2199 5 is_stmt 1 view .LVU307
 1008              		.loc 1 2199 21 is_stmt 0 view .LVU308
 1009 019a 4C4B     		ldr	r3, .L95
 1010 019c 5868     		ldr	r0, [r3, #4]
 1011              		.loc 1 2199 34 view .LVU309
 1012 019e 1968     		ldr	r1, [r3]
 1013              		.loc 1 2199 9 view .LVU310
 1014 01a0 01AB     		add	r3, sp, #4
 1015 01a2 0122     		movs	r2, #1
 1016 01a4 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 1017 01a6 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1018 01a8 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 1019              	.LVL74:
 1020              		.loc 1 2199 8 view .LVU311
 1021 01ac 0028     		cmp	r0, #0
 1022 01ae 40F03E81 		bne	.L85
2200:task/attitude/eMPL/inv_mpu.c ****         return -1;
2201:task/attitude/eMPL/inv_mpu.c ****     delay_ms(test.wait_ms);
 1023              		.loc 1 2201 5 is_stmt 1 view .LVU312
 1024 01b2 3220     		movs	r0, #50
 1025 01b4 FFF7FEFF 		bl	vTaskDelay
 1026              	.LVL75:
2202:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0;
 1027              		.loc 1 2202 5 view .LVU313
 1028              		.loc 1 2202 13 is_stmt 0 view .LVU314
 1029 01b8 0023     		movs	r3, #0
 1030 01ba 8DF80430 		strb	r3, [sp, #4]
2203:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 1031              		.loc 1 2203 5 is_stmt 1 view .LVU315
 1032              		.loc 1 2203 21 is_stmt 0 view .LVU316
 1033 01be 434B     		ldr	r3, .L95
 1034 01c0 5868     		ldr	r0, [r3, #4]
 1035              		.loc 1 2203 34 view .LVU317
 1036 01c2 1968     		ldr	r1, [r3]
 1037              		.loc 1 2203 9 view .LVU318
 1038 01c4 01AB     		add	r3, sp, #4
 1039 01c6 0122     		movs	r2, #1
 1040 01c8 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 1041 01ca 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1042 01cc FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 1043              	.LVL76:
 1044              		.loc 1 2203 8 view .LVU319
 1045 01d0 0028     		cmp	r0, #0
 1046 01d2 40F02F81 		bne	.L86
2204:task/attitude/eMPL/inv_mpu.c ****         return -1;
2205:task/attitude/eMPL/inv_mpu.c **** 
2206:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, data))
 1047              		.loc 1 2206 5 is_stmt 1 view .LVU320
 1048              		.loc 1 2206 20 is_stmt 0 view .LVU321
 1049 01d6 3D4B     		ldr	r3, .L95
 1050 01d8 5868     		ldr	r0, [r3, #4]
 1051              		.loc 1 2206 33 view .LVU322
 1052 01da 1968     		ldr	r1, [r3]
 1053              		.loc 1 2206 9 view .LVU323
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 60


 1054 01dc 01AB     		add	r3, sp, #4
 1055 01de 0222     		movs	r2, #2
 1056 01e0 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
 1057 01e2 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1058 01e4 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1059              	.LVL77:
 1060              		.loc 1 2206 8 view .LVU324
 1061 01e8 8046     		mov	r8, r0
 1062 01ea 0028     		cmp	r0, #0
 1063 01ec 40F02581 		bne	.L87
2207:task/attitude/eMPL/inv_mpu.c ****         return -1;
2208:task/attitude/eMPL/inv_mpu.c **** 
2209:task/attitude/eMPL/inv_mpu.c ****     fifo_count = (data[0] << 8) | data[1];
 1064              		.loc 1 2209 5 is_stmt 1 view .LVU325
 1065              		.loc 1 2209 23 is_stmt 0 view .LVU326
 1066 01f0 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 1067              		.loc 1 2209 39 view .LVU327
 1068 01f4 9DF80570 		ldrb	r7, [sp, #5]	@ zero_extendqisi2
 1069              		.loc 1 2209 16 view .LVU328
 1070 01f8 47EA0327 		orr	r7, r7, r3, lsl #8
 1071              	.LVL78:
2210:task/attitude/eMPL/inv_mpu.c ****     packet_count = fifo_count / MAX_PACKET_LENGTH;
 1072              		.loc 1 2210 5 is_stmt 1 view .LVU329
 1073              		.loc 1 2210 18 is_stmt 0 view .LVU330
 1074 01fc 344B     		ldr	r3, .L95+4
 1075 01fe A3FB0737 		umull	r3, r7, r3, r7
 1076              	.LVL79:
 1077              		.loc 1 2210 18 view .LVU331
 1078 0202 C7F3C707 		ubfx	r7, r7, #3, #8
 1079              	.LVL80:
2211:task/attitude/eMPL/inv_mpu.c ****     gyro[0] = gyro[1] = gyro[2] = 0;
 1080              		.loc 1 2211 5 is_stmt 1 view .LVU332
 1081              		.loc 1 2211 33 is_stmt 0 view .LVU333
 1082 0206 0026     		movs	r6, #0
 1083 0208 A660     		str	r6, [r4, #8]
 1084              	.LVL81:
 1085              		.loc 1 2211 23 view .LVU334
 1086 020a 6660     		str	r6, [r4, #4]
 1087              		.loc 1 2211 13 view .LVU335
 1088 020c 2660     		str	r6, [r4]
2212:task/attitude/eMPL/inv_mpu.c ****     accel[0] = accel[1] = accel[2] = 0;
 1089              		.loc 1 2212 5 is_stmt 1 view .LVU336
 1090              		.loc 1 2212 36 is_stmt 0 view .LVU337
 1091 020e AE60     		str	r6, [r5, #8]
 1092              		.loc 1 2212 25 view .LVU338
 1093 0210 6E60     		str	r6, [r5, #4]
 1094              		.loc 1 2212 14 view .LVU339
 1095 0212 2E60     		str	r6, [r5]
2213:task/attitude/eMPL/inv_mpu.c **** 
2214:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < packet_count; ii++)
 1096              		.loc 1 2214 5 is_stmt 1 view .LVU340
 1097              	.LVL82:
 1098              	.L67:
 1099              		.loc 1 2214 18 discriminator 1 view .LVU341
 1100              		.loc 1 2214 5 is_stmt 0 discriminator 1 view .LVU342
 1101 0214 BE42     		cmp	r6, r7
 1102 0216 5DD2     		bcs	.L91
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 61


 1103              	.LBB2:
2215:task/attitude/eMPL/inv_mpu.c ****     {
2216:task/attitude/eMPL/inv_mpu.c ****         short accel_cur[3], gyro_cur[3];
 1104              		.loc 1 2216 9 is_stmt 1 view .LVU343
2217:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->fifo_r_w, MAX_PACKET_LENGTH, data))
 1105              		.loc 1 2217 9 view .LVU344
 1106              		.loc 1 2217 24 is_stmt 0 view .LVU345
 1107 0218 2C4B     		ldr	r3, .L95
 1108 021a 5868     		ldr	r0, [r3, #4]
 1109              		.loc 1 2217 37 view .LVU346
 1110 021c 1968     		ldr	r1, [r3]
 1111              		.loc 1 2217 13 view .LVU347
 1112 021e 01AB     		add	r3, sp, #4
 1113 0220 0C22     		movs	r2, #12
 1114 0222 497B     		ldrb	r1, [r1, #13]	@ zero_extendqisi2
 1115 0224 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1116 0226 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1117              	.LVL83:
 1118              		.loc 1 2217 12 view .LVU348
 1119 022a 0028     		cmp	r0, #0
 1120 022c 40F00881 		bne	.L88
2218:task/attitude/eMPL/inv_mpu.c ****             return -1;
2219:task/attitude/eMPL/inv_mpu.c ****         accel_cur[0] = ((short)data[0] << 8) | data[1];
 1121              		.loc 1 2219 9 is_stmt 1 view .LVU349
 1122              		.loc 1 2219 36 is_stmt 0 view .LVU350
 1123 0230 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 1124              		.loc 1 2219 52 view .LVU351
 1125 0234 9DF80510 		ldrb	r1, [sp, #5]	@ zero_extendqisi2
 1126              		.loc 1 2219 46 view .LVU352
 1127 0238 41EA0321 		orr	r1, r1, r3, lsl #8
2220:task/attitude/eMPL/inv_mpu.c ****         accel_cur[1] = ((short)data[2] << 8) | data[3];
 1128              		.loc 1 2220 9 is_stmt 1 view .LVU353
 1129              		.loc 1 2220 36 is_stmt 0 view .LVU354
 1130 023c 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 1131              		.loc 1 2220 52 view .LVU355
 1132 0240 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1133              		.loc 1 2220 46 view .LVU356
 1134 0244 42EA0322 		orr	r2, r2, r3, lsl #8
2221:task/attitude/eMPL/inv_mpu.c ****         accel_cur[2] = ((short)data[4] << 8) | data[5];
 1135              		.loc 1 2221 9 is_stmt 1 view .LVU357
 1136              		.loc 1 2221 36 is_stmt 0 view .LVU358
 1137 0248 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 1138              		.loc 1 2221 52 view .LVU359
 1139 024c 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 1140              		.loc 1 2221 46 view .LVU360
 1141 0250 43EA0023 		orr	r3, r3, r0, lsl #8
2222:task/attitude/eMPL/inv_mpu.c ****         accel[0] += (long)accel_cur[0];
 1142              		.loc 1 2222 9 is_stmt 1 view .LVU361
 1143              		.loc 1 2222 18 is_stmt 0 view .LVU362
 1144 0254 2868     		ldr	r0, [r5]
 1145 0256 00FA81F1 		sxtah	r1, r0, r1
 1146 025a 2960     		str	r1, [r5]
2223:task/attitude/eMPL/inv_mpu.c ****         accel[1] += (long)accel_cur[1];
 1147              		.loc 1 2223 9 is_stmt 1 view .LVU363
 1148              		.loc 1 2223 18 is_stmt 0 view .LVU364
 1149 025c 6968     		ldr	r1, [r5, #4]
 1150 025e 01FA82F2 		sxtah	r2, r1, r2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 62


 1151 0262 6A60     		str	r2, [r5, #4]
2224:task/attitude/eMPL/inv_mpu.c ****         accel[2] += (long)accel_cur[2];
 1152              		.loc 1 2224 9 is_stmt 1 view .LVU365
 1153              		.loc 1 2224 18 is_stmt 0 view .LVU366
 1154 0264 AA68     		ldr	r2, [r5, #8]
 1155 0266 02FA83F3 		sxtah	r3, r2, r3
 1156 026a AB60     		str	r3, [r5, #8]
2225:task/attitude/eMPL/inv_mpu.c ****         gyro_cur[0] = (((short)data[6] << 8) | data[7]);
 1157              		.loc 1 2225 9 is_stmt 1 view .LVU367
 1158              		.loc 1 2225 36 is_stmt 0 view .LVU368
 1159 026c 9DF80A30 		ldrb	r3, [sp, #10]	@ zero_extendqisi2
 1160              		.loc 1 2225 52 view .LVU369
 1161 0270 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 1162              		.loc 1 2225 46 view .LVU370
 1163 0274 41EA0321 		orr	r1, r1, r3, lsl #8
2226:task/attitude/eMPL/inv_mpu.c ****         gyro_cur[1] = (((short)data[8] << 8) | data[9]);
 1164              		.loc 1 2226 9 is_stmt 1 view .LVU371
 1165              		.loc 1 2226 36 is_stmt 0 view .LVU372
 1166 0278 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 1167              		.loc 1 2226 52 view .LVU373
 1168 027c 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 1169              		.loc 1 2226 46 view .LVU374
 1170 0280 42EA0322 		orr	r2, r2, r3, lsl #8
2227:task/attitude/eMPL/inv_mpu.c ****         gyro_cur[2] = (((short)data[10] << 8) | data[11]);
 1171              		.loc 1 2227 9 is_stmt 1 view .LVU375
 1172              		.loc 1 2227 36 is_stmt 0 view .LVU376
 1173 0284 9DF80E00 		ldrb	r0, [sp, #14]	@ zero_extendqisi2
 1174              		.loc 1 2227 53 view .LVU377
 1175 0288 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 1176              		.loc 1 2227 47 view .LVU378
 1177 028c 43EA0023 		orr	r3, r3, r0, lsl #8
2228:task/attitude/eMPL/inv_mpu.c ****         gyro[0] += (long)gyro_cur[0];
 1178              		.loc 1 2228 9 is_stmt 1 view .LVU379
 1179              		.loc 1 2228 17 is_stmt 0 view .LVU380
 1180 0290 2068     		ldr	r0, [r4]
 1181 0292 00FA81F1 		sxtah	r1, r0, r1
 1182 0296 2160     		str	r1, [r4]
2229:task/attitude/eMPL/inv_mpu.c ****         gyro[1] += (long)gyro_cur[1];
 1183              		.loc 1 2229 9 is_stmt 1 view .LVU381
 1184              		.loc 1 2229 17 is_stmt 0 view .LVU382
 1185 0298 6168     		ldr	r1, [r4, #4]
 1186 029a 01FA82F2 		sxtah	r2, r1, r2
 1187 029e 6260     		str	r2, [r4, #4]
2230:task/attitude/eMPL/inv_mpu.c ****         gyro[2] += (long)gyro_cur[2];
 1188              		.loc 1 2230 9 is_stmt 1 view .LVU383
 1189              		.loc 1 2230 17 is_stmt 0 view .LVU384
 1190 02a0 A268     		ldr	r2, [r4, #8]
 1191 02a2 02FA83F3 		sxtah	r3, r2, r3
 1192 02a6 A360     		str	r3, [r4, #8]
 1193              	.LBE2:
2214:task/attitude/eMPL/inv_mpu.c ****     {
 1194              		.loc 1 2214 37 is_stmt 1 view .LVU385
2214:task/attitude/eMPL/inv_mpu.c ****     {
 1195              		.loc 1 2214 39 is_stmt 0 view .LVU386
 1196 02a8 0136     		adds	r6, r6, #1
 1197              	.LVL84:
2214:task/attitude/eMPL/inv_mpu.c ****     {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 63


 1198              		.loc 1 2214 39 view .LVU387
 1199 02aa F6B2     		uxtb	r6, r6
 1200              	.LVL85:
2214:task/attitude/eMPL/inv_mpu.c ****     {
 1201              		.loc 1 2214 39 view .LVU388
 1202 02ac B2E7     		b	.L67
 1203              	.LVL86:
 1204              	.L62:
2180:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 1205              		.loc 1 2180 9 is_stmt 1 view .LVU389
2180:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 1206              		.loc 1 2180 21 is_stmt 0 view .LVU390
 1207 02ae 074B     		ldr	r3, .L95
 1208 02b0 9B6A     		ldr	r3, [r3, #40]
2180:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 1209              		.loc 1 2180 26 view .LVU391
 1210 02b2 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
2180:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
 1211              		.loc 1 2180 17 view .LVU392
 1212 02b4 8DF80430 		strb	r3, [sp, #4]
 1213 02b8 38E7     		b	.L63
 1214              	.L64:
2187:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
 1215              		.loc 1 2187 9 is_stmt 1 view .LVU393
2187:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
 1216              		.loc 1 2187 17 is_stmt 0 view .LVU394
 1217 02ba 1823     		movs	r3, #24
 1218 02bc 8DF80430 		strb	r3, [sp, #4]
 1219 02c0 4AE7     		b	.L65
 1220              	.L90:
2191:task/attitude/eMPL/inv_mpu.c **** 
 1221              		.loc 1 2191 9 is_stmt 1 view .LVU395
 1222 02c2 C820     		movs	r0, #200
 1223 02c4 FFF7FEFF 		bl	vTaskDelay
 1224              	.LVL87:
 1225 02c8 55E7     		b	.L66
 1226              	.L96:
 1227 02ca 00BF     		.align	2
 1228              	.L95:
 1229 02cc 00000000 		.word	.LANCHOR0
 1230 02d0 ABAAAAAA 		.word	-1431655765
 1231              	.LVL88:
 1232              	.L91:
2231:task/attitude/eMPL/inv_mpu.c ****     }
2232:task/attitude/eMPL/inv_mpu.c **** #ifdef EMPL_NO_64BIT
2233:task/attitude/eMPL/inv_mpu.c ****     gyro[0] = (long)(((float)gyro[0] * 65536.f) / test.gyro_sens / packet_count);
2234:task/attitude/eMPL/inv_mpu.c ****     gyro[1] = (long)(((float)gyro[1] * 65536.f) / test.gyro_sens / packet_count);
2235:task/attitude/eMPL/inv_mpu.c ****     gyro[2] = (long)(((float)gyro[2] * 65536.f) / test.gyro_sens / packet_count);
2236:task/attitude/eMPL/inv_mpu.c ****     if (has_accel)
2237:task/attitude/eMPL/inv_mpu.c ****     {
2238:task/attitude/eMPL/inv_mpu.c ****         accel[0] = (long)(((float)accel[0] * 65536.f) / test.accel_sens /
2239:task/attitude/eMPL/inv_mpu.c ****                           packet_count);
2240:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (long)(((float)accel[1] * 65536.f) / test.accel_sens /
2241:task/attitude/eMPL/inv_mpu.c ****                           packet_count);
2242:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (long)(((float)accel[2] * 65536.f) / test.accel_sens /
2243:task/attitude/eMPL/inv_mpu.c ****                           packet_count);
2244:task/attitude/eMPL/inv_mpu.c ****         /* Don't remove gravity! */
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 64


2245:task/attitude/eMPL/inv_mpu.c ****         accel[2] -= 65536L;
2246:task/attitude/eMPL/inv_mpu.c ****     }
2247:task/attitude/eMPL/inv_mpu.c **** #else
2248:task/attitude/eMPL/inv_mpu.c ****     gyro[0] = (long)(((long long)gyro[0] << 16) / test.gyro_sens / packet_count);
 1233              		.loc 1 2248 5 view .LVU396
 1234              		.loc 1 2248 38 is_stmt 0 view .LVU397
 1235 02d4 2168     		ldr	r1, [r4]
 1236              		.loc 1 2248 49 view .LVU398
 1237 02d6 8322     		movs	r2, #131
 1238 02d8 0023     		movs	r3, #0
 1239 02da 0804     		lsls	r0, r1, #16
 1240 02dc 0914     		asrs	r1, r1, #16
 1241 02de FFF7FEFF 		bl	__aeabi_ldivmod
 1242              	.LVL89:
 1243              		.loc 1 2248 66 view .LVU399
 1244 02e2 FEB2     		uxtb	r6, r7
 1245              	.LVL90:
 1246              		.loc 1 2248 66 view .LVU400
 1247 02e4 0027     		movs	r7, #0
 1248              	.LVL91:
 1249              		.loc 1 2248 66 view .LVU401
 1250 02e6 3246     		mov	r2, r6
 1251 02e8 3B46     		mov	r3, r7
 1252 02ea FFF7FEFF 		bl	__aeabi_ldivmod
 1253              	.LVL92:
 1254              		.loc 1 2248 13 view .LVU402
 1255 02ee 2060     		str	r0, [r4]
2249:task/attitude/eMPL/inv_mpu.c ****     gyro[1] = (long)(((long long)gyro[1] << 16) / test.gyro_sens / packet_count);
 1256              		.loc 1 2249 5 is_stmt 1 view .LVU403
 1257              		.loc 1 2249 38 is_stmt 0 view .LVU404
 1258 02f0 6168     		ldr	r1, [r4, #4]
 1259              		.loc 1 2249 49 view .LVU405
 1260 02f2 8322     		movs	r2, #131
 1261 02f4 0023     		movs	r3, #0
 1262 02f6 0804     		lsls	r0, r1, #16
 1263 02f8 0914     		asrs	r1, r1, #16
 1264 02fa FFF7FEFF 		bl	__aeabi_ldivmod
 1265              	.LVL93:
 1266              		.loc 1 2249 66 view .LVU406
 1267 02fe 3246     		mov	r2, r6
 1268 0300 3B46     		mov	r3, r7
 1269 0302 FFF7FEFF 		bl	__aeabi_ldivmod
 1270              	.LVL94:
 1271              		.loc 1 2249 13 view .LVU407
 1272 0306 6060     		str	r0, [r4, #4]
2250:task/attitude/eMPL/inv_mpu.c ****     gyro[2] = (long)(((long long)gyro[2] << 16) / test.gyro_sens / packet_count);
 1273              		.loc 1 2250 5 is_stmt 1 view .LVU408
 1274              		.loc 1 2250 38 is_stmt 0 view .LVU409
 1275 0308 A168     		ldr	r1, [r4, #8]
 1276              		.loc 1 2250 49 view .LVU410
 1277 030a 8322     		movs	r2, #131
 1278 030c 0023     		movs	r3, #0
 1279 030e 0804     		lsls	r0, r1, #16
 1280 0310 0914     		asrs	r1, r1, #16
 1281 0312 FFF7FEFF 		bl	__aeabi_ldivmod
 1282              	.LVL95:
 1283              		.loc 1 2250 66 view .LVU411
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 65


 1284 0316 3246     		mov	r2, r6
 1285 0318 3B46     		mov	r3, r7
 1286 031a FFF7FEFF 		bl	__aeabi_ldivmod
 1287              	.LVL96:
 1288              		.loc 1 2250 13 view .LVU412
 1289 031e A060     		str	r0, [r4, #8]
2251:task/attitude/eMPL/inv_mpu.c ****     accel[0] = (long)(((long long)accel[0] << 16) / test.accel_sens /
 1290              		.loc 1 2251 5 is_stmt 1 view .LVU413
 1291              		.loc 1 2251 40 is_stmt 0 view .LVU414
 1292 0320 2B68     		ldr	r3, [r5]
 1293              		.loc 1 2251 51 view .LVU415
 1294 0322 4FEA034A 		lsl	r10, r3, #16
 1295 0326 4FEA234B 		asr	fp, r3, #16
 1296 032a BAF1000F 		cmp	r10, #0
 1297 032e 7BF10003 		sbcs	r3, fp, #0
 1298 0332 39DB     		blt	.L92
 1299              	.L69:
 1300 0334 4FEADA20 		lsr	r0, r10, #11
 1301              		.loc 1 2251 69 view .LVU416
 1302 0338 3246     		mov	r2, r6
 1303 033a 3B46     		mov	r3, r7
 1304 033c 40EA4B50 		orr	r0, r0, fp, lsl #21
 1305 0340 4FEAEB21 		asr	r1, fp, #11
 1306 0344 FFF7FEFF 		bl	__aeabi_ldivmod
 1307              	.LVL97:
 1308              		.loc 1 2251 14 view .LVU417
 1309 0348 2860     		str	r0, [r5]
2252:task/attitude/eMPL/inv_mpu.c ****                       packet_count);
2253:task/attitude/eMPL/inv_mpu.c ****     accel[1] = (long)(((long long)accel[1] << 16) / test.accel_sens /
 1310              		.loc 1 2253 5 is_stmt 1 view .LVU418
 1311              		.loc 1 2253 40 is_stmt 0 view .LVU419
 1312 034a 6B68     		ldr	r3, [r5, #4]
 1313              		.loc 1 2253 51 view .LVU420
 1314 034c 4FEA034A 		lsl	r10, r3, #16
 1315 0350 4FEA234B 		asr	fp, r3, #16
 1316 0354 BAF1000F 		cmp	r10, #0
 1317 0358 7BF10003 		sbcs	r3, fp, #0
 1318 035c 2DDB     		blt	.L93
 1319              	.L70:
 1320 035e 4FEADA20 		lsr	r0, r10, #11
 1321              		.loc 1 2253 69 view .LVU421
 1322 0362 3246     		mov	r2, r6
 1323 0364 3B46     		mov	r3, r7
 1324 0366 40EA4B50 		orr	r0, r0, fp, lsl #21
 1325 036a 4FEAEB21 		asr	r1, fp, #11
 1326 036e FFF7FEFF 		bl	__aeabi_ldivmod
 1327              	.LVL98:
 1328              		.loc 1 2253 14 view .LVU422
 1329 0372 6860     		str	r0, [r5, #4]
2254:task/attitude/eMPL/inv_mpu.c ****                       packet_count);
2255:task/attitude/eMPL/inv_mpu.c ****     accel[2] = (long)(((long long)accel[2] << 16) / test.accel_sens /
 1330              		.loc 1 2255 5 is_stmt 1 view .LVU423
 1331              		.loc 1 2255 40 is_stmt 0 view .LVU424
 1332 0374 AB68     		ldr	r3, [r5, #8]
 1333              		.loc 1 2255 51 view .LVU425
 1334 0376 4FEA034A 		lsl	r10, r3, #16
 1335 037a 4FEA234B 		asr	fp, r3, #16
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 66


 1336 037e BAF1000F 		cmp	r10, #0
 1337 0382 7BF10003 		sbcs	r3, fp, #0
 1338 0386 21DB     		blt	.L94
 1339              	.L71:
 1340 0388 4FEADA20 		lsr	r0, r10, #11
 1341              		.loc 1 2255 69 view .LVU426
 1342 038c 3246     		mov	r2, r6
 1343 038e 3B46     		mov	r3, r7
 1344 0390 40EA4B50 		orr	r0, r0, fp, lsl #21
 1345 0394 4FEAEB21 		asr	r1, fp, #11
 1346 0398 FFF7FEFF 		bl	__aeabi_ldivmod
 1347              	.LVL99:
2256:task/attitude/eMPL/inv_mpu.c ****                       packet_count);
2257:task/attitude/eMPL/inv_mpu.c ****     /* Don't remove gravity! */
2258:task/attitude/eMPL/inv_mpu.c ****     if (accel[2] > 0L)
 1348              		.loc 1 2258 5 is_stmt 1 view .LVU427
 1349              		.loc 1 2258 8 is_stmt 0 view .LVU428
 1350 039c 0028     		cmp	r0, #0
 1351 039e 1EDD     		ble	.L72
2259:task/attitude/eMPL/inv_mpu.c ****         accel[2] -= 65536L;
 1352              		.loc 1 2259 9 is_stmt 1 view .LVU429
 1353              		.loc 1 2259 18 is_stmt 0 view .LVU430
 1354 03a0 A0F58030 		sub	r0, r0, #65536
 1355 03a4 A860     		str	r0, [r5, #8]
 1356 03a6 4DE0     		b	.L60
 1357              	.L92:
2251:task/attitude/eMPL/inv_mpu.c ****                       packet_count);
 1358              		.loc 1 2251 51 view .LVU431
 1359 03a8 40F2FF73 		movw	r3, #2047
 1360 03ac 1AEB030A 		adds	r10, r10, r3
 1361 03b0 4FF00003 		mov	r3, #0
 1362 03b4 4BEB030B 		adc	fp, fp, r3
 1363 03b8 BCE7     		b	.L69
 1364              	.L93:
2253:task/attitude/eMPL/inv_mpu.c ****                       packet_count);
 1365              		.loc 1 2253 51 view .LVU432
 1366 03ba 40F2FF73 		movw	r3, #2047
 1367 03be 1AEB030A 		adds	r10, r10, r3
 1368 03c2 4FF00003 		mov	r3, #0
 1369 03c6 4BEB030B 		adc	fp, fp, r3
 1370 03ca C8E7     		b	.L70
 1371              	.L94:
2255:task/attitude/eMPL/inv_mpu.c ****                       packet_count);
 1372              		.loc 1 2255 51 view .LVU433
 1373 03cc 40F2FF73 		movw	r3, #2047
 1374 03d0 1AEB030A 		adds	r10, r10, r3
 1375 03d4 4FF00003 		mov	r3, #0
 1376 03d8 4BEB030B 		adc	fp, fp, r3
 1377 03dc D4E7     		b	.L71
 1378              	.L72:
2260:task/attitude/eMPL/inv_mpu.c ****     else
2261:task/attitude/eMPL/inv_mpu.c ****         accel[2] += 65536L;
 1379              		.loc 1 2261 9 is_stmt 1 view .LVU434
 1380              		.loc 1 2261 18 is_stmt 0 view .LVU435
 1381 03de 00F58030 		add	r0, r0, #65536
 1382 03e2 A860     		str	r0, [r5, #8]
 1383 03e4 2EE0     		b	.L60
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 67


 1384              	.LVL100:
 1385              	.L73:
2154:task/attitude/eMPL/inv_mpu.c ****     delay_ms(200);
 1386              		.loc 1 2154 16 view .LVU436
 1387 03e6 4FF0FF38 		mov	r8, #-1
 1388 03ea 2BE0     		b	.L60
 1389              	.L74:
2158:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
 1390              		.loc 1 2158 16 view .LVU437
 1391 03ec 4FF0FF38 		mov	r8, #-1
 1392 03f0 28E0     		b	.L60
 1393              	.L75:
2160:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 1394              		.loc 1 2160 16 view .LVU438
 1395 03f2 4FF0FF38 		mov	r8, #-1
 1396 03f6 25E0     		b	.L60
 1397              	.L76:
2162:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
 1398              		.loc 1 2162 16 view .LVU439
 1399 03f8 4FF0FF38 		mov	r8, #-1
 1400 03fc 22E0     		b	.L60
 1401              	.L77:
2164:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
 1402              		.loc 1 2164 16 view .LVU440
 1403 03fe 4FF0FF38 		mov	r8, #-1
 1404 0402 1FE0     		b	.L60
 1405              	.L78:
2166:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_FIFO_RST | BIT_DMP_RST;
 1406              		.loc 1 2166 16 view .LVU441
 1407 0404 4FF0FF38 		mov	r8, #-1
 1408 0408 1CE0     		b	.L60
 1409              	.L79:
2169:task/attitude/eMPL/inv_mpu.c ****     delay_ms(15);
 1410              		.loc 1 2169 16 view .LVU442
 1411 040a 4FF0FF38 		mov	r8, #-1
 1412 040e 19E0     		b	.L60
 1413              	.L80:
2173:task/attitude/eMPL/inv_mpu.c ****     data[0] = st.test->reg_rate_div;
 1414              		.loc 1 2173 16 view .LVU443
 1415 0410 4FF0FF38 		mov	r8, #-1
 1416 0414 16E0     		b	.L60
 1417              	.L81:
2176:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
 1418              		.loc 1 2176 16 view .LVU444
 1419 0416 4FF0FF38 		mov	r8, #-1
 1420 041a 13E0     		b	.L60
 1421              	.L82:
2182:task/attitude/eMPL/inv_mpu.c **** 
 1422              		.loc 1 2182 16 view .LVU445
 1423 041c 4FF0FF38 		mov	r8, #-1
 1424 0420 10E0     		b	.L60
 1425              	.L83:
2189:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
 1426              		.loc 1 2189 16 view .LVU446
 1427 0422 4FF0FF38 		mov	r8, #-1
 1428 0426 0DE0     		b	.L60
 1429              	.L84:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 68


2196:task/attitude/eMPL/inv_mpu.c **** 
 1430              		.loc 1 2196 16 view .LVU447
 1431 0428 4FF0FF38 		mov	r8, #-1
 1432 042c 0AE0     		b	.L60
 1433              	.L85:
2200:task/attitude/eMPL/inv_mpu.c ****     delay_ms(test.wait_ms);
 1434              		.loc 1 2200 16 view .LVU448
 1435 042e 4FF0FF38 		mov	r8, #-1
 1436 0432 07E0     		b	.L60
 1437              	.L86:
2204:task/attitude/eMPL/inv_mpu.c **** 
 1438              		.loc 1 2204 16 view .LVU449
 1439 0434 4FF0FF38 		mov	r8, #-1
 1440 0438 04E0     		b	.L60
 1441              	.L87:
2207:task/attitude/eMPL/inv_mpu.c **** 
 1442              		.loc 1 2207 16 view .LVU450
 1443 043a 4FF0FF38 		mov	r8, #-1
 1444 043e 01E0     		b	.L60
 1445              	.LVL101:
 1446              	.L88:
 1447              	.LBB3:
2218:task/attitude/eMPL/inv_mpu.c ****         accel_cur[0] = ((short)data[0] << 8) | data[1];
 1448              		.loc 1 2218 20 view .LVU451
 1449 0440 4FF0FF38 		mov	r8, #-1
 1450              	.LVL102:
 1451              	.L60:
2218:task/attitude/eMPL/inv_mpu.c ****         accel_cur[0] = ((short)data[0] << 8) | data[1];
 1452              		.loc 1 2218 20 view .LVU452
 1453              	.LBE3:
2262:task/attitude/eMPL/inv_mpu.c **** #endif
2263:task/attitude/eMPL/inv_mpu.c **** 
2264:task/attitude/eMPL/inv_mpu.c ****     return 0;
2265:task/attitude/eMPL/inv_mpu.c **** }
 1454              		.loc 1 2265 1 view .LVU453
 1455 0444 4046     		mov	r0, r8
 1456 0446 04B0     		add	sp, sp, #16
 1457              	.LCFI15:
 1458              		.cfi_def_cfa_offset 32
 1459              		@ sp needed
 1460 0448 BDE8F08D 		pop	{r4, r5, r6, r7, r8, r10, fp, pc}
 1461              		.loc 1 2265 1 view .LVU454
 1462              		.cfi_endproc
 1463              	.LFE188:
 1465              		.section	.rodata.mpu_reg_dump.str1.4,"aMS",%progbits,1
 1466              		.align	2
 1467              	.LC0:
 1468 0000 25233578 		.ascii	"%#5x: %#5x\015\012\000"
 1468      3A202523 
 1468      35780D0A 
 1468      00
 1469              		.section	.text.mpu_reg_dump,"ax",%progbits
 1470              		.align	1
 1471              		.global	mpu_reg_dump
 1472              		.syntax unified
 1473              		.thumb
 1474              		.thumb_func
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 69


 1475              		.fpu fpv5-d16
 1477              	mpu_reg_dump:
 1478              	.LFB149:
 690:task/attitude/eMPL/inv_mpu.c ****     unsigned char ii;
 1479              		.loc 1 690 1 is_stmt 1 view -0
 1480              		.cfi_startproc
 1481              		@ args = 0, pretend = 0, frame = 8
 1482              		@ frame_needed = 0, uses_anonymous_args = 0
 1483 0000 10B5     		push	{r4, lr}
 1484              	.LCFI16:
 1485              		.cfi_def_cfa_offset 8
 1486              		.cfi_offset 4, -8
 1487              		.cfi_offset 14, -4
 1488 0002 82B0     		sub	sp, sp, #8
 1489              	.LCFI17:
 1490              		.cfi_def_cfa_offset 16
 691:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 1491              		.loc 1 691 5 view .LVU456
 692:task/attitude/eMPL/inv_mpu.c **** 
 1492              		.loc 1 692 5 view .LVU457
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1493              		.loc 1 694 5 view .LVU458
 1494              	.LVL103:
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1495              		.loc 1 694 13 is_stmt 0 view .LVU459
 1496 0004 0024     		movs	r4, #0
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1497              		.loc 1 694 5 view .LVU460
 1498 0006 07E0     		b	.L98
 1499              	.LVL104:
 1500              	.L105:
 700:task/attitude/eMPL/inv_mpu.c ****     }
 1501              		.loc 1 700 9 is_stmt 1 view .LVU461
 1502 0008 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1503 000c 2146     		mov	r1, r4
 1504 000e 1048     		ldr	r0, .L106
 1505 0010 FFF7FEFF 		bl	printf
 1506              	.LVL105:
 1507              	.L99:
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1508              		.loc 1 694 39 discriminator 2 view .LVU462
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1509              		.loc 1 694 41 is_stmt 0 discriminator 2 view .LVU463
 1510 0014 0134     		adds	r4, r4, #1
 1511              	.LVL106:
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1512              		.loc 1 694 41 discriminator 2 view .LVU464
 1513 0016 E4B2     		uxtb	r4, r4
 1514              	.LVL107:
 1515              	.L98:
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1516              		.loc 1 694 18 is_stmt 1 discriminator 1 view .LVU465
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1517              		.loc 1 694 25 is_stmt 0 discriminator 1 view .LVU466
 1518 0018 0E4B     		ldr	r3, .L106+4
 1519 001a 5868     		ldr	r0, [r3, #4]
 694:task/attitude/eMPL/inv_mpu.c ****     {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 70


 1520              		.loc 1 694 28 discriminator 1 view .LVU467
 1521 001c 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 694:task/attitude/eMPL/inv_mpu.c ****     {
 1522              		.loc 1 694 5 discriminator 1 view .LVU468
 1523 001e A342     		cmp	r3, r4
 1524 0020 13D9     		bls	.L104
 696:task/attitude/eMPL/inv_mpu.c ****             continue;
 1525              		.loc 1 696 9 is_stmt 1 view .LVU469
 696:task/attitude/eMPL/inv_mpu.c ****             continue;
 1526              		.loc 1 696 21 is_stmt 0 view .LVU470
 1527 0022 0C4B     		ldr	r3, .L106+4
 1528 0024 1B68     		ldr	r3, [r3]
 696:task/attitude/eMPL/inv_mpu.c ****             continue;
 1529              		.loc 1 696 25 view .LVU471
 1530 0026 5A7B     		ldrb	r2, [r3, #13]	@ zero_extendqisi2
 696:task/attitude/eMPL/inv_mpu.c ****             continue;
 1531              		.loc 1 696 12 view .LVU472
 1532 0028 A242     		cmp	r2, r4
 1533 002a F3D0     		beq	.L99
 696:task/attitude/eMPL/inv_mpu.c ****             continue;
 1534              		.loc 1 696 51 discriminator 1 view .LVU473
 1535 002c 1B7E     		ldrb	r3, [r3, #24]	@ zero_extendqisi2
 696:task/attitude/eMPL/inv_mpu.c ****             continue;
 1536              		.loc 1 696 36 discriminator 1 view .LVU474
 1537 002e A342     		cmp	r3, r4
 1538 0030 F0D0     		beq	.L99
 698:task/attitude/eMPL/inv_mpu.c ****             return -1;
 1539              		.loc 1 698 9 is_stmt 1 view .LVU475
 698:task/attitude/eMPL/inv_mpu.c ****             return -1;
 1540              		.loc 1 698 13 is_stmt 0 view .LVU476
 1541 0032 0DF10703 		add	r3, sp, #7
 1542 0036 0122     		movs	r2, #1
 1543 0038 2146     		mov	r1, r4
 1544 003a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1545 003c FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1546              	.LVL108:
 698:task/attitude/eMPL/inv_mpu.c ****             return -1;
 1547              		.loc 1 698 12 view .LVU477
 1548 0040 0028     		cmp	r0, #0
 1549 0042 E1D0     		beq	.L105
 699:task/attitude/eMPL/inv_mpu.c ****         log_i("%#5x: %#5x\r\n", ii, data);
 1550              		.loc 1 699 20 view .LVU478
 1551 0044 4FF0FF30 		mov	r0, #-1
 1552 0048 00E0     		b	.L97
 1553              	.L104:
 702:task/attitude/eMPL/inv_mpu.c **** }
 1554              		.loc 1 702 12 view .LVU479
 1555 004a 0020     		movs	r0, #0
 1556              	.L97:
 703:task/attitude/eMPL/inv_mpu.c **** 
 1557              		.loc 1 703 1 view .LVU480
 1558 004c 02B0     		add	sp, sp, #8
 1559              	.LCFI18:
 1560              		.cfi_def_cfa_offset 8
 1561              		@ sp needed
 1562 004e 10BD     		pop	{r4, pc}
 1563              	.LVL109:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 71


 1564              	.L107:
 703:task/attitude/eMPL/inv_mpu.c **** 
 1565              		.loc 1 703 1 view .LVU481
 1566              		.align	2
 1567              	.L106:
 1568 0050 00000000 		.word	.LC0
 1569 0054 00000000 		.word	.LANCHOR0
 1570              		.cfi_endproc
 1571              	.LFE149:
 1573              		.section	.text.mpu_read_reg,"ax",%progbits
 1574              		.align	1
 1575              		.global	mpu_read_reg
 1576              		.syntax unified
 1577              		.thumb
 1578              		.thumb_func
 1579              		.fpu fpv5-d16
 1581              	mpu_read_reg:
 1582              	.LVL110:
 1583              	.LFB150:
 713:task/attitude/eMPL/inv_mpu.c ****     if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 1584              		.loc 1 713 1 is_stmt 1 view -0
 1585              		.cfi_startproc
 1586              		@ args = 0, pretend = 0, frame = 0
 1587              		@ frame_needed = 0, uses_anonymous_args = 0
 713:task/attitude/eMPL/inv_mpu.c ****     if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 1588              		.loc 1 713 1 is_stmt 0 view .LVU483
 1589 0000 0B46     		mov	r3, r1
 714:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1590              		.loc 1 714 5 is_stmt 1 view .LVU484
 714:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1591              		.loc 1 714 18 is_stmt 0 view .LVU485
 1592 0002 0E4A     		ldr	r2, .L117
 1593 0004 1268     		ldr	r2, [r2]
 714:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1594              		.loc 1 714 22 view .LVU486
 1595 0006 517B     		ldrb	r1, [r2, #13]	@ zero_extendqisi2
 1596              	.LVL111:
 714:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1597              		.loc 1 714 8 view .LVU487
 1598 0008 8142     		cmp	r1, r0
 1599 000a 0ED0     		beq	.L110
 714:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1600              		.loc 1 714 49 discriminator 1 view .LVU488
 1601 000c 127E     		ldrb	r2, [r2, #24]	@ zero_extendqisi2
 714:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1602              		.loc 1 714 33 discriminator 1 view .LVU489
 1603 000e 8242     		cmp	r2, r0
 1604 0010 0ED0     		beq	.L111
 713:task/attitude/eMPL/inv_mpu.c ****     if (reg == st.reg->fifo_r_w || reg == st.reg->mem_r_w)
 1605              		.loc 1 713 1 view .LVU490
 1606 0012 10B5     		push	{r4, lr}
 1607              	.LCFI19:
 1608              		.cfi_def_cfa_offset 8
 1609              		.cfi_offset 4, -8
 1610              		.cfi_offset 14, -4
 716:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1611              		.loc 1 716 5 is_stmt 1 view .LVU491
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 72


 716:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1612              		.loc 1 716 18 is_stmt 0 view .LVU492
 1613 0014 094A     		ldr	r2, .L117
 1614 0016 5468     		ldr	r4, [r2, #4]
 716:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1615              		.loc 1 716 21 view .LVU493
 1616 0018 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 716:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1617              		.loc 1 716 8 view .LVU494
 1618 001a 8242     		cmp	r2, r0
 1619 001c 0BD9     		bls	.L112
 718:task/attitude/eMPL/inv_mpu.c **** }
 1620              		.loc 1 718 5 is_stmt 1 view .LVU495
 718:task/attitude/eMPL/inv_mpu.c **** }
 1621              		.loc 1 718 12 is_stmt 0 view .LVU496
 1622 001e 0122     		movs	r2, #1
 1623 0020 0146     		mov	r1, r0
 1624 0022 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 1625              	.LVL112:
 718:task/attitude/eMPL/inv_mpu.c **** }
 1626              		.loc 1 718 12 view .LVU497
 1627 0024 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1628              	.LVL113:
 1629              	.L108:
 719:task/attitude/eMPL/inv_mpu.c **** 
 1630              		.loc 1 719 1 view .LVU498
 1631 0028 10BD     		pop	{r4, pc}
 1632              	.LVL114:
 1633              	.L110:
 1634              	.LCFI20:
 1635              		.cfi_def_cfa_offset 0
 1636              		.cfi_restore 4
 1637              		.cfi_restore 14
 715:task/attitude/eMPL/inv_mpu.c ****     if (reg >= st.hw->num_reg)
 1638              		.loc 1 715 16 view .LVU499
 1639 002a 4FF0FF30 		mov	r0, #-1
 1640              	.LVL115:
 715:task/attitude/eMPL/inv_mpu.c ****     if (reg >= st.hw->num_reg)
 1641              		.loc 1 715 16 view .LVU500
 1642 002e 7047     		bx	lr
 1643              	.LVL116:
 1644              	.L111:
 715:task/attitude/eMPL/inv_mpu.c ****     if (reg >= st.hw->num_reg)
 1645              		.loc 1 715 16 view .LVU501
 1646 0030 4FF0FF30 		mov	r0, #-1
 1647              	.LVL117:
 719:task/attitude/eMPL/inv_mpu.c **** 
 1648              		.loc 1 719 1 view .LVU502
 1649 0034 7047     		bx	lr
 1650              	.LVL118:
 1651              	.L112:
 1652              	.LCFI21:
 1653              		.cfi_def_cfa_offset 8
 1654              		.cfi_offset 4, -8
 1655              		.cfi_offset 14, -4
 717:task/attitude/eMPL/inv_mpu.c ****     return i2c_read(st.hw->addr, reg, 1, data);
 1656              		.loc 1 717 16 view .LVU503
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 73


 1657 0036 4FF0FF30 		mov	r0, #-1
 1658              	.LVL119:
 717:task/attitude/eMPL/inv_mpu.c ****     return i2c_read(st.hw->addr, reg, 1, data);
 1659              		.loc 1 717 16 view .LVU504
 1660 003a F5E7     		b	.L108
 1661              	.L118:
 1662              		.align	2
 1663              	.L117:
 1664 003c 00000000 		.word	.LANCHOR0
 1665              		.cfi_endproc
 1666              	.LFE150:
 1668              		.section	.text.mpu_get_gyro_reg,"ax",%progbits
 1669              		.align	1
 1670              		.global	mpu_get_gyro_reg
 1671              		.syntax unified
 1672              		.thumb
 1673              		.thumb_func
 1674              		.fpu fpv5-d16
 1676              	mpu_get_gyro_reg:
 1677              	.LVL120:
 1678              	.LFB153:
 921:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
 1679              		.loc 1 921 1 is_stmt 1 view -0
 1680              		.cfi_startproc
 1681              		@ args = 0, pretend = 0, frame = 8
 1682              		@ frame_needed = 0, uses_anonymous_args = 0
 921:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
 1683              		.loc 1 921 1 is_stmt 0 view .LVU506
 1684 0000 70B5     		push	{r4, r5, r6, lr}
 1685              	.LCFI22:
 1686              		.cfi_def_cfa_offset 16
 1687              		.cfi_offset 4, -16
 1688              		.cfi_offset 5, -12
 1689              		.cfi_offset 6, -8
 1690              		.cfi_offset 14, -4
 1691 0002 82B0     		sub	sp, sp, #8
 1692              	.LCFI23:
 1693              		.cfi_def_cfa_offset 24
 922:task/attitude/eMPL/inv_mpu.c **** 
 1694              		.loc 1 922 5 is_stmt 1 view .LVU507
 924:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1695              		.loc 1 924 5 view .LVU508
 924:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1696              		.loc 1 924 22 is_stmt 0 view .LVU509
 1697 0004 194B     		ldr	r3, .L124
 1698 0006 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 924:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1699              		.loc 1 924 8 view .LVU510
 1700 0008 13F0700F 		tst	r3, #112
 1701 000c 28D0     		beq	.L121
 1702 000e 0446     		mov	r4, r0
 1703 0010 0D46     		mov	r5, r1
 927:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1704              		.loc 1 927 5 is_stmt 1 view .LVU511
 927:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1705              		.loc 1 927 20 is_stmt 0 view .LVU512
 1706 0012 164B     		ldr	r3, .L124
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 74


 1707 0014 5868     		ldr	r0, [r3, #4]
 1708              	.LVL121:
 927:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1709              		.loc 1 927 33 view .LVU513
 1710 0016 1968     		ldr	r1, [r3]
 1711              	.LVL122:
 927:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1712              		.loc 1 927 9 view .LVU514
 1713 0018 6B46     		mov	r3, sp
 1714 001a 0622     		movs	r2, #6
 1715 001c 897B     		ldrb	r1, [r1, #14]	@ zero_extendqisi2
 1716 001e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1717 0020 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1718              	.LVL123:
 927:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1719              		.loc 1 927 8 view .LVU515
 1720 0024 0646     		mov	r6, r0
 1721 0026 F0B9     		cbnz	r0, .L122
 929:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1722              		.loc 1 929 5 is_stmt 1 view .LVU516
 929:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1723              		.loc 1 929 19 is_stmt 0 view .LVU517
 1724 0028 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 929:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1725              		.loc 1 929 34 view .LVU518
 1726 002c 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 929:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1727              		.loc 1 929 29 view .LVU519
 1728 0030 43EA0223 		orr	r3, r3, r2, lsl #8
 929:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1729              		.loc 1 929 13 view .LVU520
 1730 0034 2380     		strh	r3, [r4]	@ movhi
 930:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1731              		.loc 1 930 5 is_stmt 1 view .LVU521
 930:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1732              		.loc 1 930 19 is_stmt 0 view .LVU522
 1733 0036 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
 930:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1734              		.loc 1 930 34 view .LVU523
 1735 003a 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 930:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1736              		.loc 1 930 29 view .LVU524
 1737 003e 43EA0223 		orr	r3, r3, r2, lsl #8
 930:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1738              		.loc 1 930 13 view .LVU525
 1739 0042 6380     		strh	r3, [r4, #2]	@ movhi
 931:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1740              		.loc 1 931 5 is_stmt 1 view .LVU526
 931:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1741              		.loc 1 931 19 is_stmt 0 view .LVU527
 1742 0044 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 931:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1743              		.loc 1 931 34 view .LVU528
 1744 0048 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 931:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1745              		.loc 1 931 29 view .LVU529
 1746 004c 43EA0223 		orr	r3, r3, r2, lsl #8
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 75


 931:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1747              		.loc 1 931 13 view .LVU530
 1748 0050 A380     		strh	r3, [r4, #4]	@ movhi
 932:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 1749              		.loc 1 932 5 is_stmt 1 view .LVU531
 932:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 1750              		.loc 1 932 8 is_stmt 0 view .LVU532
 1751 0052 15B1     		cbz	r5, .L119
 933:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1752              		.loc 1 933 9 is_stmt 1 view .LVU533
 1753 0054 2846     		mov	r0, r5
 1754 0056 FFF7FEFF 		bl	get_tick_count
 1755              	.LVL124:
 1756              	.L119:
 935:task/attitude/eMPL/inv_mpu.c **** 
 1757              		.loc 1 935 1 is_stmt 0 view .LVU534
 1758 005a 3046     		mov	r0, r6
 1759 005c 02B0     		add	sp, sp, #8
 1760              	.LCFI24:
 1761              		.cfi_remember_state
 1762              		.cfi_def_cfa_offset 16
 1763              		@ sp needed
 1764 005e 70BD     		pop	{r4, r5, r6, pc}
 1765              	.LVL125:
 1766              	.L121:
 1767              	.LCFI25:
 1768              		.cfi_restore_state
 925:task/attitude/eMPL/inv_mpu.c **** 
 1769              		.loc 1 925 16 view .LVU535
 1770 0060 4FF0FF36 		mov	r6, #-1
 1771 0064 F9E7     		b	.L119
 1772              	.LVL126:
 1773              	.L122:
 928:task/attitude/eMPL/inv_mpu.c ****     data[0] = (tmp[0] << 8) | tmp[1];
 1774              		.loc 1 928 16 view .LVU536
 1775 0066 4FF0FF36 		mov	r6, #-1
 1776 006a F6E7     		b	.L119
 1777              	.L125:
 1778              		.align	2
 1779              	.L124:
 1780 006c 00000000 		.word	.LANCHOR0
 1781              		.cfi_endproc
 1782              	.LFE153:
 1784              		.section	.text.mpu_get_accel_reg,"ax",%progbits
 1785              		.align	1
 1786              		.global	mpu_get_accel_reg
 1787              		.syntax unified
 1788              		.thumb
 1789              		.thumb_func
 1790              		.fpu fpv5-d16
 1792              	mpu_get_accel_reg:
 1793              	.LVL127:
 1794              	.LFB154:
 944:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
 1795              		.loc 1 944 1 is_stmt 1 view -0
 1796              		.cfi_startproc
 1797              		@ args = 0, pretend = 0, frame = 8
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 76


 1798              		@ frame_needed = 0, uses_anonymous_args = 0
 944:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[6];
 1799              		.loc 1 944 1 is_stmt 0 view .LVU538
 1800 0000 70B5     		push	{r4, r5, r6, lr}
 1801              	.LCFI26:
 1802              		.cfi_def_cfa_offset 16
 1803              		.cfi_offset 4, -16
 1804              		.cfi_offset 5, -12
 1805              		.cfi_offset 6, -8
 1806              		.cfi_offset 14, -4
 1807 0002 82B0     		sub	sp, sp, #8
 1808              	.LCFI27:
 1809              		.cfi_def_cfa_offset 24
 945:task/attitude/eMPL/inv_mpu.c **** 
 1810              		.loc 1 945 5 is_stmt 1 view .LVU539
 947:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1811              		.loc 1 947 5 view .LVU540
 947:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1812              		.loc 1 947 22 is_stmt 0 view .LVU541
 1813 0004 194B     		ldr	r3, .L131
 1814 0006 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 947:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1815              		.loc 1 947 8 view .LVU542
 1816 0008 13F0080F 		tst	r3, #8
 1817 000c 28D0     		beq	.L128
 1818 000e 0446     		mov	r4, r0
 1819 0010 0D46     		mov	r5, r1
 950:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1820              		.loc 1 950 5 is_stmt 1 view .LVU543
 950:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1821              		.loc 1 950 20 is_stmt 0 view .LVU544
 1822 0012 164B     		ldr	r3, .L131
 1823 0014 5868     		ldr	r0, [r3, #4]
 1824              	.LVL128:
 950:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1825              		.loc 1 950 33 view .LVU545
 1826 0016 1968     		ldr	r1, [r3]
 1827              	.LVL129:
 950:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1828              		.loc 1 950 9 view .LVU546
 1829 0018 6B46     		mov	r3, sp
 1830 001a 0622     		movs	r2, #6
 1831 001c C97B     		ldrb	r1, [r1, #15]	@ zero_extendqisi2
 1832 001e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1833 0020 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1834              	.LVL130:
 950:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1835              		.loc 1 950 8 view .LVU547
 1836 0024 0646     		mov	r6, r0
 1837 0026 F0B9     		cbnz	r0, .L129
 952:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1838              		.loc 1 952 5 is_stmt 1 view .LVU548
 952:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1839              		.loc 1 952 19 is_stmt 0 view .LVU549
 1840 0028 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 952:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1841              		.loc 1 952 34 view .LVU550
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 77


 1842 002c 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 952:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1843              		.loc 1 952 29 view .LVU551
 1844 0030 43EA0223 		orr	r3, r3, r2, lsl #8
 952:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[2] << 8) | tmp[3];
 1845              		.loc 1 952 13 view .LVU552
 1846 0034 2380     		strh	r3, [r4]	@ movhi
 953:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1847              		.loc 1 953 5 is_stmt 1 view .LVU553
 953:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1848              		.loc 1 953 19 is_stmt 0 view .LVU554
 1849 0036 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
 953:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1850              		.loc 1 953 34 view .LVU555
 1851 003a 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 953:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1852              		.loc 1 953 29 view .LVU556
 1853 003e 43EA0223 		orr	r3, r3, r2, lsl #8
 953:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[4] << 8) | tmp[5];
 1854              		.loc 1 953 13 view .LVU557
 1855 0042 6380     		strh	r3, [r4, #2]	@ movhi
 954:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1856              		.loc 1 954 5 is_stmt 1 view .LVU558
 954:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1857              		.loc 1 954 19 is_stmt 0 view .LVU559
 1858 0044 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 954:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1859              		.loc 1 954 34 view .LVU560
 1860 0048 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 954:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1861              		.loc 1 954 29 view .LVU561
 1862 004c 43EA0223 		orr	r3, r3, r2, lsl #8
 954:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1863              		.loc 1 954 13 view .LVU562
 1864 0050 A380     		strh	r3, [r4, #4]	@ movhi
 955:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 1865              		.loc 1 955 5 is_stmt 1 view .LVU563
 955:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 1866              		.loc 1 955 8 is_stmt 0 view .LVU564
 1867 0052 15B1     		cbz	r5, .L126
 956:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1868              		.loc 1 956 9 is_stmt 1 view .LVU565
 1869 0054 2846     		mov	r0, r5
 1870 0056 FFF7FEFF 		bl	get_tick_count
 1871              	.LVL131:
 1872              	.L126:
 958:task/attitude/eMPL/inv_mpu.c **** 
 1873              		.loc 1 958 1 is_stmt 0 view .LVU566
 1874 005a 3046     		mov	r0, r6
 1875 005c 02B0     		add	sp, sp, #8
 1876              	.LCFI28:
 1877              		.cfi_remember_state
 1878              		.cfi_def_cfa_offset 16
 1879              		@ sp needed
 1880 005e 70BD     		pop	{r4, r5, r6, pc}
 1881              	.LVL132:
 1882              	.L128:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 78


 1883              	.LCFI29:
 1884              		.cfi_restore_state
 948:task/attitude/eMPL/inv_mpu.c **** 
 1885              		.loc 1 948 16 view .LVU567
 1886 0060 4FF0FF36 		mov	r6, #-1
 1887 0064 F9E7     		b	.L126
 1888              	.LVL133:
 1889              	.L129:
 951:task/attitude/eMPL/inv_mpu.c ****     data[0] = (tmp[0] << 8) | tmp[1];
 1890              		.loc 1 951 16 view .LVU568
 1891 0066 4FF0FF36 		mov	r6, #-1
 1892 006a F6E7     		b	.L126
 1893              	.L132:
 1894              		.align	2
 1895              	.L131:
 1896 006c 00000000 		.word	.LANCHOR0
 1897              		.cfi_endproc
 1898              	.LFE154:
 1900              		.section	.text.mpu_get_temperature,"ax",%progbits
 1901              		.align	1
 1902              		.global	mpu_get_temperature
 1903              		.syntax unified
 1904              		.thumb
 1905              		.thumb_func
 1906              		.fpu fpv5-d16
 1908              	mpu_get_temperature:
 1909              	.LVL134:
 1910              	.LFB155:
 967:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 1911              		.loc 1 967 1 is_stmt 1 view -0
 1912              		.cfi_startproc
 1913              		@ args = 0, pretend = 0, frame = 8
 1914              		@ frame_needed = 0, uses_anonymous_args = 0
 967:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 1915              		.loc 1 967 1 is_stmt 0 view .LVU570
 1916 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1917              	.LCFI30:
 1918              		.cfi_def_cfa_offset 20
 1919              		.cfi_offset 4, -20
 1920              		.cfi_offset 5, -16
 1921              		.cfi_offset 6, -12
 1922              		.cfi_offset 7, -8
 1923              		.cfi_offset 14, -4
 1924 0002 83B0     		sub	sp, sp, #12
 1925              	.LCFI31:
 1926              		.cfi_def_cfa_offset 32
 968:task/attitude/eMPL/inv_mpu.c ****     short raw;
 1927              		.loc 1 968 5 is_stmt 1 view .LVU571
 969:task/attitude/eMPL/inv_mpu.c **** 
 1928              		.loc 1 969 5 view .LVU572
 971:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1929              		.loc 1 971 5 view .LVU573
 971:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1930              		.loc 1 971 22 is_stmt 0 view .LVU574
 1931 0004 204B     		ldr	r3, .L139
 1932 0006 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 971:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 79


 1933              		.loc 1 971 8 view .LVU575
 1934 0008 002B     		cmp	r3, #0
 1935 000a 37D0     		beq	.L136
 1936 000c 0646     		mov	r6, r0
 1937 000e 0D46     		mov	r5, r1
 974:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1938              		.loc 1 974 5 is_stmt 1 view .LVU576
 974:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1939              		.loc 1 974 20 is_stmt 0 view .LVU577
 1940 0010 1D4B     		ldr	r3, .L139
 1941 0012 5868     		ldr	r0, [r3, #4]
 1942              	.LVL135:
 974:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1943              		.loc 1 974 33 view .LVU578
 1944 0014 1968     		ldr	r1, [r3]
 1945              	.LVL136:
 974:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1946              		.loc 1 974 9 view .LVU579
 1947 0016 01AB     		add	r3, sp, #4
 1948 0018 0222     		movs	r2, #2
 1949 001a 097C     		ldrb	r1, [r1, #16]	@ zero_extendqisi2
 1950 001c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1951 001e FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 1952              	.LVL137:
 974:task/attitude/eMPL/inv_mpu.c ****         return -1;
 1953              		.loc 1 974 8 view .LVU580
 1954 0022 0746     		mov	r7, r0
 1955 0024 68BB     		cbnz	r0, .L137
 976:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1956              		.loc 1 976 5 is_stmt 1 view .LVU581
 976:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1957              		.loc 1 976 15 is_stmt 0 view .LVU582
 1958 0026 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 976:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1959              		.loc 1 976 19 view .LVU583
 1960 002a 1B02     		lsls	r3, r3, #8
 976:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1961              		.loc 1 976 25 view .LVU584
 1962 002c 1BB2     		sxth	r3, r3
 976:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1963              		.loc 1 976 30 view .LVU585
 1964 002e 9DF80540 		ldrb	r4, [sp, #5]	@ zero_extendqisi2
 976:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
 1965              		.loc 1 976 9 view .LVU586
 1966 0032 1C43     		orrs	r4, r4, r3
 1967              	.LVL138:
 977:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 1968              		.loc 1 977 5 is_stmt 1 view .LVU587
 977:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
 1969              		.loc 1 977 8 is_stmt 0 view .LVU588
 1970 0034 15B1     		cbz	r5, .L135
 978:task/attitude/eMPL/inv_mpu.c **** 
 1971              		.loc 1 978 9 is_stmt 1 view .LVU589
 1972 0036 2846     		mov	r0, r5
 1973 0038 FFF7FEFF 		bl	get_tick_count
 1974              	.LVL139:
 1975              	.L135:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 80


 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1976              		.loc 1 980 5 view .LVU590
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1977              		.loc 1 980 45 is_stmt 0 view .LVU591
 1978 003c 124B     		ldr	r3, .L139
 1979 003e 5B68     		ldr	r3, [r3, #4]
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1980              		.loc 1 980 48 view .LVU592
 1981 0040 B3F90820 		ldrsh	r2, [r3, #8]
 1982 0044 07EE902A 		vmov	s15, r2	@ int
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1983              		.loc 1 980 36 view .LVU593
 1984 0048 B8EEE77A 		vcvt.f32.s32	s14, s15
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1985              		.loc 1 980 34 view .LVU594
 1986 004c 07EE904A 		vmov	s15, r4	@ int
 1987 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 1988 0054 77EEC77A 		vsub.f32	s15, s15, s14
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1989              		.loc 1 980 70 view .LVU595
 1990 0058 DB88     		ldrh	r3, [r3, #6]
 1991 005a 06EE903A 		vmov	s13, r3	@ int
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1992              		.loc 1 980 63 view .LVU596
 1993 005e F8EEE66A 		vcvt.f32.s32	s13, s13
 1994 0062 87EEA67A 		vdiv.f32	s14, s15, s13
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1995              		.loc 1 980 26 view .LVU597
 1996 0066 DFED097A 		vldr.32	s15, .L139+4
 1997 006a 77EE277A 		vadd.f32	s15, s14, s15
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 1998              		.loc 1 980 15 view .LVU598
 1999 006e FEEEC87A 		vcvt.s32.f32	s15, s15, #16
 980:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2000              		.loc 1 980 13 view .LVU599
 2001 0072 C6ED007A 		vstr.32	s15, [r6]	@ int
 981:task/attitude/eMPL/inv_mpu.c **** }
 2002              		.loc 1 981 5 is_stmt 1 view .LVU600
 2003              	.LVL140:
 2004              	.L133:
 982:task/attitude/eMPL/inv_mpu.c **** 
 2005              		.loc 1 982 1 is_stmt 0 view .LVU601
 2006 0076 3846     		mov	r0, r7
 2007 0078 03B0     		add	sp, sp, #12
 2008              	.LCFI32:
 2009              		.cfi_remember_state
 2010              		.cfi_def_cfa_offset 20
 2011              		@ sp needed
 2012 007a F0BD     		pop	{r4, r5, r6, r7, pc}
 2013              	.LVL141:
 2014              	.L136:
 2015              	.LCFI33:
 2016              		.cfi_restore_state
 972:task/attitude/eMPL/inv_mpu.c **** 
 2017              		.loc 1 972 16 view .LVU602
 2018 007c 4FF0FF37 		mov	r7, #-1
 2019 0080 F9E7     		b	.L133
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 81


 2020              	.LVL142:
 2021              	.L137:
 975:task/attitude/eMPL/inv_mpu.c ****     raw = (tmp[0] << 8) | tmp[1];
 2022              		.loc 1 975 16 view .LVU603
 2023 0082 4FF0FF37 		mov	r7, #-1
 2024 0086 F6E7     		b	.L133
 2025              	.L140:
 2026              		.align	2
 2027              	.L139:
 2028 0088 00000000 		.word	.LANCHOR0
 2029 008c 00000C42 		.word	1108082688
 2030              		.cfi_endproc
 2031              	.LFE155:
 2033              		.section	.text.mpu_read_6500_accel_bias,"ax",%progbits
 2034              		.align	1
 2035              		.global	mpu_read_6500_accel_bias
 2036              		.syntax unified
 2037              		.thumb
 2038              		.thumb_func
 2039              		.fpu fpv5-d16
 2041              	mpu_read_6500_accel_bias:
 2042              	.LVL143:
 2043              	.LFB156:
 993:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 2044              		.loc 1 993 1 is_stmt 1 view -0
 2045              		.cfi_startproc
 2046              		@ args = 0, pretend = 0, frame = 8
 2047              		@ frame_needed = 0, uses_anonymous_args = 0
 993:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 2048              		.loc 1 993 1 is_stmt 0 view .LVU605
 2049 0000 10B5     		push	{r4, lr}
 2050              	.LCFI34:
 2051              		.cfi_def_cfa_offset 8
 2052              		.cfi_offset 4, -8
 2053              		.cfi_offset 14, -4
 2054 0002 82B0     		sub	sp, sp, #8
 2055              	.LCFI35:
 2056              		.cfi_def_cfa_offset 16
 2057 0004 0446     		mov	r4, r0
 994:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x77, 2, &data[0]))
 2058              		.loc 1 994 5 is_stmt 1 view .LVU606
 995:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2059              		.loc 1 995 5 view .LVU607
 995:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2060              		.loc 1 995 20 is_stmt 0 view .LVU608
 2061 0006 1E4B     		ldr	r3, .L147
 2062 0008 5868     		ldr	r0, [r3, #4]
 2063              	.LVL144:
 995:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2064              		.loc 1 995 9 view .LVU609
 2065 000a 6B46     		mov	r3, sp
 2066 000c 0222     		movs	r2, #2
 2067 000e 7721     		movs	r1, #119
 2068 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2069 0012 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2070              	.LVL145:
 995:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 82


 2071              		.loc 1 995 8 view .LVU610
 2072 0016 48BB     		cbnz	r0, .L143
 997:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2073              		.loc 1 997 5 is_stmt 1 view .LVU611
 997:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2074              		.loc 1 997 20 is_stmt 0 view .LVU612
 2075 0018 194B     		ldr	r3, .L147
 2076 001a 5868     		ldr	r0, [r3, #4]
 997:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2077              		.loc 1 997 9 view .LVU613
 2078 001c 0DF10203 		add	r3, sp, #2
 2079 0020 0222     		movs	r2, #2
 2080 0022 7A21     		movs	r1, #122
 2081 0024 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2082 0026 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2083              	.LVL146:
 997:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2084              		.loc 1 997 8 view .LVU614
 2085 002a 10BB     		cbnz	r0, .L144
 999:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2086              		.loc 1 999 5 is_stmt 1 view .LVU615
 999:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2087              		.loc 1 999 20 is_stmt 0 view .LVU616
 2088 002c 144B     		ldr	r3, .L147
 2089 002e 5868     		ldr	r0, [r3, #4]
 999:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2090              		.loc 1 999 9 view .LVU617
 2091 0030 01AB     		add	r3, sp, #4
 2092 0032 0222     		movs	r2, #2
 2093 0034 7D21     		movs	r1, #125
 2094 0036 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2095 0038 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2096              	.LVL147:
 999:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2097              		.loc 1 999 8 view .LVU618
 2098 003c E0B9     		cbnz	r0, .L145
1001:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2099              		.loc 1 1001 5 is_stmt 1 view .LVU619
1001:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2100              		.loc 1 1001 32 is_stmt 0 view .LVU620
 2101 003e 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
1001:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2102              		.loc 1 1001 48 view .LVU621
 2103 0042 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
1001:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2104              		.loc 1 1001 42 view .LVU622
 2105 0046 43EA0223 		orr	r3, r3, r2, lsl #8
1001:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2106              		.loc 1 1001 19 view .LVU623
 2107 004a 2360     		str	r3, [r4]
1002:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2108              		.loc 1 1002 5 is_stmt 1 view .LVU624
1002:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2109              		.loc 1 1002 32 is_stmt 0 view .LVU625
 2110 004c 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
1002:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2111              		.loc 1 1002 48 view .LVU626
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 83


 2112 0050 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
1002:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2113              		.loc 1 1002 42 view .LVU627
 2114 0054 43EA0223 		orr	r3, r3, r2, lsl #8
1002:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2115              		.loc 1 1002 19 view .LVU628
 2116 0058 6360     		str	r3, [r4, #4]
1003:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2117              		.loc 1 1003 5 is_stmt 1 view .LVU629
1003:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2118              		.loc 1 1003 32 is_stmt 0 view .LVU630
 2119 005a 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
1003:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2120              		.loc 1 1003 48 view .LVU631
 2121 005e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
1003:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2122              		.loc 1 1003 42 view .LVU632
 2123 0062 43EA0223 		orr	r3, r3, r2, lsl #8
1003:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2124              		.loc 1 1003 19 view .LVU633
 2125 0066 A360     		str	r3, [r4, #8]
1004:task/attitude/eMPL/inv_mpu.c **** }
 2126              		.loc 1 1004 5 is_stmt 1 view .LVU634
 2127              	.L141:
1005:task/attitude/eMPL/inv_mpu.c **** 
 2128              		.loc 1 1005 1 is_stmt 0 view .LVU635
 2129 0068 02B0     		add	sp, sp, #8
 2130              	.LCFI36:
 2131              		.cfi_remember_state
 2132              		.cfi_def_cfa_offset 8
 2133              		@ sp needed
 2134 006a 10BD     		pop	{r4, pc}
 2135              	.LVL148:
 2136              	.L143:
 2137              	.LCFI37:
 2138              		.cfi_restore_state
 996:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x7A, 2, &data[2]))
 2139              		.loc 1 996 16 view .LVU636
 2140 006c 4FF0FF30 		mov	r0, #-1
 2141 0070 FAE7     		b	.L141
 2142              	.L144:
 998:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x7D, 2, &data[4]))
 2143              		.loc 1 998 16 view .LVU637
 2144 0072 4FF0FF30 		mov	r0, #-1
 2145 0076 F7E7     		b	.L141
 2146              	.L145:
1000:task/attitude/eMPL/inv_mpu.c ****     accel_bias[0] = ((long)data[0] << 8) | data[1];
 2147              		.loc 1 1000 16 view .LVU638
 2148 0078 4FF0FF30 		mov	r0, #-1
 2149 007c F4E7     		b	.L141
 2150              	.L148:
 2151 007e 00BF     		.align	2
 2152              	.L147:
 2153 0080 00000000 		.word	.LANCHOR0
 2154              		.cfi_endproc
 2155              	.LFE156:
 2157              		.section	.text.mpu_read_6050_accel_bias,"ax",%progbits
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 84


 2158              		.align	1
 2159              		.global	mpu_read_6050_accel_bias
 2160              		.syntax unified
 2161              		.thumb
 2162              		.thumb_func
 2163              		.fpu fpv5-d16
 2165              	mpu_read_6050_accel_bias:
 2166              	.LVL149:
 2167              	.LFB157:
1016:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 2168              		.loc 1 1016 1 is_stmt 1 view -0
 2169              		.cfi_startproc
 2170              		@ args = 0, pretend = 0, frame = 8
 2171              		@ frame_needed = 0, uses_anonymous_args = 0
1016:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 2172              		.loc 1 1016 1 is_stmt 0 view .LVU640
 2173 0000 10B5     		push	{r4, lr}
 2174              	.LCFI38:
 2175              		.cfi_def_cfa_offset 8
 2176              		.cfi_offset 4, -8
 2177              		.cfi_offset 14, -4
 2178 0002 82B0     		sub	sp, sp, #8
 2179              	.LCFI39:
 2180              		.cfi_def_cfa_offset 16
 2181 0004 0446     		mov	r4, r0
1017:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x06, 2, &data[0]))
 2182              		.loc 1 1017 5 is_stmt 1 view .LVU641
1018:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2183              		.loc 1 1018 5 view .LVU642
1018:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2184              		.loc 1 1018 20 is_stmt 0 view .LVU643
 2185 0006 1E4B     		ldr	r3, .L155
 2186 0008 5868     		ldr	r0, [r3, #4]
 2187              	.LVL150:
1018:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2188              		.loc 1 1018 9 view .LVU644
 2189 000a 6B46     		mov	r3, sp
 2190 000c 0222     		movs	r2, #2
 2191 000e 0621     		movs	r1, #6
 2192 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2193 0012 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2194              	.LVL151:
1018:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2195              		.loc 1 1018 8 view .LVU645
 2196 0016 48BB     		cbnz	r0, .L151
1020:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2197              		.loc 1 1020 5 is_stmt 1 view .LVU646
1020:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2198              		.loc 1 1020 20 is_stmt 0 view .LVU647
 2199 0018 194B     		ldr	r3, .L155
 2200 001a 5868     		ldr	r0, [r3, #4]
1020:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2201              		.loc 1 1020 9 view .LVU648
 2202 001c 0DF10203 		add	r3, sp, #2
 2203 0020 0222     		movs	r2, #2
 2204 0022 0821     		movs	r1, #8
 2205 0024 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 85


 2206 0026 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2207              	.LVL152:
1020:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2208              		.loc 1 1020 8 view .LVU649
 2209 002a 10BB     		cbnz	r0, .L152
1022:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2210              		.loc 1 1022 5 is_stmt 1 view .LVU650
1022:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2211              		.loc 1 1022 20 is_stmt 0 view .LVU651
 2212 002c 144B     		ldr	r3, .L155
 2213 002e 5868     		ldr	r0, [r3, #4]
1022:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2214              		.loc 1 1022 9 view .LVU652
 2215 0030 01AB     		add	r3, sp, #4
 2216 0032 0222     		movs	r2, #2
 2217 0034 0A21     		movs	r1, #10
 2218 0036 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2219 0038 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2220              	.LVL153:
1022:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2221              		.loc 1 1022 8 view .LVU653
 2222 003c E0B9     		cbnz	r0, .L153
1024:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2223              		.loc 1 1024 5 is_stmt 1 view .LVU654
1024:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2224              		.loc 1 1024 32 is_stmt 0 view .LVU655
 2225 003e 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
1024:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2226              		.loc 1 1024 48 view .LVU656
 2227 0042 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
1024:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2228              		.loc 1 1024 42 view .LVU657
 2229 0046 43EA0223 		orr	r3, r3, r2, lsl #8
1024:task/attitude/eMPL/inv_mpu.c ****     accel_bias[1] = ((long)data[2] << 8) | data[3];
 2230              		.loc 1 1024 19 view .LVU658
 2231 004a 2360     		str	r3, [r4]
1025:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2232              		.loc 1 1025 5 is_stmt 1 view .LVU659
1025:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2233              		.loc 1 1025 32 is_stmt 0 view .LVU660
 2234 004c 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
1025:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2235              		.loc 1 1025 48 view .LVU661
 2236 0050 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
1025:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2237              		.loc 1 1025 42 view .LVU662
 2238 0054 43EA0223 		orr	r3, r3, r2, lsl #8
1025:task/attitude/eMPL/inv_mpu.c ****     accel_bias[2] = ((long)data[4] << 8) | data[5];
 2239              		.loc 1 1025 19 view .LVU663
 2240 0058 6360     		str	r3, [r4, #4]
1026:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2241              		.loc 1 1026 5 is_stmt 1 view .LVU664
1026:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2242              		.loc 1 1026 32 is_stmt 0 view .LVU665
 2243 005a 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
1026:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2244              		.loc 1 1026 48 view .LVU666
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 86


 2245 005e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
1026:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2246              		.loc 1 1026 42 view .LVU667
 2247 0062 43EA0223 		orr	r3, r3, r2, lsl #8
1026:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2248              		.loc 1 1026 19 view .LVU668
 2249 0066 A360     		str	r3, [r4, #8]
1027:task/attitude/eMPL/inv_mpu.c **** }
 2250              		.loc 1 1027 5 is_stmt 1 view .LVU669
 2251              	.L149:
1028:task/attitude/eMPL/inv_mpu.c **** 
 2252              		.loc 1 1028 1 is_stmt 0 view .LVU670
 2253 0068 02B0     		add	sp, sp, #8
 2254              	.LCFI40:
 2255              		.cfi_remember_state
 2256              		.cfi_def_cfa_offset 8
 2257              		@ sp needed
 2258 006a 10BD     		pop	{r4, pc}
 2259              	.LVL154:
 2260              	.L151:
 2261              	.LCFI41:
 2262              		.cfi_restore_state
1019:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x08, 2, &data[2]))
 2263              		.loc 1 1019 16 view .LVU671
 2264 006c 4FF0FF30 		mov	r0, #-1
 2265 0070 FAE7     		b	.L149
 2266              	.L152:
1021:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x0A, 2, &data[4]))
 2267              		.loc 1 1021 16 view .LVU672
 2268 0072 4FF0FF30 		mov	r0, #-1
 2269 0076 F7E7     		b	.L149
 2270              	.L153:
1023:task/attitude/eMPL/inv_mpu.c ****     accel_bias[0] = ((long)data[0] << 8) | data[1];
 2271              		.loc 1 1023 16 view .LVU673
 2272 0078 4FF0FF30 		mov	r0, #-1
 2273 007c F4E7     		b	.L149
 2274              	.L156:
 2275 007e 00BF     		.align	2
 2276              	.L155:
 2277 0080 00000000 		.word	.LANCHOR0
 2278              		.cfi_endproc
 2279              	.LFE157:
 2281              		.section	.text.mpu_read_6500_gyro_bias,"ax",%progbits
 2282              		.align	1
 2283              		.global	mpu_read_6500_gyro_bias
 2284              		.syntax unified
 2285              		.thumb
 2286              		.thumb_func
 2287              		.fpu fpv5-d16
 2289              	mpu_read_6500_gyro_bias:
 2290              	.LVL155:
 2291              	.LFB158:
1031:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 2292              		.loc 1 1031 1 is_stmt 1 view -0
 2293              		.cfi_startproc
 2294              		@ args = 0, pretend = 0, frame = 8
 2295              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 87


1031:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 2296              		.loc 1 1031 1 is_stmt 0 view .LVU675
 2297 0000 10B5     		push	{r4, lr}
 2298              	.LCFI42:
 2299              		.cfi_def_cfa_offset 8
 2300              		.cfi_offset 4, -8
 2301              		.cfi_offset 14, -4
 2302 0002 82B0     		sub	sp, sp, #8
 2303              	.LCFI43:
 2304              		.cfi_def_cfa_offset 16
 2305 0004 0446     		mov	r4, r0
1032:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x13, 2, &data[0]))
 2306              		.loc 1 1032 5 is_stmt 1 view .LVU676
1033:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2307              		.loc 1 1033 5 view .LVU677
1033:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2308              		.loc 1 1033 20 is_stmt 0 view .LVU678
 2309 0006 1E4B     		ldr	r3, .L163
 2310 0008 5868     		ldr	r0, [r3, #4]
 2311              	.LVL156:
1033:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2312              		.loc 1 1033 9 view .LVU679
 2313 000a 6B46     		mov	r3, sp
 2314 000c 0222     		movs	r2, #2
 2315 000e 1321     		movs	r1, #19
 2316 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2317 0012 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2318              	.LVL157:
1033:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2319              		.loc 1 1033 8 view .LVU680
 2320 0016 48BB     		cbnz	r0, .L159
1035:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2321              		.loc 1 1035 5 is_stmt 1 view .LVU681
1035:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2322              		.loc 1 1035 20 is_stmt 0 view .LVU682
 2323 0018 194B     		ldr	r3, .L163
 2324 001a 5868     		ldr	r0, [r3, #4]
1035:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2325              		.loc 1 1035 9 view .LVU683
 2326 001c 0DF10203 		add	r3, sp, #2
 2327 0020 0222     		movs	r2, #2
 2328 0022 1521     		movs	r1, #21
 2329 0024 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2330 0026 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2331              	.LVL158:
1035:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2332              		.loc 1 1035 8 view .LVU684
 2333 002a 10BB     		cbnz	r0, .L160
1037:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2334              		.loc 1 1037 5 is_stmt 1 view .LVU685
1037:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2335              		.loc 1 1037 20 is_stmt 0 view .LVU686
 2336 002c 144B     		ldr	r3, .L163
 2337 002e 5868     		ldr	r0, [r3, #4]
1037:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2338              		.loc 1 1037 9 view .LVU687
 2339 0030 01AB     		add	r3, sp, #4
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 88


 2340 0032 0222     		movs	r2, #2
 2341 0034 1721     		movs	r1, #23
 2342 0036 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2343 0038 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 2344              	.LVL159:
1037:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2345              		.loc 1 1037 8 view .LVU688
 2346 003c E0B9     		cbnz	r0, .L161
1039:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[1] = ((long)data[2] << 8) | data[3];
 2347              		.loc 1 1039 5 is_stmt 1 view .LVU689
1039:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[1] = ((long)data[2] << 8) | data[3];
 2348              		.loc 1 1039 31 is_stmt 0 view .LVU690
 2349 003e 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
1039:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[1] = ((long)data[2] << 8) | data[3];
 2350              		.loc 1 1039 47 view .LVU691
 2351 0042 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
1039:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[1] = ((long)data[2] << 8) | data[3];
 2352              		.loc 1 1039 41 view .LVU692
 2353 0046 43EA0223 		orr	r3, r3, r2, lsl #8
1039:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[1] = ((long)data[2] << 8) | data[3];
 2354              		.loc 1 1039 18 view .LVU693
 2355 004a 2360     		str	r3, [r4]
1040:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[2] = ((long)data[4] << 8) | data[5];
 2356              		.loc 1 1040 5 is_stmt 1 view .LVU694
1040:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[2] = ((long)data[4] << 8) | data[5];
 2357              		.loc 1 1040 31 is_stmt 0 view .LVU695
 2358 004c 9DF80220 		ldrb	r2, [sp, #2]	@ zero_extendqisi2
1040:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[2] = ((long)data[4] << 8) | data[5];
 2359              		.loc 1 1040 47 view .LVU696
 2360 0050 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
1040:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[2] = ((long)data[4] << 8) | data[5];
 2361              		.loc 1 1040 41 view .LVU697
 2362 0054 43EA0223 		orr	r3, r3, r2, lsl #8
1040:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[2] = ((long)data[4] << 8) | data[5];
 2363              		.loc 1 1040 18 view .LVU698
 2364 0058 6360     		str	r3, [r4, #4]
1041:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2365              		.loc 1 1041 5 is_stmt 1 view .LVU699
1041:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2366              		.loc 1 1041 31 is_stmt 0 view .LVU700
 2367 005a 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
1041:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2368              		.loc 1 1041 47 view .LVU701
 2369 005e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
1041:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2370              		.loc 1 1041 41 view .LVU702
 2371 0062 43EA0223 		orr	r3, r3, r2, lsl #8
1041:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2372              		.loc 1 1041 18 view .LVU703
 2373 0066 A360     		str	r3, [r4, #8]
1042:task/attitude/eMPL/inv_mpu.c **** }
 2374              		.loc 1 1042 5 is_stmt 1 view .LVU704
 2375              	.L157:
1043:task/attitude/eMPL/inv_mpu.c **** 
 2376              		.loc 1 1043 1 is_stmt 0 view .LVU705
 2377 0068 02B0     		add	sp, sp, #8
 2378              	.LCFI44:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 89


 2379              		.cfi_remember_state
 2380              		.cfi_def_cfa_offset 8
 2381              		@ sp needed
 2382 006a 10BD     		pop	{r4, pc}
 2383              	.LVL160:
 2384              	.L159:
 2385              	.LCFI45:
 2386              		.cfi_restore_state
1034:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x15, 2, &data[2]))
 2387              		.loc 1 1034 16 view .LVU706
 2388 006c 4FF0FF30 		mov	r0, #-1
 2389 0070 FAE7     		b	.L157
 2390              	.L160:
1036:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, 0x17, 2, &data[4]))
 2391              		.loc 1 1036 16 view .LVU707
 2392 0072 4FF0FF30 		mov	r0, #-1
 2393 0076 F7E7     		b	.L157
 2394              	.L161:
1038:task/attitude/eMPL/inv_mpu.c ****     gyro_bias[0] = ((long)data[0] << 8) | data[1];
 2395              		.loc 1 1038 16 view .LVU708
 2396 0078 4FF0FF30 		mov	r0, #-1
 2397 007c F4E7     		b	.L157
 2398              	.L164:
 2399 007e 00BF     		.align	2
 2400              	.L163:
 2401 0080 00000000 		.word	.LANCHOR0
 2402              		.cfi_endproc
 2403              	.LFE158:
 2405              		.section	.text.mpu_set_gyro_bias_reg,"ax",%progbits
 2406              		.align	1
 2407              		.global	mpu_set_gyro_bias_reg
 2408              		.syntax unified
 2409              		.thumb
 2410              		.thumb_func
 2411              		.fpu fpv5-d16
 2413              	mpu_set_gyro_bias_reg:
 2414              	.LVL161:
 2415              	.LFB159:
1054:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
 2416              		.loc 1 1054 1 is_stmt 1 view -0
 2417              		.cfi_startproc
 2418              		@ args = 0, pretend = 0, frame = 8
 2419              		@ frame_needed = 0, uses_anonymous_args = 0
1054:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
 2420              		.loc 1 1054 1 is_stmt 0 view .LVU710
 2421 0000 00B5     		push	{lr}
 2422              	.LCFI46:
 2423              		.cfi_def_cfa_offset 4
 2424              		.cfi_offset 14, -4
 2425 0002 83B0     		sub	sp, sp, #12
 2426              	.LCFI47:
 2427              		.cfi_def_cfa_offset 16
1055:task/attitude/eMPL/inv_mpu.c ****     int i = 0;
 2428              		.loc 1 1055 5 is_stmt 1 view .LVU711
1056:task/attitude/eMPL/inv_mpu.c ****     for (i = 0; i < 3; i++)
 2429              		.loc 1 1056 5 view .LVU712
 2430              	.LVL162:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 90


1057:task/attitude/eMPL/inv_mpu.c ****     {
 2431              		.loc 1 1057 5 view .LVU713
1057:task/attitude/eMPL/inv_mpu.c ****     {
 2432              		.loc 1 1057 12 is_stmt 0 view .LVU714
 2433 0004 0023     		movs	r3, #0
1057:task/attitude/eMPL/inv_mpu.c ****     {
 2434              		.loc 1 1057 5 view .LVU715
 2435 0006 05E0     		b	.L166
 2436              	.LVL163:
 2437              	.L167:
1059:task/attitude/eMPL/inv_mpu.c ****     }
 2438              		.loc 1 1059 9 is_stmt 1 discriminator 3 view .LVU716
1059:task/attitude/eMPL/inv_mpu.c ****     }
 2439              		.loc 1 1059 35 is_stmt 0 discriminator 3 view .LVU717
 2440 0008 50F82320 		ldr	r2, [r0, r3, lsl #2]
1059:task/attitude/eMPL/inv_mpu.c ****     }
 2441              		.loc 1 1059 25 discriminator 3 view .LVU718
 2442 000c 5242     		rsbs	r2, r2, #0
1059:task/attitude/eMPL/inv_mpu.c ****     }
 2443              		.loc 1 1059 22 discriminator 3 view .LVU719
 2444 000e 40F82320 		str	r2, [r0, r3, lsl #2]
1057:task/attitude/eMPL/inv_mpu.c ****     {
 2445              		.loc 1 1057 24 is_stmt 1 discriminator 3 view .LVU720
1057:task/attitude/eMPL/inv_mpu.c ****     {
 2446              		.loc 1 1057 25 is_stmt 0 discriminator 3 view .LVU721
 2447 0012 0133     		adds	r3, r3, #1
 2448              	.LVL164:
 2449              	.L166:
1057:task/attitude/eMPL/inv_mpu.c ****     {
 2450              		.loc 1 1057 17 is_stmt 1 discriminator 1 view .LVU722
1057:task/attitude/eMPL/inv_mpu.c ****     {
 2451              		.loc 1 1057 5 is_stmt 0 discriminator 1 view .LVU723
 2452 0014 022B     		cmp	r3, #2
 2453 0016 F7DD     		ble	.L167
1061:task/attitude/eMPL/inv_mpu.c ****     data[1] = (gyro_bias[0]) & 0xff;
 2454              		.loc 1 1061 5 is_stmt 1 view .LVU724
1061:task/attitude/eMPL/inv_mpu.c ****     data[1] = (gyro_bias[0]) & 0xff;
 2455              		.loc 1 1061 25 is_stmt 0 view .LVU725
 2456 0018 0368     		ldr	r3, [r0]
 2457              	.LVL165:
1061:task/attitude/eMPL/inv_mpu.c ****     data[1] = (gyro_bias[0]) & 0xff;
 2458              		.loc 1 1061 29 view .LVU726
 2459 001a 1A12     		asrs	r2, r3, #8
1061:task/attitude/eMPL/inv_mpu.c ****     data[1] = (gyro_bias[0]) & 0xff;
 2460              		.loc 1 1061 13 view .LVU727
 2461 001c 8DF80020 		strb	r2, [sp]
1062:task/attitude/eMPL/inv_mpu.c ****     data[2] = (gyro_bias[1] >> 8) & 0xff;
 2462              		.loc 1 1062 5 is_stmt 1 view .LVU728
1062:task/attitude/eMPL/inv_mpu.c ****     data[2] = (gyro_bias[1] >> 8) & 0xff;
 2463              		.loc 1 1062 13 is_stmt 0 view .LVU729
 2464 0020 8DF80130 		strb	r3, [sp, #1]
1063:task/attitude/eMPL/inv_mpu.c ****     data[3] = (gyro_bias[1]) & 0xff;
 2465              		.loc 1 1063 5 is_stmt 1 view .LVU730
1063:task/attitude/eMPL/inv_mpu.c ****     data[3] = (gyro_bias[1]) & 0xff;
 2466              		.loc 1 1063 25 is_stmt 0 view .LVU731
 2467 0024 4368     		ldr	r3, [r0, #4]
1063:task/attitude/eMPL/inv_mpu.c ****     data[3] = (gyro_bias[1]) & 0xff;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 91


 2468              		.loc 1 1063 29 view .LVU732
 2469 0026 1A12     		asrs	r2, r3, #8
1063:task/attitude/eMPL/inv_mpu.c ****     data[3] = (gyro_bias[1]) & 0xff;
 2470              		.loc 1 1063 13 view .LVU733
 2471 0028 8DF80220 		strb	r2, [sp, #2]
1064:task/attitude/eMPL/inv_mpu.c ****     data[4] = (gyro_bias[2] >> 8) & 0xff;
 2472              		.loc 1 1064 5 is_stmt 1 view .LVU734
1064:task/attitude/eMPL/inv_mpu.c ****     data[4] = (gyro_bias[2] >> 8) & 0xff;
 2473              		.loc 1 1064 13 is_stmt 0 view .LVU735
 2474 002c 8DF80330 		strb	r3, [sp, #3]
1065:task/attitude/eMPL/inv_mpu.c ****     data[5] = (gyro_bias[2]) & 0xff;
 2475              		.loc 1 1065 5 is_stmt 1 view .LVU736
1065:task/attitude/eMPL/inv_mpu.c ****     data[5] = (gyro_bias[2]) & 0xff;
 2476              		.loc 1 1065 25 is_stmt 0 view .LVU737
 2477 0030 8368     		ldr	r3, [r0, #8]
1065:task/attitude/eMPL/inv_mpu.c ****     data[5] = (gyro_bias[2]) & 0xff;
 2478              		.loc 1 1065 29 view .LVU738
 2479 0032 1A12     		asrs	r2, r3, #8
1065:task/attitude/eMPL/inv_mpu.c ****     data[5] = (gyro_bias[2]) & 0xff;
 2480              		.loc 1 1065 13 view .LVU739
 2481 0034 8DF80420 		strb	r2, [sp, #4]
1066:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x13, 2, &data[0]))
 2482              		.loc 1 1066 5 is_stmt 1 view .LVU740
1066:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x13, 2, &data[0]))
 2483              		.loc 1 1066 13 is_stmt 0 view .LVU741
 2484 0038 8DF80530 		strb	r3, [sp, #5]
1067:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2485              		.loc 1 1067 5 is_stmt 1 view .LVU742
1067:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2486              		.loc 1 1067 21 is_stmt 0 view .LVU743
 2487 003c 134B     		ldr	r3, .L174
 2488 003e 5868     		ldr	r0, [r3, #4]
 2489              	.LVL166:
1067:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2490              		.loc 1 1067 9 view .LVU744
 2491 0040 6B46     		mov	r3, sp
 2492 0042 0222     		movs	r2, #2
 2493 0044 1321     		movs	r1, #19
 2494 0046 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2495 0048 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2496              	.LVL167:
1067:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2497              		.loc 1 1067 8 view .LVU745
 2498 004c A8B9     		cbnz	r0, .L169
1069:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2499              		.loc 1 1069 5 is_stmt 1 view .LVU746
1069:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2500              		.loc 1 1069 21 is_stmt 0 view .LVU747
 2501 004e 0F4B     		ldr	r3, .L174
 2502 0050 5868     		ldr	r0, [r3, #4]
1069:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2503              		.loc 1 1069 9 view .LVU748
 2504 0052 0DF10203 		add	r3, sp, #2
 2505 0056 0222     		movs	r2, #2
 2506 0058 1521     		movs	r1, #21
 2507 005a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2508 005c FFF7FEFF 		bl	Sensors_I2C_WriteRegister
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 92


 2509              	.LVL168:
1069:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2510              		.loc 1 1069 8 view .LVU749
 2511 0060 70B9     		cbnz	r0, .L170
1071:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2512              		.loc 1 1071 5 is_stmt 1 view .LVU750
1071:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2513              		.loc 1 1071 21 is_stmt 0 view .LVU751
 2514 0062 0A4B     		ldr	r3, .L174
 2515 0064 5868     		ldr	r0, [r3, #4]
1071:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2516              		.loc 1 1071 9 view .LVU752
 2517 0066 01AB     		add	r3, sp, #4
 2518 0068 0222     		movs	r2, #2
 2519 006a 1721     		movs	r1, #23
 2520 006c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2521 006e FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2522              	.LVL169:
1071:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2523              		.loc 1 1071 8 view .LVU753
 2524 0072 40B9     		cbnz	r0, .L173
 2525              	.L165:
1074:task/attitude/eMPL/inv_mpu.c **** 
 2526              		.loc 1 1074 1 view .LVU754
 2527 0074 03B0     		add	sp, sp, #12
 2528              	.LCFI48:
 2529              		.cfi_remember_state
 2530              		.cfi_def_cfa_offset 4
 2531              		@ sp needed
 2532 0076 5DF804FB 		ldr	pc, [sp], #4
 2533              	.L169:
 2534              	.LCFI49:
 2535              		.cfi_restore_state
1068:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x15, 2, &data[2]))
 2536              		.loc 1 1068 16 view .LVU755
 2537 007a 4FF0FF30 		mov	r0, #-1
 2538 007e F9E7     		b	.L165
 2539              	.L170:
1070:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x17, 2, &data[4]))
 2540              		.loc 1 1070 16 view .LVU756
 2541 0080 4FF0FF30 		mov	r0, #-1
 2542 0084 F6E7     		b	.L165
 2543              	.L173:
1072:task/attitude/eMPL/inv_mpu.c ****     return 0;
 2544              		.loc 1 1072 16 view .LVU757
 2545 0086 4FF0FF30 		mov	r0, #-1
 2546 008a F3E7     		b	.L165
 2547              	.L175:
 2548              		.align	2
 2549              	.L174:
 2550 008c 00000000 		.word	.LANCHOR0
 2551              		.cfi_endproc
 2552              	.LFE159:
 2554              		.section	.text.mpu_set_accel_bias_6050_reg,"ax",%progbits
 2555              		.align	1
 2556              		.global	mpu_set_accel_bias_6050_reg
 2557              		.syntax unified
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 93


 2558              		.thumb
 2559              		.thumb_func
 2560              		.fpu fpv5-d16
 2562              	mpu_set_accel_bias_6050_reg:
 2563              	.LVL170:
 2564              	.LFB160:
1085:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
 2565              		.loc 1 1085 1 is_stmt 1 view -0
 2566              		.cfi_startproc
 2567              		@ args = 0, pretend = 0, frame = 24
 2568              		@ frame_needed = 0, uses_anonymous_args = 0
1085:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
 2569              		.loc 1 1085 1 is_stmt 0 view .LVU759
 2570 0000 10B5     		push	{r4, lr}
 2571              	.LCFI50:
 2572              		.cfi_def_cfa_offset 8
 2573              		.cfi_offset 4, -8
 2574              		.cfi_offset 14, -4
 2575 0002 86B0     		sub	sp, sp, #24
 2576              	.LCFI51:
 2577              		.cfi_def_cfa_offset 32
 2578 0004 0446     		mov	r4, r0
1086:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
 2579              		.loc 1 1086 5 is_stmt 1 view .LVU760
1086:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
 2580              		.loc 1 1086 19 is_stmt 0 view .LVU761
 2581 0006 2D4B     		ldr	r3, .L184
 2582 0008 93E80300 		ldm	r3, {r0, r1}
 2583              	.LVL171:
1086:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
 2584              		.loc 1 1086 19 view .LVU762
 2585 000c 0490     		str	r0, [sp, #16]
 2586 000e ADF81410 		strh	r1, [sp, #20]	@ movhi
1087:task/attitude/eMPL/inv_mpu.c **** 
 2587              		.loc 1 1087 5 is_stmt 1 view .LVU763
1087:task/attitude/eMPL/inv_mpu.c **** 
 2588              		.loc 1 1087 10 is_stmt 0 view .LVU764
 2589 0012 0023     		movs	r3, #0
 2590 0014 0193     		str	r3, [sp, #4]
 2591 0016 0293     		str	r3, [sp, #8]
 2592 0018 0393     		str	r3, [sp, #12]
1089:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2593              		.loc 1 1089 5 is_stmt 1 view .LVU765
1089:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2594              		.loc 1 1089 9 is_stmt 0 view .LVU766
 2595 001a 01A8     		add	r0, sp, #4
 2596 001c FFF7FEFF 		bl	mpu_read_6050_accel_bias
 2597              	.LVL172:
1089:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2598              		.loc 1 1089 8 view .LVU767
 2599 0020 0028     		cmp	r0, #0
 2600 0022 3ED1     		bne	.L178
1092:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2601              		.loc 1 1092 5 is_stmt 1 view .LVU768
1092:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2602              		.loc 1 1092 37 is_stmt 0 view .LVU769
 2603 0024 2168     		ldr	r1, [r4]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 94


1092:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2604              		.loc 1 1092 41 view .LVU770
 2605 0026 21F00103 		bic	r3, r1, #1
1092:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2606              		.loc 1 1092 23 view .LVU771
 2607 002a 0199     		ldr	r1, [sp, #4]
 2608 002c C91A     		subs	r1, r1, r3
 2609 002e 0191     		str	r1, [sp, #4]
1093:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2610              		.loc 1 1093 5 is_stmt 1 view .LVU772
1093:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2611              		.loc 1 1093 37 is_stmt 0 view .LVU773
 2612 0030 6268     		ldr	r2, [r4, #4]
1093:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2613              		.loc 1 1093 41 view .LVU774
 2614 0032 22F00103 		bic	r3, r2, #1
1093:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2615              		.loc 1 1093 23 view .LVU775
 2616 0036 029A     		ldr	r2, [sp, #8]
 2617 0038 D21A     		subs	r2, r2, r3
 2618 003a 0292     		str	r2, [sp, #8]
1094:task/attitude/eMPL/inv_mpu.c **** 
 2619              		.loc 1 1094 5 is_stmt 1 view .LVU776
1094:task/attitude/eMPL/inv_mpu.c **** 
 2620              		.loc 1 1094 37 is_stmt 0 view .LVU777
 2621 003c A068     		ldr	r0, [r4, #8]
1094:task/attitude/eMPL/inv_mpu.c **** 
 2622              		.loc 1 1094 41 view .LVU778
 2623 003e 20F00100 		bic	r0, r0, #1
1094:task/attitude/eMPL/inv_mpu.c **** 
 2624              		.loc 1 1094 23 view .LVU779
 2625 0042 039B     		ldr	r3, [sp, #12]
 2626 0044 1B1A     		subs	r3, r3, r0
 2627 0046 0393     		str	r3, [sp, #12]
1096:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
 2628              		.loc 1 1096 5 is_stmt 1 view .LVU780
1096:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
 2629              		.loc 1 1096 34 is_stmt 0 view .LVU781
 2630 0048 0812     		asrs	r0, r1, #8
1096:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
 2631              		.loc 1 1096 13 view .LVU782
 2632 004a 8DF81000 		strb	r0, [sp, #16]
1097:task/attitude/eMPL/inv_mpu.c ****     data[2] = (accel_reg_bias[1] >> 8) & 0xff;
 2633              		.loc 1 1097 5 is_stmt 1 view .LVU783
1097:task/attitude/eMPL/inv_mpu.c ****     data[2] = (accel_reg_bias[1] >> 8) & 0xff;
 2634              		.loc 1 1097 13 is_stmt 0 view .LVU784
 2635 004e 8DF81110 		strb	r1, [sp, #17]
1098:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
 2636              		.loc 1 1098 5 is_stmt 1 view .LVU785
1098:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
 2637              		.loc 1 1098 34 is_stmt 0 view .LVU786
 2638 0052 1112     		asrs	r1, r2, #8
1098:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
 2639              		.loc 1 1098 13 view .LVU787
 2640 0054 8DF81210 		strb	r1, [sp, #18]
1099:task/attitude/eMPL/inv_mpu.c ****     data[4] = (accel_reg_bias[2] >> 8) & 0xff;
 2641              		.loc 1 1099 5 is_stmt 1 view .LVU788
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 95


1099:task/attitude/eMPL/inv_mpu.c ****     data[4] = (accel_reg_bias[2] >> 8) & 0xff;
 2642              		.loc 1 1099 13 is_stmt 0 view .LVU789
 2643 0058 8DF81320 		strb	r2, [sp, #19]
1100:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
 2644              		.loc 1 1100 5 is_stmt 1 view .LVU790
1100:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
 2645              		.loc 1 1100 34 is_stmt 0 view .LVU791
 2646 005c 1A12     		asrs	r2, r3, #8
1100:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
 2647              		.loc 1 1100 13 view .LVU792
 2648 005e 8DF81420 		strb	r2, [sp, #20]
1101:task/attitude/eMPL/inv_mpu.c **** 
 2649              		.loc 1 1101 5 is_stmt 1 view .LVU793
1101:task/attitude/eMPL/inv_mpu.c **** 
 2650              		.loc 1 1101 13 is_stmt 0 view .LVU794
 2651 0062 8DF81530 		strb	r3, [sp, #21]
1103:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2652              		.loc 1 1103 5 is_stmt 1 view .LVU795
1103:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2653              		.loc 1 1103 21 is_stmt 0 view .LVU796
 2654 0066 164B     		ldr	r3, .L184+4
 2655 0068 5868     		ldr	r0, [r3, #4]
1103:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2656              		.loc 1 1103 9 view .LVU797
 2657 006a 04AB     		add	r3, sp, #16
 2658 006c 0222     		movs	r2, #2
 2659 006e 0621     		movs	r1, #6
 2660 0070 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2661 0072 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2662              	.LVL173:
1103:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2663              		.loc 1 1103 8 view .LVU798
 2664 0076 B8B9     		cbnz	r0, .L179
1105:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2665              		.loc 1 1105 5 is_stmt 1 view .LVU799
1105:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2666              		.loc 1 1105 21 is_stmt 0 view .LVU800
 2667 0078 114B     		ldr	r3, .L184+4
 2668 007a 5868     		ldr	r0, [r3, #4]
1105:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2669              		.loc 1 1105 9 view .LVU801
 2670 007c 0DF11203 		add	r3, sp, #18
 2671 0080 0222     		movs	r2, #2
 2672 0082 0821     		movs	r1, #8
 2673 0084 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2674 0086 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2675              	.LVL174:
1105:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2676              		.loc 1 1105 8 view .LVU802
 2677 008a 80B9     		cbnz	r0, .L180
1107:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2678              		.loc 1 1107 5 is_stmt 1 view .LVU803
1107:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2679              		.loc 1 1107 21 is_stmt 0 view .LVU804
 2680 008c 0C4B     		ldr	r3, .L184+4
 2681 008e 5868     		ldr	r0, [r3, #4]
1107:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 96


 2682              		.loc 1 1107 9 view .LVU805
 2683 0090 05AB     		add	r3, sp, #20
 2684 0092 0222     		movs	r2, #2
 2685 0094 0A21     		movs	r1, #10
 2686 0096 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2687 0098 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2688              	.LVL175:
1107:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2689              		.loc 1 1107 8 view .LVU806
 2690 009c 50B9     		cbnz	r0, .L183
 2691              	.L176:
1111:task/attitude/eMPL/inv_mpu.c **** 
 2692              		.loc 1 1111 1 view .LVU807
 2693 009e 06B0     		add	sp, sp, #24
 2694              	.LCFI52:
 2695              		.cfi_remember_state
 2696              		.cfi_def_cfa_offset 8
 2697              		@ sp needed
 2698 00a0 10BD     		pop	{r4, pc}
 2699              	.LVL176:
 2700              	.L178:
 2701              	.LCFI53:
 2702              		.cfi_restore_state
1090:task/attitude/eMPL/inv_mpu.c **** 
 2703              		.loc 1 1090 16 view .LVU808
 2704 00a2 4FF0FF30 		mov	r0, #-1
 2705 00a6 FAE7     		b	.L176
 2706              	.L179:
1104:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x08, 2, &data[2]))
 2707              		.loc 1 1104 16 view .LVU809
 2708 00a8 4FF0FF30 		mov	r0, #-1
 2709 00ac F7E7     		b	.L176
 2710              	.L180:
1106:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x0A, 2, &data[4]))
 2711              		.loc 1 1106 16 view .LVU810
 2712 00ae 4FF0FF30 		mov	r0, #-1
 2713 00b2 F4E7     		b	.L176
 2714              	.L183:
1108:task/attitude/eMPL/inv_mpu.c **** 
 2715              		.loc 1 1108 16 view .LVU811
 2716 00b4 4FF0FF30 		mov	r0, #-1
 2717 00b8 F1E7     		b	.L176
 2718              	.L185:
 2719 00ba 00BF     		.align	2
 2720              	.L184:
 2721 00bc 00000000 		.word	.LANCHOR1
 2722 00c0 00000000 		.word	.LANCHOR0
 2723              		.cfi_endproc
 2724              	.LFE160:
 2726              		.section	.text.mpu_set_accel_bias_6500_reg,"ax",%progbits
 2727              		.align	1
 2728              		.global	mpu_set_accel_bias_6500_reg
 2729              		.syntax unified
 2730              		.thumb
 2731              		.thumb_func
 2732              		.fpu fpv5-d16
 2734              	mpu_set_accel_bias_6500_reg:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 97


 2735              	.LVL177:
 2736              	.LFB161:
1122:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
 2737              		.loc 1 1122 1 is_stmt 1 view -0
 2738              		.cfi_startproc
 2739              		@ args = 0, pretend = 0, frame = 24
 2740              		@ frame_needed = 0, uses_anonymous_args = 0
1122:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6] = {0, 0, 0, 0, 0, 0};
 2741              		.loc 1 1122 1 is_stmt 0 view .LVU813
 2742 0000 10B5     		push	{r4, lr}
 2743              	.LCFI54:
 2744              		.cfi_def_cfa_offset 8
 2745              		.cfi_offset 4, -8
 2746              		.cfi_offset 14, -4
 2747 0002 86B0     		sub	sp, sp, #24
 2748              	.LCFI55:
 2749              		.cfi_def_cfa_offset 32
 2750 0004 0446     		mov	r4, r0
1123:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
 2751              		.loc 1 1123 5 is_stmt 1 view .LVU814
1123:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
 2752              		.loc 1 1123 19 is_stmt 0 view .LVU815
 2753 0006 2D4B     		ldr	r3, .L194
 2754 0008 93E80300 		ldm	r3, {r0, r1}
 2755              	.LVL178:
1123:task/attitude/eMPL/inv_mpu.c ****     long accel_reg_bias[3] = {0, 0, 0};
 2756              		.loc 1 1123 19 view .LVU816
 2757 000c 0490     		str	r0, [sp, #16]
 2758 000e ADF81410 		strh	r1, [sp, #20]	@ movhi
1124:task/attitude/eMPL/inv_mpu.c **** 
 2759              		.loc 1 1124 5 is_stmt 1 view .LVU817
1124:task/attitude/eMPL/inv_mpu.c **** 
 2760              		.loc 1 1124 10 is_stmt 0 view .LVU818
 2761 0012 0023     		movs	r3, #0
 2762 0014 0193     		str	r3, [sp, #4]
 2763 0016 0293     		str	r3, [sp, #8]
 2764 0018 0393     		str	r3, [sp, #12]
1126:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2765              		.loc 1 1126 5 is_stmt 1 view .LVU819
1126:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2766              		.loc 1 1126 9 is_stmt 0 view .LVU820
 2767 001a 01A8     		add	r0, sp, #4
 2768 001c FFF7FEFF 		bl	mpu_read_6500_accel_bias
 2769              	.LVL179:
1126:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2770              		.loc 1 1126 8 view .LVU821
 2771 0020 0028     		cmp	r0, #0
 2772 0022 3ED1     		bne	.L188
1130:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2773              		.loc 1 1130 5 is_stmt 1 view .LVU822
1130:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2774              		.loc 1 1130 37 is_stmt 0 view .LVU823
 2775 0024 2168     		ldr	r1, [r4]
1130:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
 2776              		.loc 1 1130 41 view .LVU824
 2777 0026 21F00103 		bic	r3, r1, #1
1130:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[1] -= (accel_bias[1] & ~1);
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 98


 2778              		.loc 1 1130 23 view .LVU825
 2779 002a 0199     		ldr	r1, [sp, #4]
 2780 002c C91A     		subs	r1, r1, r3
 2781 002e 0191     		str	r1, [sp, #4]
1131:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2782              		.loc 1 1131 5 is_stmt 1 view .LVU826
1131:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2783              		.loc 1 1131 37 is_stmt 0 view .LVU827
 2784 0030 6268     		ldr	r2, [r4, #4]
1131:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2785              		.loc 1 1131 41 view .LVU828
 2786 0032 22F00103 		bic	r3, r2, #1
1131:task/attitude/eMPL/inv_mpu.c ****     accel_reg_bias[2] -= (accel_bias[2] & ~1);
 2787              		.loc 1 1131 23 view .LVU829
 2788 0036 029A     		ldr	r2, [sp, #8]
 2789 0038 D21A     		subs	r2, r2, r3
 2790 003a 0292     		str	r2, [sp, #8]
1132:task/attitude/eMPL/inv_mpu.c **** 
 2791              		.loc 1 1132 5 is_stmt 1 view .LVU830
1132:task/attitude/eMPL/inv_mpu.c **** 
 2792              		.loc 1 1132 37 is_stmt 0 view .LVU831
 2793 003c A068     		ldr	r0, [r4, #8]
1132:task/attitude/eMPL/inv_mpu.c **** 
 2794              		.loc 1 1132 41 view .LVU832
 2795 003e 20F00100 		bic	r0, r0, #1
1132:task/attitude/eMPL/inv_mpu.c **** 
 2796              		.loc 1 1132 23 view .LVU833
 2797 0042 039B     		ldr	r3, [sp, #12]
 2798 0044 1B1A     		subs	r3, r3, r0
 2799 0046 0393     		str	r3, [sp, #12]
1134:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
 2800              		.loc 1 1134 5 is_stmt 1 view .LVU834
1134:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
 2801              		.loc 1 1134 34 is_stmt 0 view .LVU835
 2802 0048 0812     		asrs	r0, r1, #8
1134:task/attitude/eMPL/inv_mpu.c ****     data[1] = (accel_reg_bias[0]) & 0xff;
 2803              		.loc 1 1134 13 view .LVU836
 2804 004a 8DF81000 		strb	r0, [sp, #16]
1135:task/attitude/eMPL/inv_mpu.c ****     data[2] = (accel_reg_bias[1] >> 8) & 0xff;
 2805              		.loc 1 1135 5 is_stmt 1 view .LVU837
1135:task/attitude/eMPL/inv_mpu.c ****     data[2] = (accel_reg_bias[1] >> 8) & 0xff;
 2806              		.loc 1 1135 13 is_stmt 0 view .LVU838
 2807 004e 8DF81110 		strb	r1, [sp, #17]
1136:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
 2808              		.loc 1 1136 5 is_stmt 1 view .LVU839
1136:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
 2809              		.loc 1 1136 34 is_stmt 0 view .LVU840
 2810 0052 1112     		asrs	r1, r2, #8
1136:task/attitude/eMPL/inv_mpu.c ****     data[3] = (accel_reg_bias[1]) & 0xff;
 2811              		.loc 1 1136 13 view .LVU841
 2812 0054 8DF81210 		strb	r1, [sp, #18]
1137:task/attitude/eMPL/inv_mpu.c ****     data[4] = (accel_reg_bias[2] >> 8) & 0xff;
 2813              		.loc 1 1137 5 is_stmt 1 view .LVU842
1137:task/attitude/eMPL/inv_mpu.c ****     data[4] = (accel_reg_bias[2] >> 8) & 0xff;
 2814              		.loc 1 1137 13 is_stmt 0 view .LVU843
 2815 0058 8DF81320 		strb	r2, [sp, #19]
1138:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 99


 2816              		.loc 1 1138 5 is_stmt 1 view .LVU844
1138:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
 2817              		.loc 1 1138 34 is_stmt 0 view .LVU845
 2818 005c 1A12     		asrs	r2, r3, #8
1138:task/attitude/eMPL/inv_mpu.c ****     data[5] = (accel_reg_bias[2]) & 0xff;
 2819              		.loc 1 1138 13 view .LVU846
 2820 005e 8DF81420 		strb	r2, [sp, #20]
1139:task/attitude/eMPL/inv_mpu.c **** 
 2821              		.loc 1 1139 5 is_stmt 1 view .LVU847
1139:task/attitude/eMPL/inv_mpu.c **** 
 2822              		.loc 1 1139 13 is_stmt 0 view .LVU848
 2823 0062 8DF81530 		strb	r3, [sp, #21]
1141:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2824              		.loc 1 1141 5 is_stmt 1 view .LVU849
1141:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2825              		.loc 1 1141 21 is_stmt 0 view .LVU850
 2826 0066 164B     		ldr	r3, .L194+4
 2827 0068 5868     		ldr	r0, [r3, #4]
1141:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2828              		.loc 1 1141 9 view .LVU851
 2829 006a 04AB     		add	r3, sp, #16
 2830 006c 0222     		movs	r2, #2
 2831 006e 7721     		movs	r1, #119
 2832 0070 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2833 0072 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2834              	.LVL180:
1141:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2835              		.loc 1 1141 8 view .LVU852
 2836 0076 B8B9     		cbnz	r0, .L189
1143:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2837              		.loc 1 1143 5 is_stmt 1 view .LVU853
1143:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2838              		.loc 1 1143 21 is_stmt 0 view .LVU854
 2839 0078 114B     		ldr	r3, .L194+4
 2840 007a 5868     		ldr	r0, [r3, #4]
1143:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2841              		.loc 1 1143 9 view .LVU855
 2842 007c 0DF11203 		add	r3, sp, #18
 2843 0080 0222     		movs	r2, #2
 2844 0082 7A21     		movs	r1, #122
 2845 0084 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2846 0086 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2847              	.LVL181:
1143:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2848              		.loc 1 1143 8 view .LVU856
 2849 008a 80B9     		cbnz	r0, .L190
1145:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2850              		.loc 1 1145 5 is_stmt 1 view .LVU857
1145:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2851              		.loc 1 1145 21 is_stmt 0 view .LVU858
 2852 008c 0C4B     		ldr	r3, .L194+4
 2853 008e 5868     		ldr	r0, [r3, #4]
1145:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2854              		.loc 1 1145 9 view .LVU859
 2855 0090 05AB     		add	r3, sp, #20
 2856 0092 0222     		movs	r2, #2
 2857 0094 7D21     		movs	r1, #125
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 100


 2858 0096 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2859 0098 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2860              	.LVL182:
1145:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2861              		.loc 1 1145 8 view .LVU860
 2862 009c 50B9     		cbnz	r0, .L193
 2863              	.L186:
1149:task/attitude/eMPL/inv_mpu.c **** 
 2864              		.loc 1 1149 1 view .LVU861
 2865 009e 06B0     		add	sp, sp, #24
 2866              	.LCFI56:
 2867              		.cfi_remember_state
 2868              		.cfi_def_cfa_offset 8
 2869              		@ sp needed
 2870 00a0 10BD     		pop	{r4, pc}
 2871              	.LVL183:
 2872              	.L188:
 2873              	.LCFI57:
 2874              		.cfi_restore_state
1127:task/attitude/eMPL/inv_mpu.c **** 
 2875              		.loc 1 1127 16 view .LVU862
 2876 00a2 4FF0FF30 		mov	r0, #-1
 2877 00a6 FAE7     		b	.L186
 2878              	.L189:
1142:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x7A, 2, &data[2]))
 2879              		.loc 1 1142 16 view .LVU863
 2880 00a8 4FF0FF30 		mov	r0, #-1
 2881 00ac F7E7     		b	.L186
 2882              	.L190:
1144:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, 0x7D, 2, &data[4]))
 2883              		.loc 1 1144 16 view .LVU864
 2884 00ae 4FF0FF30 		mov	r0, #-1
 2885 00b2 F4E7     		b	.L186
 2886              	.L193:
1146:task/attitude/eMPL/inv_mpu.c **** 
 2887              		.loc 1 1146 16 view .LVU865
 2888 00b4 4FF0FF30 		mov	r0, #-1
 2889 00b8 F1E7     		b	.L186
 2890              	.L195:
 2891 00ba 00BF     		.align	2
 2892              	.L194:
 2893 00bc 00000000 		.word	.LANCHOR1
 2894 00c0 00000000 		.word	.LANCHOR0
 2895              		.cfi_endproc
 2896              	.LFE161:
 2898              		.section	.text.mpu_reset_fifo,"ax",%progbits
 2899              		.align	1
 2900              		.global	mpu_reset_fifo
 2901              		.syntax unified
 2902              		.thumb
 2903              		.thumb_func
 2904              		.fpu fpv5-d16
 2906              	mpu_reset_fifo:
 2907              	.LFB162:
1156:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 2908              		.loc 1 1156 1 is_stmt 1 view -0
 2909              		.cfi_startproc
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 101


 2910              		@ args = 0, pretend = 0, frame = 8
 2911              		@ frame_needed = 0, uses_anonymous_args = 0
1157:task/attitude/eMPL/inv_mpu.c **** 
 2912              		.loc 1 1157 5 view .LVU867
1159:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2913              		.loc 1 1159 5 view .LVU868
1159:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2914              		.loc 1 1159 22 is_stmt 0 view .LVU869
 2915 0000 7C4B     		ldr	r3, .L224
 2916 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1159:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2917              		.loc 1 1159 8 view .LVU870
 2918 0004 002B     		cmp	r3, #0
 2919 0006 00F0D480 		beq	.L207
1156:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 2920              		.loc 1 1156 1 view .LVU871
 2921 000a 00B5     		push	{lr}
 2922              	.LCFI58:
 2923              		.cfi_def_cfa_offset 4
 2924              		.cfi_offset 14, -4
 2925 000c 83B0     		sub	sp, sp, #12
 2926              	.LCFI59:
 2927              		.cfi_def_cfa_offset 16
1162:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 2928              		.loc 1 1162 5 is_stmt 1 view .LVU872
1162:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 2929              		.loc 1 1162 10 is_stmt 0 view .LVU873
 2930 000e 0023     		movs	r3, #0
 2931 0010 8DF80730 		strb	r3, [sp, #7]
1163:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2932              		.loc 1 1163 5 is_stmt 1 view .LVU874
1163:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2933              		.loc 1 1163 21 is_stmt 0 view .LVU875
 2934 0014 774B     		ldr	r3, .L224
 2935 0016 5868     		ldr	r0, [r3, #4]
1163:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2936              		.loc 1 1163 34 view .LVU876
 2937 0018 1968     		ldr	r1, [r3]
1163:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2938              		.loc 1 1163 9 view .LVU877
 2939 001a 0DF10703 		add	r3, sp, #7
 2940 001e 0122     		movs	r2, #1
 2941 0020 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 2942 0022 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2943 0024 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2944              	.LVL184:
1163:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2945              		.loc 1 1163 8 view .LVU878
 2946 0028 0028     		cmp	r0, #0
 2947 002a 40F0C580 		bne	.L208
1165:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2948              		.loc 1 1165 5 is_stmt 1 view .LVU879
1165:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2949              		.loc 1 1165 21 is_stmt 0 view .LVU880
 2950 002e 714B     		ldr	r3, .L224
 2951 0030 5868     		ldr	r0, [r3, #4]
1165:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 102


 2952              		.loc 1 1165 34 view .LVU881
 2953 0032 1968     		ldr	r1, [r3]
1165:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2954              		.loc 1 1165 9 view .LVU882
 2955 0034 0DF10703 		add	r3, sp, #7
 2956 0038 0122     		movs	r2, #1
 2957 003a 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 2958 003c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2959 003e FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2960              	.LVL185:
1165:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2961              		.loc 1 1165 8 view .LVU883
 2962 0042 0028     		cmp	r0, #0
 2963 0044 40F0BB80 		bne	.L209
1167:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2964              		.loc 1 1167 5 is_stmt 1 view .LVU884
1167:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2965              		.loc 1 1167 21 is_stmt 0 view .LVU885
 2966 0048 6A4B     		ldr	r3, .L224
 2967 004a 5868     		ldr	r0, [r3, #4]
1167:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2968              		.loc 1 1167 34 view .LVU886
 2969 004c 1968     		ldr	r1, [r3]
1167:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2970              		.loc 1 1167 9 view .LVU887
 2971 004e 0DF10703 		add	r3, sp, #7
 2972 0052 0122     		movs	r2, #1
 2973 0054 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 2974 0056 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2975 0058 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 2976              	.LVL186:
1167:task/attitude/eMPL/inv_mpu.c ****         return -1;
 2977              		.loc 1 1167 8 view .LVU888
 2978 005c 0028     		cmp	r0, #0
 2979 005e 40F0B180 		bne	.L210
1170:task/attitude/eMPL/inv_mpu.c ****     {
 2980              		.loc 1 1170 5 is_stmt 1 view .LVU889
1170:task/attitude/eMPL/inv_mpu.c ****     {
 2981              		.loc 1 1170 20 is_stmt 0 view .LVU890
 2982 0062 644B     		ldr	r3, .L224
 2983 0064 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
1170:task/attitude/eMPL/inv_mpu.c ****     {
 2984              		.loc 1 1170 8 view .LVU891
 2985 0068 002B     		cmp	r3, #0
 2986 006a 52D0     		beq	.L198
1172:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 2987              		.loc 1 1172 9 is_stmt 1 view .LVU892
1172:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 2988              		.loc 1 1172 14 is_stmt 0 view .LVU893
 2989 006c 0C23     		movs	r3, #12
 2990 006e 8DF80730 		strb	r3, [sp, #7]
1173:task/attitude/eMPL/inv_mpu.c ****             return -1;
 2991              		.loc 1 1173 9 is_stmt 1 view .LVU894
1173:task/attitude/eMPL/inv_mpu.c ****             return -1;
 2992              		.loc 1 1173 25 is_stmt 0 view .LVU895
 2993 0072 604B     		ldr	r3, .L224
 2994 0074 5868     		ldr	r0, [r3, #4]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 103


1173:task/attitude/eMPL/inv_mpu.c ****             return -1;
 2995              		.loc 1 1173 38 view .LVU896
 2996 0076 1968     		ldr	r1, [r3]
1173:task/attitude/eMPL/inv_mpu.c ****             return -1;
 2997              		.loc 1 1173 13 view .LVU897
 2998 0078 0DF10703 		add	r3, sp, #7
 2999 007c 0122     		movs	r2, #1
 3000 007e 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 3001 0080 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3002 0082 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3003              	.LVL187:
1173:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3004              		.loc 1 1173 12 view .LVU898
 3005 0086 0028     		cmp	r0, #0
 3006 0088 40F09F80 		bne	.L211
1175:task/attitude/eMPL/inv_mpu.c ****         data = BIT_DMP_EN | BIT_FIFO_EN;
 3007              		.loc 1 1175 9 is_stmt 1 view .LVU899
 3008 008c 3220     		movs	r0, #50
 3009 008e FFF7FEFF 		bl	vTaskDelay
 3010              	.LVL188:
1176:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
 3011              		.loc 1 1176 9 view .LVU900
1176:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
 3012              		.loc 1 1176 14 is_stmt 0 view .LVU901
 3013 0092 C023     		movs	r3, #192
 3014 0094 8DF80730 		strb	r3, [sp, #7]
1177:task/attitude/eMPL/inv_mpu.c ****             data |= BIT_AUX_IF_EN;
 3015              		.loc 1 1177 9 is_stmt 1 view .LVU902
1177:task/attitude/eMPL/inv_mpu.c ****             data |= BIT_AUX_IF_EN;
 3016              		.loc 1 1177 24 is_stmt 0 view .LVU903
 3017 0098 564B     		ldr	r3, .L224
 3018 009a 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1177:task/attitude/eMPL/inv_mpu.c ****             data |= BIT_AUX_IF_EN;
 3019              		.loc 1 1177 12 view .LVU904
 3020 009c 13F0010F 		tst	r3, #1
 3021 00a0 02D0     		beq	.L199
1178:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3022              		.loc 1 1178 13 is_stmt 1 view .LVU905
1178:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3023              		.loc 1 1178 18 is_stmt 0 view .LVU906
 3024 00a2 E023     		movs	r3, #224
 3025 00a4 8DF80730 		strb	r3, [sp, #7]
 3026              	.L199:
1179:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3027              		.loc 1 1179 9 is_stmt 1 view .LVU907
1179:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3028              		.loc 1 1179 25 is_stmt 0 view .LVU908
 3029 00a8 524B     		ldr	r3, .L224
 3030 00aa 5868     		ldr	r0, [r3, #4]
1179:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3031              		.loc 1 1179 38 view .LVU909
 3032 00ac 1968     		ldr	r1, [r3]
1179:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3033              		.loc 1 1179 13 view .LVU910
 3034 00ae 0DF10703 		add	r3, sp, #7
 3035 00b2 0122     		movs	r2, #1
 3036 00b4 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 104


 3037 00b6 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3038 00b8 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3039              	.LVL189:
1179:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3040              		.loc 1 1179 12 view .LVU911
 3041 00bc 0028     		cmp	r0, #0
 3042 00be 40F08780 		bne	.L212
1181:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DMP_INT_EN;
 3043              		.loc 1 1181 9 is_stmt 1 view .LVU912
1181:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DMP_INT_EN;
 3044              		.loc 1 1181 24 is_stmt 0 view .LVU913
 3045 00c2 4C4B     		ldr	r3, .L224
 3046 00c4 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
1181:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DMP_INT_EN;
 3047              		.loc 1 1181 12 view .LVU914
 3048 00c6 03B3     		cbz	r3, .L200
1182:task/attitude/eMPL/inv_mpu.c ****         else
 3049              		.loc 1 1182 13 is_stmt 1 view .LVU915
1182:task/attitude/eMPL/inv_mpu.c ****         else
 3050              		.loc 1 1182 18 is_stmt 0 view .LVU916
 3051 00c8 0223     		movs	r3, #2
 3052 00ca 8DF80730 		strb	r3, [sp, #7]
 3053              	.L201:
1185:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3054              		.loc 1 1185 9 is_stmt 1 view .LVU917
1185:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3055              		.loc 1 1185 25 is_stmt 0 view .LVU918
 3056 00ce 494B     		ldr	r3, .L224
 3057 00d0 5868     		ldr	r0, [r3, #4]
1185:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3058              		.loc 1 1185 38 view .LVU919
 3059 00d2 1968     		ldr	r1, [r3]
1185:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3060              		.loc 1 1185 13 view .LVU920
 3061 00d4 0DF10703 		add	r3, sp, #7
 3062 00d8 0122     		movs	r2, #1
 3063 00da 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 3064 00dc 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3065 00de FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3066              	.LVL190:
1185:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3067              		.loc 1 1185 12 view .LVU921
 3068 00e2 0028     		cmp	r0, #0
 3069 00e4 77D1     		bne	.L213
1187:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
 3070              		.loc 1 1187 9 is_stmt 1 view .LVU922
1187:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
 3071              		.loc 1 1187 14 is_stmt 0 view .LVU923
 3072 00e6 0023     		movs	r3, #0
 3073 00e8 8DF80730 		strb	r3, [sp, #7]
1188:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3074              		.loc 1 1188 9 is_stmt 1 view .LVU924
1188:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3075              		.loc 1 1188 25 is_stmt 0 view .LVU925
 3076 00ec 414B     		ldr	r3, .L224
 3077 00ee 5868     		ldr	r0, [r3, #4]
1188:task/attitude/eMPL/inv_mpu.c ****             return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 105


 3078              		.loc 1 1188 38 view .LVU926
 3079 00f0 1968     		ldr	r1, [r3]
1188:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3080              		.loc 1 1188 13 view .LVU927
 3081 00f2 0DF10703 		add	r3, sp, #7
 3082 00f6 0122     		movs	r2, #1
 3083 00f8 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 3084 00fa 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3085 00fc FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3086              	.LVL191:
1188:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3087              		.loc 1 1188 12 view .LVU928
 3088 0100 0028     		cmp	r0, #0
 3089 0102 6BD1     		bne	.L223
 3090              	.L196:
1213:task/attitude/eMPL/inv_mpu.c **** 
 3091              		.loc 1 1213 1 view .LVU929
 3092 0104 03B0     		add	sp, sp, #12
 3093              	.LCFI60:
 3094              		.cfi_remember_state
 3095              		.cfi_def_cfa_offset 4
 3096              		@ sp needed
 3097 0106 5DF804FB 		ldr	pc, [sp], #4
 3098              	.L200:
 3099              	.LCFI61:
 3100              		.cfi_restore_state
1184:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 3101              		.loc 1 1184 13 is_stmt 1 view .LVU930
1184:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 3102              		.loc 1 1184 18 is_stmt 0 view .LVU931
 3103 010a 0023     		movs	r3, #0
 3104 010c 8DF80730 		strb	r3, [sp, #7]
 3105 0110 DDE7     		b	.L201
 3106              	.L198:
1193:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3107              		.loc 1 1193 9 is_stmt 1 view .LVU932
1193:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3108              		.loc 1 1193 14 is_stmt 0 view .LVU933
 3109 0112 0423     		movs	r3, #4
 3110 0114 8DF80730 		strb	r3, [sp, #7]
1194:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3111              		.loc 1 1194 9 is_stmt 1 view .LVU934
1194:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3112              		.loc 1 1194 25 is_stmt 0 view .LVU935
 3113 0118 364B     		ldr	r3, .L224
 3114 011a 5868     		ldr	r0, [r3, #4]
1194:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3115              		.loc 1 1194 38 view .LVU936
 3116 011c 1968     		ldr	r1, [r3]
1194:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3117              		.loc 1 1194 13 view .LVU937
 3118 011e 0DF10703 		add	r3, sp, #7
 3119 0122 0122     		movs	r2, #1
 3120 0124 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 3121 0126 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3122 0128 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3123              	.LVL192:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 106


1194:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3124              		.loc 1 1194 12 view .LVU938
 3125 012c 0028     		cmp	r0, #0
 3126 012e 58D1     		bne	.L215
1196:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN;
 3127              		.loc 1 1196 9 is_stmt 1 view .LVU939
1196:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN;
 3128              		.loc 1 1196 24 is_stmt 0 view .LVU940
 3129 0130 304B     		ldr	r3, .L224
 3130 0132 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
1196:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN;
 3131              		.loc 1 1196 12 view .LVU941
 3132 0134 23B9     		cbnz	r3, .L202
1196:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN;
 3133              		.loc 1 1196 53 discriminator 1 view .LVU942
 3134 0136 2F4B     		ldr	r3, .L224
 3135 0138 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1196:task/attitude/eMPL/inv_mpu.c ****             data = BIT_FIFO_EN;
 3136              		.loc 1 1196 37 discriminator 1 view .LVU943
 3137 013a 13F0010F 		tst	r3, #1
 3138 013e 30D1     		bne	.L203
 3139              	.L202:
1197:task/attitude/eMPL/inv_mpu.c ****         else
 3140              		.loc 1 1197 13 is_stmt 1 view .LVU944
1197:task/attitude/eMPL/inv_mpu.c ****         else
 3141              		.loc 1 1197 18 is_stmt 0 view .LVU945
 3142 0140 4023     		movs	r3, #64
 3143 0142 8DF80730 		strb	r3, [sp, #7]
 3144              	.L204:
1200:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3145              		.loc 1 1200 9 is_stmt 1 view .LVU946
1200:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3146              		.loc 1 1200 25 is_stmt 0 view .LVU947
 3147 0146 2B4B     		ldr	r3, .L224
 3148 0148 5868     		ldr	r0, [r3, #4]
1200:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3149              		.loc 1 1200 38 view .LVU948
 3150 014a 1968     		ldr	r1, [r3]
1200:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3151              		.loc 1 1200 13 view .LVU949
 3152 014c 0DF10703 		add	r3, sp, #7
 3153 0150 0122     		movs	r2, #1
 3154 0152 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 3155 0154 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3156 0156 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3157              	.LVL193:
1200:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3158              		.loc 1 1200 12 view .LVU950
 3159 015a 0028     		cmp	r0, #0
 3160 015c 44D1     		bne	.L216
1202:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.int_enable)
 3161              		.loc 1 1202 9 is_stmt 1 view .LVU951
 3162 015e 3220     		movs	r0, #50
 3163 0160 FFF7FEFF 		bl	vTaskDelay
 3164              	.LVL194:
1203:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DATA_RDY_EN;
 3165              		.loc 1 1203 9 view .LVU952
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 107


1203:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DATA_RDY_EN;
 3166              		.loc 1 1203 24 is_stmt 0 view .LVU953
 3167 0164 234B     		ldr	r3, .L224
 3168 0166 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
1203:task/attitude/eMPL/inv_mpu.c ****             data = BIT_DATA_RDY_EN;
 3169              		.loc 1 1203 12 view .LVU954
 3170 0168 FBB1     		cbz	r3, .L205
1204:task/attitude/eMPL/inv_mpu.c ****         else
 3171              		.loc 1 1204 13 is_stmt 1 view .LVU955
1204:task/attitude/eMPL/inv_mpu.c ****         else
 3172              		.loc 1 1204 18 is_stmt 0 view .LVU956
 3173 016a 0123     		movs	r3, #1
 3174 016c 8DF80730 		strb	r3, [sp, #7]
 3175              	.L206:
1207:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3176              		.loc 1 1207 9 is_stmt 1 view .LVU957
1207:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3177              		.loc 1 1207 25 is_stmt 0 view .LVU958
 3178 0170 204B     		ldr	r3, .L224
 3179 0172 5868     		ldr	r0, [r3, #4]
1207:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3180              		.loc 1 1207 38 view .LVU959
 3181 0174 1968     		ldr	r1, [r3]
1207:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3182              		.loc 1 1207 13 view .LVU960
 3183 0176 0DF10703 		add	r3, sp, #7
 3184 017a 0122     		movs	r2, #1
 3185 017c 497C     		ldrb	r1, [r1, #17]	@ zero_extendqisi2
 3186 017e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3187 0180 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3188              	.LVL195:
1207:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3189              		.loc 1 1207 12 view .LVU961
 3190 0184 98BB     		cbnz	r0, .L217
1209:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3191              		.loc 1 1209 9 is_stmt 1 view .LVU962
1209:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3192              		.loc 1 1209 25 is_stmt 0 view .LVU963
 3193 0186 1B4B     		ldr	r3, .L224
 3194 0188 5868     		ldr	r0, [r3, #4]
1209:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3195              		.loc 1 1209 38 view .LVU964
 3196 018a 53F8101B 		ldr	r1, [r3], #16
1209:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3197              		.loc 1 1209 13 view .LVU965
 3198 018e 0122     		movs	r2, #1
 3199 0190 4979     		ldrb	r1, [r1, #5]	@ zero_extendqisi2
 3200 0192 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3201 0194 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3202              	.LVL196:
1209:task/attitude/eMPL/inv_mpu.c ****             return -1;
 3203              		.loc 1 1209 12 view .LVU966
 3204 0198 0028     		cmp	r0, #0
 3205 019a B3D0     		beq	.L196
1210:task/attitude/eMPL/inv_mpu.c ****     }
 3206              		.loc 1 1210 20 view .LVU967
 3207 019c 4FF0FF30 		mov	r0, #-1
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 108


 3208 01a0 B0E7     		b	.L196
 3209              	.L203:
1199:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3210              		.loc 1 1199 13 is_stmt 1 view .LVU968
1199:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3211              		.loc 1 1199 18 is_stmt 0 view .LVU969
 3212 01a2 6023     		movs	r3, #96
 3213 01a4 8DF80730 		strb	r3, [sp, #7]
 3214 01a8 CDE7     		b	.L204
 3215              	.L205:
1206:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 3216              		.loc 1 1206 13 is_stmt 1 view .LVU970
1206:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, &data))
 3217              		.loc 1 1206 18 is_stmt 0 view .LVU971
 3218 01aa 0023     		movs	r3, #0
 3219 01ac 8DF80730 		strb	r3, [sp, #7]
 3220 01b0 DEE7     		b	.L206
 3221              	.L207:
 3222              	.LCFI62:
 3223              		.cfi_def_cfa_offset 0
 3224              		.cfi_restore 14
1160:task/attitude/eMPL/inv_mpu.c **** 
 3225              		.loc 1 1160 16 view .LVU972
 3226 01b2 4FF0FF30 		mov	r0, #-1
1213:task/attitude/eMPL/inv_mpu.c **** 
 3227              		.loc 1 1213 1 view .LVU973
 3228 01b6 7047     		bx	lr
 3229              	.L208:
 3230              	.LCFI63:
 3231              		.cfi_def_cfa_offset 16
 3232              		.cfi_offset 14, -4
1164:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &data))
 3233              		.loc 1 1164 16 view .LVU974
 3234 01b8 4FF0FF30 		mov	r0, #-1
 3235 01bc A2E7     		b	.L196
 3236              	.L209:
1166:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &data))
 3237              		.loc 1 1166 16 view .LVU975
 3238 01be 4FF0FF30 		mov	r0, #-1
 3239 01c2 9FE7     		b	.L196
 3240              	.L210:
1168:task/attitude/eMPL/inv_mpu.c **** 
 3241              		.loc 1 1168 16 view .LVU976
 3242 01c4 4FF0FF30 		mov	r0, #-1
 3243 01c8 9CE7     		b	.L196
 3244              	.L211:
1174:task/attitude/eMPL/inv_mpu.c ****         delay_ms(50);
 3245              		.loc 1 1174 20 view .LVU977
 3246 01ca 4FF0FF30 		mov	r0, #-1
 3247 01ce 99E7     		b	.L196
 3248              	.L212:
1180:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.int_enable)
 3249              		.loc 1 1180 20 view .LVU978
 3250 01d0 4FF0FF30 		mov	r0, #-1
 3251 01d4 96E7     		b	.L196
 3252              	.L213:
1186:task/attitude/eMPL/inv_mpu.c ****         data = 0;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 109


 3253              		.loc 1 1186 20 view .LVU979
 3254 01d6 4FF0FF30 		mov	r0, #-1
 3255 01da 93E7     		b	.L196
 3256              	.L223:
1189:task/attitude/eMPL/inv_mpu.c ****     }
 3257              		.loc 1 1189 20 view .LVU980
 3258 01dc 4FF0FF30 		mov	r0, #-1
 3259 01e0 90E7     		b	.L196
 3260              	.L215:
1195:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.bypass_mode || !(st.chip_cfg.sensors & INV_XYZ_COMPASS))
 3261              		.loc 1 1195 20 view .LVU981
 3262 01e2 4FF0FF30 		mov	r0, #-1
 3263 01e6 8DE7     		b	.L196
 3264              	.L216:
1201:task/attitude/eMPL/inv_mpu.c ****         delay_ms(50);
 3265              		.loc 1 1201 20 view .LVU982
 3266 01e8 4FF0FF30 		mov	r0, #-1
 3267 01ec 8AE7     		b	.L196
 3268              	.L217:
1208:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, &st.chip_cfg.fifo_enable))
 3269              		.loc 1 1208 20 view .LVU983
 3270 01ee 4FF0FF30 		mov	r0, #-1
 3271 01f2 87E7     		b	.L196
 3272              	.L225:
 3273              		.align	2
 3274              	.L224:
 3275 01f4 00000000 		.word	.LANCHOR0
 3276              		.cfi_endproc
 3277              	.LFE162:
 3279              		.section	.text.mpu_get_gyro_fsr,"ax",%progbits
 3280              		.align	1
 3281              		.global	mpu_get_gyro_fsr
 3282              		.syntax unified
 3283              		.thumb
 3284              		.thumb_func
 3285              		.fpu fpv5-d16
 3287              	mpu_get_gyro_fsr:
 3288              	.LVL197:
 3289              	.LFB163:
1221:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.gyro_fsr)
 3290              		.loc 1 1221 1 is_stmt 1 view -0
 3291              		.cfi_startproc
 3292              		@ args = 0, pretend = 0, frame = 0
 3293              		@ frame_needed = 0, uses_anonymous_args = 0
 3294              		@ link register save eliminated.
1222:task/attitude/eMPL/inv_mpu.c ****     {
 3295              		.loc 1 1222 5 view .LVU985
1222:task/attitude/eMPL/inv_mpu.c ****     {
 3296              		.loc 1 1222 24 is_stmt 0 view .LVU986
 3297 0000 0D4B     		ldr	r3, .L234
 3298 0002 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 3299 0004 032B     		cmp	r3, #3
 3300 0006 13D8     		bhi	.L227
 3301 0008 DFE803F0 		tbb	[pc, r3]
 3302              	.L229:
 3303 000c 02       		.byte	(.L232-.L229)/2
 3304 000d 06       		.byte	(.L231-.L229)/2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 110


 3305 000e 0A       		.byte	(.L230-.L229)/2
 3306 000f 0E       		.byte	(.L228-.L229)/2
 3307              		.p2align 1
 3308              	.L232:
1225:task/attitude/eMPL/inv_mpu.c ****         break;
 3309              		.loc 1 1225 9 is_stmt 1 view .LVU987
1225:task/attitude/eMPL/inv_mpu.c ****         break;
 3310              		.loc 1 1225 16 is_stmt 0 view .LVU988
 3311 0010 FA23     		movs	r3, #250
 3312 0012 0380     		strh	r3, [r0]	@ movhi
1226:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_500DPS:
 3313              		.loc 1 1226 9 is_stmt 1 view .LVU989
 3314              	.L233:
1240:task/attitude/eMPL/inv_mpu.c **** }
 3315              		.loc 1 1240 5 view .LVU990
1241:task/attitude/eMPL/inv_mpu.c **** 
 3316              		.loc 1 1241 1 is_stmt 0 view .LVU991
 3317 0014 0020     		movs	r0, #0
 3318              	.LVL198:
1241:task/attitude/eMPL/inv_mpu.c **** 
 3319              		.loc 1 1241 1 view .LVU992
 3320 0016 7047     		bx	lr
 3321              	.LVL199:
 3322              	.L231:
1228:task/attitude/eMPL/inv_mpu.c ****         break;
 3323              		.loc 1 1228 9 is_stmt 1 view .LVU993
1228:task/attitude/eMPL/inv_mpu.c ****         break;
 3324              		.loc 1 1228 16 is_stmt 0 view .LVU994
 3325 0018 4FF4FA73 		mov	r3, #500
 3326 001c 0380     		strh	r3, [r0]	@ movhi
1229:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_1000DPS:
 3327              		.loc 1 1229 9 is_stmt 1 view .LVU995
 3328 001e F9E7     		b	.L233
 3329              	.L230:
1231:task/attitude/eMPL/inv_mpu.c ****         break;
 3330              		.loc 1 1231 9 view .LVU996
1231:task/attitude/eMPL/inv_mpu.c ****         break;
 3331              		.loc 1 1231 16 is_stmt 0 view .LVU997
 3332 0020 4FF47A73 		mov	r3, #1000
 3333 0024 0380     		strh	r3, [r0]	@ movhi
1232:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2000DPS:
 3334              		.loc 1 1232 9 is_stmt 1 view .LVU998
 3335 0026 F5E7     		b	.L233
 3336              	.L228:
1234:task/attitude/eMPL/inv_mpu.c ****         break;
 3337              		.loc 1 1234 9 view .LVU999
1234:task/attitude/eMPL/inv_mpu.c ****         break;
 3338              		.loc 1 1234 16 is_stmt 0 view .LVU1000
 3339 0028 4FF4FA63 		mov	r3, #2000
 3340 002c 0380     		strh	r3, [r0]	@ movhi
1235:task/attitude/eMPL/inv_mpu.c ****     default:
 3341              		.loc 1 1235 9 is_stmt 1 view .LVU1001
 3342 002e F1E7     		b	.L233
 3343              	.L227:
1237:task/attitude/eMPL/inv_mpu.c ****         break;
 3344              		.loc 1 1237 9 view .LVU1002
1237:task/attitude/eMPL/inv_mpu.c ****         break;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 111


 3345              		.loc 1 1237 16 is_stmt 0 view .LVU1003
 3346 0030 0023     		movs	r3, #0
 3347 0032 0380     		strh	r3, [r0]	@ movhi
1238:task/attitude/eMPL/inv_mpu.c ****     }
 3348              		.loc 1 1238 9 is_stmt 1 view .LVU1004
 3349 0034 EEE7     		b	.L233
 3350              	.L235:
 3351 0036 00BF     		.align	2
 3352              	.L234:
 3353 0038 00000000 		.word	.LANCHOR0
 3354              		.cfi_endproc
 3355              	.LFE163:
 3357              		.section	.text.mpu_set_gyro_fsr,"ax",%progbits
 3358              		.align	1
 3359              		.global	mpu_set_gyro_fsr
 3360              		.syntax unified
 3361              		.thumb
 3362              		.thumb_func
 3363              		.fpu fpv5-d16
 3365              	mpu_set_gyro_fsr:
 3366              	.LVL200:
 3367              	.LFB164:
1249:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 3368              		.loc 1 1249 1 view -0
 3369              		.cfi_startproc
 3370              		@ args = 0, pretend = 0, frame = 8
 3371              		@ frame_needed = 0, uses_anonymous_args = 0
1250:task/attitude/eMPL/inv_mpu.c **** 
 3372              		.loc 1 1250 5 view .LVU1006
1252:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3373              		.loc 1 1252 5 view .LVU1007
1252:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3374              		.loc 1 1252 22 is_stmt 0 view .LVU1008
 3375 0000 244B     		ldr	r3, .L253
 3376 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1252:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3377              		.loc 1 1252 8 view .LVU1009
 3378 0004 002B     		cmp	r3, #0
 3379 0006 3CD0     		beq	.L244
1249:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 3380              		.loc 1 1249 1 view .LVU1010
 3381 0008 00B5     		push	{lr}
 3382              	.LCFI64:
 3383              		.cfi_def_cfa_offset 4
 3384              		.cfi_offset 14, -4
 3385 000a 83B0     		sub	sp, sp, #12
 3386              	.LCFI65:
 3387              		.cfi_def_cfa_offset 16
1255:task/attitude/eMPL/inv_mpu.c ****     {
 3388              		.loc 1 1255 5 is_stmt 1 view .LVU1011
 3389 000c B0F57A7F 		cmp	r0, #1000
 3390 0010 33D0     		beq	.L238
 3391 0012 0BD8     		bhi	.L239
 3392 0014 FA28     		cmp	r0, #250
 3393 0016 13D0     		beq	.L240
 3394 0018 B0F5FA7F 		cmp	r0, #500
 3395 001c 03D1     		bne	.L251
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 112


1261:task/attitude/eMPL/inv_mpu.c ****         break;
 3396              		.loc 1 1261 9 view .LVU1012
1261:task/attitude/eMPL/inv_mpu.c ****         break;
 3397              		.loc 1 1261 14 is_stmt 0 view .LVU1013
 3398 001e 0823     		movs	r3, #8
 3399 0020 8DF80730 		strb	r3, [sp, #7]
1262:task/attitude/eMPL/inv_mpu.c ****     case 1000:
 3400              		.loc 1 1262 9 is_stmt 1 view .LVU1014
 3401 0024 0FE0     		b	.L243
 3402              	.L251:
1255:task/attitude/eMPL/inv_mpu.c ****     {
 3403              		.loc 1 1255 5 is_stmt 0 view .LVU1015
 3404 0026 4FF0FF30 		mov	r0, #-1
 3405              	.LVL201:
1255:task/attitude/eMPL/inv_mpu.c ****     {
 3406              		.loc 1 1255 5 view .LVU1016
 3407 002a 23E0     		b	.L236
 3408              	.LVL202:
 3409              	.L239:
1255:task/attitude/eMPL/inv_mpu.c ****     {
 3410              		.loc 1 1255 5 view .LVU1017
 3411 002c B0F5FA6F 		cmp	r0, #2000
 3412 0030 03D1     		bne	.L252
1267:task/attitude/eMPL/inv_mpu.c ****         break;
 3413              		.loc 1 1267 9 is_stmt 1 view .LVU1018
1267:task/attitude/eMPL/inv_mpu.c ****         break;
 3414              		.loc 1 1267 14 is_stmt 0 view .LVU1019
 3415 0032 1823     		movs	r3, #24
 3416 0034 8DF80730 		strb	r3, [sp, #7]
1268:task/attitude/eMPL/inv_mpu.c ****     default:
 3417              		.loc 1 1268 9 is_stmt 1 view .LVU1020
 3418 0038 05E0     		b	.L243
 3419              	.L252:
1255:task/attitude/eMPL/inv_mpu.c ****     {
 3420              		.loc 1 1255 5 is_stmt 0 view .LVU1021
 3421 003a 4FF0FF30 		mov	r0, #-1
 3422              	.LVL203:
1255:task/attitude/eMPL/inv_mpu.c ****     {
 3423              		.loc 1 1255 5 view .LVU1022
 3424 003e 19E0     		b	.L236
 3425              	.LVL204:
 3426              	.L240:
1258:task/attitude/eMPL/inv_mpu.c ****         break;
 3427              		.loc 1 1258 9 is_stmt 1 view .LVU1023
1258:task/attitude/eMPL/inv_mpu.c ****         break;
 3428              		.loc 1 1258 14 is_stmt 0 view .LVU1024
 3429 0040 0023     		movs	r3, #0
 3430 0042 8DF80730 		strb	r3, [sp, #7]
1259:task/attitude/eMPL/inv_mpu.c ****     case 500:
 3431              		.loc 1 1259 9 is_stmt 1 view .LVU1025
 3432              	.L243:
1273:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3433              		.loc 1 1273 5 view .LVU1026
1273:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3434              		.loc 1 1273 20 is_stmt 0 view .LVU1027
 3435 0046 134B     		ldr	r3, .L253
 3436 0048 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 113


1273:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3437              		.loc 1 1273 30 view .LVU1028
 3438 004a 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
1273:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3439              		.loc 1 1273 8 view .LVU1029
 3440 004e B3EBD20F 		cmp	r3, r2, lsr #3
 3441 0052 19D0     		beq	.L245
1275:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3442              		.loc 1 1275 5 is_stmt 1 view .LVU1030
1275:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3443              		.loc 1 1275 21 is_stmt 0 view .LVU1031
 3444 0054 0F4B     		ldr	r3, .L253
 3445 0056 5868     		ldr	r0, [r3, #4]
 3446              	.LVL205:
1275:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3447              		.loc 1 1275 34 view .LVU1032
 3448 0058 1968     		ldr	r1, [r3]
1275:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3449              		.loc 1 1275 9 view .LVU1033
 3450 005a 0DF10703 		add	r3, sp, #7
 3451 005e 0122     		movs	r2, #1
 3452 0060 8979     		ldrb	r1, [r1, #6]	@ zero_extendqisi2
 3453 0062 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3454 0064 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3455              	.LVL206:
1275:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3456              		.loc 1 1275 8 view .LVU1034
 3457 0068 80B9     		cbnz	r0, .L246
1277:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3458              		.loc 1 1277 5 is_stmt 1 view .LVU1035
1277:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3459              		.loc 1 1277 26 is_stmt 0 view .LVU1036
 3460 006a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3461 006e DB08     		lsrs	r3, r3, #3
 3462 0070 084A     		ldr	r2, .L253
 3463 0072 1372     		strb	r3, [r2, #8]
1278:task/attitude/eMPL/inv_mpu.c **** }
 3464              		.loc 1 1278 5 is_stmt 1 view .LVU1037
 3465              	.L236:
1279:task/attitude/eMPL/inv_mpu.c **** 
 3466              		.loc 1 1279 1 is_stmt 0 view .LVU1038
 3467 0074 03B0     		add	sp, sp, #12
 3468              	.LCFI66:
 3469              		.cfi_remember_state
 3470              		.cfi_def_cfa_offset 4
 3471              		@ sp needed
 3472 0076 5DF804FB 		ldr	pc, [sp], #4
 3473              	.LVL207:
 3474              	.L238:
 3475              	.LCFI67:
 3476              		.cfi_restore_state
1264:task/attitude/eMPL/inv_mpu.c ****         break;
 3477              		.loc 1 1264 9 is_stmt 1 view .LVU1039
1264:task/attitude/eMPL/inv_mpu.c ****         break;
 3478              		.loc 1 1264 14 is_stmt 0 view .LVU1040
 3479 007a 1023     		movs	r3, #16
 3480 007c 8DF80730 		strb	r3, [sp, #7]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 114


1265:task/attitude/eMPL/inv_mpu.c ****     case 2000:
 3481              		.loc 1 1265 9 is_stmt 1 view .LVU1041
 3482 0080 E1E7     		b	.L243
 3483              	.L244:
 3484              	.LCFI68:
 3485              		.cfi_def_cfa_offset 0
 3486              		.cfi_restore 14
1253:task/attitude/eMPL/inv_mpu.c **** 
 3487              		.loc 1 1253 16 is_stmt 0 view .LVU1042
 3488 0082 4FF0FF30 		mov	r0, #-1
 3489              	.LVL208:
1279:task/attitude/eMPL/inv_mpu.c **** 
 3490              		.loc 1 1279 1 view .LVU1043
 3491 0086 7047     		bx	lr
 3492              	.LVL209:
 3493              	.L245:
 3494              	.LCFI69:
 3495              		.cfi_def_cfa_offset 16
 3496              		.cfi_offset 14, -4
1274:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, &data))
 3497              		.loc 1 1274 16 view .LVU1044
 3498 0088 0020     		movs	r0, #0
 3499              	.LVL210:
1274:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, &data))
 3500              		.loc 1 1274 16 view .LVU1045
 3501 008a F3E7     		b	.L236
 3502              	.L246:
1276:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = data >> 3;
 3503              		.loc 1 1276 16 view .LVU1046
 3504 008c 4FF0FF30 		mov	r0, #-1
 3505 0090 F0E7     		b	.L236
 3506              	.L254:
 3507 0092 00BF     		.align	2
 3508              	.L253:
 3509 0094 00000000 		.word	.LANCHOR0
 3510              		.cfi_endproc
 3511              	.LFE164:
 3513              		.section	.text.mpu_get_accel_fsr,"ax",%progbits
 3514              		.align	1
 3515              		.global	mpu_get_accel_fsr
 3516              		.syntax unified
 3517              		.thumb
 3518              		.thumb_func
 3519              		.fpu fpv5-d16
 3521              	mpu_get_accel_fsr:
 3522              	.LVL211:
 3523              	.LFB165:
1287:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.accel_fsr)
 3524              		.loc 1 1287 1 is_stmt 1 view -0
 3525              		.cfi_startproc
 3526              		@ args = 0, pretend = 0, frame = 0
 3527              		@ frame_needed = 0, uses_anonymous_args = 0
 3528              		@ link register save eliminated.
1288:task/attitude/eMPL/inv_mpu.c ****     {
 3529              		.loc 1 1288 5 view .LVU1048
1288:task/attitude/eMPL/inv_mpu.c ****     {
 3530              		.loc 1 1288 24 is_stmt 0 view .LVU1049
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 115


 3531 0000 0F4B     		ldr	r3, .L265
 3532 0002 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 3533 0004 032B     		cmp	r3, #3
 3534 0006 16D8     		bhi	.L263
 3535 0008 DFE803F0 		tbb	[pc, r3]
 3536              	.L258:
 3537 000c 02       		.byte	(.L261-.L258)/2
 3538 000d 0C       		.byte	(.L260-.L258)/2
 3539 000e 0F       		.byte	(.L259-.L258)/2
 3540 000f 12       		.byte	(.L257-.L258)/2
 3541              		.p2align 1
 3542              	.L261:
1291:task/attitude/eMPL/inv_mpu.c ****         break;
 3543              		.loc 1 1291 9 is_stmt 1 view .LVU1050
1291:task/attitude/eMPL/inv_mpu.c ****         break;
 3544              		.loc 1 1291 16 is_stmt 0 view .LVU1051
 3545 0010 0223     		movs	r3, #2
 3546 0012 0370     		strb	r3, [r0]
1292:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_4G:
 3547              		.loc 1 1292 9 is_stmt 1 view .LVU1052
 3548              	.L262:
1305:task/attitude/eMPL/inv_mpu.c ****         fsr[0] <<= 1;
 3549              		.loc 1 1305 5 view .LVU1053
1305:task/attitude/eMPL/inv_mpu.c ****         fsr[0] <<= 1;
 3550              		.loc 1 1305 20 is_stmt 0 view .LVU1054
 3551 0014 0A4B     		ldr	r3, .L265
 3552 0016 DB7C     		ldrb	r3, [r3, #19]	@ zero_extendqisi2
1305:task/attitude/eMPL/inv_mpu.c ****         fsr[0] <<= 1;
 3553              		.loc 1 1305 8 view .LVU1055
 3554 0018 83B1     		cbz	r3, .L264
1306:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3555              		.loc 1 1306 9 is_stmt 1 view .LVU1056
1306:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3556              		.loc 1 1306 16 is_stmt 0 view .LVU1057
 3557 001a 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 3558 001c 5B00     		lsls	r3, r3, #1
 3559 001e 0370     		strb	r3, [r0]
1307:task/attitude/eMPL/inv_mpu.c **** }
 3560              		.loc 1 1307 12 view .LVU1058
 3561 0020 0020     		movs	r0, #0
 3562              	.LVL212:
1307:task/attitude/eMPL/inv_mpu.c **** }
 3563              		.loc 1 1307 12 view .LVU1059
 3564 0022 7047     		bx	lr
 3565              	.LVL213:
 3566              	.L260:
1294:task/attitude/eMPL/inv_mpu.c ****         break;
 3567              		.loc 1 1294 9 is_stmt 1 view .LVU1060
1294:task/attitude/eMPL/inv_mpu.c ****         break;
 3568              		.loc 1 1294 16 is_stmt 0 view .LVU1061
 3569 0024 0423     		movs	r3, #4
 3570 0026 0370     		strb	r3, [r0]
1295:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_8G:
 3571              		.loc 1 1295 9 is_stmt 1 view .LVU1062
 3572 0028 F4E7     		b	.L262
 3573              	.L259:
1297:task/attitude/eMPL/inv_mpu.c ****         break;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 116


 3574              		.loc 1 1297 9 view .LVU1063
1297:task/attitude/eMPL/inv_mpu.c ****         break;
 3575              		.loc 1 1297 16 is_stmt 0 view .LVU1064
 3576 002a 0823     		movs	r3, #8
 3577 002c 0370     		strb	r3, [r0]
1298:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_16G:
 3578              		.loc 1 1298 9 is_stmt 1 view .LVU1065
 3579 002e F1E7     		b	.L262
 3580              	.L257:
1300:task/attitude/eMPL/inv_mpu.c ****         break;
 3581              		.loc 1 1300 9 view .LVU1066
1300:task/attitude/eMPL/inv_mpu.c ****         break;
 3582              		.loc 1 1300 16 is_stmt 0 view .LVU1067
 3583 0030 1023     		movs	r3, #16
 3584 0032 0370     		strb	r3, [r0]
1301:task/attitude/eMPL/inv_mpu.c ****     default:
 3585              		.loc 1 1301 9 is_stmt 1 view .LVU1068
 3586 0034 EEE7     		b	.L262
 3587              	.L263:
1288:task/attitude/eMPL/inv_mpu.c ****     {
 3588              		.loc 1 1288 24 is_stmt 0 view .LVU1069
 3589 0036 4FF0FF30 		mov	r0, #-1
 3590              	.LVL214:
1288:task/attitude/eMPL/inv_mpu.c ****     {
 3591              		.loc 1 1288 24 view .LVU1070
 3592 003a 7047     		bx	lr
 3593              	.LVL215:
 3594              	.L264:
1307:task/attitude/eMPL/inv_mpu.c **** }
 3595              		.loc 1 1307 12 view .LVU1071
 3596 003c 0020     		movs	r0, #0
 3597              	.LVL216:
1308:task/attitude/eMPL/inv_mpu.c **** 
 3598              		.loc 1 1308 1 view .LVU1072
 3599 003e 7047     		bx	lr
 3600              	.L266:
 3601              		.align	2
 3602              	.L265:
 3603 0040 00000000 		.word	.LANCHOR0
 3604              		.cfi_endproc
 3605              	.LFE165:
 3607              		.section	.text.mpu_set_accel_fsr,"ax",%progbits
 3608              		.align	1
 3609              		.global	mpu_set_accel_fsr
 3610              		.syntax unified
 3611              		.thumb
 3612              		.thumb_func
 3613              		.fpu fpv5-d16
 3615              	mpu_set_accel_fsr:
 3616              	.LVL217:
 3617              	.LFB166:
1316:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 3618              		.loc 1 1316 1 is_stmt 1 view -0
 3619              		.cfi_startproc
 3620              		@ args = 0, pretend = 0, frame = 8
 3621              		@ frame_needed = 0, uses_anonymous_args = 0
1317:task/attitude/eMPL/inv_mpu.c **** 
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 117


 3622              		.loc 1 1317 5 view .LVU1074
1319:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3623              		.loc 1 1319 5 view .LVU1075
1319:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3624              		.loc 1 1319 22 is_stmt 0 view .LVU1076
 3625 0000 234B     		ldr	r3, .L283
 3626 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1319:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3627              		.loc 1 1319 8 view .LVU1077
 3628 0004 002B     		cmp	r3, #0
 3629 0006 37D0     		beq	.L275
1316:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 3630              		.loc 1 1316 1 view .LVU1078
 3631 0008 00B5     		push	{lr}
 3632              	.LCFI70:
 3633              		.cfi_def_cfa_offset 4
 3634              		.cfi_offset 14, -4
 3635 000a 83B0     		sub	sp, sp, #12
 3636              	.LCFI71:
 3637              		.cfi_def_cfa_offset 16
1322:task/attitude/eMPL/inv_mpu.c ****     {
 3638              		.loc 1 1322 5 is_stmt 1 view .LVU1079
 3639 000c 0238     		subs	r0, r0, #2
 3640              	.LVL218:
1322:task/attitude/eMPL/inv_mpu.c ****     {
 3641              		.loc 1 1322 5 is_stmt 0 view .LVU1080
 3642 000e 0E28     		cmp	r0, #14
 3643 0010 35D8     		bhi	.L276
 3644 0012 DFE800F0 		tbb	[pc, r0]
 3645              	.L270:
 3646 0016 08       		.byte	(.L273-.L270)/2
 3647 0017 34       		.byte	(.L276-.L270)/2
 3648 0018 25       		.byte	(.L272-.L270)/2
 3649 0019 34       		.byte	(.L276-.L270)/2
 3650 001a 34       		.byte	(.L276-.L270)/2
 3651 001b 34       		.byte	(.L276-.L270)/2
 3652 001c 29       		.byte	(.L271-.L270)/2
 3653 001d 34       		.byte	(.L276-.L270)/2
 3654 001e 34       		.byte	(.L276-.L270)/2
 3655 001f 34       		.byte	(.L276-.L270)/2
 3656 0020 34       		.byte	(.L276-.L270)/2
 3657 0021 34       		.byte	(.L276-.L270)/2
 3658 0022 34       		.byte	(.L276-.L270)/2
 3659 0023 34       		.byte	(.L276-.L270)/2
 3660 0024 2D       		.byte	(.L269-.L270)/2
 3661 0025 00       		.p2align 1
 3662              	.L273:
1325:task/attitude/eMPL/inv_mpu.c ****         break;
 3663              		.loc 1 1325 9 is_stmt 1 view .LVU1081
1325:task/attitude/eMPL/inv_mpu.c ****         break;
 3664              		.loc 1 1325 14 is_stmt 0 view .LVU1082
 3665 0026 0023     		movs	r3, #0
 3666 0028 8DF80730 		strb	r3, [sp, #7]
1326:task/attitude/eMPL/inv_mpu.c ****     case 4:
 3667              		.loc 1 1326 9 is_stmt 1 view .LVU1083
 3668              	.L274:
1340:task/attitude/eMPL/inv_mpu.c ****         return 0;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 118


 3669              		.loc 1 1340 5 view .LVU1084
1340:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3670              		.loc 1 1340 20 is_stmt 0 view .LVU1085
 3671 002c 184B     		ldr	r3, .L283
 3672 002e 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
1340:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3673              		.loc 1 1340 31 view .LVU1086
 3674 0030 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
1340:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3675              		.loc 1 1340 8 view .LVU1087
 3676 0034 B3EBD20F 		cmp	r3, r2, lsr #3
 3677 0038 24D0     		beq	.L277
1342:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3678              		.loc 1 1342 5 is_stmt 1 view .LVU1088
1342:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3679              		.loc 1 1342 21 is_stmt 0 view .LVU1089
 3680 003a 154B     		ldr	r3, .L283
 3681 003c 5868     		ldr	r0, [r3, #4]
1342:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3682              		.loc 1 1342 34 view .LVU1090
 3683 003e 1968     		ldr	r1, [r3]
1342:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3684              		.loc 1 1342 9 view .LVU1091
 3685 0040 0DF10703 		add	r3, sp, #7
 3686 0044 0122     		movs	r2, #1
 3687 0046 C979     		ldrb	r1, [r1, #7]	@ zero_extendqisi2
 3688 0048 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3689 004a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3690              	.LVL219:
1342:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3691              		.loc 1 1342 8 view .LVU1092
 3692 004e D8B9     		cbnz	r0, .L278
1344:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3693              		.loc 1 1344 5 is_stmt 1 view .LVU1093
1344:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3694              		.loc 1 1344 27 is_stmt 0 view .LVU1094
 3695 0050 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3696 0054 DB08     		lsrs	r3, r3, #3
 3697 0056 0E4A     		ldr	r2, .L283
 3698 0058 5372     		strb	r3, [r2, #9]
1345:task/attitude/eMPL/inv_mpu.c **** }
 3699              		.loc 1 1345 5 is_stmt 1 view .LVU1095
 3700              	.L267:
1346:task/attitude/eMPL/inv_mpu.c **** 
 3701              		.loc 1 1346 1 is_stmt 0 view .LVU1096
 3702 005a 03B0     		add	sp, sp, #12
 3703              	.LCFI72:
 3704              		.cfi_remember_state
 3705              		.cfi_def_cfa_offset 4
 3706              		@ sp needed
 3707 005c 5DF804FB 		ldr	pc, [sp], #4
 3708              	.L272:
 3709              	.LCFI73:
 3710              		.cfi_restore_state
1328:task/attitude/eMPL/inv_mpu.c ****         break;
 3711              		.loc 1 1328 9 is_stmt 1 view .LVU1097
1328:task/attitude/eMPL/inv_mpu.c ****         break;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 119


 3712              		.loc 1 1328 14 is_stmt 0 view .LVU1098
 3713 0060 0823     		movs	r3, #8
 3714 0062 8DF80730 		strb	r3, [sp, #7]
1329:task/attitude/eMPL/inv_mpu.c ****     case 8:
 3715              		.loc 1 1329 9 is_stmt 1 view .LVU1099
 3716 0066 E1E7     		b	.L274
 3717              	.L271:
1331:task/attitude/eMPL/inv_mpu.c ****         break;
 3718              		.loc 1 1331 9 view .LVU1100
1331:task/attitude/eMPL/inv_mpu.c ****         break;
 3719              		.loc 1 1331 14 is_stmt 0 view .LVU1101
 3720 0068 1023     		movs	r3, #16
 3721 006a 8DF80730 		strb	r3, [sp, #7]
1332:task/attitude/eMPL/inv_mpu.c ****     case 16:
 3722              		.loc 1 1332 9 is_stmt 1 view .LVU1102
 3723 006e DDE7     		b	.L274
 3724              	.L269:
1334:task/attitude/eMPL/inv_mpu.c ****         break;
 3725              		.loc 1 1334 9 view .LVU1103
1334:task/attitude/eMPL/inv_mpu.c ****         break;
 3726              		.loc 1 1334 14 is_stmt 0 view .LVU1104
 3727 0070 1823     		movs	r3, #24
 3728 0072 8DF80730 		strb	r3, [sp, #7]
1335:task/attitude/eMPL/inv_mpu.c ****     default:
 3729              		.loc 1 1335 9 is_stmt 1 view .LVU1105
 3730 0076 D9E7     		b	.L274
 3731              	.LVL220:
 3732              	.L275:
 3733              	.LCFI74:
 3734              		.cfi_def_cfa_offset 0
 3735              		.cfi_restore 14
1320:task/attitude/eMPL/inv_mpu.c **** 
 3736              		.loc 1 1320 16 is_stmt 0 view .LVU1106
 3737 0078 4FF0FF30 		mov	r0, #-1
 3738              	.LVL221:
1346:task/attitude/eMPL/inv_mpu.c **** 
 3739              		.loc 1 1346 1 view .LVU1107
 3740 007c 7047     		bx	lr
 3741              	.L276:
 3742              	.LCFI75:
 3743              		.cfi_def_cfa_offset 16
 3744              		.cfi_offset 14, -4
1319:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3745              		.loc 1 1319 8 view .LVU1108
 3746 007e 4FF0FF30 		mov	r0, #-1
 3747 0082 EAE7     		b	.L267
 3748              	.L277:
1341:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, &data))
 3749              		.loc 1 1341 16 view .LVU1109
 3750 0084 0020     		movs	r0, #0
 3751 0086 E8E7     		b	.L267
 3752              	.L278:
1343:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = data >> 3;
 3753              		.loc 1 1343 16 view .LVU1110
 3754 0088 4FF0FF30 		mov	r0, #-1
 3755 008c E5E7     		b	.L267
 3756              	.L284:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 120


 3757 008e 00BF     		.align	2
 3758              	.L283:
 3759 0090 00000000 		.word	.LANCHOR0
 3760              		.cfi_endproc
 3761              	.LFE166:
 3763              		.section	.text.mpu_get_lpf,"ax",%progbits
 3764              		.align	1
 3765              		.global	mpu_get_lpf
 3766              		.syntax unified
 3767              		.thumb
 3768              		.thumb_func
 3769              		.fpu fpv5-d16
 3771              	mpu_get_lpf:
 3772              	.LVL222:
 3773              	.LFB167:
1354:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.lpf)
 3774              		.loc 1 1354 1 is_stmt 1 view -0
 3775              		.cfi_startproc
 3776              		@ args = 0, pretend = 0, frame = 0
 3777              		@ frame_needed = 0, uses_anonymous_args = 0
 3778              		@ link register save eliminated.
1355:task/attitude/eMPL/inv_mpu.c ****     {
 3779              		.loc 1 1355 5 view .LVU1112
1355:task/attitude/eMPL/inv_mpu.c ****     {
 3780              		.loc 1 1355 24 is_stmt 0 view .LVU1113
 3781 0000 0F4B     		ldr	r3, .L295
 3782 0002 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 3783 0004 013B     		subs	r3, r3, #1
 3784 0006 052B     		cmp	r3, #5
 3785 0008 17D8     		bhi	.L286
 3786 000a DFE803F0 		tbb	[pc, r3]
 3787              	.L288:
 3788 000e 03       		.byte	(.L293-.L288)/2
 3789 000f 07       		.byte	(.L292-.L288)/2
 3790 0010 0A       		.byte	(.L291-.L288)/2
 3791 0011 0D       		.byte	(.L290-.L288)/2
 3792 0012 10       		.byte	(.L289-.L288)/2
 3793 0013 13       		.byte	(.L287-.L288)/2
 3794              		.p2align 1
 3795              	.L293:
1358:task/attitude/eMPL/inv_mpu.c ****         break;
 3796              		.loc 1 1358 9 is_stmt 1 view .LVU1114
1358:task/attitude/eMPL/inv_mpu.c ****         break;
 3797              		.loc 1 1358 16 is_stmt 0 view .LVU1115
 3798 0014 BC23     		movs	r3, #188
 3799 0016 0380     		strh	r3, [r0]	@ movhi
1359:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_98HZ:
 3800              		.loc 1 1359 9 is_stmt 1 view .LVU1116
 3801              	.L294:
1381:task/attitude/eMPL/inv_mpu.c **** }
 3802              		.loc 1 1381 5 view .LVU1117
1382:task/attitude/eMPL/inv_mpu.c **** 
 3803              		.loc 1 1382 1 is_stmt 0 view .LVU1118
 3804 0018 0020     		movs	r0, #0
 3805              	.LVL223:
1382:task/attitude/eMPL/inv_mpu.c **** 
 3806              		.loc 1 1382 1 view .LVU1119
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 121


 3807 001a 7047     		bx	lr
 3808              	.LVL224:
 3809              	.L292:
1361:task/attitude/eMPL/inv_mpu.c ****         break;
 3810              		.loc 1 1361 9 is_stmt 1 view .LVU1120
1361:task/attitude/eMPL/inv_mpu.c ****         break;
 3811              		.loc 1 1361 16 is_stmt 0 view .LVU1121
 3812 001c 6223     		movs	r3, #98
 3813 001e 0380     		strh	r3, [r0]	@ movhi
1362:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_42HZ:
 3814              		.loc 1 1362 9 is_stmt 1 view .LVU1122
 3815 0020 FAE7     		b	.L294
 3816              	.L291:
1364:task/attitude/eMPL/inv_mpu.c ****         break;
 3817              		.loc 1 1364 9 view .LVU1123
1364:task/attitude/eMPL/inv_mpu.c ****         break;
 3818              		.loc 1 1364 16 is_stmt 0 view .LVU1124
 3819 0022 2A23     		movs	r3, #42
 3820 0024 0380     		strh	r3, [r0]	@ movhi
1365:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_20HZ:
 3821              		.loc 1 1365 9 is_stmt 1 view .LVU1125
 3822 0026 F7E7     		b	.L294
 3823              	.L290:
1367:task/attitude/eMPL/inv_mpu.c ****         break;
 3824              		.loc 1 1367 9 view .LVU1126
1367:task/attitude/eMPL/inv_mpu.c ****         break;
 3825              		.loc 1 1367 16 is_stmt 0 view .LVU1127
 3826 0028 1423     		movs	r3, #20
 3827 002a 0380     		strh	r3, [r0]	@ movhi
1368:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_10HZ:
 3828              		.loc 1 1368 9 is_stmt 1 view .LVU1128
 3829 002c F4E7     		b	.L294
 3830              	.L289:
1370:task/attitude/eMPL/inv_mpu.c ****         break;
 3831              		.loc 1 1370 9 view .LVU1129
1370:task/attitude/eMPL/inv_mpu.c ****         break;
 3832              		.loc 1 1370 16 is_stmt 0 view .LVU1130
 3833 002e 0A23     		movs	r3, #10
 3834 0030 0380     		strh	r3, [r0]	@ movhi
1371:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_5HZ:
 3835              		.loc 1 1371 9 is_stmt 1 view .LVU1131
 3836 0032 F1E7     		b	.L294
 3837              	.L287:
1373:task/attitude/eMPL/inv_mpu.c ****         break;
 3838              		.loc 1 1373 9 view .LVU1132
1373:task/attitude/eMPL/inv_mpu.c ****         break;
 3839              		.loc 1 1373 16 is_stmt 0 view .LVU1133
 3840 0034 0523     		movs	r3, #5
 3841 0036 0380     		strh	r3, [r0]	@ movhi
1374:task/attitude/eMPL/inv_mpu.c ****     case INV_FILTER_256HZ_NOLPF2:
 3842              		.loc 1 1374 9 is_stmt 1 view .LVU1134
 3843 0038 EEE7     		b	.L294
 3844              	.L286:
1378:task/attitude/eMPL/inv_mpu.c ****         break;
 3845              		.loc 1 1378 9 view .LVU1135
1378:task/attitude/eMPL/inv_mpu.c ****         break;
 3846              		.loc 1 1378 16 is_stmt 0 view .LVU1136
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 122


 3847 003a 0023     		movs	r3, #0
 3848 003c 0380     		strh	r3, [r0]	@ movhi
1379:task/attitude/eMPL/inv_mpu.c ****     }
 3849              		.loc 1 1379 9 is_stmt 1 view .LVU1137
 3850 003e EBE7     		b	.L294
 3851              	.L296:
 3852              		.align	2
 3853              	.L295:
 3854 0040 00000000 		.word	.LANCHOR0
 3855              		.cfi_endproc
 3856              	.LFE167:
 3858              		.section	.text.mpu_set_lpf,"ax",%progbits
 3859              		.align	1
 3860              		.global	mpu_set_lpf
 3861              		.syntax unified
 3862              		.thumb
 3863              		.thumb_func
 3864              		.fpu fpv5-d16
 3866              	mpu_set_lpf:
 3867              	.LVL225:
 3868              	.LFB168:
1391:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 3869              		.loc 1 1391 1 view -0
 3870              		.cfi_startproc
 3871              		@ args = 0, pretend = 0, frame = 8
 3872              		@ frame_needed = 0, uses_anonymous_args = 0
1392:task/attitude/eMPL/inv_mpu.c **** 
 3873              		.loc 1 1392 5 view .LVU1139
1394:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3874              		.loc 1 1394 5 view .LVU1140
1394:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3875              		.loc 1 1394 22 is_stmt 0 view .LVU1141
 3876 0000 234B     		ldr	r3, .L312
 3877 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1394:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3878              		.loc 1 1394 8 view .LVU1142
 3879 0004 002B     		cmp	r3, #0
 3880 0006 3AD0     		beq	.L305
1391:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 3881              		.loc 1 1391 1 view .LVU1143
 3882 0008 00B5     		push	{lr}
 3883              	.LCFI76:
 3884              		.cfi_def_cfa_offset 4
 3885              		.cfi_offset 14, -4
 3886 000a 83B0     		sub	sp, sp, #12
 3887              	.LCFI77:
 3888              		.cfi_def_cfa_offset 16
1397:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_188HZ;
 3889              		.loc 1 1397 5 is_stmt 1 view .LVU1144
1397:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_188HZ;
 3890              		.loc 1 1397 8 is_stmt 0 view .LVU1145
 3891 000c BB28     		cmp	r0, #187
 3892 000e 1AD9     		bls	.L299
1398:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 98)
 3893              		.loc 1 1398 9 is_stmt 1 view .LVU1146
1398:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 98)
 3894              		.loc 1 1398 14 is_stmt 0 view .LVU1147
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 123


 3895 0010 0123     		movs	r3, #1
 3896 0012 8DF80730 		strb	r3, [sp, #7]
 3897              	.L300:
1410:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3898              		.loc 1 1410 5 is_stmt 1 view .LVU1148
1410:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3899              		.loc 1 1410 20 is_stmt 0 view .LVU1149
 3900 0016 1E4B     		ldr	r3, .L312
 3901 0018 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
1410:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3902              		.loc 1 1410 25 view .LVU1150
 3903 001a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
1410:task/attitude/eMPL/inv_mpu.c ****         return 0;
 3904              		.loc 1 1410 8 view .LVU1151
 3905 001e 9A42     		cmp	r2, r3
 3906 0020 30D0     		beq	.L306
1412:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3907              		.loc 1 1412 5 is_stmt 1 view .LVU1152
1412:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3908              		.loc 1 1412 21 is_stmt 0 view .LVU1153
 3909 0022 1B4B     		ldr	r3, .L312
 3910 0024 5868     		ldr	r0, [r3, #4]
 3911              	.LVL226:
1412:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3912              		.loc 1 1412 34 view .LVU1154
 3913 0026 1968     		ldr	r1, [r3]
1412:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3914              		.loc 1 1412 9 view .LVU1155
 3915 0028 0DF10703 		add	r3, sp, #7
 3916 002c 0122     		movs	r2, #1
 3917 002e 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 3918 0030 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3919 0032 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 3920              	.LVL227:
1412:task/attitude/eMPL/inv_mpu.c ****         return -1;
 3921              		.loc 1 1412 8 view .LVU1156
 3922 0036 38BB     		cbnz	r0, .L307
1414:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3923              		.loc 1 1414 5 is_stmt 1 view .LVU1157
1414:task/attitude/eMPL/inv_mpu.c ****     return 0;
 3924              		.loc 1 1414 21 is_stmt 0 view .LVU1158
 3925 0038 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 3926 003c 144B     		ldr	r3, .L312
 3927 003e DA72     		strb	r2, [r3, #11]
1415:task/attitude/eMPL/inv_mpu.c **** }
 3928              		.loc 1 1415 5 is_stmt 1 view .LVU1159
 3929              	.L297:
1416:task/attitude/eMPL/inv_mpu.c **** 
 3930              		.loc 1 1416 1 is_stmt 0 view .LVU1160
 3931 0040 03B0     		add	sp, sp, #12
 3932              	.LCFI78:
 3933              		.cfi_remember_state
 3934              		.cfi_def_cfa_offset 4
 3935              		@ sp needed
 3936 0042 5DF804FB 		ldr	pc, [sp], #4
 3937              	.LVL228:
 3938              	.L299:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 124


 3939              	.LCFI79:
 3940              		.cfi_restore_state
1399:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_98HZ;
 3941              		.loc 1 1399 10 is_stmt 1 view .LVU1161
1399:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_98HZ;
 3942              		.loc 1 1399 13 is_stmt 0 view .LVU1162
 3943 0046 6128     		cmp	r0, #97
 3944 0048 03D9     		bls	.L301
1400:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 42)
 3945              		.loc 1 1400 9 is_stmt 1 view .LVU1163
1400:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 42)
 3946              		.loc 1 1400 14 is_stmt 0 view .LVU1164
 3947 004a 0223     		movs	r3, #2
 3948 004c 8DF80730 		strb	r3, [sp, #7]
 3949 0050 E1E7     		b	.L300
 3950              	.L301:
1401:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_42HZ;
 3951              		.loc 1 1401 10 is_stmt 1 view .LVU1165
1401:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_42HZ;
 3952              		.loc 1 1401 13 is_stmt 0 view .LVU1166
 3953 0052 2928     		cmp	r0, #41
 3954 0054 03D9     		bls	.L302
1402:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 20)
 3955              		.loc 1 1402 9 is_stmt 1 view .LVU1167
1402:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 20)
 3956              		.loc 1 1402 14 is_stmt 0 view .LVU1168
 3957 0056 0323     		movs	r3, #3
 3958 0058 8DF80730 		strb	r3, [sp, #7]
 3959 005c DBE7     		b	.L300
 3960              	.L302:
1403:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_20HZ;
 3961              		.loc 1 1403 10 is_stmt 1 view .LVU1169
1403:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_20HZ;
 3962              		.loc 1 1403 13 is_stmt 0 view .LVU1170
 3963 005e 1328     		cmp	r0, #19
 3964 0060 03D9     		bls	.L303
1404:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 10)
 3965              		.loc 1 1404 9 is_stmt 1 view .LVU1171
1404:task/attitude/eMPL/inv_mpu.c ****     else if (lpf >= 10)
 3966              		.loc 1 1404 14 is_stmt 0 view .LVU1172
 3967 0062 0423     		movs	r3, #4
 3968 0064 8DF80730 		strb	r3, [sp, #7]
 3969 0068 D5E7     		b	.L300
 3970              	.L303:
1405:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_10HZ;
 3971              		.loc 1 1405 10 is_stmt 1 view .LVU1173
1405:task/attitude/eMPL/inv_mpu.c ****         data = INV_FILTER_10HZ;
 3972              		.loc 1 1405 13 is_stmt 0 view .LVU1174
 3973 006a 0928     		cmp	r0, #9
 3974 006c 03D9     		bls	.L304
1406:task/attitude/eMPL/inv_mpu.c ****     else
 3975              		.loc 1 1406 9 is_stmt 1 view .LVU1175
1406:task/attitude/eMPL/inv_mpu.c ****     else
 3976              		.loc 1 1406 14 is_stmt 0 view .LVU1176
 3977 006e 0523     		movs	r3, #5
 3978 0070 8DF80730 		strb	r3, [sp, #7]
 3979 0074 CFE7     		b	.L300
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 125


 3980              	.L304:
1408:task/attitude/eMPL/inv_mpu.c **** 
 3981              		.loc 1 1408 9 is_stmt 1 view .LVU1177
1408:task/attitude/eMPL/inv_mpu.c **** 
 3982              		.loc 1 1408 14 is_stmt 0 view .LVU1178
 3983 0076 0623     		movs	r3, #6
 3984 0078 8DF80730 		strb	r3, [sp, #7]
 3985 007c CBE7     		b	.L300
 3986              	.L305:
 3987              	.LCFI80:
 3988              		.cfi_def_cfa_offset 0
 3989              		.cfi_restore 14
1395:task/attitude/eMPL/inv_mpu.c **** 
 3990              		.loc 1 1395 16 view .LVU1179
 3991 007e 4FF0FF30 		mov	r0, #-1
 3992              	.LVL229:
1416:task/attitude/eMPL/inv_mpu.c **** 
 3993              		.loc 1 1416 1 view .LVU1180
 3994 0082 7047     		bx	lr
 3995              	.LVL230:
 3996              	.L306:
 3997              	.LCFI81:
 3998              		.cfi_def_cfa_offset 16
 3999              		.cfi_offset 14, -4
1411:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lpf, 1, &data))
 4000              		.loc 1 1411 16 view .LVU1181
 4001 0084 0020     		movs	r0, #0
 4002              	.LVL231:
1411:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lpf, 1, &data))
 4003              		.loc 1 1411 16 view .LVU1182
 4004 0086 DBE7     		b	.L297
 4005              	.L307:
1413:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = data;
 4006              		.loc 1 1413 16 view .LVU1183
 4007 0088 4FF0FF30 		mov	r0, #-1
 4008 008c D8E7     		b	.L297
 4009              	.L313:
 4010 008e 00BF     		.align	2
 4011              	.L312:
 4012 0090 00000000 		.word	.LANCHOR0
 4013              		.cfi_endproc
 4014              	.LFE168:
 4016              		.section	.text.mpu_get_sample_rate,"ax",%progbits
 4017              		.align	1
 4018              		.global	mpu_get_sample_rate
 4019              		.syntax unified
 4020              		.thumb
 4021              		.thumb_func
 4022              		.fpu fpv5-d16
 4024              	mpu_get_sample_rate:
 4025              	.LVL232:
 4026              	.LFB169:
1424:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
 4027              		.loc 1 1424 1 is_stmt 1 view -0
 4028              		.cfi_startproc
 4029              		@ args = 0, pretend = 0, frame = 0
 4030              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 126


 4031              		@ link register save eliminated.
1425:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4032              		.loc 1 1425 5 view .LVU1185
1425:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4033              		.loc 1 1425 20 is_stmt 0 view .LVU1186
 4034 0000 054B     		ldr	r3, .L317
 4035 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
1425:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4036              		.loc 1 1425 8 view .LVU1187
 4037 0006 23B9     		cbnz	r3, .L316
1428:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4038              		.loc 1 1428 9 is_stmt 1 view .LVU1188
1428:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4039              		.loc 1 1428 30 is_stmt 0 view .LVU1189
 4040 0008 034B     		ldr	r3, .L317
 4041 000a DB89     		ldrh	r3, [r3, #14]
1428:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4042              		.loc 1 1428 17 view .LVU1190
 4043 000c 0380     		strh	r3, [r0]	@ movhi
1429:task/attitude/eMPL/inv_mpu.c **** }
 4044              		.loc 1 1429 5 is_stmt 1 view .LVU1191
1429:task/attitude/eMPL/inv_mpu.c **** }
 4045              		.loc 1 1429 12 is_stmt 0 view .LVU1192
 4046 000e 0020     		movs	r0, #0
 4047              	.LVL233:
1429:task/attitude/eMPL/inv_mpu.c **** }
 4048              		.loc 1 1429 12 view .LVU1193
 4049 0010 7047     		bx	lr
 4050              	.LVL234:
 4051              	.L316:
1426:task/attitude/eMPL/inv_mpu.c ****     else
 4052              		.loc 1 1426 16 view .LVU1194
 4053 0012 4FF0FF30 		mov	r0, #-1
 4054              	.LVL235:
1430:task/attitude/eMPL/inv_mpu.c **** 
 4055              		.loc 1 1430 1 view .LVU1195
 4056 0016 7047     		bx	lr
 4057              	.L318:
 4058              		.align	2
 4059              	.L317:
 4060 0018 00000000 		.word	.LANCHOR0
 4061              		.cfi_endproc
 4062              	.LFE169:
 4064              		.section	.text.mpu_get_compass_sample_rate,"ax",%progbits
 4065              		.align	1
 4066              		.global	mpu_get_compass_sample_rate
 4067              		.syntax unified
 4068              		.thumb
 4069              		.thumb_func
 4070              		.fpu fpv5-d16
 4072              	mpu_get_compass_sample_rate:
 4073              	.LVL236:
 4074              	.LFB171:
1489:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 4075              		.loc 1 1489 1 is_stmt 1 view -0
 4076              		.cfi_startproc
 4077              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 127


 4078              		@ frame_needed = 0, uses_anonymous_args = 0
 4079              		@ link register save eliminated.
1494:task/attitude/eMPL/inv_mpu.c ****     return -1;
 4080              		.loc 1 1494 5 view .LVU1197
1494:task/attitude/eMPL/inv_mpu.c ****     return -1;
 4081              		.loc 1 1494 13 is_stmt 0 view .LVU1198
 4082 0000 0023     		movs	r3, #0
 4083 0002 0380     		strh	r3, [r0]	@ movhi
1495:task/attitude/eMPL/inv_mpu.c **** #endif
 4084              		.loc 1 1495 5 is_stmt 1 view .LVU1199
1497:task/attitude/eMPL/inv_mpu.c **** 
 4085              		.loc 1 1497 1 is_stmt 0 view .LVU1200
 4086 0004 4FF0FF30 		mov	r0, #-1
 4087              	.LVL237:
1497:task/attitude/eMPL/inv_mpu.c **** 
 4088              		.loc 1 1497 1 view .LVU1201
 4089 0008 7047     		bx	lr
 4090              		.cfi_endproc
 4091              	.LFE171:
 4093              		.section	.text.mpu_set_compass_sample_rate,"ax",%progbits
 4094              		.align	1
 4095              		.global	mpu_set_compass_sample_rate
 4096              		.syntax unified
 4097              		.thumb
 4098              		.thumb_func
 4099              		.fpu fpv5-d16
 4101              	mpu_set_compass_sample_rate:
 4102              	.LVL238:
 4103              	.LFB172:
1511:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 4104              		.loc 1 1511 1 is_stmt 1 view -0
 4105              		.cfi_startproc
 4106              		@ args = 0, pretend = 0, frame = 0
 4107              		@ frame_needed = 0, uses_anonymous_args = 0
 4108              		@ link register save eliminated.
1523:task/attitude/eMPL/inv_mpu.c **** #endif
 4109              		.loc 1 1523 5 view .LVU1203
1525:task/attitude/eMPL/inv_mpu.c **** 
 4110              		.loc 1 1525 1 is_stmt 0 view .LVU1204
 4111 0000 4FF0FF30 		mov	r0, #-1
 4112              	.LVL239:
1525:task/attitude/eMPL/inv_mpu.c **** 
 4113              		.loc 1 1525 1 view .LVU1205
 4114 0004 7047     		bx	lr
 4115              		.cfi_endproc
 4116              	.LFE172:
 4118              		.section	.text.mpu_get_gyro_sens,"ax",%progbits
 4119              		.align	1
 4120              		.global	mpu_get_gyro_sens
 4121              		.syntax unified
 4122              		.thumb
 4123              		.thumb_func
 4124              		.fpu fpv5-d16
 4126              	mpu_get_gyro_sens:
 4127              	.LVL240:
 4128              	.LFB173:
1533:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.gyro_fsr)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 128


 4129              		.loc 1 1533 1 is_stmt 1 view -0
 4130              		.cfi_startproc
 4131              		@ args = 0, pretend = 0, frame = 0
 4132              		@ frame_needed = 0, uses_anonymous_args = 0
 4133              		@ link register save eliminated.
1534:task/attitude/eMPL/inv_mpu.c ****     {
 4134              		.loc 1 1534 5 view .LVU1207
1534:task/attitude/eMPL/inv_mpu.c ****     {
 4135              		.loc 1 1534 24 is_stmt 0 view .LVU1208
 4136 0000 0D4B     		ldr	r3, .L329
 4137 0002 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 4138 0004 032B     		cmp	r3, #3
 4139 0006 13D8     		bhi	.L328
 4140 0008 DFE803F0 		tbb	[pc, r3]
 4141              	.L324:
 4142 000c 02       		.byte	(.L327-.L324)/2
 4143 000d 06       		.byte	(.L326-.L324)/2
 4144 000e 0A       		.byte	(.L325-.L324)/2
 4145 000f 0E       		.byte	(.L323-.L324)/2
 4146              		.p2align 1
 4147              	.L327:
1537:task/attitude/eMPL/inv_mpu.c ****         break;
 4148              		.loc 1 1537 9 is_stmt 1 view .LVU1209
1537:task/attitude/eMPL/inv_mpu.c ****         break;
 4149              		.loc 1 1537 17 is_stmt 0 view .LVU1210
 4150 0010 0A4B     		ldr	r3, .L329+4
 4151 0012 0360     		str	r3, [r0]	@ float
1538:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_500DPS:
 4152              		.loc 1 1538 9 is_stmt 1 view .LVU1211
1551:task/attitude/eMPL/inv_mpu.c **** }
 4153              		.loc 1 1551 12 is_stmt 0 view .LVU1212
 4154 0014 0020     		movs	r0, #0
 4155              	.LVL241:
1538:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_500DPS:
 4156              		.loc 1 1538 9 view .LVU1213
 4157 0016 7047     		bx	lr
 4158              	.LVL242:
 4159              	.L326:
1540:task/attitude/eMPL/inv_mpu.c ****         break;
 4160              		.loc 1 1540 9 is_stmt 1 view .LVU1214
1540:task/attitude/eMPL/inv_mpu.c ****         break;
 4161              		.loc 1 1540 17 is_stmt 0 view .LVU1215
 4162 0018 094B     		ldr	r3, .L329+8
 4163 001a 0360     		str	r3, [r0]	@ float
1541:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_1000DPS:
 4164              		.loc 1 1541 9 is_stmt 1 view .LVU1216
1551:task/attitude/eMPL/inv_mpu.c **** }
 4165              		.loc 1 1551 12 is_stmt 0 view .LVU1217
 4166 001c 0020     		movs	r0, #0
 4167              	.LVL243:
1541:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_1000DPS:
 4168              		.loc 1 1541 9 view .LVU1218
 4169 001e 7047     		bx	lr
 4170              	.LVL244:
 4171              	.L325:
1543:task/attitude/eMPL/inv_mpu.c ****         break;
 4172              		.loc 1 1543 9 is_stmt 1 view .LVU1219
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 129


1543:task/attitude/eMPL/inv_mpu.c ****         break;
 4173              		.loc 1 1543 17 is_stmt 0 view .LVU1220
 4174 0020 084B     		ldr	r3, .L329+12
 4175 0022 0360     		str	r3, [r0]	@ float
1544:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2000DPS:
 4176              		.loc 1 1544 9 is_stmt 1 view .LVU1221
1551:task/attitude/eMPL/inv_mpu.c **** }
 4177              		.loc 1 1551 12 is_stmt 0 view .LVU1222
 4178 0024 0020     		movs	r0, #0
 4179              	.LVL245:
1544:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_2000DPS:
 4180              		.loc 1 1544 9 view .LVU1223
 4181 0026 7047     		bx	lr
 4182              	.LVL246:
 4183              	.L323:
1546:task/attitude/eMPL/inv_mpu.c ****         break;
 4184              		.loc 1 1546 9 is_stmt 1 view .LVU1224
1546:task/attitude/eMPL/inv_mpu.c ****         break;
 4185              		.loc 1 1546 17 is_stmt 0 view .LVU1225
 4186 0028 074B     		ldr	r3, .L329+16
 4187 002a 0360     		str	r3, [r0]	@ float
1547:task/attitude/eMPL/inv_mpu.c ****     default:
 4188              		.loc 1 1547 9 is_stmt 1 view .LVU1226
1551:task/attitude/eMPL/inv_mpu.c **** }
 4189              		.loc 1 1551 12 is_stmt 0 view .LVU1227
 4190 002c 0020     		movs	r0, #0
 4191              	.LVL247:
1547:task/attitude/eMPL/inv_mpu.c ****     default:
 4192              		.loc 1 1547 9 view .LVU1228
 4193 002e 7047     		bx	lr
 4194              	.LVL248:
 4195              	.L328:
1534:task/attitude/eMPL/inv_mpu.c ****     {
 4196              		.loc 1 1534 24 view .LVU1229
 4197 0030 4FF0FF30 		mov	r0, #-1
 4198              	.LVL249:
1552:task/attitude/eMPL/inv_mpu.c **** 
 4199              		.loc 1 1552 1 view .LVU1230
 4200 0034 7047     		bx	lr
 4201              	.L330:
 4202 0036 00BF     		.align	2
 4203              	.L329:
 4204 0038 00000000 		.word	.LANCHOR0
 4205 003c 00000343 		.word	1124270080
 4206 0040 00008342 		.word	1115881472
 4207 0044 33330342 		.word	1107505971
 4208 0048 33338341 		.word	1099117363
 4209              		.cfi_endproc
 4210              	.LFE173:
 4212              		.section	.text.mpu_get_accel_sens,"ax",%progbits
 4213              		.align	1
 4214              		.global	mpu_get_accel_sens
 4215              		.syntax unified
 4216              		.thumb
 4217              		.thumb_func
 4218              		.fpu fpv5-d16
 4220              	mpu_get_accel_sens:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 130


 4221              	.LVL250:
 4222              	.LFB174:
1560:task/attitude/eMPL/inv_mpu.c ****     switch (st.chip_cfg.accel_fsr)
 4223              		.loc 1 1560 1 is_stmt 1 view -0
 4224              		.cfi_startproc
 4225              		@ args = 0, pretend = 0, frame = 0
 4226              		@ frame_needed = 0, uses_anonymous_args = 0
 4227              		@ link register save eliminated.
1561:task/attitude/eMPL/inv_mpu.c ****     {
 4228              		.loc 1 1561 5 view .LVU1232
1561:task/attitude/eMPL/inv_mpu.c ****     {
 4229              		.loc 1 1561 24 is_stmt 0 view .LVU1233
 4230 0000 114B     		ldr	r3, .L341
 4231 0002 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 4232 0004 032B     		cmp	r3, #3
 4233 0006 1AD8     		bhi	.L339
 4234 0008 DFE803F0 		tbb	[pc, r3]
 4235              	.L334:
 4236 000c 02       		.byte	(.L337-.L334)/2
 4237 000d 0D       		.byte	(.L336-.L334)/2
 4238 000e 11       		.byte	(.L335-.L334)/2
 4239 000f 15       		.byte	(.L333-.L334)/2
 4240              		.p2align 1
 4241              	.L337:
1564:task/attitude/eMPL/inv_mpu.c ****         break;
 4242              		.loc 1 1564 9 is_stmt 1 view .LVU1234
1564:task/attitude/eMPL/inv_mpu.c ****         break;
 4243              		.loc 1 1564 17 is_stmt 0 view .LVU1235
 4244 0010 4FF48043 		mov	r3, #16384
 4245 0014 0380     		strh	r3, [r0]	@ movhi
1565:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_4G:
 4246              		.loc 1 1565 9 is_stmt 1 view .LVU1236
 4247              	.L338:
1578:task/attitude/eMPL/inv_mpu.c ****         sens[0] >>= 1;
 4248              		.loc 1 1578 5 view .LVU1237
1578:task/attitude/eMPL/inv_mpu.c ****         sens[0] >>= 1;
 4249              		.loc 1 1578 20 is_stmt 0 view .LVU1238
 4250 0016 0C4B     		ldr	r3, .L341
 4251 0018 DB7C     		ldrb	r3, [r3, #19]	@ zero_extendqisi2
1578:task/attitude/eMPL/inv_mpu.c ****         sens[0] >>= 1;
 4252              		.loc 1 1578 8 view .LVU1239
 4253 001a 9BB1     		cbz	r3, .L340
1579:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4254              		.loc 1 1579 9 is_stmt 1 view .LVU1240
1579:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4255              		.loc 1 1579 17 is_stmt 0 view .LVU1241
 4256 001c 0388     		ldrh	r3, [r0]
 4257 001e 5B08     		lsrs	r3, r3, #1
 4258 0020 0380     		strh	r3, [r0]	@ movhi
1580:task/attitude/eMPL/inv_mpu.c **** }
 4259              		.loc 1 1580 12 view .LVU1242
 4260 0022 0020     		movs	r0, #0
 4261              	.LVL251:
1580:task/attitude/eMPL/inv_mpu.c **** }
 4262              		.loc 1 1580 12 view .LVU1243
 4263 0024 7047     		bx	lr
 4264              	.LVL252:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 131


 4265              	.L336:
1567:task/attitude/eMPL/inv_mpu.c ****         break;
 4266              		.loc 1 1567 9 is_stmt 1 view .LVU1244
1567:task/attitude/eMPL/inv_mpu.c ****         break;
 4267              		.loc 1 1567 17 is_stmt 0 view .LVU1245
 4268 0026 4FF40053 		mov	r3, #8192
 4269 002a 0380     		strh	r3, [r0]	@ movhi
1568:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_8G:
 4270              		.loc 1 1568 9 is_stmt 1 view .LVU1246
 4271 002c F3E7     		b	.L338
 4272              	.L335:
1570:task/attitude/eMPL/inv_mpu.c ****         break;
 4273              		.loc 1 1570 9 view .LVU1247
1570:task/attitude/eMPL/inv_mpu.c ****         break;
 4274              		.loc 1 1570 17 is_stmt 0 view .LVU1248
 4275 002e 4FF48053 		mov	r3, #4096
 4276 0032 0380     		strh	r3, [r0]	@ movhi
1571:task/attitude/eMPL/inv_mpu.c ****     case INV_FSR_16G:
 4277              		.loc 1 1571 9 is_stmt 1 view .LVU1249
 4278 0034 EFE7     		b	.L338
 4279              	.L333:
1573:task/attitude/eMPL/inv_mpu.c ****         break;
 4280              		.loc 1 1573 9 view .LVU1250
1573:task/attitude/eMPL/inv_mpu.c ****         break;
 4281              		.loc 1 1573 17 is_stmt 0 view .LVU1251
 4282 0036 4FF40063 		mov	r3, #2048
 4283 003a 0380     		strh	r3, [r0]	@ movhi
1574:task/attitude/eMPL/inv_mpu.c ****     default:
 4284              		.loc 1 1574 9 is_stmt 1 view .LVU1252
 4285 003c EBE7     		b	.L338
 4286              	.L339:
1561:task/attitude/eMPL/inv_mpu.c ****     {
 4287              		.loc 1 1561 24 is_stmt 0 view .LVU1253
 4288 003e 4FF0FF30 		mov	r0, #-1
 4289              	.LVL253:
1561:task/attitude/eMPL/inv_mpu.c ****     {
 4290              		.loc 1 1561 24 view .LVU1254
 4291 0042 7047     		bx	lr
 4292              	.LVL254:
 4293              	.L340:
1580:task/attitude/eMPL/inv_mpu.c **** }
 4294              		.loc 1 1580 12 view .LVU1255
 4295 0044 0020     		movs	r0, #0
 4296              	.LVL255:
1581:task/attitude/eMPL/inv_mpu.c **** 
 4297              		.loc 1 1581 1 view .LVU1256
 4298 0046 7047     		bx	lr
 4299              	.L342:
 4300              		.align	2
 4301              	.L341:
 4302 0048 00000000 		.word	.LANCHOR0
 4303              		.cfi_endproc
 4304              	.LFE174:
 4306              		.section	.text.mpu_get_fifo_config,"ax",%progbits
 4307              		.align	1
 4308              		.global	mpu_get_fifo_config
 4309              		.syntax unified
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 132


 4310              		.thumb
 4311              		.thumb_func
 4312              		.fpu fpv5-d16
 4314              	mpu_get_fifo_config:
 4315              	.LVL256:
 4316              	.LFB175:
1593:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = st.chip_cfg.fifo_enable;
 4317              		.loc 1 1593 1 is_stmt 1 view -0
 4318              		.cfi_startproc
 4319              		@ args = 0, pretend = 0, frame = 0
 4320              		@ frame_needed = 0, uses_anonymous_args = 0
 4321              		@ link register save eliminated.
1594:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4322              		.loc 1 1594 5 view .LVU1258
1594:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4323              		.loc 1 1594 29 is_stmt 0 view .LVU1259
 4324 0000 024B     		ldr	r3, .L344
 4325 0002 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
1594:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4326              		.loc 1 1594 16 view .LVU1260
 4327 0004 0370     		strb	r3, [r0]
1595:task/attitude/eMPL/inv_mpu.c **** }
 4328              		.loc 1 1595 5 is_stmt 1 view .LVU1261
1596:task/attitude/eMPL/inv_mpu.c **** 
 4329              		.loc 1 1596 1 is_stmt 0 view .LVU1262
 4330 0006 0020     		movs	r0, #0
 4331              	.LVL257:
1596:task/attitude/eMPL/inv_mpu.c **** 
 4332              		.loc 1 1596 1 view .LVU1263
 4333 0008 7047     		bx	lr
 4334              	.L345:
 4335 000a 00BF     		.align	2
 4336              	.L344:
 4337 000c 00000000 		.word	.LANCHOR0
 4338              		.cfi_endproc
 4339              	.LFE175:
 4341              		.section	.text.mpu_configure_fifo,"ax",%progbits
 4342              		.align	1
 4343              		.global	mpu_configure_fifo
 4344              		.syntax unified
 4345              		.thumb
 4346              		.thumb_func
 4347              		.fpu fpv5-d16
 4349              	mpu_configure_fifo:
 4350              	.LVL258:
 4351              	.LFB176:
1608:task/attitude/eMPL/inv_mpu.c ****     unsigned char prev;
 4352              		.loc 1 1608 1 is_stmt 1 view -0
 4353              		.cfi_startproc
 4354              		@ args = 0, pretend = 0, frame = 0
 4355              		@ frame_needed = 0, uses_anonymous_args = 0
1608:task/attitude/eMPL/inv_mpu.c ****     unsigned char prev;
 4356              		.loc 1 1608 1 is_stmt 0 view .LVU1265
 4357 0000 70B5     		push	{r4, r5, r6, lr}
 4358              	.LCFI82:
 4359              		.cfi_def_cfa_offset 16
 4360              		.cfi_offset 4, -16
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 133


 4361              		.cfi_offset 5, -12
 4362              		.cfi_offset 6, -8
 4363              		.cfi_offset 14, -4
1609:task/attitude/eMPL/inv_mpu.c ****     int result = 0;
 4364              		.loc 1 1609 5 is_stmt 1 view .LVU1266
1610:task/attitude/eMPL/inv_mpu.c **** 
 4365              		.loc 1 1610 5 view .LVU1267
 4366              	.LVL259:
1613:task/attitude/eMPL/inv_mpu.c **** 
 4367              		.loc 1 1613 5 view .LVU1268
1615:task/attitude/eMPL/inv_mpu.c ****         return 0;
 4368              		.loc 1 1615 5 view .LVU1269
1615:task/attitude/eMPL/inv_mpu.c ****         return 0;
 4369              		.loc 1 1615 20 is_stmt 0 view .LVU1270
 4370 0002 174B     		ldr	r3, .L357
 4371 0004 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
1615:task/attitude/eMPL/inv_mpu.c ****         return 0;
 4372              		.loc 1 1615 8 view .LVU1271
 4373 0008 2BBB     		cbnz	r3, .L352
 4374 000a 00F0FE04 		and	r4, r0, #254
1619:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4375              		.loc 1 1619 9 is_stmt 1 view .LVU1272
1619:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4376              		.loc 1 1619 26 is_stmt 0 view .LVU1273
 4377 000e 144B     		ldr	r3, .L357
 4378 0010 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1619:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4379              		.loc 1 1619 12 view .LVU1274
 4380 0012 13B3     		cbz	r3, .L353
1621:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.fifo_enable = sensors & st.chip_cfg.sensors;
 4381              		.loc 1 1621 9 is_stmt 1 view .LVU1275
1621:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.fifo_enable = sensors & st.chip_cfg.sensors;
 4382              		.loc 1 1621 14 is_stmt 0 view .LVU1276
 4383 0014 124A     		ldr	r2, .L357
 4384 0016 167C     		ldrb	r6, [r2, #16]	@ zero_extendqisi2
 4385              	.LVL260:
1622:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.fifo_enable != sensors)
 4386              		.loc 1 1622 9 is_stmt 1 view .LVU1277
1622:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.fifo_enable != sensors)
 4387              		.loc 1 1622 33 is_stmt 0 view .LVU1278
 4388 0018 2340     		ands	r3, r3, r4
 4389 001a 1374     		strb	r3, [r2, #16]
1623:task/attitude/eMPL/inv_mpu.c ****             /* You're not getting what you asked for. Some sensors are
 4390              		.loc 1 1623 9 is_stmt 1 view .LVU1279
1623:task/attitude/eMPL/inv_mpu.c ****             /* You're not getting what you asked for. Some sensors are
 4391              		.loc 1 1623 12 is_stmt 0 view .LVU1280
 4392 001c A342     		cmp	r3, r4
 4393 001e 0BD0     		beq	.L354
1627:task/attitude/eMPL/inv_mpu.c ****         else
 4394              		.loc 1 1627 20 view .LVU1281
 4395 0020 4FF0FF35 		mov	r5, #-1
 4396              	.L348:
 4397              	.LVL261:
1630:task/attitude/eMPL/inv_mpu.c ****             set_int_enable(1);
 4398              		.loc 1 1630 9 is_stmt 1 view .LVU1282
1630:task/attitude/eMPL/inv_mpu.c ****             set_int_enable(1);
 4399              		.loc 1 1630 12 is_stmt 0 view .LVU1283
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 134


 4400 0024 14B9     		cbnz	r4, .L349
1630:task/attitude/eMPL/inv_mpu.c ****             set_int_enable(1);
 4401              		.loc 1 1630 35 discriminator 1 view .LVU1284
 4402 0026 0E4B     		ldr	r3, .L357
 4403 0028 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
1630:task/attitude/eMPL/inv_mpu.c ****             set_int_enable(1);
 4404              		.loc 1 1630 21 discriminator 1 view .LVU1285
 4405 002a 3BB1     		cbz	r3, .L350
 4406              	.L349:
1631:task/attitude/eMPL/inv_mpu.c ****         else
 4407              		.loc 1 1631 13 is_stmt 1 view .LVU1286
 4408 002c 0120     		movs	r0, #1
 4409              	.LVL262:
1631:task/attitude/eMPL/inv_mpu.c ****         else
 4410              		.loc 1 1631 13 is_stmt 0 view .LVU1287
 4411 002e FFF7FEFF 		bl	set_int_enable
 4412              	.LVL263:
 4413              	.L351:
1634:task/attitude/eMPL/inv_mpu.c ****         {
 4414              		.loc 1 1634 9 is_stmt 1 view .LVU1288
1634:task/attitude/eMPL/inv_mpu.c ****         {
 4415              		.loc 1 1634 12 is_stmt 0 view .LVU1289
 4416 0032 3CB9     		cbnz	r4, .L356
 4417              	.LVL264:
 4418              	.L346:
1645:task/attitude/eMPL/inv_mpu.c **** 
 4419              		.loc 1 1645 1 view .LVU1290
 4420 0034 2846     		mov	r0, r5
 4421 0036 70BD     		pop	{r4, r5, r6, pc}
 4422              	.LVL265:
 4423              	.L354:
1629:task/attitude/eMPL/inv_mpu.c ****         if (sensors || st.chip_cfg.lp_accel_mode)
 4424              		.loc 1 1629 20 view .LVU1291
 4425 0038 0025     		movs	r5, #0
 4426 003a F3E7     		b	.L348
 4427              	.LVL266:
 4428              	.L350:
1633:task/attitude/eMPL/inv_mpu.c ****         if (sensors)
 4429              		.loc 1 1633 13 is_stmt 1 view .LVU1292
 4430 003c 0020     		movs	r0, #0
 4431              	.LVL267:
1633:task/attitude/eMPL/inv_mpu.c ****         if (sensors)
 4432              		.loc 1 1633 13 is_stmt 0 view .LVU1293
 4433 003e FFF7FEFF 		bl	set_int_enable
 4434              	.LVL268:
 4435 0042 F6E7     		b	.L351
 4436              	.L356:
1636:task/attitude/eMPL/inv_mpu.c ****             {
 4437              		.loc 1 1636 13 is_stmt 1 view .LVU1294
1636:task/attitude/eMPL/inv_mpu.c ****             {
 4438              		.loc 1 1636 17 is_stmt 0 view .LVU1295
 4439 0044 FFF7FEFF 		bl	mpu_reset_fifo
 4440              	.LVL269:
1636:task/attitude/eMPL/inv_mpu.c ****             {
 4441              		.loc 1 1636 16 view .LVU1296
 4442 0048 0028     		cmp	r0, #0
 4443 004a F3D0     		beq	.L346
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 135


1638:task/attitude/eMPL/inv_mpu.c ****                 return -1;
 4444              		.loc 1 1638 17 is_stmt 1 view .LVU1297
1638:task/attitude/eMPL/inv_mpu.c ****                 return -1;
 4445              		.loc 1 1638 41 is_stmt 0 view .LVU1298
 4446 004c 044B     		ldr	r3, .L357
 4447 004e 1E74     		strb	r6, [r3, #16]
1639:task/attitude/eMPL/inv_mpu.c ****             }
 4448              		.loc 1 1639 17 is_stmt 1 view .LVU1299
1639:task/attitude/eMPL/inv_mpu.c ****             }
 4449              		.loc 1 1639 24 is_stmt 0 view .LVU1300
 4450 0050 4FF0FF35 		mov	r5, #-1
 4451              	.LVL270:
1639:task/attitude/eMPL/inv_mpu.c ****             }
 4452              		.loc 1 1639 24 view .LVU1301
 4453 0054 EEE7     		b	.L346
 4454              	.LVL271:
 4455              	.L352:
1616:task/attitude/eMPL/inv_mpu.c ****     else
 4456              		.loc 1 1616 16 view .LVU1302
 4457 0056 0025     		movs	r5, #0
 4458 0058 ECE7     		b	.L346
 4459              	.L353:
1620:task/attitude/eMPL/inv_mpu.c ****         prev = st.chip_cfg.fifo_enable;
 4460              		.loc 1 1620 20 view .LVU1303
 4461 005a 4FF0FF35 		mov	r5, #-1
 4462 005e E9E7     		b	.L346
 4463              	.L358:
 4464              		.align	2
 4465              	.L357:
 4466 0060 00000000 		.word	.LANCHOR0
 4467              		.cfi_endproc
 4468              	.LFE176:
 4470              		.section	.text.mpu_get_power_state,"ax",%progbits
 4471              		.align	1
 4472              		.global	mpu_get_power_state
 4473              		.syntax unified
 4474              		.thumb
 4475              		.thumb_func
 4476              		.fpu fpv5-d16
 4478              	mpu_get_power_state:
 4479              	.LVL272:
 4480              	.LFB177:
1653:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.sensors)
 4481              		.loc 1 1653 1 is_stmt 1 view -0
 4482              		.cfi_startproc
 4483              		@ args = 0, pretend = 0, frame = 0
 4484              		@ frame_needed = 0, uses_anonymous_args = 0
 4485              		@ link register save eliminated.
1654:task/attitude/eMPL/inv_mpu.c ****         power_on[0] = 1;
 4486              		.loc 1 1654 5 view .LVU1305
1654:task/attitude/eMPL/inv_mpu.c ****         power_on[0] = 1;
 4487              		.loc 1 1654 20 is_stmt 0 view .LVU1306
 4488 0000 044B     		ldr	r3, .L362
 4489 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1654:task/attitude/eMPL/inv_mpu.c ****         power_on[0] = 1;
 4490              		.loc 1 1654 8 view .LVU1307
 4491 0004 1BB1     		cbz	r3, .L360
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 136


1655:task/attitude/eMPL/inv_mpu.c ****     else
 4492              		.loc 1 1655 9 is_stmt 1 view .LVU1308
1655:task/attitude/eMPL/inv_mpu.c ****     else
 4493              		.loc 1 1655 21 is_stmt 0 view .LVU1309
 4494 0006 0123     		movs	r3, #1
 4495 0008 0370     		strb	r3, [r0]
 4496              	.L361:
1658:task/attitude/eMPL/inv_mpu.c **** }
 4497              		.loc 1 1658 5 is_stmt 1 view .LVU1310
1659:task/attitude/eMPL/inv_mpu.c **** 
 4498              		.loc 1 1659 1 is_stmt 0 view .LVU1311
 4499 000a 0020     		movs	r0, #0
 4500              	.LVL273:
1659:task/attitude/eMPL/inv_mpu.c **** 
 4501              		.loc 1 1659 1 view .LVU1312
 4502 000c 7047     		bx	lr
 4503              	.LVL274:
 4504              	.L360:
1657:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4505              		.loc 1 1657 9 is_stmt 1 view .LVU1313
1657:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4506              		.loc 1 1657 21 is_stmt 0 view .LVU1314
 4507 000e 0023     		movs	r3, #0
 4508 0010 0370     		strb	r3, [r0]
 4509 0012 FAE7     		b	.L361
 4510              	.L363:
 4511              		.align	2
 4512              	.L362:
 4513 0014 00000000 		.word	.LANCHOR0
 4514              		.cfi_endproc
 4515              	.LFE177:
 4517              		.section	.text.mpu_get_int_status,"ax",%progbits
 4518              		.align	1
 4519              		.global	mpu_get_int_status
 4520              		.syntax unified
 4521              		.thumb
 4522              		.thumb_func
 4523              		.fpu fpv5-d16
 4525              	mpu_get_int_status:
 4526              	.LVL275:
 4527              	.LFB179:
1754:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 4528              		.loc 1 1754 1 is_stmt 1 view -0
 4529              		.cfi_startproc
 4530              		@ args = 0, pretend = 0, frame = 8
 4531              		@ frame_needed = 0, uses_anonymous_args = 0
1755:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 4532              		.loc 1 1755 5 view .LVU1316
1756:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4533              		.loc 1 1756 5 view .LVU1317
1756:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4534              		.loc 1 1756 21 is_stmt 0 view .LVU1318
 4535 0000 0F4B     		ldr	r3, .L372
 4536 0002 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1756:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4537              		.loc 1 1756 8 view .LVU1319
 4538 0004 ABB1     		cbz	r3, .L366
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 137


1754:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 4539              		.loc 1 1754 1 view .LVU1320
 4540 0006 10B5     		push	{r4, lr}
 4541              	.LCFI83:
 4542              		.cfi_def_cfa_offset 8
 4543              		.cfi_offset 4, -8
 4544              		.cfi_offset 14, -4
 4545 0008 82B0     		sub	sp, sp, #8
 4546              	.LCFI84:
 4547              		.cfi_def_cfa_offset 16
 4548 000a 0446     		mov	r4, r0
1758:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4549              		.loc 1 1758 5 is_stmt 1 view .LVU1321
1758:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4550              		.loc 1 1758 20 is_stmt 0 view .LVU1322
 4551 000c 0C4B     		ldr	r3, .L372
 4552 000e 5868     		ldr	r0, [r3, #4]
 4553              	.LVL276:
1758:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4554              		.loc 1 1758 33 view .LVU1323
 4555 0010 1968     		ldr	r1, [r3]
1758:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4556              		.loc 1 1758 9 view .LVU1324
 4557 0012 01AB     		add	r3, sp, #4
 4558 0014 0222     		movs	r2, #2
 4559 0016 897C     		ldrb	r1, [r1, #18]	@ zero_extendqisi2
 4560 0018 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4561 001a FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 4562              	.LVL277:
1758:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4563              		.loc 1 1758 8 view .LVU1325
 4564 001e 58B9     		cbnz	r0, .L367
1760:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4565              		.loc 1 1760 5 is_stmt 1 view .LVU1326
1760:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4566              		.loc 1 1760 21 is_stmt 0 view .LVU1327
 4567 0020 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
1760:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4568              		.loc 1 1760 36 view .LVU1328
 4569 0024 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
1760:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4570              		.loc 1 1760 31 view .LVU1329
 4571 0028 43EA0223 		orr	r3, r3, r2, lsl #8
1760:task/attitude/eMPL/inv_mpu.c ****     return 0;
 4572              		.loc 1 1760 15 view .LVU1330
 4573 002c 2380     		strh	r3, [r4]	@ movhi
1761:task/attitude/eMPL/inv_mpu.c **** }
 4574              		.loc 1 1761 5 is_stmt 1 view .LVU1331
 4575              	.L364:
1762:task/attitude/eMPL/inv_mpu.c **** 
 4576              		.loc 1 1762 1 is_stmt 0 view .LVU1332
 4577 002e 02B0     		add	sp, sp, #8
 4578              	.LCFI85:
 4579              		.cfi_def_cfa_offset 8
 4580              		@ sp needed
 4581 0030 10BD     		pop	{r4, pc}
 4582              	.LVL278:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 138


 4583              	.L366:
 4584              	.LCFI86:
 4585              		.cfi_def_cfa_offset 0
 4586              		.cfi_restore 4
 4587              		.cfi_restore 14
1757:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->dmp_int_status, 2, tmp))
 4588              		.loc 1 1757 16 view .LVU1333
 4589 0032 4FF0FF30 		mov	r0, #-1
 4590              	.LVL279:
1762:task/attitude/eMPL/inv_mpu.c **** 
 4591              		.loc 1 1762 1 view .LVU1334
 4592 0036 7047     		bx	lr
 4593              	.LVL280:
 4594              	.L367:
 4595              	.LCFI87:
 4596              		.cfi_def_cfa_offset 16
 4597              		.cfi_offset 4, -8
 4598              		.cfi_offset 14, -4
1759:task/attitude/eMPL/inv_mpu.c ****     status[0] = (tmp[0] << 8) | tmp[1];
 4599              		.loc 1 1759 16 view .LVU1335
 4600 0038 4FF0FF30 		mov	r0, #-1
 4601 003c F7E7     		b	.L364
 4602              	.L373:
 4603 003e 00BF     		.align	2
 4604              	.L372:
 4605 0040 00000000 		.word	.LANCHOR0
 4606              		.cfi_endproc
 4607              	.LFE179:
 4609              		.section	.text.mpu_read_fifo,"ax",%progbits
 4610              		.align	1
 4611              		.global	mpu_read_fifo
 4612              		.syntax unified
 4613              		.thumb
 4614              		.thumb_func
 4615              		.fpu fpv5-d16
 4617              	mpu_read_fifo:
 4618              	.LVL281:
 4619              	.LFB180:
1784:task/attitude/eMPL/inv_mpu.c ****     /* Assumes maximum packet size is gyro (6) + accel (6). */
 4620              		.loc 1 1784 1 is_stmt 1 view -0
 4621              		.cfi_startproc
 4622              		@ args = 4, pretend = 0, frame = 16
 4623              		@ frame_needed = 0, uses_anonymous_args = 0
1784:task/attitude/eMPL/inv_mpu.c ****     /* Assumes maximum packet size is gyro (6) + accel (6). */
 4624              		.loc 1 1784 1 is_stmt 0 view .LVU1337
 4625 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4626              	.LCFI88:
 4627              		.cfi_def_cfa_offset 32
 4628              		.cfi_offset 4, -32
 4629              		.cfi_offset 5, -28
 4630              		.cfi_offset 6, -24
 4631              		.cfi_offset 7, -20
 4632              		.cfi_offset 8, -16
 4633              		.cfi_offset 9, -12
 4634              		.cfi_offset 10, -8
 4635              		.cfi_offset 14, -4
 4636 0004 84B0     		sub	sp, sp, #16
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 139


 4637              	.LCFI89:
 4638              		.cfi_def_cfa_offset 48
 4639 0006 1E46     		mov	r6, r3
1786:task/attitude/eMPL/inv_mpu.c ****     unsigned char packet_size = 0;
 4640              		.loc 1 1786 5 is_stmt 1 view .LVU1338
1787:task/attitude/eMPL/inv_mpu.c ****     unsigned short fifo_count, index = 0;
 4641              		.loc 1 1787 5 view .LVU1339
 4642              	.LVL282:
1788:task/attitude/eMPL/inv_mpu.c **** 
 4643              		.loc 1 1788 5 view .LVU1340
1790:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4644              		.loc 1 1790 5 view .LVU1341
1790:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4645              		.loc 1 1790 20 is_stmt 0 view .LVU1342
 4646 0008 7A4B     		ldr	r3, .L395
 4647              	.LVL283:
1790:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4648              		.loc 1 1790 20 view .LVU1343
 4649 000a 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
1790:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4650              		.loc 1 1790 8 view .LVU1344
 4651 000e 002B     		cmp	r3, #0
 4652 0010 40F0DE80 		bne	.L384
 4653 0014 8046     		mov	r8, r0
 4654 0016 8946     		mov	r9, r1
 4655 0018 9246     		mov	r10, r2
1793:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 4656              		.loc 1 1793 5 is_stmt 1 view .LVU1345
1793:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 4657              		.loc 1 1793 16 is_stmt 0 view .LVU1346
 4658 001a 3370     		strb	r3, [r6]
1794:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4659              		.loc 1 1794 5 is_stmt 1 view .LVU1347
1794:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4660              		.loc 1 1794 21 is_stmt 0 view .LVU1348
 4661 001c 754B     		ldr	r3, .L395
 4662 001e 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1794:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4663              		.loc 1 1794 8 view .LVU1349
 4664 0020 002B     		cmp	r3, #0
 4665 0022 00F0D880 		beq	.L385
1796:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4666              		.loc 1 1796 5 is_stmt 1 view .LVU1350
1796:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4667              		.loc 1 1796 21 is_stmt 0 view .LVU1351
 4668 0026 734B     		ldr	r3, .L395
 4669 0028 1D7C     		ldrb	r5, [r3, #16]	@ zero_extendqisi2
1796:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4670              		.loc 1 1796 8 view .LVU1352
 4671 002a 002D     		cmp	r5, #0
 4672 002c 00F0D680 		beq	.L386
1799:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
 4673              		.loc 1 1799 5 is_stmt 1 view .LVU1353
1799:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
 4674              		.loc 1 1799 8 is_stmt 0 view .LVU1354
 4675 0030 15F04004 		ands	r4, r5, #64
 4676 0034 00D0     		beq	.L376
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 140


1800:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_Y_GYRO)
 4677              		.loc 1 1800 21 view .LVU1355
 4678 0036 0224     		movs	r4, #2
 4679              	.L376:
 4680              	.LVL284:
1801:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
 4681              		.loc 1 1801 5 is_stmt 1 view .LVU1356
1801:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
 4682              		.loc 1 1801 8 is_stmt 0 view .LVU1357
 4683 0038 15F0200F 		tst	r5, #32
 4684 003c 01D0     		beq	.L377
1802:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_Z_GYRO)
 4685              		.loc 1 1802 9 is_stmt 1 view .LVU1358
1802:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_Z_GYRO)
 4686              		.loc 1 1802 21 is_stmt 0 view .LVU1359
 4687 003e 0234     		adds	r4, r4, #2
 4688              	.LVL285:
1802:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_Z_GYRO)
 4689              		.loc 1 1802 21 view .LVU1360
 4690 0040 E4B2     		uxtb	r4, r4
 4691              	.LVL286:
 4692              	.L377:
1803:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
 4693              		.loc 1 1803 5 is_stmt 1 view .LVU1361
1803:task/attitude/eMPL/inv_mpu.c ****         packet_size += 2;
 4694              		.loc 1 1803 8 is_stmt 0 view .LVU1362
 4695 0042 15F0100F 		tst	r5, #16
 4696 0046 01D0     		beq	.L378
1804:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
 4697              		.loc 1 1804 9 is_stmt 1 view .LVU1363
1804:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
 4698              		.loc 1 1804 21 is_stmt 0 view .LVU1364
 4699 0048 0234     		adds	r4, r4, #2
 4700              	.LVL287:
1804:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.fifo_enable & INV_XYZ_ACCEL)
 4701              		.loc 1 1804 21 view .LVU1365
 4702 004a E4B2     		uxtb	r4, r4
 4703              	.LVL288:
 4704              	.L378:
1805:task/attitude/eMPL/inv_mpu.c ****         packet_size += 6;
 4705              		.loc 1 1805 5 is_stmt 1 view .LVU1366
1805:task/attitude/eMPL/inv_mpu.c ****         packet_size += 6;
 4706              		.loc 1 1805 8 is_stmt 0 view .LVU1367
 4707 004c 15F0080F 		tst	r5, #8
 4708 0050 01D0     		beq	.L379
1806:task/attitude/eMPL/inv_mpu.c **** 
 4709              		.loc 1 1806 9 is_stmt 1 view .LVU1368
1806:task/attitude/eMPL/inv_mpu.c **** 
 4710              		.loc 1 1806 21 is_stmt 0 view .LVU1369
 4711 0052 0634     		adds	r4, r4, #6
 4712              	.LVL289:
1806:task/attitude/eMPL/inv_mpu.c **** 
 4713              		.loc 1 1806 21 view .LVU1370
 4714 0054 E4B2     		uxtb	r4, r4
 4715              	.LVL290:
 4716              	.L379:
1808:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 141


 4717              		.loc 1 1808 5 is_stmt 1 view .LVU1371
1808:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4718              		.loc 1 1808 20 is_stmt 0 view .LVU1372
 4719 0056 674B     		ldr	r3, .L395
 4720 0058 5868     		ldr	r0, [r3, #4]
 4721              	.LVL291:
1808:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4722              		.loc 1 1808 33 view .LVU1373
 4723 005a 1968     		ldr	r1, [r3]
 4724              	.LVL292:
1808:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4725              		.loc 1 1808 9 view .LVU1374
 4726 005c 01AB     		add	r3, sp, #4
 4727 005e 0222     		movs	r2, #2
 4728              	.LVL293:
1808:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4729              		.loc 1 1808 9 view .LVU1375
 4730 0060 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
 4731 0062 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4732 0064 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 4733              	.LVL294:
1808:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4734              		.loc 1 1808 8 view .LVU1376
 4735 0068 0028     		cmp	r0, #0
 4736 006a 40F0BA80 		bne	.L388
1810:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < packet_size)
 4737              		.loc 1 1810 5 is_stmt 1 view .LVU1377
1810:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < packet_size)
 4738              		.loc 1 1810 23 is_stmt 0 view .LVU1378
 4739 006e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
1810:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < packet_size)
 4740              		.loc 1 1810 39 view .LVU1379
 4741 0072 9DF80550 		ldrb	r5, [sp, #5]	@ zero_extendqisi2
1810:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < packet_size)
 4742              		.loc 1 1810 16 view .LVU1380
 4743 0076 45EA0325 		orr	r5, r5, r3, lsl #8
 4744              	.LVL295:
1811:task/attitude/eMPL/inv_mpu.c ****         return 0;
 4745              		.loc 1 1811 5 is_stmt 1 view .LVU1381
1811:task/attitude/eMPL/inv_mpu.c ****         return 0;
 4746              		.loc 1 1811 20 is_stmt 0 view .LVU1382
 4747 007a A7B2     		uxth	r7, r4
1811:task/attitude/eMPL/inv_mpu.c ****         return 0;
 4748              		.loc 1 1811 8 view .LVU1383
 4749 007c AF42     		cmp	r7, r5
 4750 007e 00F2A280 		bhi	.L374
1814:task/attitude/eMPL/inv_mpu.c ****     {
 4751              		.loc 1 1814 5 is_stmt 1 view .LVU1384
1814:task/attitude/eMPL/inv_mpu.c ****     {
 4752              		.loc 1 1814 25 is_stmt 0 view .LVU1385
 4753 0082 5C4B     		ldr	r3, .L395
 4754 0084 5868     		ldr	r0, [r3, #4]
1814:task/attitude/eMPL/inv_mpu.c ****     {
 4755              		.loc 1 1814 28 view .LVU1386
 4756 0086 4388     		ldrh	r3, [r0, #2]
1814:task/attitude/eMPL/inv_mpu.c ****     {
 4757              		.loc 1 1814 8 view .LVU1387
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 142


 4758 0088 B5EB530F 		cmp	r5, r3, lsr #1
 4759 008c 0FD9     		bls	.L380
1817:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4760              		.loc 1 1817 9 is_stmt 1 view .LVU1388
1817:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4761              		.loc 1 1817 37 is_stmt 0 view .LVU1389
 4762 008e 594B     		ldr	r3, .L395
 4763 0090 1968     		ldr	r1, [r3]
1817:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4764              		.loc 1 1817 13 view .LVU1390
 4765 0092 01AB     		add	r3, sp, #4
 4766 0094 0122     		movs	r2, #1
 4767 0096 C97C     		ldrb	r1, [r1, #19]	@ zero_extendqisi2
 4768 0098 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4769 009a FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 4770              	.LVL296:
1817:task/attitude/eMPL/inv_mpu.c ****             return -1;
 4771              		.loc 1 1817 12 view .LVU1391
 4772 009e 0028     		cmp	r0, #0
 4773 00a0 40F0A280 		bne	.L389
1819:task/attitude/eMPL/inv_mpu.c ****         {
 4774              		.loc 1 1819 9 is_stmt 1 view .LVU1392
1819:task/attitude/eMPL/inv_mpu.c ****         {
 4775              		.loc 1 1819 17 is_stmt 0 view .LVU1393
 4776 00a4 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
1819:task/attitude/eMPL/inv_mpu.c ****         {
 4777              		.loc 1 1819 12 view .LVU1394
 4778 00a8 13F0100F 		tst	r3, #16
 4779 00ac 39D1     		bne	.L394
 4780              	.L380:
1825:task/attitude/eMPL/inv_mpu.c **** 
 4781              		.loc 1 1825 5 is_stmt 1 view .LVU1395
 4782 00ae 5046     		mov	r0, r10
 4783 00b0 FFF7FEFF 		bl	get_tick_count
 4784              	.LVL297:
1827:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4785              		.loc 1 1827 5 view .LVU1396
1827:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4786              		.loc 1 1827 20 is_stmt 0 view .LVU1397
 4787 00b4 4F4B     		ldr	r3, .L395
 4788 00b6 5868     		ldr	r0, [r3, #4]
1827:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4789              		.loc 1 1827 33 view .LVU1398
 4790 00b8 1968     		ldr	r1, [r3]
1827:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4791              		.loc 1 1827 9 view .LVU1399
 4792 00ba 01AB     		add	r3, sp, #4
 4793 00bc 3A46     		mov	r2, r7
 4794 00be 497B     		ldrb	r1, [r1, #13]	@ zero_extendqisi2
 4795 00c0 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4796 00c2 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 4797              	.LVL298:
1827:task/attitude/eMPL/inv_mpu.c ****         return -1;
 4798              		.loc 1 1827 8 view .LVU1400
 4799 00c6 0028     		cmp	r0, #0
 4800 00c8 40F09180 		bne	.L390
1829:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = 0;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 143


 4801              		.loc 1 1829 5 is_stmt 1 view .LVU1401
1829:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = 0;
 4802              		.loc 1 1829 26 is_stmt 0 view .LVU1402
 4803 00cc 95FBF4F5 		sdiv	r5, r5, r4
 4804              	.LVL299:
1829:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = 0;
 4805              		.loc 1 1829 40 view .LVU1403
 4806 00d0 013D     		subs	r5, r5, #1
1829:task/attitude/eMPL/inv_mpu.c ****     sensors[0] = 0;
 4807              		.loc 1 1829 13 view .LVU1404
 4808 00d2 0C9B     		ldr	r3, [sp, #48]
 4809 00d4 1D70     		strb	r5, [r3]
1830:task/attitude/eMPL/inv_mpu.c **** 
 4810              		.loc 1 1830 5 is_stmt 1 view .LVU1405
1830:task/attitude/eMPL/inv_mpu.c **** 
 4811              		.loc 1 1830 16 is_stmt 0 view .LVU1406
 4812 00d6 0023     		movs	r3, #0
 4813 00d8 3370     		strb	r3, [r6]
1832:task/attitude/eMPL/inv_mpu.c ****     {
 4814              		.loc 1 1832 5 is_stmt 1 view .LVU1407
1832:task/attitude/eMPL/inv_mpu.c ****     {
 4815              		.loc 1 1832 8 is_stmt 0 view .LVU1408
 4816 00da 3CB3     		cbz	r4, .L391
1832:task/attitude/eMPL/inv_mpu.c ****     {
 4817              		.loc 1 1832 46 discriminator 1 view .LVU1409
 4818 00dc 454B     		ldr	r3, .L395
 4819 00de 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
1832:task/attitude/eMPL/inv_mpu.c ****     {
 4820              		.loc 1 1832 32 discriminator 1 view .LVU1410
 4821 00e0 13F0080F 		tst	r3, #8
 4822 00e4 72D0     		beq	.L392
1834:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (data[index + 2] << 8) | data[index + 3];
 4823              		.loc 1 1834 9 is_stmt 1 view .LVU1411
1834:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (data[index + 2] << 8) | data[index + 3];
 4824              		.loc 1 1834 25 is_stmt 0 view .LVU1412
 4825 00e6 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
1834:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (data[index + 2] << 8) | data[index + 3];
 4826              		.loc 1 1834 49 view .LVU1413
 4827 00ea 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
1834:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (data[index + 2] << 8) | data[index + 3];
 4828              		.loc 1 1834 43 view .LVU1414
 4829 00ee 43EA0223 		orr	r3, r3, r2, lsl #8
1834:task/attitude/eMPL/inv_mpu.c ****         accel[1] = (data[index + 2] << 8) | data[index + 3];
 4830              		.loc 1 1834 18 view .LVU1415
 4831 00f2 A9F80030 		strh	r3, [r9]	@ movhi
1835:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (data[index + 4] << 8) | data[index + 5];
 4832              		.loc 1 1835 9 is_stmt 1 view .LVU1416
1835:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (data[index + 4] << 8) | data[index + 5];
 4833              		.loc 1 1835 25 is_stmt 0 view .LVU1417
 4834 00f6 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
1835:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (data[index + 4] << 8) | data[index + 5];
 4835              		.loc 1 1835 49 view .LVU1418
 4836 00fa 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
1835:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (data[index + 4] << 8) | data[index + 5];
 4837              		.loc 1 1835 43 view .LVU1419
 4838 00fe 43EA0223 		orr	r3, r3, r2, lsl #8
1835:task/attitude/eMPL/inv_mpu.c ****         accel[2] = (data[index + 4] << 8) | data[index + 5];
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 144


 4839              		.loc 1 1835 18 view .LVU1420
 4840 0102 A9F80230 		strh	r3, [r9, #2]	@ movhi
1836:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_XYZ_ACCEL;
 4841              		.loc 1 1836 9 is_stmt 1 view .LVU1421
1836:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_XYZ_ACCEL;
 4842              		.loc 1 1836 25 is_stmt 0 view .LVU1422
 4843 0106 9DF80820 		ldrb	r2, [sp, #8]	@ zero_extendqisi2
1836:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_XYZ_ACCEL;
 4844              		.loc 1 1836 49 view .LVU1423
 4845 010a 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
1836:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_XYZ_ACCEL;
 4846              		.loc 1 1836 43 view .LVU1424
 4847 010e 43EA0223 		orr	r3, r3, r2, lsl #8
1836:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_XYZ_ACCEL;
 4848              		.loc 1 1836 18 view .LVU1425
 4849 0112 A9F80430 		strh	r3, [r9, #4]	@ movhi
1837:task/attitude/eMPL/inv_mpu.c ****         index += 6;
 4850              		.loc 1 1837 9 is_stmt 1 view .LVU1426
1837:task/attitude/eMPL/inv_mpu.c ****         index += 6;
 4851              		.loc 1 1837 20 is_stmt 0 view .LVU1427
 4852 0116 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 4853 0118 43F00803 		orr	r3, r3, #8
 4854 011c 3370     		strb	r3, [r6]
1838:task/attitude/eMPL/inv_mpu.c ****     }
 4855              		.loc 1 1838 9 is_stmt 1 view .LVU1428
 4856              	.LVL300:
1838:task/attitude/eMPL/inv_mpu.c ****     }
 4857              		.loc 1 1838 15 is_stmt 0 view .LVU1429
 4858 011e 0622     		movs	r2, #6
 4859 0120 05E0     		b	.L381
 4860              	.LVL301:
 4861              	.L394:
1821:task/attitude/eMPL/inv_mpu.c ****             return -2;
 4862              		.loc 1 1821 13 is_stmt 1 view .LVU1430
 4863 0122 FFF7FEFF 		bl	mpu_reset_fifo
 4864              	.LVL302:
1822:task/attitude/eMPL/inv_mpu.c ****         }
 4865              		.loc 1 1822 13 view .LVU1431
1822:task/attitude/eMPL/inv_mpu.c ****         }
 4866              		.loc 1 1822 20 is_stmt 0 view .LVU1432
 4867 0126 6FF00100 		mvn	r0, #1
 4868 012a 4CE0     		b	.L374
 4869              	.LVL303:
 4870              	.L391:
1788:task/attitude/eMPL/inv_mpu.c **** 
 4871              		.loc 1 1788 32 view .LVU1433
 4872 012c 0022     		movs	r2, #0
 4873              	.LVL304:
 4874              	.L381:
1840:task/attitude/eMPL/inv_mpu.c ****     {
 4875              		.loc 1 1840 5 is_stmt 1 view .LVU1434
1840:task/attitude/eMPL/inv_mpu.c ****     {
 4876              		.loc 1 1840 8 is_stmt 0 view .LVU1435
 4877 012e 9742     		cmp	r7, r2
 4878 0130 17D0     		beq	.L382
1840:task/attitude/eMPL/inv_mpu.c ****     {
 4879              		.loc 1 1840 46 discriminator 1 view .LVU1436
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 145


 4880 0132 304B     		ldr	r3, .L395
 4881 0134 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
1840:task/attitude/eMPL/inv_mpu.c ****     {
 4882              		.loc 1 1840 32 discriminator 1 view .LVU1437
 4883 0136 13F0400F 		tst	r3, #64
 4884 013a 12D0     		beq	.L382
1842:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
 4885              		.loc 1 1842 9 is_stmt 1 view .LVU1438
1842:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
 4886              		.loc 1 1842 24 is_stmt 0 view .LVU1439
 4887 013c 04AB     		add	r3, sp, #16
 4888 013e 1344     		add	r3, r3, r2
 4889 0140 13F80C4C 		ldrb	r4, [r3, #-12]	@ zero_extendqisi2
 4890              	.LVL305:
1842:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
 4891              		.loc 1 1842 55 view .LVU1440
 4892 0144 511C     		adds	r1, r2, #1
1842:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
 4893              		.loc 1 1842 48 view .LVU1441
 4894 0146 04AB     		add	r3, sp, #16
 4895 0148 1944     		add	r1, r1, r3
 4896 014a 11F80C3C 		ldrb	r3, [r1, #-12]	@ zero_extendqisi2
1842:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
 4897              		.loc 1 1842 42 view .LVU1442
 4898 014e 43EA0423 		orr	r3, r3, r4, lsl #8
1842:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_X_GYRO;
 4899              		.loc 1 1842 17 view .LVU1443
 4900 0152 A8F80030 		strh	r3, [r8]	@ movhi
1843:task/attitude/eMPL/inv_mpu.c ****         index += 2;
 4901              		.loc 1 1843 9 is_stmt 1 view .LVU1444
1843:task/attitude/eMPL/inv_mpu.c ****         index += 2;
 4902              		.loc 1 1843 20 is_stmt 0 view .LVU1445
 4903 0156 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 4904 0158 43F04003 		orr	r3, r3, #64
 4905 015c 3370     		strb	r3, [r6]
1844:task/attitude/eMPL/inv_mpu.c ****     }
 4906              		.loc 1 1844 9 is_stmt 1 view .LVU1446
1844:task/attitude/eMPL/inv_mpu.c ****     }
 4907              		.loc 1 1844 15 is_stmt 0 view .LVU1447
 4908 015e 0232     		adds	r2, r2, #2
 4909              	.LVL306:
1844:task/attitude/eMPL/inv_mpu.c ****     }
 4910              		.loc 1 1844 15 view .LVU1448
 4911 0160 92B2     		uxth	r2, r2
 4912              	.LVL307:
 4913              	.L382:
1846:task/attitude/eMPL/inv_mpu.c ****     {
 4914              		.loc 1 1846 5 is_stmt 1 view .LVU1449
1846:task/attitude/eMPL/inv_mpu.c ****     {
 4915              		.loc 1 1846 8 is_stmt 0 view .LVU1450
 4916 0162 9742     		cmp	r7, r2
 4917 0164 17D0     		beq	.L383
1846:task/attitude/eMPL/inv_mpu.c ****     {
 4918              		.loc 1 1846 46 discriminator 1 view .LVU1451
 4919 0166 234B     		ldr	r3, .L395
 4920 0168 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
1846:task/attitude/eMPL/inv_mpu.c ****     {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 146


 4921              		.loc 1 1846 32 discriminator 1 view .LVU1452
 4922 016a 13F0200F 		tst	r3, #32
 4923 016e 12D0     		beq	.L383
1848:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
 4924              		.loc 1 1848 9 is_stmt 1 view .LVU1453
1848:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
 4925              		.loc 1 1848 24 is_stmt 0 view .LVU1454
 4926 0170 04AB     		add	r3, sp, #16
 4927 0172 1344     		add	r3, r3, r2
 4928 0174 13F80C4C 		ldrb	r4, [r3, #-12]	@ zero_extendqisi2
1848:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
 4929              		.loc 1 1848 55 view .LVU1455
 4930 0178 511C     		adds	r1, r2, #1
1848:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
 4931              		.loc 1 1848 48 view .LVU1456
 4932 017a 04AB     		add	r3, sp, #16
 4933 017c 1944     		add	r1, r1, r3
 4934 017e 11F80C3C 		ldrb	r3, [r1, #-12]	@ zero_extendqisi2
1848:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
 4935              		.loc 1 1848 42 view .LVU1457
 4936 0182 43EA0423 		orr	r3, r3, r4, lsl #8
1848:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Y_GYRO;
 4937              		.loc 1 1848 17 view .LVU1458
 4938 0186 A8F80230 		strh	r3, [r8, #2]	@ movhi
1849:task/attitude/eMPL/inv_mpu.c ****         index += 2;
 4939              		.loc 1 1849 9 is_stmt 1 view .LVU1459
1849:task/attitude/eMPL/inv_mpu.c ****         index += 2;
 4940              		.loc 1 1849 20 is_stmt 0 view .LVU1460
 4941 018a 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 4942 018c 43F02003 		orr	r3, r3, #32
 4943 0190 3370     		strb	r3, [r6]
1850:task/attitude/eMPL/inv_mpu.c ****     }
 4944              		.loc 1 1850 9 is_stmt 1 view .LVU1461
1850:task/attitude/eMPL/inv_mpu.c ****     }
 4945              		.loc 1 1850 15 is_stmt 0 view .LVU1462
 4946 0192 0232     		adds	r2, r2, #2
 4947              	.LVL308:
1850:task/attitude/eMPL/inv_mpu.c ****     }
 4948              		.loc 1 1850 15 view .LVU1463
 4949 0194 92B2     		uxth	r2, r2
 4950              	.LVL309:
 4951              	.L383:
1852:task/attitude/eMPL/inv_mpu.c ****     {
 4952              		.loc 1 1852 5 is_stmt 1 view .LVU1464
1852:task/attitude/eMPL/inv_mpu.c ****     {
 4953              		.loc 1 1852 8 is_stmt 0 view .LVU1465
 4954 0196 9742     		cmp	r7, r2
 4955 0198 15D0     		beq	.L374
1852:task/attitude/eMPL/inv_mpu.c ****     {
 4956              		.loc 1 1852 46 discriminator 1 view .LVU1466
 4957 019a 164B     		ldr	r3, .L395
 4958 019c 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
1852:task/attitude/eMPL/inv_mpu.c ****     {
 4959              		.loc 1 1852 32 discriminator 1 view .LVU1467
 4960 019e 13F0100F 		tst	r3, #16
 4961 01a2 10D0     		beq	.L374
1854:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 147


 4962              		.loc 1 1854 9 is_stmt 1 view .LVU1468
1854:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
 4963              		.loc 1 1854 24 is_stmt 0 view .LVU1469
 4964 01a4 04AB     		add	r3, sp, #16
 4965 01a6 1344     		add	r3, r3, r2
 4966 01a8 13F80C1C 		ldrb	r1, [r3, #-12]	@ zero_extendqisi2
1854:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
 4967              		.loc 1 1854 55 view .LVU1470
 4968 01ac 0132     		adds	r2, r2, #1
1854:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
 4969              		.loc 1 1854 48 view .LVU1471
 4970 01ae 04AB     		add	r3, sp, #16
 4971 01b0 1A44     		add	r2, r2, r3
 4972 01b2 12F80C3C 		ldrb	r3, [r2, #-12]	@ zero_extendqisi2
1854:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
 4973              		.loc 1 1854 42 view .LVU1472
 4974 01b6 43EA0123 		orr	r3, r3, r1, lsl #8
1854:task/attitude/eMPL/inv_mpu.c ****         sensors[0] |= INV_Z_GYRO;
 4975              		.loc 1 1854 17 view .LVU1473
 4976 01ba A8F80430 		strh	r3, [r8, #4]	@ movhi
1855:task/attitude/eMPL/inv_mpu.c ****         index += 2;
 4977              		.loc 1 1855 9 is_stmt 1 view .LVU1474
1855:task/attitude/eMPL/inv_mpu.c ****         index += 2;
 4978              		.loc 1 1855 20 is_stmt 0 view .LVU1475
 4979 01be 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 4980 01c0 43F01003 		orr	r3, r3, #16
 4981 01c4 3370     		strb	r3, [r6]
1856:task/attitude/eMPL/inv_mpu.c ****     }
 4982              		.loc 1 1856 9 is_stmt 1 view .LVU1476
 4983              	.LVL310:
 4984              	.L374:
1860:task/attitude/eMPL/inv_mpu.c **** 
 4985              		.loc 1 1860 1 is_stmt 0 view .LVU1477
 4986 01c6 04B0     		add	sp, sp, #16
 4987              	.LCFI90:
 4988              		.cfi_remember_state
 4989              		.cfi_def_cfa_offset 32
 4990              		@ sp needed
 4991 01c8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4992              	.LVL311:
 4993              	.L392:
 4994              	.LCFI91:
 4995              		.cfi_restore_state
1788:task/attitude/eMPL/inv_mpu.c **** 
 4996              		.loc 1 1788 32 view .LVU1478
 4997 01cc 0022     		movs	r2, #0
 4998 01ce AEE7     		b	.L381
 4999              	.LVL312:
 5000              	.L384:
1791:task/attitude/eMPL/inv_mpu.c **** 
 5001              		.loc 1 1791 16 view .LVU1479
 5002 01d0 4FF0FF30 		mov	r0, #-1
 5003              	.LVL313:
1791:task/attitude/eMPL/inv_mpu.c **** 
 5004              		.loc 1 1791 16 view .LVU1480
 5005 01d4 F7E7     		b	.L374
 5006              	.LVL314:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 148


 5007              	.L385:
1795:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.fifo_enable)
 5008              		.loc 1 1795 16 view .LVU1481
 5009 01d6 4FF0FF30 		mov	r0, #-1
 5010              	.LVL315:
1795:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.fifo_enable)
 5011              		.loc 1 1795 16 view .LVU1482
 5012 01da F4E7     		b	.L374
 5013              	.LVL316:
 5014              	.L386:
1797:task/attitude/eMPL/inv_mpu.c **** 
 5015              		.loc 1 1797 16 view .LVU1483
 5016 01dc 4FF0FF30 		mov	r0, #-1
 5017              	.LVL317:
1797:task/attitude/eMPL/inv_mpu.c **** 
 5018              		.loc 1 1797 16 view .LVU1484
 5019 01e0 F1E7     		b	.L374
 5020              	.LVL318:
 5021              	.L388:
1809:task/attitude/eMPL/inv_mpu.c ****     fifo_count = (data[0] << 8) | data[1];
 5022              		.loc 1 1809 16 view .LVU1485
 5023 01e2 4FF0FF30 		mov	r0, #-1
 5024 01e6 EEE7     		b	.L374
 5025              	.LVL319:
 5026              	.L389:
1818:task/attitude/eMPL/inv_mpu.c ****         if (data[0] & BIT_FIFO_OVERFLOW)
 5027              		.loc 1 1818 20 view .LVU1486
 5028 01e8 4FF0FF30 		mov	r0, #-1
 5029 01ec EBE7     		b	.L374
 5030              	.L390:
1828:task/attitude/eMPL/inv_mpu.c ****     more[0] = fifo_count / packet_size - 1;
 5031              		.loc 1 1828 16 view .LVU1487
 5032 01ee 4FF0FF30 		mov	r0, #-1
 5033 01f2 E8E7     		b	.L374
 5034              	.L396:
 5035              		.align	2
 5036              	.L395:
 5037 01f4 00000000 		.word	.LANCHOR0
 5038              		.cfi_endproc
 5039              	.LFE180:
 5041              		.section	.text.mpu_read_fifo_stream,"ax",%progbits
 5042              		.align	1
 5043              		.global	mpu_read_fifo_stream
 5044              		.syntax unified
 5045              		.thumb
 5046              		.thumb_func
 5047              		.fpu fpv5-d16
 5049              	mpu_read_fifo_stream:
 5050              	.LVL320:
 5051              	.LFB181:
1871:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 5052              		.loc 1 1871 1 is_stmt 1 view -0
 5053              		.cfi_startproc
 5054              		@ args = 0, pretend = 0, frame = 8
 5055              		@ frame_needed = 0, uses_anonymous_args = 0
1872:task/attitude/eMPL/inv_mpu.c ****     unsigned short fifo_count;
 5056              		.loc 1 1872 5 view .LVU1489
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 149


1873:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.dmp_on)
 5057              		.loc 1 1873 5 view .LVU1490
1874:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5058              		.loc 1 1874 5 view .LVU1491
1874:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5059              		.loc 1 1874 21 is_stmt 0 view .LVU1492
 5060 0000 2E4B     		ldr	r3, .L412
 5061 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
1874:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5062              		.loc 1 1874 8 view .LVU1493
 5063 0006 002B     		cmp	r3, #0
 5064 0008 49D0     		beq	.L401
1871:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 5065              		.loc 1 1871 1 view .LVU1494
 5066 000a F0B5     		push	{r4, r5, r6, r7, lr}
 5067              	.LCFI92:
 5068              		.cfi_def_cfa_offset 20
 5069              		.cfi_offset 4, -20
 5070              		.cfi_offset 5, -16
 5071              		.cfi_offset 6, -12
 5072              		.cfi_offset 7, -8
 5073              		.cfi_offset 14, -4
 5074 000c 83B0     		sub	sp, sp, #12
 5075              	.LCFI93:
 5076              		.cfi_def_cfa_offset 32
 5077 000e 0546     		mov	r5, r0
 5078 0010 0F46     		mov	r7, r1
 5079 0012 1646     		mov	r6, r2
1876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5080              		.loc 1 1876 5 is_stmt 1 view .LVU1495
1876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5081              		.loc 1 1876 21 is_stmt 0 view .LVU1496
 5082 0014 294B     		ldr	r3, .L412
 5083 0016 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5084              		.loc 1 1876 8 view .LVU1497
 5085 0018 002B     		cmp	r3, #0
 5086 001a 43D0     		beq	.L402
1879:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5087              		.loc 1 1879 5 is_stmt 1 view .LVU1498
1879:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5088              		.loc 1 1879 20 is_stmt 0 view .LVU1499
 5089 001c 274B     		ldr	r3, .L412
 5090 001e 5868     		ldr	r0, [r3, #4]
 5091              	.LVL321:
1879:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5092              		.loc 1 1879 33 view .LVU1500
 5093 0020 1968     		ldr	r1, [r3]
 5094              	.LVL322:
1879:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5095              		.loc 1 1879 9 view .LVU1501
 5096 0022 01AB     		add	r3, sp, #4
 5097 0024 0222     		movs	r2, #2
 5098              	.LVL323:
1879:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5099              		.loc 1 1879 9 view .LVU1502
 5100 0026 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 150


 5101 0028 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5102 002a FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 5103              	.LVL324:
1879:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5104              		.loc 1 1879 8 view .LVU1503
 5105 002e 0028     		cmp	r0, #0
 5106 0030 3BD1     		bne	.L403
1881:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < length)
 5107              		.loc 1 1881 5 is_stmt 1 view .LVU1504
1881:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < length)
 5108              		.loc 1 1881 22 is_stmt 0 view .LVU1505
 5109 0032 9DF80400 		ldrb	r0, [sp, #4]	@ zero_extendqisi2
1881:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < length)
 5110              		.loc 1 1881 37 view .LVU1506
 5111 0036 9DF80540 		ldrb	r4, [sp, #5]	@ zero_extendqisi2
1881:task/attitude/eMPL/inv_mpu.c ****     if (fifo_count < length)
 5112              		.loc 1 1881 16 view .LVU1507
 5113 003a 44EA0024 		orr	r4, r4, r0, lsl #8
 5114              	.LVL325:
1882:task/attitude/eMPL/inv_mpu.c ****     {
 5115              		.loc 1 1882 5 is_stmt 1 view .LVU1508
1882:task/attitude/eMPL/inv_mpu.c ****     {
 5116              		.loc 1 1882 8 is_stmt 0 view .LVU1509
 5117 003e AC42     		cmp	r4, r5
 5118 0040 23D3     		bcc	.L410
1887:task/attitude/eMPL/inv_mpu.c ****     {
 5119              		.loc 1 1887 5 is_stmt 1 view .LVU1510
1887:task/attitude/eMPL/inv_mpu.c ****     {
 5120              		.loc 1 1887 25 is_stmt 0 view .LVU1511
 5121 0042 1E4B     		ldr	r3, .L412
 5122 0044 5868     		ldr	r0, [r3, #4]
1887:task/attitude/eMPL/inv_mpu.c ****     {
 5123              		.loc 1 1887 28 view .LVU1512
 5124 0046 4388     		ldrh	r3, [r0, #2]
1887:task/attitude/eMPL/inv_mpu.c ****     {
 5125              		.loc 1 1887 8 view .LVU1513
 5126 0048 B4EB530F 		cmp	r4, r3, lsr #1
 5127 004c 0DD9     		bls	.L400
1890:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5128              		.loc 1 1890 9 is_stmt 1 view .LVU1514
1890:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5129              		.loc 1 1890 37 is_stmt 0 view .LVU1515
 5130 004e 1B4B     		ldr	r3, .L412
 5131 0050 1968     		ldr	r1, [r3]
1890:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5132              		.loc 1 1890 13 view .LVU1516
 5133 0052 01AB     		add	r3, sp, #4
 5134 0054 0122     		movs	r2, #1
 5135 0056 C97C     		ldrb	r1, [r1, #19]	@ zero_extendqisi2
 5136 0058 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5137 005a FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 5138              	.LVL326:
1890:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5139              		.loc 1 1890 12 view .LVU1517
 5140 005e 38BB     		cbnz	r0, .L404
1892:task/attitude/eMPL/inv_mpu.c ****         {
 5141              		.loc 1 1892 9 is_stmt 1 view .LVU1518
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 151


1892:task/attitude/eMPL/inv_mpu.c ****         {
 5142              		.loc 1 1892 16 is_stmt 0 view .LVU1519
 5143 0060 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
1892:task/attitude/eMPL/inv_mpu.c ****         {
 5144              		.loc 1 1892 12 view .LVU1520
 5145 0064 13F0100F 		tst	r3, #16
 5146 0068 14D1     		bne	.L411
 5147              	.L400:
1899:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5148              		.loc 1 1899 5 is_stmt 1 view .LVU1521
1899:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5149              		.loc 1 1899 20 is_stmt 0 view .LVU1522
 5150 006a 144B     		ldr	r3, .L412
 5151 006c 5868     		ldr	r0, [r3, #4]
1899:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5152              		.loc 1 1899 33 view .LVU1523
 5153 006e 1968     		ldr	r1, [r3]
1899:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5154              		.loc 1 1899 9 view .LVU1524
 5155 0070 3B46     		mov	r3, r7
 5156 0072 2A46     		mov	r2, r5
 5157 0074 497B     		ldrb	r1, [r1, #13]	@ zero_extendqisi2
 5158 0076 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5159 0078 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 5160              	.LVL327:
1899:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5161              		.loc 1 1899 8 view .LVU1525
 5162 007c D8B9     		cbnz	r0, .L405
1901:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5163              		.loc 1 1901 5 is_stmt 1 view .LVU1526
1901:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5164              		.loc 1 1901 35 is_stmt 0 view .LVU1527
 5165 007e B4FBF5F4 		udiv	r4, r4, r5
 5166              	.LVL328:
1901:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5167              		.loc 1 1901 35 view .LVU1528
 5168 0082 013C     		subs	r4, r4, #1
1901:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5169              		.loc 1 1901 13 view .LVU1529
 5170 0084 3470     		strb	r4, [r6]
1902:task/attitude/eMPL/inv_mpu.c **** }
 5171              		.loc 1 1902 5 is_stmt 1 view .LVU1530
 5172              	.L397:
1903:task/attitude/eMPL/inv_mpu.c **** 
 5173              		.loc 1 1903 1 is_stmt 0 view .LVU1531
 5174 0086 03B0     		add	sp, sp, #12
 5175              	.LCFI94:
 5176              		.cfi_remember_state
 5177              		.cfi_def_cfa_offset 20
 5178              		@ sp needed
 5179 0088 F0BD     		pop	{r4, r5, r6, r7, pc}
 5180              	.LVL329:
 5181              	.L410:
 5182              	.LCFI95:
 5183              		.cfi_restore_state
1884:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5184              		.loc 1 1884 9 is_stmt 1 view .LVU1532
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 152


1884:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5185              		.loc 1 1884 17 is_stmt 0 view .LVU1533
 5186 008a 0023     		movs	r3, #0
 5187 008c 3370     		strb	r3, [r6]
1885:task/attitude/eMPL/inv_mpu.c ****     }
 5188              		.loc 1 1885 9 is_stmt 1 view .LVU1534
1885:task/attitude/eMPL/inv_mpu.c ****     }
 5189              		.loc 1 1885 16 is_stmt 0 view .LVU1535
 5190 008e 4FF0FF30 		mov	r0, #-1
 5191 0092 F8E7     		b	.L397
 5192              	.L411:
1894:task/attitude/eMPL/inv_mpu.c ****             return -2;
 5193              		.loc 1 1894 13 is_stmt 1 view .LVU1536
 5194 0094 FFF7FEFF 		bl	mpu_reset_fifo
 5195              	.LVL330:
1895:task/attitude/eMPL/inv_mpu.c ****         }
 5196              		.loc 1 1895 13 view .LVU1537
1895:task/attitude/eMPL/inv_mpu.c ****         }
 5197              		.loc 1 1895 20 is_stmt 0 view .LVU1538
 5198 0098 6FF00100 		mvn	r0, #1
 5199 009c F3E7     		b	.L397
 5200              	.LVL331:
 5201              	.L401:
 5202              	.LCFI96:
 5203              		.cfi_def_cfa_offset 0
 5204              		.cfi_restore 4
 5205              		.cfi_restore 5
 5206              		.cfi_restore 6
 5207              		.cfi_restore 7
 5208              		.cfi_restore 14
1875:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 5209              		.loc 1 1875 16 view .LVU1539
 5210 009e 4FF0FF30 		mov	r0, #-1
 5211              	.LVL332:
1903:task/attitude/eMPL/inv_mpu.c **** 
 5212              		.loc 1 1903 1 view .LVU1540
 5213 00a2 7047     		bx	lr
 5214              	.LVL333:
 5215              	.L402:
 5216              	.LCFI97:
 5217              		.cfi_def_cfa_offset 32
 5218              		.cfi_offset 4, -20
 5219              		.cfi_offset 5, -16
 5220              		.cfi_offset 6, -12
 5221              		.cfi_offset 7, -8
 5222              		.cfi_offset 14, -4
1877:task/attitude/eMPL/inv_mpu.c **** 
 5223              		.loc 1 1877 16 view .LVU1541
 5224 00a4 4FF0FF30 		mov	r0, #-1
 5225              	.LVL334:
1877:task/attitude/eMPL/inv_mpu.c **** 
 5226              		.loc 1 1877 16 view .LVU1542
 5227 00a8 EDE7     		b	.L397
 5228              	.LVL335:
 5229              	.L403:
1880:task/attitude/eMPL/inv_mpu.c ****     fifo_count = (tmp[0] << 8) | tmp[1];
 5230              		.loc 1 1880 16 view .LVU1543
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 153


 5231 00aa 4FF0FF30 		mov	r0, #-1
 5232 00ae EAE7     		b	.L397
 5233              	.LVL336:
 5234              	.L404:
1891:task/attitude/eMPL/inv_mpu.c ****         if (tmp[0] & BIT_FIFO_OVERFLOW)
 5235              		.loc 1 1891 20 view .LVU1544
 5236 00b0 4FF0FF30 		mov	r0, #-1
 5237 00b4 E7E7     		b	.L397
 5238              	.L405:
1900:task/attitude/eMPL/inv_mpu.c ****     more[0] = fifo_count / length - 1;
 5239              		.loc 1 1900 16 view .LVU1545
 5240 00b6 4FF0FF30 		mov	r0, #-1
 5241 00ba E4E7     		b	.L397
 5242              	.L413:
 5243              		.align	2
 5244              	.L412:
 5245 00bc 00000000 		.word	.LANCHOR0
 5246              		.cfi_endproc
 5247              	.LFE181:
 5249              		.section	.text.mpu_set_bypass,"ax",%progbits
 5250              		.align	1
 5251              		.global	mpu_set_bypass
 5252              		.syntax unified
 5253              		.thumb
 5254              		.thumb_func
 5255              		.fpu fpv5-d16
 5257              	mpu_set_bypass:
 5258              	.LVL337:
 5259              	.LFB182:
1911:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 5260              		.loc 1 1911 1 is_stmt 1 view -0
 5261              		.cfi_startproc
 5262              		@ args = 0, pretend = 0, frame = 8
 5263              		@ frame_needed = 0, uses_anonymous_args = 0
1912:task/attitude/eMPL/inv_mpu.c **** 
 5264              		.loc 1 1912 5 view .LVU1547
1914:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5265              		.loc 1 1914 5 view .LVU1548
1914:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5266              		.loc 1 1914 20 is_stmt 0 view .LVU1549
 5267 0000 584B     		ldr	r3, .L436
 5268 0002 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
1914:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5269              		.loc 1 1914 8 view .LVU1550
 5270 0004 8342     		cmp	r3, r0
 5271 0006 00F09C80 		beq	.L425
1911:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 5272              		.loc 1 1911 1 view .LVU1551
 5273 000a 10B5     		push	{r4, lr}
 5274              	.LCFI98:
 5275              		.cfi_def_cfa_offset 8
 5276              		.cfi_offset 4, -8
 5277              		.cfi_offset 14, -4
 5278 000c 82B0     		sub	sp, sp, #8
 5279              	.LCFI99:
 5280              		.cfi_def_cfa_offset 16
 5281 000e 0446     		mov	r4, r0
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 154


1917:task/attitude/eMPL/inv_mpu.c ****     {
 5282              		.loc 1 1917 5 is_stmt 1 view .LVU1552
1917:task/attitude/eMPL/inv_mpu.c ****     {
 5283              		.loc 1 1917 8 is_stmt 0 view .LVU1553
 5284 0010 0028     		cmp	r0, #0
 5285 0012 44D0     		beq	.L416
1919:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5286              		.loc 1 1919 9 is_stmt 1 view .LVU1554
1919:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5287              		.loc 1 1919 24 is_stmt 0 view .LVU1555
 5288 0014 534B     		ldr	r3, .L436
 5289 0016 5868     		ldr	r0, [r3, #4]
 5290              	.LVL338:
1919:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5291              		.loc 1 1919 37 view .LVU1556
 5292 0018 1968     		ldr	r1, [r3]
1919:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5293              		.loc 1 1919 13 view .LVU1557
 5294 001a 0DF10703 		add	r3, sp, #7
 5295 001e 0122     		movs	r2, #1
 5296 0020 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 5297 0022 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5298 0024 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 5299              	.LVL339:
1919:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5300              		.loc 1 1919 12 view .LVU1558
 5301 0028 0028     		cmp	r0, #0
 5302 002a 40F08C80 		bne	.L426
1921:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
 5303              		.loc 1 1921 9 is_stmt 1 view .LVU1559
1921:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
 5304              		.loc 1 1921 13 is_stmt 0 view .LVU1560
 5305 002e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5306 0032 23F02003 		bic	r3, r3, #32
 5307 0036 8DF80730 		strb	r3, [sp, #7]
1922:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5308              		.loc 1 1922 9 is_stmt 1 view .LVU1561
1922:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5309              		.loc 1 1922 25 is_stmt 0 view .LVU1562
 5310 003a 4A4B     		ldr	r3, .L436
 5311 003c 5868     		ldr	r0, [r3, #4]
1922:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5312              		.loc 1 1922 38 view .LVU1563
 5313 003e 1968     		ldr	r1, [r3]
1922:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5314              		.loc 1 1922 13 view .LVU1564
 5315 0040 0DF10703 		add	r3, sp, #7
 5316 0044 0122     		movs	r2, #1
 5317 0046 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 5318 0048 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5319 004a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5320              	.LVL340:
1922:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5321              		.loc 1 1922 12 view .LVU1565
 5322 004e 0028     		cmp	r0, #0
 5323 0050 7CD1     		bne	.L427
1924:task/attitude/eMPL/inv_mpu.c ****         tmp = BIT_BYPASS_EN;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 155


 5324              		.loc 1 1924 9 is_stmt 1 view .LVU1566
 5325 0052 0320     		movs	r0, #3
 5326 0054 FFF7FEFF 		bl	vTaskDelay
 5327              	.LVL341:
1925:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.active_low_int)
 5328              		.loc 1 1925 9 view .LVU1567
1925:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.active_low_int)
 5329              		.loc 1 1925 13 is_stmt 0 view .LVU1568
 5330 0058 0223     		movs	r3, #2
 5331 005a 8DF80730 		strb	r3, [sp, #7]
1926:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_ACTL;
 5332              		.loc 1 1926 9 is_stmt 1 view .LVU1569
1926:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_ACTL;
 5333              		.loc 1 1926 24 is_stmt 0 view .LVU1570
 5334 005e 414B     		ldr	r3, .L436
 5335 0060 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
1926:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_ACTL;
 5336              		.loc 1 1926 12 view .LVU1571
 5337 0064 13B1     		cbz	r3, .L417
1927:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.latched_int)
 5338              		.loc 1 1927 13 is_stmt 1 view .LVU1572
1927:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.latched_int)
 5339              		.loc 1 1927 17 is_stmt 0 view .LVU1573
 5340 0066 8223     		movs	r3, #130
 5341 0068 8DF80730 		strb	r3, [sp, #7]
 5342              	.L417:
1928:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5343              		.loc 1 1928 9 is_stmt 1 view .LVU1574
1928:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5344              		.loc 1 1928 24 is_stmt 0 view .LVU1575
 5345 006c 3D4B     		ldr	r3, .L436
 5346 006e 93F82330 		ldrb	r3, [r3, #35]	@ zero_extendqisi2
1928:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5347              		.loc 1 1928 12 view .LVU1576
 5348 0072 2BB1     		cbz	r3, .L418
1929:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 5349              		.loc 1 1929 13 is_stmt 1 view .LVU1577
1929:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 5350              		.loc 1 1929 17 is_stmt 0 view .LVU1578
 5351 0074 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5352 0078 43F03003 		orr	r3, r3, #48
 5353 007c 8DF80730 		strb	r3, [sp, #7]
 5354              	.L418:
1930:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5355              		.loc 1 1930 9 is_stmt 1 view .LVU1579
1930:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5356              		.loc 1 1930 25 is_stmt 0 view .LVU1580
 5357 0080 384B     		ldr	r3, .L436
 5358 0082 5868     		ldr	r0, [r3, #4]
1930:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5359              		.loc 1 1930 38 view .LVU1581
 5360 0084 1968     		ldr	r1, [r3]
1930:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5361              		.loc 1 1930 13 view .LVU1582
 5362 0086 0DF10703 		add	r3, sp, #7
 5363 008a 0122     		movs	r2, #1
 5364 008c C97D     		ldrb	r1, [r1, #23]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 156


 5365 008e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5366 0090 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5367              	.LVL342:
1930:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5368              		.loc 1 1930 12 view .LVU1583
 5369 0094 0028     		cmp	r0, #0
 5370 0096 44D0     		beq	.L419
1931:task/attitude/eMPL/inv_mpu.c ****     }
 5371              		.loc 1 1931 20 view .LVU1584
 5372 0098 4FF0FF30 		mov	r0, #-1
 5373 009c 44E0     		b	.L414
 5374              	.LVL343:
 5375              	.L416:
1936:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5376              		.loc 1 1936 9 is_stmt 1 view .LVU1585
1936:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5377              		.loc 1 1936 24 is_stmt 0 view .LVU1586
 5378 009e 314B     		ldr	r3, .L436
 5379 00a0 5868     		ldr	r0, [r3, #4]
 5380              	.LVL344:
1936:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5381              		.loc 1 1936 37 view .LVU1587
 5382 00a2 1968     		ldr	r1, [r3]
1936:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5383              		.loc 1 1936 13 view .LVU1588
 5384 00a4 0DF10703 		add	r3, sp, #7
 5385 00a8 0122     		movs	r2, #1
 5386 00aa 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 5387 00ac 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5388 00ae FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 5389              	.LVL345:
1936:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5390              		.loc 1 1936 12 view .LVU1589
 5391 00b2 0028     		cmp	r0, #0
 5392 00b4 4DD1     		bne	.L429
1938:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_AUX_IF_EN;
 5393              		.loc 1 1938 9 is_stmt 1 view .LVU1590
1938:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_AUX_IF_EN;
 5394              		.loc 1 1938 24 is_stmt 0 view .LVU1591
 5395 00b6 2B4B     		ldr	r3, .L436
 5396 00b8 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1938:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_AUX_IF_EN;
 5397              		.loc 1 1938 12 view .LVU1592
 5398 00ba 13F0010F 		tst	r3, #1
 5399 00be 35D0     		beq	.L420
1939:task/attitude/eMPL/inv_mpu.c ****         else
 5400              		.loc 1 1939 13 is_stmt 1 view .LVU1593
1939:task/attitude/eMPL/inv_mpu.c ****         else
 5401              		.loc 1 1939 17 is_stmt 0 view .LVU1594
 5402 00c0 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5403 00c4 43F02003 		orr	r3, r3, #32
 5404 00c8 8DF80730 		strb	r3, [sp, #7]
 5405              	.L421:
1942:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5406              		.loc 1 1942 9 is_stmt 1 view .LVU1595
1942:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5407              		.loc 1 1942 25 is_stmt 0 view .LVU1596
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 157


 5408 00cc 254B     		ldr	r3, .L436
 5409 00ce 5868     		ldr	r0, [r3, #4]
1942:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5410              		.loc 1 1942 38 view .LVU1597
 5411 00d0 1968     		ldr	r1, [r3]
1942:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5412              		.loc 1 1942 13 view .LVU1598
 5413 00d2 0DF10703 		add	r3, sp, #7
 5414 00d6 0122     		movs	r2, #1
 5415 00d8 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 5416 00da 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5417 00dc FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5418              	.LVL346:
1942:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5419              		.loc 1 1942 12 view .LVU1599
 5420 00e0 0028     		cmp	r0, #0
 5421 00e2 39D1     		bne	.L430
1944:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.active_low_int)
 5422              		.loc 1 1944 9 is_stmt 1 view .LVU1600
 5423 00e4 0320     		movs	r0, #3
 5424 00e6 FFF7FEFF 		bl	vTaskDelay
 5425              	.LVL347:
1945:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_ACTL;
 5426              		.loc 1 1945 9 view .LVU1601
1945:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_ACTL;
 5427              		.loc 1 1945 24 is_stmt 0 view .LVU1602
 5428 00ea 1E4B     		ldr	r3, .L436
 5429 00ec 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
1945:task/attitude/eMPL/inv_mpu.c ****             tmp = BIT_ACTL;
 5430              		.loc 1 1945 12 view .LVU1603
 5431 00f0 1BB3     		cbz	r3, .L422
1946:task/attitude/eMPL/inv_mpu.c ****         else
 5432              		.loc 1 1946 13 is_stmt 1 view .LVU1604
1946:task/attitude/eMPL/inv_mpu.c ****         else
 5433              		.loc 1 1946 17 is_stmt 0 view .LVU1605
 5434 00f2 8023     		movs	r3, #128
 5435 00f4 8DF80730 		strb	r3, [sp, #7]
 5436              	.L423:
1949:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5437              		.loc 1 1949 9 is_stmt 1 view .LVU1606
1949:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5438              		.loc 1 1949 24 is_stmt 0 view .LVU1607
 5439 00f8 1A4B     		ldr	r3, .L436
 5440 00fa 93F82330 		ldrb	r3, [r3, #35]	@ zero_extendqisi2
1949:task/attitude/eMPL/inv_mpu.c ****             tmp |= BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5441              		.loc 1 1949 12 view .LVU1608
 5442 00fe 2BB1     		cbz	r3, .L424
1950:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 5443              		.loc 1 1950 13 is_stmt 1 view .LVU1609
1950:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 5444              		.loc 1 1950 17 is_stmt 0 view .LVU1610
 5445 0100 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5446 0104 43F03003 		orr	r3, r3, #48
 5447 0108 8DF80730 		strb	r3, [sp, #7]
 5448              	.L424:
1951:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5449              		.loc 1 1951 9 is_stmt 1 view .LVU1611
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 158


1951:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5450              		.loc 1 1951 25 is_stmt 0 view .LVU1612
 5451 010c 154B     		ldr	r3, .L436
 5452 010e 5868     		ldr	r0, [r3, #4]
1951:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5453              		.loc 1 1951 38 view .LVU1613
 5454 0110 1968     		ldr	r1, [r3]
1951:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5455              		.loc 1 1951 13 view .LVU1614
 5456 0112 0DF10703 		add	r3, sp, #7
 5457 0116 0122     		movs	r2, #1
 5458 0118 C97D     		ldrb	r1, [r1, #23]	@ zero_extendqisi2
 5459 011a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5460 011c FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5461              	.LVL348:
1951:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5462              		.loc 1 1951 12 view .LVU1615
 5463 0120 E8B9     		cbnz	r0, .L431
 5464              	.L419:
1954:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5465              		.loc 1 1954 5 is_stmt 1 view .LVU1616
1954:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5466              		.loc 1 1954 29 is_stmt 0 view .LVU1617
 5467 0122 104B     		ldr	r3, .L436
 5468 0124 9C74     		strb	r4, [r3, #18]
1955:task/attitude/eMPL/inv_mpu.c **** }
 5469              		.loc 1 1955 5 is_stmt 1 view .LVU1618
1955:task/attitude/eMPL/inv_mpu.c **** }
 5470              		.loc 1 1955 12 is_stmt 0 view .LVU1619
 5471 0126 0020     		movs	r0, #0
 5472              	.L414:
1956:task/attitude/eMPL/inv_mpu.c **** 
 5473              		.loc 1 1956 1 view .LVU1620
 5474 0128 02B0     		add	sp, sp, #8
 5475              	.LCFI100:
 5476              		.cfi_remember_state
 5477              		.cfi_def_cfa_offset 8
 5478              		@ sp needed
 5479 012a 10BD     		pop	{r4, pc}
 5480              	.L420:
 5481              	.LCFI101:
 5482              		.cfi_restore_state
1941:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
 5483              		.loc 1 1941 13 is_stmt 1 view .LVU1621
1941:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, &tmp))
 5484              		.loc 1 1941 17 is_stmt 0 view .LVU1622
 5485 012c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5486 0130 23F02003 		bic	r3, r3, #32
 5487 0134 8DF80730 		strb	r3, [sp, #7]
 5488 0138 C8E7     		b	.L421
 5489              	.L422:
1948:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.latched_int)
 5490              		.loc 1 1948 13 is_stmt 1 view .LVU1623
1948:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.latched_int)
 5491              		.loc 1 1948 17 is_stmt 0 view .LVU1624
 5492 013a 0023     		movs	r3, #0
 5493 013c 8DF80730 		strb	r3, [sp, #7]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 159


 5494 0140 DAE7     		b	.L423
 5495              	.LVL349:
 5496              	.L425:
 5497              	.LCFI102:
 5498              		.cfi_def_cfa_offset 0
 5499              		.cfi_restore 4
 5500              		.cfi_restore 14
1915:task/attitude/eMPL/inv_mpu.c **** 
 5501              		.loc 1 1915 16 view .LVU1625
 5502 0142 0020     		movs	r0, #0
 5503              	.LVL350:
1956:task/attitude/eMPL/inv_mpu.c **** 
 5504              		.loc 1 1956 1 view .LVU1626
 5505 0144 7047     		bx	lr
 5506              	.L426:
 5507              	.LCFI103:
 5508              		.cfi_def_cfa_offset 16
 5509              		.cfi_offset 4, -8
 5510              		.cfi_offset 14, -4
1920:task/attitude/eMPL/inv_mpu.c ****         tmp &= ~BIT_AUX_IF_EN;
 5511              		.loc 1 1920 20 view .LVU1627
 5512 0146 4FF0FF30 		mov	r0, #-1
 5513 014a EDE7     		b	.L414
 5514              	.L427:
1923:task/attitude/eMPL/inv_mpu.c ****         delay_ms(3);
 5515              		.loc 1 1923 20 view .LVU1628
 5516 014c 4FF0FF30 		mov	r0, #-1
 5517 0150 EAE7     		b	.L414
 5518              	.L429:
1937:task/attitude/eMPL/inv_mpu.c ****         if (st.chip_cfg.sensors & INV_XYZ_COMPASS)
 5519              		.loc 1 1937 20 view .LVU1629
 5520 0152 4FF0FF30 		mov	r0, #-1
 5521 0156 E7E7     		b	.L414
 5522              	.L430:
1943:task/attitude/eMPL/inv_mpu.c ****         delay_ms(3);
 5523              		.loc 1 1943 20 view .LVU1630
 5524 0158 4FF0FF30 		mov	r0, #-1
 5525 015c E4E7     		b	.L414
 5526              	.L431:
1952:task/attitude/eMPL/inv_mpu.c ****     }
 5527              		.loc 1 1952 20 view .LVU1631
 5528 015e 4FF0FF30 		mov	r0, #-1
 5529 0162 E1E7     		b	.L414
 5530              	.L437:
 5531              		.align	2
 5532              	.L436:
 5533 0164 00000000 		.word	.LANCHOR0
 5534              		.cfi_endproc
 5535              	.LFE182:
 5537              		.section	.text.mpu_set_int_level,"ax",%progbits
 5538              		.align	1
 5539              		.global	mpu_set_int_level
 5540              		.syntax unified
 5541              		.thumb
 5542              		.thumb_func
 5543              		.fpu fpv5-d16
 5545              	mpu_set_int_level:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 160


 5546              	.LVL351:
 5547              	.LFB183:
1964:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.active_low_int = active_low;
 5548              		.loc 1 1964 1 is_stmt 1 view -0
 5549              		.cfi_startproc
 5550              		@ args = 0, pretend = 0, frame = 0
 5551              		@ frame_needed = 0, uses_anonymous_args = 0
 5552              		@ link register save eliminated.
1965:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5553              		.loc 1 1965 5 view .LVU1633
1965:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5554              		.loc 1 1965 32 is_stmt 0 view .LVU1634
 5555 0000 024B     		ldr	r3, .L439
 5556 0002 83F82200 		strb	r0, [r3, #34]
1966:task/attitude/eMPL/inv_mpu.c **** }
 5557              		.loc 1 1966 5 is_stmt 1 view .LVU1635
1967:task/attitude/eMPL/inv_mpu.c **** 
 5558              		.loc 1 1967 1 is_stmt 0 view .LVU1636
 5559 0006 0020     		movs	r0, #0
 5560              	.LVL352:
1967:task/attitude/eMPL/inv_mpu.c **** 
 5561              		.loc 1 1967 1 view .LVU1637
 5562 0008 7047     		bx	lr
 5563              	.L440:
 5564 000a 00BF     		.align	2
 5565              	.L439:
 5566 000c 00000000 		.word	.LANCHOR0
 5567              		.cfi_endproc
 5568              	.LFE183:
 5570              		.section	.text.mpu_set_int_latched,"ax",%progbits
 5571              		.align	1
 5572              		.global	mpu_set_int_latched
 5573              		.syntax unified
 5574              		.thumb
 5575              		.thumb_func
 5576              		.fpu fpv5-d16
 5578              	mpu_set_int_latched:
 5579              	.LVL353:
 5580              	.LFB184:
1976:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 5581              		.loc 1 1976 1 is_stmt 1 view -0
 5582              		.cfi_startproc
 5583              		@ args = 0, pretend = 0, frame = 8
 5584              		@ frame_needed = 0, uses_anonymous_args = 0
1977:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.latched_int == enable)
 5585              		.loc 1 1977 5 view .LVU1639
1978:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5586              		.loc 1 1978 5 view .LVU1640
1978:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5587              		.loc 1 1978 20 is_stmt 0 view .LVU1641
 5588 0000 1B4B     		ldr	r3, .L453
 5589 0002 93F82330 		ldrb	r3, [r3, #35]	@ zero_extendqisi2
1978:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5590              		.loc 1 1978 8 view .LVU1642
 5591 0006 8342     		cmp	r3, r0
 5592 0008 2DD0     		beq	.L447
1976:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 161


 5593              		.loc 1 1976 1 view .LVU1643
 5594 000a 10B5     		push	{r4, lr}
 5595              	.LCFI104:
 5596              		.cfi_def_cfa_offset 8
 5597              		.cfi_offset 4, -8
 5598              		.cfi_offset 14, -4
 5599 000c 82B0     		sub	sp, sp, #8
 5600              	.LCFI105:
 5601              		.cfi_def_cfa_offset 16
 5602 000e 0446     		mov	r4, r0
1981:task/attitude/eMPL/inv_mpu.c ****         tmp = BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5603              		.loc 1 1981 5 is_stmt 1 view .LVU1644
1981:task/attitude/eMPL/inv_mpu.c ****         tmp = BIT_LATCH_EN | BIT_ANY_RD_CLR;
 5604              		.loc 1 1981 8 is_stmt 0 view .LVU1645
 5605 0010 28B3     		cbz	r0, .L443
1982:task/attitude/eMPL/inv_mpu.c ****     else
 5606              		.loc 1 1982 9 is_stmt 1 view .LVU1646
1982:task/attitude/eMPL/inv_mpu.c ****     else
 5607              		.loc 1 1982 13 is_stmt 0 view .LVU1647
 5608 0012 3023     		movs	r3, #48
 5609 0014 8DF80730 		strb	r3, [sp, #7]
 5610              	.L444:
1985:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_BYPASS_EN;
 5611              		.loc 1 1985 5 is_stmt 1 view .LVU1648
1985:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_BYPASS_EN;
 5612              		.loc 1 1985 20 is_stmt 0 view .LVU1649
 5613 0018 154B     		ldr	r3, .L453
 5614 001a 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
1985:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_BYPASS_EN;
 5615              		.loc 1 1985 8 view .LVU1650
 5616 001c 2BB1     		cbz	r3, .L445
1986:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.active_low_int)
 5617              		.loc 1 1986 9 is_stmt 1 view .LVU1651
1986:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.active_low_int)
 5618              		.loc 1 1986 13 is_stmt 0 view .LVU1652
 5619 001e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5620 0022 43F00203 		orr	r3, r3, #2
 5621 0026 8DF80730 		strb	r3, [sp, #7]
 5622              	.L445:
1987:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_ACTL;
 5623              		.loc 1 1987 5 is_stmt 1 view .LVU1653
1987:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_ACTL;
 5624              		.loc 1 1987 20 is_stmt 0 view .LVU1654
 5625 002a 114B     		ldr	r3, .L453
 5626 002c 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
1987:task/attitude/eMPL/inv_mpu.c ****         tmp |= BIT_ACTL;
 5627              		.loc 1 1987 8 view .LVU1655
 5628 0030 2BB1     		cbz	r3, .L446
1988:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 5629              		.loc 1 1988 9 is_stmt 1 view .LVU1656
1988:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_pin_cfg, 1, &tmp))
 5630              		.loc 1 1988 13 is_stmt 0 view .LVU1657
 5631 0032 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 5632 0036 63F07F03 		orn	r3, r3, #127
 5633 003a 8DF80730 		strb	r3, [sp, #7]
 5634              	.L446:
1989:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 162


 5635              		.loc 1 1989 5 is_stmt 1 view .LVU1658
1989:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5636              		.loc 1 1989 21 is_stmt 0 view .LVU1659
 5637 003e 0C4B     		ldr	r3, .L453
 5638 0040 5868     		ldr	r0, [r3, #4]
 5639              	.LVL354:
1989:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5640              		.loc 1 1989 34 view .LVU1660
 5641 0042 1968     		ldr	r1, [r3]
1989:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5642              		.loc 1 1989 9 view .LVU1661
 5643 0044 0DF10703 		add	r3, sp, #7
 5644 0048 0122     		movs	r2, #1
 5645 004a C97D     		ldrb	r1, [r1, #23]	@ zero_extendqisi2
 5646 004c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5647 004e FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5648              	.LVL355:
1989:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5649              		.loc 1 1989 8 view .LVU1662
 5650 0052 50B9     		cbnz	r0, .L448
1991:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5651              		.loc 1 1991 5 is_stmt 1 view .LVU1663
1991:task/attitude/eMPL/inv_mpu.c ****     return 0;
 5652              		.loc 1 1991 29 is_stmt 0 view .LVU1664
 5653 0054 064B     		ldr	r3, .L453
 5654 0056 83F82340 		strb	r4, [r3, #35]
1992:task/attitude/eMPL/inv_mpu.c **** }
 5655              		.loc 1 1992 5 is_stmt 1 view .LVU1665
 5656              	.L441:
1993:task/attitude/eMPL/inv_mpu.c **** 
 5657              		.loc 1 1993 1 is_stmt 0 view .LVU1666
 5658 005a 02B0     		add	sp, sp, #8
 5659              	.LCFI106:
 5660              		.cfi_remember_state
 5661              		.cfi_def_cfa_offset 8
 5662              		@ sp needed
 5663 005c 10BD     		pop	{r4, pc}
 5664              	.LVL356:
 5665              	.L443:
 5666              	.LCFI107:
 5667              		.cfi_restore_state
1984:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.bypass_mode)
 5668              		.loc 1 1984 9 is_stmt 1 view .LVU1667
1984:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.bypass_mode)
 5669              		.loc 1 1984 13 is_stmt 0 view .LVU1668
 5670 005e 0023     		movs	r3, #0
 5671 0060 8DF80730 		strb	r3, [sp, #7]
 5672 0064 D8E7     		b	.L444
 5673              	.L447:
 5674              	.LCFI108:
 5675              		.cfi_def_cfa_offset 0
 5676              		.cfi_restore 4
 5677              		.cfi_restore 14
1979:task/attitude/eMPL/inv_mpu.c **** 
 5678              		.loc 1 1979 16 view .LVU1669
 5679 0066 0020     		movs	r0, #0
 5680              	.LVL357:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 163


1993:task/attitude/eMPL/inv_mpu.c **** 
 5681              		.loc 1 1993 1 view .LVU1670
 5682 0068 7047     		bx	lr
 5683              	.L448:
 5684              	.LCFI109:
 5685              		.cfi_def_cfa_offset 16
 5686              		.cfi_offset 4, -8
 5687              		.cfi_offset 14, -4
1990:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.latched_int = enable;
 5688              		.loc 1 1990 16 view .LVU1671
 5689 006a 4FF0FF30 		mov	r0, #-1
 5690 006e F4E7     		b	.L441
 5691              	.L454:
 5692              		.align	2
 5693              	.L453:
 5694 0070 00000000 		.word	.LANCHOR0
 5695              		.cfi_endproc
 5696              	.LFE184:
 5698              		.section	.text.mpu_lp_accel_mode,"ax",%progbits
 5699              		.align	1
 5700              		.global	mpu_lp_accel_mode
 5701              		.syntax unified
 5702              		.thumb
 5703              		.thumb_func
 5704              		.fpu fpv5-d16
 5706              	mpu_lp_accel_mode:
 5707              	.LVL358:
 5708              	.LFB152:
 829:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 5709              		.loc 1 829 1 is_stmt 1 view -0
 5710              		.cfi_startproc
 5711              		@ args = 0, pretend = 0, frame = 8
 5712              		@ frame_needed = 0, uses_anonymous_args = 0
 829:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 5713              		.loc 1 829 1 is_stmt 0 view .LVU1673
 5714 0000 10B5     		push	{r4, lr}
 5715              	.LCFI110:
 5716              		.cfi_def_cfa_offset 8
 5717              		.cfi_offset 4, -8
 5718              		.cfi_offset 14, -4
 5719 0002 82B0     		sub	sp, sp, #8
 5720              	.LCFI111:
 5721              		.cfi_def_cfa_offset 16
 830:task/attitude/eMPL/inv_mpu.c **** 
 5722              		.loc 1 830 5 is_stmt 1 view .LVU1674
 832:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5723              		.loc 1 832 5 view .LVU1675
 832:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5724              		.loc 1 832 8 is_stmt 0 view .LVU1676
 5725 0004 2828     		cmp	r0, #40
 5726 0006 5ED8     		bhi	.L462
 5727 0008 0446     		mov	r4, r0
 835:task/attitude/eMPL/inv_mpu.c ****     {
 5728              		.loc 1 835 5 is_stmt 1 view .LVU1677
 835:task/attitude/eMPL/inv_mpu.c ****     {
 5729              		.loc 1 835 8 is_stmt 0 view .LVU1678
 5730 000a D0B9     		cbnz	r0, .L457
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 164


 837:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = 0;
 5731              		.loc 1 837 9 is_stmt 1 view .LVU1679
 5732 000c 0020     		movs	r0, #0
 5733              	.LVL359:
 837:task/attitude/eMPL/inv_mpu.c ****         tmp[0] = 0;
 5734              		.loc 1 837 9 is_stmt 0 view .LVU1680
 5735 000e FFF7FEFF 		bl	mpu_set_int_latched
 5736              	.LVL360:
 838:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = BIT_STBY_XYZG;
 5737              		.loc 1 838 9 is_stmt 1 view .LVU1681
 838:task/attitude/eMPL/inv_mpu.c ****         tmp[1] = BIT_STBY_XYZG;
 5738              		.loc 1 838 16 is_stmt 0 view .LVU1682
 5739 0012 0023     		movs	r3, #0
 5740 0014 8DF80430 		strb	r3, [sp, #4]
 839:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5741              		.loc 1 839 9 is_stmt 1 view .LVU1683
 839:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5742              		.loc 1 839 16 is_stmt 0 view .LVU1684
 5743 0018 0723     		movs	r3, #7
 5744 001a 8DF80530 		strb	r3, [sp, #5]
 840:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5745              		.loc 1 840 9 is_stmt 1 view .LVU1685
 840:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5746              		.loc 1 840 25 is_stmt 0 view .LVU1686
 5747 001e 2E4B     		ldr	r3, .L468
 5748 0020 5868     		ldr	r0, [r3, #4]
 840:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5749              		.loc 1 840 38 view .LVU1687
 5750 0022 1968     		ldr	r1, [r3]
 840:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5751              		.loc 1 840 13 view .LVU1688
 5752 0024 01AB     		add	r3, sp, #4
 5753 0026 0222     		movs	r2, #2
 5754 0028 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 5755 002a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5756 002c FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5757              	.LVL361:
 840:task/attitude/eMPL/inv_mpu.c ****             return -1;
 5758              		.loc 1 840 12 view .LVU1689
 5759 0030 0446     		mov	r4, r0
 5760 0032 0028     		cmp	r0, #0
 5761 0034 4AD1     		bne	.L463
 842:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5762              		.loc 1 842 9 is_stmt 1 view .LVU1690
 842:task/attitude/eMPL/inv_mpu.c ****         return 0;
 5763              		.loc 1 842 35 is_stmt 0 view .LVU1691
 5764 0036 284B     		ldr	r3, .L468
 5765 0038 0022     		movs	r2, #0
 5766 003a 1A75     		strb	r2, [r3, #20]
 843:task/attitude/eMPL/inv_mpu.c ****     }
 5767              		.loc 1 843 9 is_stmt 1 view .LVU1692
 5768              	.L455:
 912:task/attitude/eMPL/inv_mpu.c **** 
 5769              		.loc 1 912 1 is_stmt 0 view .LVU1693
 5770 003c 2046     		mov	r0, r4
 5771 003e 02B0     		add	sp, sp, #8
 5772              	.LCFI112:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 165


 5773              		.cfi_remember_state
 5774              		.cfi_def_cfa_offset 8
 5775              		@ sp needed
 5776 0040 10BD     		pop	{r4, pc}
 5777              	.LVL362:
 5778              	.L457:
 5779              	.LCFI113:
 5780              		.cfi_restore_state
 852:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6050
 5781              		.loc 1 852 5 is_stmt 1 view .LVU1694
 5782 0042 0120     		movs	r0, #1
 5783              	.LVL363:
 852:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6050
 5784              		.loc 1 852 5 is_stmt 0 view .LVU1695
 5785 0044 FFF7FEFF 		bl	mpu_set_int_latched
 5786              	.LVL364:
 854:task/attitude/eMPL/inv_mpu.c ****     if (rate == 1)
 5787              		.loc 1 854 5 is_stmt 1 view .LVU1696
 854:task/attitude/eMPL/inv_mpu.c ****     if (rate == 1)
 5788              		.loc 1 854 12 is_stmt 0 view .LVU1697
 5789 0048 2023     		movs	r3, #32
 5790 004a 8DF80430 		strb	r3, [sp, #4]
 855:task/attitude/eMPL/inv_mpu.c ****     {
 5791              		.loc 1 855 5 is_stmt 1 view .LVU1698
 855:task/attitude/eMPL/inv_mpu.c ****     {
 5792              		.loc 1 855 8 is_stmt 0 view .LVU1699
 5793 004e 012C     		cmp	r4, #1
 5794 0050 24D0     		beq	.L466
 860:task/attitude/eMPL/inv_mpu.c ****     {
 5795              		.loc 1 860 10 is_stmt 1 view .LVU1700
 860:task/attitude/eMPL/inv_mpu.c ****     {
 5796              		.loc 1 860 13 is_stmt 0 view .LVU1701
 5797 0052 052C     		cmp	r4, #5
 5798 0054 29D9     		bls	.L467
 865:task/attitude/eMPL/inv_mpu.c ****     {
 5799              		.loc 1 865 10 is_stmt 1 view .LVU1702
 865:task/attitude/eMPL/inv_mpu.c ****     {
 5800              		.loc 1 865 13 is_stmt 0 view .LVU1703
 5801 0056 142C     		cmp	r4, #20
 5802 0058 2ED8     		bhi	.L461
 867:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(10);
 5803              		.loc 1 867 9 is_stmt 1 view .LVU1704
 867:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(10);
 5804              		.loc 1 867 16 is_stmt 0 view .LVU1705
 5805 005a 0223     		movs	r3, #2
 5806 005c 8DF80530 		strb	r3, [sp, #5]
 868:task/attitude/eMPL/inv_mpu.c ****     }
 5807              		.loc 1 868 9 is_stmt 1 view .LVU1706
 5808 0060 0A20     		movs	r0, #10
 5809 0062 FFF7FEFF 		bl	mpu_set_lpf
 5810              	.LVL365:
 5811              	.L459:
 875:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5812              		.loc 1 875 5 view .LVU1707
 875:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5813              		.loc 1 875 18 is_stmt 0 view .LVU1708
 5814 0066 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 166


 875:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5815              		.loc 1 875 22 view .LVU1709
 5816 006a 9B01     		lsls	r3, r3, #6
 875:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5817              		.loc 1 875 28 view .LVU1710
 5818 006c 43F00703 		orr	r3, r3, #7
 875:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, tmp))
 5819              		.loc 1 875 12 view .LVU1711
 5820 0070 8DF80530 		strb	r3, [sp, #5]
 876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5821              		.loc 1 876 5 is_stmt 1 view .LVU1712
 876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5822              		.loc 1 876 21 is_stmt 0 view .LVU1713
 5823 0074 184B     		ldr	r3, .L468
 5824 0076 5868     		ldr	r0, [r3, #4]
 876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5825              		.loc 1 876 34 view .LVU1714
 5826 0078 1968     		ldr	r1, [r3]
 876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5827              		.loc 1 876 9 view .LVU1715
 5828 007a 01AB     		add	r3, sp, #4
 5829 007c 0222     		movs	r2, #2
 5830 007e 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 5831 0080 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5832 0082 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 5833              	.LVL366:
 876:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5834              		.loc 1 876 8 view .LVU1716
 5835 0086 0446     		mov	r4, r0
 5836 0088 18BB     		cbnz	r0, .L464
 906:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = 0;
 5837              		.loc 1 906 5 is_stmt 1 view .LVU1717
 906:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = 0;
 5838              		.loc 1 906 25 is_stmt 0 view .LVU1718
 5839 008a 134B     		ldr	r3, .L468
 5840 008c 0822     		movs	r2, #8
 5841 008e 9A72     		strb	r2, [r3, #10]
 907:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 1;
 5842              		.loc 1 907 5 is_stmt 1 view .LVU1719
 907:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 1;
 5843              		.loc 1 907 25 is_stmt 0 view .LVU1720
 5844 0090 1873     		strb	r0, [r3, #12]
 908:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(0);
 5845              		.loc 1 908 5 is_stmt 1 view .LVU1721
 908:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(0);
 5846              		.loc 1 908 31 is_stmt 0 view .LVU1722
 5847 0092 0122     		movs	r2, #1
 5848 0094 1A75     		strb	r2, [r3, #20]
 909:task/attitude/eMPL/inv_mpu.c **** 
 5849              		.loc 1 909 5 is_stmt 1 view .LVU1723
 5850 0096 FFF7FEFF 		bl	mpu_configure_fifo
 5851              	.LVL367:
 911:task/attitude/eMPL/inv_mpu.c **** }
 5852              		.loc 1 911 5 view .LVU1724
 911:task/attitude/eMPL/inv_mpu.c **** }
 5853              		.loc 1 911 12 is_stmt 0 view .LVU1725
 5854 009a CFE7     		b	.L455
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 167


 5855              	.L466:
 857:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(5);
 5856              		.loc 1 857 9 is_stmt 1 view .LVU1726
 857:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(5);
 5857              		.loc 1 857 16 is_stmt 0 view .LVU1727
 5858 009c 0023     		movs	r3, #0
 5859 009e 8DF80530 		strb	r3, [sp, #5]
 858:task/attitude/eMPL/inv_mpu.c ****     }
 5860              		.loc 1 858 9 is_stmt 1 view .LVU1728
 5861 00a2 0520     		movs	r0, #5
 5862 00a4 FFF7FEFF 		bl	mpu_set_lpf
 5863              	.LVL368:
 5864 00a8 DDE7     		b	.L459
 5865              	.L467:
 862:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(5);
 5866              		.loc 1 862 9 view .LVU1729
 862:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(5);
 5867              		.loc 1 862 16 is_stmt 0 view .LVU1730
 5868 00aa 0123     		movs	r3, #1
 5869 00ac 8DF80530 		strb	r3, [sp, #5]
 863:task/attitude/eMPL/inv_mpu.c ****     }
 5870              		.loc 1 863 9 is_stmt 1 view .LVU1731
 5871 00b0 0520     		movs	r0, #5
 5872 00b2 FFF7FEFF 		bl	mpu_set_lpf
 5873              	.LVL369:
 5874 00b6 D6E7     		b	.L459
 5875              	.L461:
 872:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(20);
 5876              		.loc 1 872 9 view .LVU1732
 872:task/attitude/eMPL/inv_mpu.c ****         mpu_set_lpf(20);
 5877              		.loc 1 872 16 is_stmt 0 view .LVU1733
 5878 00b8 0323     		movs	r3, #3
 5879 00ba 8DF80530 		strb	r3, [sp, #5]
 873:task/attitude/eMPL/inv_mpu.c ****     }
 5880              		.loc 1 873 9 is_stmt 1 view .LVU1734
 5881 00be 1420     		movs	r0, #20
 5882 00c0 FFF7FEFF 		bl	mpu_set_lpf
 5883              	.LVL370:
 5884 00c4 CFE7     		b	.L459
 5885              	.LVL371:
 5886              	.L462:
 833:task/attitude/eMPL/inv_mpu.c **** 
 5887              		.loc 1 833 16 is_stmt 0 view .LVU1735
 5888 00c6 4FF0FF34 		mov	r4, #-1
 5889 00ca B7E7     		b	.L455
 5890              	.LVL372:
 5891              	.L463:
 841:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.lp_accel_mode = 0;
 5892              		.loc 1 841 20 view .LVU1736
 5893 00cc 4FF0FF34 		mov	r4, #-1
 5894 00d0 B4E7     		b	.L455
 5895              	.L464:
 877:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU6500
 5896              		.loc 1 877 16 view .LVU1737
 5897 00d2 4FF0FF34 		mov	r4, #-1
 5898 00d6 B1E7     		b	.L455
 5899              	.L469:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 168


 5900              		.align	2
 5901              	.L468:
 5902 00d8 00000000 		.word	.LANCHOR0
 5903              		.cfi_endproc
 5904              	.LFE152:
 5906              		.section	.text.mpu_set_sample_rate,"ax",%progbits
 5907              		.align	1
 5908              		.global	mpu_set_sample_rate
 5909              		.syntax unified
 5910              		.thumb
 5911              		.thumb_func
 5912              		.fpu fpv5-d16
 5914              	mpu_set_sample_rate:
 5915              	.LVL373:
 5916              	.LFB170:
1439:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 5917              		.loc 1 1439 1 is_stmt 1 view -0
 5918              		.cfi_startproc
 5919              		@ args = 0, pretend = 0, frame = 8
 5920              		@ frame_needed = 0, uses_anonymous_args = 0
1439:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 5921              		.loc 1 1439 1 is_stmt 0 view .LVU1739
 5922 0000 10B5     		push	{r4, lr}
 5923              	.LCFI114:
 5924              		.cfi_def_cfa_offset 8
 5925              		.cfi_offset 4, -8
 5926              		.cfi_offset 14, -4
 5927 0002 82B0     		sub	sp, sp, #8
 5928              	.LCFI115:
 5929              		.cfi_def_cfa_offset 16
1440:task/attitude/eMPL/inv_mpu.c **** 
 5930              		.loc 1 1440 5 is_stmt 1 view .LVU1740
1442:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5931              		.loc 1 1442 5 view .LVU1741
1442:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5932              		.loc 1 1442 22 is_stmt 0 view .LVU1742
 5933 0004 254B     		ldr	r3, .L482
 5934 0006 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
1442:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5935              		.loc 1 1442 8 view .LVU1743
 5936 0008 002B     		cmp	r3, #0
 5937 000a 3ED0     		beq	.L475
 5938 000c 0446     		mov	r4, r0
1445:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5939              		.loc 1 1445 5 is_stmt 1 view .LVU1744
1445:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5940              		.loc 1 1445 20 is_stmt 0 view .LVU1745
 5941 000e 234B     		ldr	r3, .L482
 5942 0010 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
1445:task/attitude/eMPL/inv_mpu.c ****         return -1;
 5943              		.loc 1 1445 8 view .LVU1746
 5944 0014 002B     		cmp	r3, #0
 5945 0016 3BD1     		bne	.L476
1449:task/attitude/eMPL/inv_mpu.c ****         {
 5946              		.loc 1 1449 9 is_stmt 1 view .LVU1747
1449:task/attitude/eMPL/inv_mpu.c ****         {
 5947              		.loc 1 1449 24 is_stmt 0 view .LVU1748
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 169


 5948 0018 204B     		ldr	r3, .L482
 5949 001a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
1449:task/attitude/eMPL/inv_mpu.c ****         {
 5950              		.loc 1 1449 12 view .LVU1749
 5951 001c 33B1     		cbz	r3, .L472
1451:task/attitude/eMPL/inv_mpu.c ****             {
 5952              		.loc 1 1451 13 is_stmt 1 view .LVU1750
1451:task/attitude/eMPL/inv_mpu.c ****             {
 5953              		.loc 1 1451 22 is_stmt 0 view .LVU1751
 5954 001e 431E     		subs	r3, r0, #1
 5955 0020 9BB2     		uxth	r3, r3
1451:task/attitude/eMPL/inv_mpu.c ****             {
 5956              		.loc 1 1451 16 view .LVU1752
 5957 0022 272B     		cmp	r3, #39
 5958 0024 0AD9     		bls	.L481
1460:task/attitude/eMPL/inv_mpu.c ****         }
 5959              		.loc 1 1460 13 is_stmt 1 view .LVU1753
 5960 0026 0020     		movs	r0, #0
 5961              	.LVL374:
1460:task/attitude/eMPL/inv_mpu.c ****         }
 5962              		.loc 1 1460 13 is_stmt 0 view .LVU1754
 5963 0028 FFF7FEFF 		bl	mpu_lp_accel_mode
 5964              	.LVL375:
 5965              	.L472:
1462:task/attitude/eMPL/inv_mpu.c ****             rate = 4;
 5966              		.loc 1 1462 9 is_stmt 1 view .LVU1755
1462:task/attitude/eMPL/inv_mpu.c ****             rate = 4;
 5967              		.loc 1 1462 12 is_stmt 0 view .LVU1756
 5968 002c 032C     		cmp	r4, #3
 5969 002e 09D9     		bls	.L477
1464:task/attitude/eMPL/inv_mpu.c ****             rate = 1000;
 5970              		.loc 1 1464 14 is_stmt 1 view .LVU1757
1464:task/attitude/eMPL/inv_mpu.c ****             rate = 1000;
 5971              		.loc 1 1464 17 is_stmt 0 view .LVU1758
 5972 0030 B4F57A7F 		cmp	r4, #1000
 5973 0034 07D9     		bls	.L474
1465:task/attitude/eMPL/inv_mpu.c **** 
 5974              		.loc 1 1465 18 view .LVU1759
 5975 0036 4FF47A74 		mov	r4, #1000
 5976 003a 04E0     		b	.L474
 5977              	.LVL376:
 5978              	.L481:
1454:task/attitude/eMPL/inv_mpu.c ****                 return 0;
 5979              		.loc 1 1454 17 is_stmt 1 view .LVU1760
 5980 003c FFF7FEFF 		bl	mpu_lp_accel_mode
 5981              	.LVL377:
1455:task/attitude/eMPL/inv_mpu.c ****             }
 5982              		.loc 1 1455 17 view .LVU1761
1455:task/attitude/eMPL/inv_mpu.c ****             }
 5983              		.loc 1 1455 24 is_stmt 0 view .LVU1762
 5984 0040 0024     		movs	r4, #0
 5985 0042 1FE0     		b	.L470
 5986              	.L477:
1463:task/attitude/eMPL/inv_mpu.c ****         else if (rate > 1000)
 5987              		.loc 1 1463 18 view .LVU1763
 5988 0044 0424     		movs	r4, #4
 5989              	.L474:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 170


 5990              	.LVL378:
1467:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
 5991              		.loc 1 1467 9 is_stmt 1 view .LVU1764
1467:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
 5992              		.loc 1 1467 21 is_stmt 0 view .LVU1765
 5993 0046 4FF47A70 		mov	r0, #1000
 5994 004a 90FBF4F4 		sdiv	r4, r0, r4
 5995              	.LVL379:
1467:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
 5996              		.loc 1 1467 28 view .LVU1766
 5997 004e 013C     		subs	r4, r4, #1
1467:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->rate_div, 1, &data))
 5998              		.loc 1 1467 14 view .LVU1767
 5999 0050 8DF80740 		strb	r4, [sp, #7]
1468:task/attitude/eMPL/inv_mpu.c ****             return -1;
 6000              		.loc 1 1468 9 is_stmt 1 view .LVU1768
1468:task/attitude/eMPL/inv_mpu.c ****             return -1;
 6001              		.loc 1 1468 25 is_stmt 0 view .LVU1769
 6002 0054 114B     		ldr	r3, .L482
 6003 0056 5868     		ldr	r0, [r3, #4]
1468:task/attitude/eMPL/inv_mpu.c ****             return -1;
 6004              		.loc 1 1468 38 view .LVU1770
 6005 0058 1968     		ldr	r1, [r3]
1468:task/attitude/eMPL/inv_mpu.c ****             return -1;
 6006              		.loc 1 1468 13 view .LVU1771
 6007 005a 0DF10703 		add	r3, sp, #7
 6008 005e 0122     		movs	r2, #1
 6009 0060 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 6010 0062 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6011 0064 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6012              	.LVL380:
1468:task/attitude/eMPL/inv_mpu.c ****             return -1;
 6013              		.loc 1 1468 12 view .LVU1772
 6014 0068 0446     		mov	r4, r0
 6015 006a A0B9     		cbnz	r0, .L479
1471:task/attitude/eMPL/inv_mpu.c **** 
 6016              		.loc 1 1471 9 is_stmt 1 view .LVU1773
1471:task/attitude/eMPL/inv_mpu.c **** 
 6017              		.loc 1 1471 45 is_stmt 0 view .LVU1774
 6018 006c 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 6019 0070 431C     		adds	r3, r0, #1
1471:task/attitude/eMPL/inv_mpu.c **** 
 6020              		.loc 1 1471 33 view .LVU1775
 6021 0072 4FF47A70 		mov	r0, #1000
 6022 0076 90FBF3F0 		sdiv	r0, r0, r3
 6023 007a 084B     		ldr	r3, .L482
 6024 007c D881     		strh	r0, [r3, #14]	@ movhi
1478:task/attitude/eMPL/inv_mpu.c ****         return 0;
 6025              		.loc 1 1478 9 is_stmt 1 view .LVU1776
 6026 007e 4008     		lsrs	r0, r0, #1
 6027 0080 FFF7FEFF 		bl	mpu_set_lpf
 6028              	.LVL381:
1479:task/attitude/eMPL/inv_mpu.c ****     }
 6029              		.loc 1 1479 9 view .LVU1777
 6030              	.L470:
1481:task/attitude/eMPL/inv_mpu.c **** 
 6031              		.loc 1 1481 1 is_stmt 0 view .LVU1778
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 171


 6032 0084 2046     		mov	r0, r4
 6033 0086 02B0     		add	sp, sp, #8
 6034              	.LCFI116:
 6035              		.cfi_remember_state
 6036              		.cfi_def_cfa_offset 8
 6037              		@ sp needed
 6038 0088 10BD     		pop	{r4, pc}
 6039              	.LVL382:
 6040              	.L475:
 6041              	.LCFI117:
 6042              		.cfi_restore_state
1443:task/attitude/eMPL/inv_mpu.c **** 
 6043              		.loc 1 1443 16 view .LVU1779
 6044 008a 4FF0FF34 		mov	r4, #-1
 6045 008e F9E7     		b	.L470
 6046              	.L476:
1446:task/attitude/eMPL/inv_mpu.c ****     else
 6047              		.loc 1 1446 16 view .LVU1780
 6048 0090 4FF0FF34 		mov	r4, #-1
 6049 0094 F6E7     		b	.L470
 6050              	.LVL383:
 6051              	.L479:
1469:task/attitude/eMPL/inv_mpu.c **** 
 6052              		.loc 1 1469 20 view .LVU1781
 6053 0096 4FF0FF34 		mov	r4, #-1
 6054 009a F3E7     		b	.L470
 6055              	.L483:
 6056              		.align	2
 6057              	.L482:
 6058 009c 00000000 		.word	.LANCHOR0
 6059              		.cfi_endproc
 6060              	.LFE170:
 6062              		.section	.text.mpu_set_sensors,"ax",%progbits
 6063              		.align	1
 6064              		.global	mpu_set_sensors
 6065              		.syntax unified
 6066              		.thumb
 6067              		.thumb_func
 6068              		.fpu fpv5-d16
 6070              	mpu_set_sensors:
 6071              	.LVL384:
 6072              	.LFB178:
1672:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 6073              		.loc 1 1672 1 is_stmt 1 view -0
 6074              		.cfi_startproc
 6075              		@ args = 0, pretend = 0, frame = 8
 6076              		@ frame_needed = 0, uses_anonymous_args = 0
1672:task/attitude/eMPL/inv_mpu.c ****     unsigned char data;
 6077              		.loc 1 1672 1 is_stmt 0 view .LVU1783
 6078 0000 30B5     		push	{r4, r5, lr}
 6079              	.LCFI118:
 6080              		.cfi_def_cfa_offset 12
 6081              		.cfi_offset 4, -12
 6082              		.cfi_offset 5, -8
 6083              		.cfi_offset 14, -4
 6084 0002 83B0     		sub	sp, sp, #12
 6085              	.LCFI119:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 172


 6086              		.cfi_def_cfa_offset 24
 6087 0004 0446     		mov	r4, r0
1673:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 6088              		.loc 1 1673 5 is_stmt 1 view .LVU1784
1678:task/attitude/eMPL/inv_mpu.c ****         data = INV_CLK_PLL;
 6089              		.loc 1 1678 5 view .LVU1785
1678:task/attitude/eMPL/inv_mpu.c ****         data = INV_CLK_PLL;
 6090              		.loc 1 1678 8 is_stmt 0 view .LVU1786
 6091 0006 10F0700F 		tst	r0, #112
 6092 000a 56D0     		beq	.L485
1679:task/attitude/eMPL/inv_mpu.c ****     else if (sensors)
 6093              		.loc 1 1679 9 is_stmt 1 view .LVU1787
1679:task/attitude/eMPL/inv_mpu.c ****     else if (sensors)
 6094              		.loc 1 1679 14 is_stmt 0 view .LVU1788
 6095 000c 0123     		movs	r3, #1
 6096 000e 8DF80730 		strb	r3, [sp, #7]
 6097              	.L486:
1684:task/attitude/eMPL/inv_mpu.c ****     {
 6098              		.loc 1 1684 5 is_stmt 1 view .LVU1789
1684:task/attitude/eMPL/inv_mpu.c ****     {
 6099              		.loc 1 1684 21 is_stmt 0 view .LVU1790
 6100 0012 364B     		ldr	r3, .L500
 6101 0014 5868     		ldr	r0, [r3, #4]
 6102              	.LVL385:
1684:task/attitude/eMPL/inv_mpu.c ****     {
 6103              		.loc 1 1684 34 view .LVU1791
 6104 0016 1968     		ldr	r1, [r3]
1684:task/attitude/eMPL/inv_mpu.c ****     {
 6105              		.loc 1 1684 9 view .LVU1792
 6106 0018 0DF10703 		add	r3, sp, #7
 6107 001c 0122     		movs	r2, #1
 6108 001e 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 6109 0020 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6110 0022 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6111              	.LVL386:
1684:task/attitude/eMPL/inv_mpu.c ****     {
 6112              		.loc 1 1684 8 view .LVU1793
 6113 0026 0028     		cmp	r0, #0
 6114 0028 50D1     		bne	.L497
1689:task/attitude/eMPL/inv_mpu.c **** 
 6115              		.loc 1 1689 5 is_stmt 1 view .LVU1794
1689:task/attitude/eMPL/inv_mpu.c **** 
 6116              		.loc 1 1689 32 is_stmt 0 view .LVU1795
 6117 002a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 6118 002e 03F0BF03 		and	r3, r3, #191
1689:task/attitude/eMPL/inv_mpu.c **** 
 6119              		.loc 1 1689 25 view .LVU1796
 6120 0032 2E4A     		ldr	r2, .L500
 6121 0034 1373     		strb	r3, [r2, #12]
1691:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_X_GYRO))
 6122              		.loc 1 1691 5 is_stmt 1 view .LVU1797
1691:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_X_GYRO))
 6123              		.loc 1 1691 10 is_stmt 0 view .LVU1798
 6124 0036 0023     		movs	r3, #0
 6125 0038 8DF80730 		strb	r3, [sp, #7]
1692:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_XG;
 6126              		.loc 1 1692 5 is_stmt 1 view .LVU1799
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 173


1692:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_XG;
 6127              		.loc 1 1692 8 is_stmt 0 view .LVU1800
 6128 003c 14F0400F 		tst	r4, #64
 6129 0040 02D1     		bne	.L490
1693:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_Y_GYRO))
 6130              		.loc 1 1693 9 is_stmt 1 view .LVU1801
1693:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_Y_GYRO))
 6131              		.loc 1 1693 14 is_stmt 0 view .LVU1802
 6132 0042 0423     		movs	r3, #4
 6133 0044 8DF80730 		strb	r3, [sp, #7]
 6134              	.L490:
1694:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_YG;
 6135              		.loc 1 1694 5 is_stmt 1 view .LVU1803
1694:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_YG;
 6136              		.loc 1 1694 8 is_stmt 0 view .LVU1804
 6137 0048 14F0200F 		tst	r4, #32
 6138 004c 05D1     		bne	.L491
1695:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_Z_GYRO))
 6139              		.loc 1 1695 9 is_stmt 1 view .LVU1805
1695:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_Z_GYRO))
 6140              		.loc 1 1695 14 is_stmt 0 view .LVU1806
 6141 004e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 6142 0052 43F00203 		orr	r3, r3, #2
 6143 0056 8DF80730 		strb	r3, [sp, #7]
 6144              	.L491:
1696:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_ZG;
 6145              		.loc 1 1696 5 is_stmt 1 view .LVU1807
1696:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_ZG;
 6146              		.loc 1 1696 8 is_stmt 0 view .LVU1808
 6147 005a 14F0100F 		tst	r4, #16
 6148 005e 05D1     		bne	.L492
1697:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_XYZ_ACCEL))
 6149              		.loc 1 1697 9 is_stmt 1 view .LVU1809
1697:task/attitude/eMPL/inv_mpu.c ****     if (!(sensors & INV_XYZ_ACCEL))
 6150              		.loc 1 1697 14 is_stmt 0 view .LVU1810
 6151 0060 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 6152 0064 43F00103 		orr	r3, r3, #1
 6153 0068 8DF80730 		strb	r3, [sp, #7]
 6154              	.L492:
1698:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_XYZA;
 6155              		.loc 1 1698 5 is_stmt 1 view .LVU1811
1698:task/attitude/eMPL/inv_mpu.c ****         data |= BIT_STBY_XYZA;
 6156              		.loc 1 1698 8 is_stmt 0 view .LVU1812
 6157 006c 14F0080F 		tst	r4, #8
 6158 0070 05D1     		bne	.L493
1699:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_2, 1, &data))
 6159              		.loc 1 1699 9 is_stmt 1 view .LVU1813
1699:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_2, 1, &data))
 6160              		.loc 1 1699 14 is_stmt 0 view .LVU1814
 6161 0072 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 6162 0076 43F03803 		orr	r3, r3, #56
 6163 007a 8DF80730 		strb	r3, [sp, #7]
 6164              	.L493:
1700:task/attitude/eMPL/inv_mpu.c ****     {
 6165              		.loc 1 1700 5 is_stmt 1 view .LVU1815
1700:task/attitude/eMPL/inv_mpu.c ****     {
 6166              		.loc 1 1700 21 is_stmt 0 view .LVU1816
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 174


 6167 007e 1B4B     		ldr	r3, .L500
 6168 0080 5868     		ldr	r0, [r3, #4]
1700:task/attitude/eMPL/inv_mpu.c ****     {
 6169              		.loc 1 1700 34 view .LVU1817
 6170 0082 1968     		ldr	r1, [r3]
1700:task/attitude/eMPL/inv_mpu.c ****     {
 6171              		.loc 1 1700 9 view .LVU1818
 6172 0084 0DF10703 		add	r3, sp, #7
 6173 0088 0122     		movs	r2, #1
 6174 008a 897D     		ldrb	r1, [r1, #22]	@ zero_extendqisi2
 6175 008c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6176 008e FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6177              	.LVL387:
1700:task/attitude/eMPL/inv_mpu.c ****     {
 6178              		.loc 1 1700 8 view .LVU1819
 6179 0092 0546     		mov	r5, r0
 6180 0094 00BB     		cbnz	r0, .L498
1706:task/attitude/eMPL/inv_mpu.c ****         /* Latched interrupts only used in LP accel mode. */
 6181              		.loc 1 1706 5 is_stmt 1 view .LVU1820
1706:task/attitude/eMPL/inv_mpu.c ****         /* Latched interrupts only used in LP accel mode. */
 6182              		.loc 1 1706 29 is_stmt 0 view .LVU1821
 6183 0096 B4F10803 		subs	r3, r4, #8
 6184 009a 18BF     		it	ne
 6185 009c 0123     		movne	r3, #1
1706:task/attitude/eMPL/inv_mpu.c ****         /* Latched interrupts only used in LP accel mode. */
 6186              		.loc 1 1706 17 view .LVU1822
 6187 009e 002C     		cmp	r4, #0
 6188 00a0 08BF     		it	eq
 6189 00a2 0023     		moveq	r3, #0
1706:task/attitude/eMPL/inv_mpu.c ****         /* Latched interrupts only used in LP accel mode. */
 6190              		.loc 1 1706 8 view .LVU1823
 6191 00a4 F3B9     		cbnz	r3, .L499
 6192              	.L495:
1742:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 0;
 6193              		.loc 1 1742 5 is_stmt 1 view .LVU1824
1742:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 0;
 6194              		.loc 1 1742 25 is_stmt 0 view .LVU1825
 6195 00a6 114B     		ldr	r3, .L500
 6196 00a8 9C72     		strb	r4, [r3, #10]
1743:task/attitude/eMPL/inv_mpu.c ****     delay_ms(50);
 6197              		.loc 1 1743 5 is_stmt 1 view .LVU1826
1743:task/attitude/eMPL/inv_mpu.c ****     delay_ms(50);
 6198              		.loc 1 1743 31 is_stmt 0 view .LVU1827
 6199 00aa 0022     		movs	r2, #0
 6200 00ac 1A75     		strb	r2, [r3, #20]
1744:task/attitude/eMPL/inv_mpu.c ****     return 0;
 6201              		.loc 1 1744 5 is_stmt 1 view .LVU1828
 6202 00ae 3220     		movs	r0, #50
 6203 00b0 FFF7FEFF 		bl	vTaskDelay
 6204              	.LVL388:
1745:task/attitude/eMPL/inv_mpu.c **** }
 6205              		.loc 1 1745 5 view .LVU1829
 6206              	.L484:
1746:task/attitude/eMPL/inv_mpu.c **** 
 6207              		.loc 1 1746 1 is_stmt 0 view .LVU1830
 6208 00b4 2846     		mov	r0, r5
 6209 00b6 03B0     		add	sp, sp, #12
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 175


 6210              	.LCFI120:
 6211              		.cfi_remember_state
 6212              		.cfi_def_cfa_offset 12
 6213              		@ sp needed
 6214 00b8 30BD     		pop	{r4, r5, pc}
 6215              	.LVL389:
 6216              	.L485:
 6217              	.LCFI121:
 6218              		.cfi_restore_state
1680:task/attitude/eMPL/inv_mpu.c ****         data = 0;
 6219              		.loc 1 1680 10 is_stmt 1 view .LVU1831
1680:task/attitude/eMPL/inv_mpu.c ****         data = 0;
 6220              		.loc 1 1680 13 is_stmt 0 view .LVU1832
 6221 00ba 18B1     		cbz	r0, .L487
1681:task/attitude/eMPL/inv_mpu.c ****     else
 6222              		.loc 1 1681 9 is_stmt 1 view .LVU1833
1681:task/attitude/eMPL/inv_mpu.c ****     else
 6223              		.loc 1 1681 14 is_stmt 0 view .LVU1834
 6224 00bc 0023     		movs	r3, #0
 6225 00be 8DF80730 		strb	r3, [sp, #7]
 6226 00c2 A6E7     		b	.L486
 6227              	.L487:
1683:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, &data))
 6228              		.loc 1 1683 9 is_stmt 1 view .LVU1835
1683:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, &data))
 6229              		.loc 1 1683 14 is_stmt 0 view .LVU1836
 6230 00c4 4023     		movs	r3, #64
 6231 00c6 8DF80730 		strb	r3, [sp, #7]
 6232 00ca A2E7     		b	.L486
 6233              	.LVL390:
 6234              	.L497:
1686:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6235              		.loc 1 1686 9 is_stmt 1 view .LVU1837
1686:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6236              		.loc 1 1686 29 is_stmt 0 view .LVU1838
 6237 00cc 074B     		ldr	r3, .L500
 6238 00ce 0022     		movs	r2, #0
 6239 00d0 9A72     		strb	r2, [r3, #10]
1687:task/attitude/eMPL/inv_mpu.c ****     }
 6240              		.loc 1 1687 9 is_stmt 1 view .LVU1839
1687:task/attitude/eMPL/inv_mpu.c ****     }
 6241              		.loc 1 1687 16 is_stmt 0 view .LVU1840
 6242 00d2 4FF0FF35 		mov	r5, #-1
 6243 00d6 EDE7     		b	.L484
 6244              	.L498:
1702:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6245              		.loc 1 1702 9 is_stmt 1 view .LVU1841
1702:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6246              		.loc 1 1702 29 is_stmt 0 view .LVU1842
 6247 00d8 044B     		ldr	r3, .L500
 6248 00da 0022     		movs	r2, #0
 6249 00dc 9A72     		strb	r2, [r3, #10]
1703:task/attitude/eMPL/inv_mpu.c ****     }
 6250              		.loc 1 1703 9 is_stmt 1 view .LVU1843
1703:task/attitude/eMPL/inv_mpu.c ****     }
 6251              		.loc 1 1703 16 is_stmt 0 view .LVU1844
 6252 00de 4FF0FF35 		mov	r5, #-1
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 176


 6253 00e2 E7E7     		b	.L484
 6254              	.L499:
1708:task/attitude/eMPL/inv_mpu.c **** 
 6255              		.loc 1 1708 9 is_stmt 1 view .LVU1845
 6256 00e4 0020     		movs	r0, #0
 6257 00e6 FFF7FEFF 		bl	mpu_set_int_latched
 6258              	.LVL391:
 6259 00ea DCE7     		b	.L495
 6260              	.L501:
 6261              		.align	2
 6262              	.L500:
 6263 00ec 00000000 		.word	.LANCHOR0
 6264              		.cfi_endproc
 6265              	.LFE178:
 6267              		.section	.text.mpu_init,"ax",%progbits
 6268              		.align	1
 6269              		.global	mpu_init
 6270              		.syntax unified
 6271              		.thumb
 6272              		.thumb_func
 6273              		.fpu fpv5-d16
 6275              	mpu_init:
 6276              	.LVL392:
 6277              	.LFB151:
 735:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 6278              		.loc 1 735 1 view -0
 6279              		.cfi_startproc
 6280              		@ args = 0, pretend = 0, frame = 8
 6281              		@ frame_needed = 0, uses_anonymous_args = 0
 735:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[6];
 6282              		.loc 1 735 1 is_stmt 0 view .LVU1847
 6283 0000 10B5     		push	{r4, lr}
 6284              	.LCFI122:
 6285              		.cfi_def_cfa_offset 8
 6286              		.cfi_offset 4, -8
 6287              		.cfi_offset 14, -4
 6288 0002 82B0     		sub	sp, sp, #8
 6289              	.LCFI123:
 6290              		.cfi_def_cfa_offset 16
 736:task/attitude/eMPL/inv_mpu.c **** 
 6291              		.loc 1 736 5 is_stmt 1 view .LVU1848
 739:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 6292              		.loc 1 739 5 view .LVU1849
 739:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 6293              		.loc 1 739 13 is_stmt 0 view .LVU1850
 6294 0004 8023     		movs	r3, #128
 6295 0006 8DF80030 		strb	r3, [sp]
 740:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6296              		.loc 1 740 5 is_stmt 1 view .LVU1851
 740:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6297              		.loc 1 740 21 is_stmt 0 view .LVU1852
 6298 000a 384B     		ldr	r3, .L513
 6299 000c 5868     		ldr	r0, [r3, #4]
 6300              	.LVL393:
 740:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6301              		.loc 1 740 34 view .LVU1853
 6302 000e 1968     		ldr	r1, [r3]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 177


 740:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6303              		.loc 1 740 9 view .LVU1854
 6304 0010 6B46     		mov	r3, sp
 6305 0012 0122     		movs	r2, #1
 6306 0014 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 6307 0016 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6308 0018 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6309              	.LVL394:
 740:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6310              		.loc 1 740 8 view .LVU1855
 6311 001c 0028     		cmp	r0, #0
 6312 001e 4DD1     		bne	.L504
 742:task/attitude/eMPL/inv_mpu.c **** 
 6313              		.loc 1 742 5 is_stmt 1 view .LVU1856
 6314 0020 6420     		movs	r0, #100
 6315 0022 FFF7FEFF 		bl	vTaskDelay
 6316              	.LVL395:
 745:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 6317              		.loc 1 745 5 view .LVU1857
 745:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
 6318              		.loc 1 745 13 is_stmt 0 view .LVU1858
 6319 0026 0023     		movs	r3, #0
 6320 0028 8DF80030 		strb	r3, [sp]
 746:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6321              		.loc 1 746 5 is_stmt 1 view .LVU1859
 746:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6322              		.loc 1 746 21 is_stmt 0 view .LVU1860
 6323 002c 2F4B     		ldr	r3, .L513
 6324 002e 5868     		ldr	r0, [r3, #4]
 746:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6325              		.loc 1 746 34 view .LVU1861
 6326 0030 1968     		ldr	r1, [r3]
 746:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6327              		.loc 1 746 9 view .LVU1862
 6328 0032 6B46     		mov	r3, sp
 6329 0034 0122     		movs	r2, #1
 6330 0036 497D     		ldrb	r1, [r1, #21]	@ zero_extendqisi2
 6331 0038 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6332 003a FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6333              	.LVL396:
 746:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6334              		.loc 1 746 8 view .LVU1863
 6335 003e 0028     		cmp	r0, #0
 6336 0040 3FD1     		bne	.L505
 749:task/attitude/eMPL/inv_mpu.c **** 
 6337              		.loc 1 749 5 is_stmt 1 view .LVU1864
 749:task/attitude/eMPL/inv_mpu.c **** 
 6338              		.loc 1 749 28 is_stmt 0 view .LVU1865
 6339 0042 2A4B     		ldr	r3, .L513
 6340 0044 0022     		movs	r2, #0
 6341 0046 DA74     		strb	r2, [r3, #19]
 761:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = 0xFF;
 6342              		.loc 1 761 5 is_stmt 1 view .LVU1866
 761:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = 0xFF;
 6343              		.loc 1 761 25 is_stmt 0 view .LVU1867
 6344 0048 FF21     		movs	r1, #255
 6345 004a 9972     		strb	r1, [r3, #10]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 178


 762:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
 6346              		.loc 1 762 5 is_stmt 1 view .LVU1868
 762:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
 6347              		.loc 1 762 26 is_stmt 0 view .LVU1869
 6348 004c 1972     		strb	r1, [r3, #8]
 763:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
 6349              		.loc 1 763 5 is_stmt 1 view .LVU1870
 763:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
 6350              		.loc 1 763 27 is_stmt 0 view .LVU1871
 6351 004e 5972     		strb	r1, [r3, #9]
 764:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
 6352              		.loc 1 764 5 is_stmt 1 view .LVU1872
 764:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
 6353              		.loc 1 764 21 is_stmt 0 view .LVU1873
 6354 0050 D972     		strb	r1, [r3, #11]
 765:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
 6355              		.loc 1 765 5 is_stmt 1 view .LVU1874
 765:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
 6356              		.loc 1 765 29 is_stmt 0 view .LVU1875
 6357 0052 4FF6FF70 		movw	r0, #65535
 6358 0056 D881     		strh	r0, [r3, #14]	@ movhi
 766:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.bypass_mode = 0xFF;
 6359              		.loc 1 766 5 is_stmt 1 view .LVU1876
 766:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.bypass_mode = 0xFF;
 6360              		.loc 1 766 29 is_stmt 0 view .LVU1877
 6361 0058 1974     		strb	r1, [r3, #16]
 767:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 6362              		.loc 1 767 5 is_stmt 1 view .LVU1878
 767:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 6363              		.loc 1 767 29 is_stmt 0 view .LVU1879
 6364 005a 9974     		strb	r1, [r3, #18]
 772:task/attitude/eMPL/inv_mpu.c ****     /* Handled in next call to mpu_set_bypass. */
 6365              		.loc 1 772 5 is_stmt 1 view .LVU1880
 772:task/attitude/eMPL/inv_mpu.c ****     /* Handled in next call to mpu_set_bypass. */
 6366              		.loc 1 772 25 is_stmt 0 view .LVU1881
 6367 005c 0121     		movs	r1, #1
 6368 005e 1973     		strb	r1, [r3, #12]
 774:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.latched_int = 0;
 6369              		.loc 1 774 5 is_stmt 1 view .LVU1882
 774:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.latched_int = 0;
 6370              		.loc 1 774 32 is_stmt 0 view .LVU1883
 6371 0060 83F82210 		strb	r1, [r3, #34]
 775:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.int_motion_only = 0;
 6372              		.loc 1 775 5 is_stmt 1 view .LVU1884
 775:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.int_motion_only = 0;
 6373              		.loc 1 775 29 is_stmt 0 view .LVU1885
 6374 0064 83F82320 		strb	r2, [r3, #35]
 776:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 0;
 6375              		.loc 1 776 5 is_stmt 1 view .LVU1886
 776:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lp_accel_mode = 0;
 6376              		.loc 1 776 33 is_stmt 0 view .LVU1887
 6377 0068 5A75     		strb	r2, [r3, #21]
 777:task/attitude/eMPL/inv_mpu.c ****     memset(&st.chip_cfg.cache, 0, sizeof(st.chip_cfg.cache));
 6378              		.loc 1 777 5 is_stmt 1 view .LVU1888
 777:task/attitude/eMPL/inv_mpu.c ****     memset(&st.chip_cfg.cache, 0, sizeof(st.chip_cfg.cache));
 6379              		.loc 1 777 31 is_stmt 0 view .LVU1889
 6380 006a 1A75     		strb	r2, [r3, #20]
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 179


 778:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_on = 0;
 6381              		.loc 1 778 5 is_stmt 1 view .LVU1890
 6382 006c C3F81620 		str	r2, [r3, #22]	@ unaligned
 6383 0070 C3F81A20 		str	r2, [r3, #26]	@ unaligned
 6384 0074 C3F81E20 		str	r2, [r3, #30]	@ unaligned
 779:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_loaded = 0;
 6385              		.loc 1 779 5 view .LVU1891
 779:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_loaded = 0;
 6386              		.loc 1 779 24 is_stmt 0 view .LVU1892
 6387 0078 83F82420 		strb	r2, [r3, #36]
 780:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_sample_rate = 0;
 6388              		.loc 1 780 5 is_stmt 1 view .LVU1893
 780:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_sample_rate = 0;
 6389              		.loc 1 780 28 is_stmt 0 view .LVU1894
 6390 007c 83F82520 		strb	r2, [r3, #37]
 781:task/attitude/eMPL/inv_mpu.c **** 
 6391              		.loc 1 781 5 is_stmt 1 view .LVU1895
 781:task/attitude/eMPL/inv_mpu.c **** 
 6392              		.loc 1 781 33 is_stmt 0 view .LVU1896
 6393 0080 DA84     		strh	r2, [r3, #38]	@ movhi
 783:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6394              		.loc 1 783 5 is_stmt 1 view .LVU1897
 783:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6395              		.loc 1 783 9 is_stmt 0 view .LVU1898
 6396 0082 4FF4FA60 		mov	r0, #2000
 6397 0086 FFF7FEFF 		bl	mpu_set_gyro_fsr
 6398              	.LVL397:
 783:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6399              		.loc 1 783 8 view .LVU1899
 6400 008a E8B9     		cbnz	r0, .L506
 785:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6401              		.loc 1 785 5 is_stmt 1 view .LVU1900
 785:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6402              		.loc 1 785 9 is_stmt 0 view .LVU1901
 6403 008c 0220     		movs	r0, #2
 6404 008e FFF7FEFF 		bl	mpu_set_accel_fsr
 6405              	.LVL398:
 785:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6406              		.loc 1 785 8 view .LVU1902
 6407 0092 E0B9     		cbnz	r0, .L507
 787:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6408              		.loc 1 787 5 is_stmt 1 view .LVU1903
 787:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6409              		.loc 1 787 9 is_stmt 0 view .LVU1904
 6410 0094 2A20     		movs	r0, #42
 6411 0096 FFF7FEFF 		bl	mpu_set_lpf
 6412              	.LVL399:
 787:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6413              		.loc 1 787 8 view .LVU1905
 6414 009a D8B9     		cbnz	r0, .L508
 789:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6415              		.loc 1 789 5 is_stmt 1 view .LVU1906
 789:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6416              		.loc 1 789 9 is_stmt 0 view .LVU1907
 6417 009c 3220     		movs	r0, #50
 6418 009e FFF7FEFF 		bl	mpu_set_sample_rate
 6419              	.LVL400:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 180


 789:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6420              		.loc 1 789 8 view .LVU1908
 6421 00a2 D0B9     		cbnz	r0, .L509
 791:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6422              		.loc 1 791 5 is_stmt 1 view .LVU1909
 791:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6423              		.loc 1 791 9 is_stmt 0 view .LVU1910
 6424 00a4 FFF7FEFF 		bl	mpu_configure_fifo
 6425              	.LVL401:
 791:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6426              		.loc 1 791 8 view .LVU1911
 6427 00a8 D0B9     		cbnz	r0, .L510
 805:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6428              		.loc 1 805 5 is_stmt 1 view .LVU1912
 805:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6429              		.loc 1 805 9 is_stmt 0 view .LVU1913
 6430 00aa FFF7FEFF 		bl	mpu_set_bypass
 6431              	.LVL402:
 805:task/attitude/eMPL/inv_mpu.c ****         return -1;
 6432              		.loc 1 805 8 view .LVU1914
 6433 00ae 0446     		mov	r4, r0
 6434 00b0 C8B9     		cbnz	r0, .L511
 809:task/attitude/eMPL/inv_mpu.c ****     return 0;
 6435              		.loc 1 809 5 is_stmt 1 view .LVU1915
 6436 00b2 FFF7FEFF 		bl	mpu_set_sensors
 6437              	.LVL403:
 810:task/attitude/eMPL/inv_mpu.c **** }
 6438              		.loc 1 810 5 view .LVU1916
 6439              	.L502:
 811:task/attitude/eMPL/inv_mpu.c **** 
 6440              		.loc 1 811 1 is_stmt 0 view .LVU1917
 6441 00b6 2046     		mov	r0, r4
 6442 00b8 02B0     		add	sp, sp, #8
 6443              	.LCFI124:
 6444              		.cfi_remember_state
 6445              		.cfi_def_cfa_offset 8
 6446              		@ sp needed
 6447 00ba 10BD     		pop	{r4, pc}
 6448              	.L504:
 6449              	.LCFI125:
 6450              		.cfi_restore_state
 741:task/attitude/eMPL/inv_mpu.c ****     delay_ms(100);
 6451              		.loc 1 741 16 view .LVU1918
 6452 00bc 4FF0FF34 		mov	r4, #-1
 6453 00c0 F9E7     		b	.L502
 6454              	.L505:
 747:task/attitude/eMPL/inv_mpu.c **** 
 6455              		.loc 1 747 16 view .LVU1919
 6456 00c2 4FF0FF34 		mov	r4, #-1
 6457 00c6 F6E7     		b	.L502
 6458              	.L506:
 784:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_accel_fsr(2))
 6459              		.loc 1 784 16 view .LVU1920
 6460 00c8 4FF0FF34 		mov	r4, #-1
 6461 00cc F3E7     		b	.L502
 6462              	.L507:
 786:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_lpf(42))
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 181


 6463              		.loc 1 786 16 view .LVU1921
 6464 00ce 4FF0FF34 		mov	r4, #-1
 6465 00d2 F0E7     		b	.L502
 6466              	.L508:
 788:task/attitude/eMPL/inv_mpu.c ****     if (mpu_set_sample_rate(50))
 6467              		.loc 1 788 16 view .LVU1922
 6468 00d4 4FF0FF34 		mov	r4, #-1
 6469 00d8 EDE7     		b	.L502
 6470              	.L509:
 790:task/attitude/eMPL/inv_mpu.c ****     if (mpu_configure_fifo(0))
 6471              		.loc 1 790 16 view .LVU1923
 6472 00da 4FF0FF34 		mov	r4, #-1
 6473 00de EAE7     		b	.L502
 6474              	.L510:
 792:task/attitude/eMPL/inv_mpu.c **** 
 6475              		.loc 1 792 16 view .LVU1924
 6476 00e0 4FF0FF34 		mov	r4, #-1
 6477 00e4 E7E7     		b	.L502
 6478              	.L511:
 806:task/attitude/eMPL/inv_mpu.c **** #endif
 6479              		.loc 1 806 16 view .LVU1925
 6480 00e6 4FF0FF34 		mov	r4, #-1
 6481 00ea E4E7     		b	.L502
 6482              	.L514:
 6483              		.align	2
 6484              	.L513:
 6485 00ec 00000000 		.word	.LANCHOR0
 6486              		.cfi_endproc
 6487              	.LFE151:
 6489              		.section	.text.mpu_write_mem,"ax",%progbits
 6490              		.align	1
 6491              		.global	mpu_write_mem
 6492              		.syntax unified
 6493              		.thumb
 6494              		.thumb_func
 6495              		.fpu fpv5-d16
 6497              	mpu_write_mem:
 6498              	.LVL404:
 6499              	.LFB190:
2266:task/attitude/eMPL/inv_mpu.c **** 
2267:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6500
2268:task/attitude/eMPL/inv_mpu.c **** #define REG_6500_XG_ST_DATA 0x0
2269:task/attitude/eMPL/inv_mpu.c **** #define REG_6500_XA_ST_DATA 0xD
2270:task/attitude/eMPL/inv_mpu.c **** static const unsigned short mpu_6500_st_tb[256] = {
2271:task/attitude/eMPL/inv_mpu.c ****     2620, 2646, 2672, 2699, 2726, 2753, 2781, 2808, //7
2272:task/attitude/eMPL/inv_mpu.c ****     2837, 2865, 2894, 2923, 2952, 2981, 3011, 3041, //15
2273:task/attitude/eMPL/inv_mpu.c ****     3072, 3102, 3133, 3165, 3196, 3228, 3261, 3293, //23
2274:task/attitude/eMPL/inv_mpu.c ****     3326, 3359, 3393, 3427, 3461, 3496, 3531, 3566, //31
2275:task/attitude/eMPL/inv_mpu.c ****     3602, 3638, 3674, 3711, 3748, 3786, 3823, 3862, //39
2276:task/attitude/eMPL/inv_mpu.c ****     3900, 3939, 3979, 4019, 4059, 4099, 4140, 4182, //47
2277:task/attitude/eMPL/inv_mpu.c ****     4224, 4266, 4308, 4352, 4395, 4439, 4483, 4528, //55
2278:task/attitude/eMPL/inv_mpu.c ****     4574, 4619, 4665, 4712, 4759, 4807, 4855, 4903, //63
2279:task/attitude/eMPL/inv_mpu.c ****     4953, 5002, 5052, 5103, 5154, 5205, 5257, 5310, //71
2280:task/attitude/eMPL/inv_mpu.c ****     5363, 5417, 5471, 5525, 5581, 5636, 5693, 5750, //79
2281:task/attitude/eMPL/inv_mpu.c ****     5807, 5865, 5924, 5983, 6043, 6104, 6165, 6226, //87
2282:task/attitude/eMPL/inv_mpu.c ****     6289, 6351, 6415, 6479, 6544, 6609, 6675, 6742, //95
2283:task/attitude/eMPL/inv_mpu.c ****     6810, 6878, 6946, 7016, 7086, 7157, 7229, 7301, //103
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 182


2284:task/attitude/eMPL/inv_mpu.c ****     7374, 7448, 7522, 7597, 7673, 7750, 7828, 7906, //111
2285:task/attitude/eMPL/inv_mpu.c ****     7985, 8065, 8145, 8227, 8309, 8392, 8476, 8561, //119
2286:task/attitude/eMPL/inv_mpu.c ****     8647, 8733, 8820, 8909, 8998, 9088, 9178, 9270,
2287:task/attitude/eMPL/inv_mpu.c ****     9363, 9457, 9551, 9647, 9743, 9841, 9939, 10038,
2288:task/attitude/eMPL/inv_mpu.c ****     10139, 10240, 10343, 10446, 10550, 10656, 10763, 10870,
2289:task/attitude/eMPL/inv_mpu.c ****     10979, 11089, 11200, 11312, 11425, 11539, 11654, 11771,
2290:task/attitude/eMPL/inv_mpu.c ****     11889, 12008, 12128, 12249, 12371, 12495, 12620, 12746,
2291:task/attitude/eMPL/inv_mpu.c ****     12874, 13002, 13132, 13264, 13396, 13530, 13666, 13802,
2292:task/attitude/eMPL/inv_mpu.c ****     13940, 14080, 14221, 14363, 14506, 14652, 14798, 14946,
2293:task/attitude/eMPL/inv_mpu.c ****     15096, 15247, 15399, 15553, 15709, 15866, 16024, 16184,
2294:task/attitude/eMPL/inv_mpu.c ****     16346, 16510, 16675, 16842, 17010, 17180, 17352, 17526,
2295:task/attitude/eMPL/inv_mpu.c ****     17701, 17878, 18057, 18237, 18420, 18604, 18790, 18978,
2296:task/attitude/eMPL/inv_mpu.c ****     19167, 19359, 19553, 19748, 19946, 20145, 20347, 20550,
2297:task/attitude/eMPL/inv_mpu.c ****     20756, 20963, 21173, 21385, 21598, 21814, 22033, 22253,
2298:task/attitude/eMPL/inv_mpu.c ****     22475, 22700, 22927, 23156, 23388, 23622, 23858, 24097,
2299:task/attitude/eMPL/inv_mpu.c ****     24338, 24581, 24827, 25075, 25326, 25579, 25835, 26093,
2300:task/attitude/eMPL/inv_mpu.c ****     26354, 26618, 26884, 27153, 27424, 27699, 27976, 28255,
2301:task/attitude/eMPL/inv_mpu.c ****     28538, 28823, 29112, 29403, 29697, 29994, 30294, 30597,
2302:task/attitude/eMPL/inv_mpu.c ****     30903, 31212, 31524, 31839, 32157, 32479, 32804, 33132};
2303:task/attitude/eMPL/inv_mpu.c **** static int accel_6500_self_test(long *bias_regular, long *bias_st, int debug)
2304:task/attitude/eMPL/inv_mpu.c **** {
2305:task/attitude/eMPL/inv_mpu.c ****     int i, result = 0, otp_value_zero = 0;
2306:task/attitude/eMPL/inv_mpu.c ****     float accel_st_al_min, accel_st_al_max;
2307:task/attitude/eMPL/inv_mpu.c ****     float st_shift_cust[3], st_shift_ratio[3], ct_shift_prod[3], accel_offset_max;
2308:task/attitude/eMPL/inv_mpu.c ****     unsigned char regs[3];
2309:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, REG_6500_XA_ST_DATA, 3, regs))
2310:task/attitude/eMPL/inv_mpu.c ****     {
2311:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2312:task/attitude/eMPL/inv_mpu.c ****             log_i("Reading OTP Register Error.\n");
2313:task/attitude/eMPL/inv_mpu.c ****         return 0x07;
2314:task/attitude/eMPL/inv_mpu.c ****     }
2315:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2316:task/attitude/eMPL/inv_mpu.c ****         log_i("Accel OTP:%d, %d, %d\n", regs[0], regs[1], regs[2]);
2317:task/attitude/eMPL/inv_mpu.c ****     for (i = 0; i < 3; i++)
2318:task/attitude/eMPL/inv_mpu.c ****     {
2319:task/attitude/eMPL/inv_mpu.c ****         if (regs[i] != 0)
2320:task/attitude/eMPL/inv_mpu.c ****         {
2321:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] = mpu_6500_st_tb[regs[i] - 1];
2322:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] *= 65536.f;
2323:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] /= test.accel_sens;
2324:task/attitude/eMPL/inv_mpu.c ****         }
2325:task/attitude/eMPL/inv_mpu.c ****         else
2326:task/attitude/eMPL/inv_mpu.c ****         {
2327:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] = 0;
2328:task/attitude/eMPL/inv_mpu.c ****             otp_value_zero = 1;
2329:task/attitude/eMPL/inv_mpu.c ****         }
2330:task/attitude/eMPL/inv_mpu.c ****     }
2331:task/attitude/eMPL/inv_mpu.c ****     if (otp_value_zero == 0)
2332:task/attitude/eMPL/inv_mpu.c ****     {
2333:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2334:task/attitude/eMPL/inv_mpu.c ****             log_i("ACCEL:CRITERIA A\n");
2335:task/attitude/eMPL/inv_mpu.c ****         for (i = 0; i < 3; i++)
2336:task/attitude/eMPL/inv_mpu.c ****         {
2337:task/attitude/eMPL/inv_mpu.c ****             st_shift_cust[i] = bias_st[i] - bias_regular[i];
2338:task/attitude/eMPL/inv_mpu.c ****             if (debug)
2339:task/attitude/eMPL/inv_mpu.c ****             {
2340:task/attitude/eMPL/inv_mpu.c ****                 log_i("Bias_Shift=%7.4f, Bias_Reg=%7.4f, Bias_HWST=%7.4f\r\n",
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 183


2341:task/attitude/eMPL/inv_mpu.c ****                       st_shift_cust[i] / 1.f, bias_regular[i] / 1.f,
2342:task/attitude/eMPL/inv_mpu.c ****                       bias_st[i] / 1.f);
2343:task/attitude/eMPL/inv_mpu.c ****                 log_i("OTP value: %7.4f\r\n", ct_shift_prod[i] / 1.f);
2344:task/attitude/eMPL/inv_mpu.c ****             }
2345:task/attitude/eMPL/inv_mpu.c **** 
2346:task/attitude/eMPL/inv_mpu.c ****             st_shift_ratio[i] = st_shift_cust[i] / ct_shift_prod[i] - 1.f;
2347:task/attitude/eMPL/inv_mpu.c **** 
2348:task/attitude/eMPL/inv_mpu.c ****             if (debug)
2349:task/attitude/eMPL/inv_mpu.c ****                 log_i("ratio=%7.4f, threshold=%7.4f\r\n", st_shift_ratio[i] / 1.f,
2350:task/attitude/eMPL/inv_mpu.c ****                       test.max_accel_var / 1.f);
2351:task/attitude/eMPL/inv_mpu.c **** 
2352:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_ratio[i]) > test.max_accel_var)
2353:task/attitude/eMPL/inv_mpu.c ****             {
2354:task/attitude/eMPL/inv_mpu.c ****                 if (debug)
2355:task/attitude/eMPL/inv_mpu.c ****                     log_i("ACCEL Fail Axis = %d\n", i);
2356:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << i; //Error condition
2357:task/attitude/eMPL/inv_mpu.c ****             }
2358:task/attitude/eMPL/inv_mpu.c ****         }
2359:task/attitude/eMPL/inv_mpu.c ****     }
2360:task/attitude/eMPL/inv_mpu.c ****     else
2361:task/attitude/eMPL/inv_mpu.c ****     {
2362:task/attitude/eMPL/inv_mpu.c ****         /* Self Test Pass/Fail Criteria B */
2363:task/attitude/eMPL/inv_mpu.c ****         accel_st_al_min = test.min_g * 65536.f;
2364:task/attitude/eMPL/inv_mpu.c ****         accel_st_al_max = test.max_g * 65536.f;
2365:task/attitude/eMPL/inv_mpu.c **** 
2366:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2367:task/attitude/eMPL/inv_mpu.c ****         {
2368:task/attitude/eMPL/inv_mpu.c ****             log_i("ACCEL:CRITERIA B\r\n");
2369:task/attitude/eMPL/inv_mpu.c ****             log_i("Min MG: %7.4f\r\n", accel_st_al_min / 1.f);
2370:task/attitude/eMPL/inv_mpu.c ****             log_i("Max MG: %7.4f\r\n", accel_st_al_max / 1.f);
2371:task/attitude/eMPL/inv_mpu.c ****         }
2372:task/attitude/eMPL/inv_mpu.c **** 
2373:task/attitude/eMPL/inv_mpu.c ****         for (i = 0; i < 3; i++)
2374:task/attitude/eMPL/inv_mpu.c ****         {
2375:task/attitude/eMPL/inv_mpu.c ****             st_shift_cust[i] = bias_st[i] - bias_regular[i];
2376:task/attitude/eMPL/inv_mpu.c **** 
2377:task/attitude/eMPL/inv_mpu.c ****             if (debug)
2378:task/attitude/eMPL/inv_mpu.c ****                 log_i("Bias_shift=%7.4f, st=%7.4f, reg=%7.4f\n", st_shift_cust[i] / 1.f, bias_st[i]
2379:task/attitude/eMPL/inv_mpu.c ****             if (st_shift_cust[i] < accel_st_al_min || st_shift_cust[i] > accel_st_al_max)
2380:task/attitude/eMPL/inv_mpu.c ****             {
2381:task/attitude/eMPL/inv_mpu.c ****                 if (debug)
2382:task/attitude/eMPL/inv_mpu.c ****                     log_i("Accel FAIL axis:%d <= 225mg or >= 675mg\n", i);
2383:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << i; //Error condition
2384:task/attitude/eMPL/inv_mpu.c ****             }
2385:task/attitude/eMPL/inv_mpu.c ****         }
2386:task/attitude/eMPL/inv_mpu.c ****     }
2387:task/attitude/eMPL/inv_mpu.c **** 
2388:task/attitude/eMPL/inv_mpu.c ****     if (result == 0)
2389:task/attitude/eMPL/inv_mpu.c ****     {
2390:task/attitude/eMPL/inv_mpu.c ****         /* Self Test Pass/Fail Criteria C */
2391:task/attitude/eMPL/inv_mpu.c ****         accel_offset_max = test.max_g_offset * 65536.f;
2392:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2393:task/attitude/eMPL/inv_mpu.c ****             log_i("Accel:CRITERIA C: bias less than %7.4f\n", accel_offset_max / 1.f);
2394:task/attitude/eMPL/inv_mpu.c ****         for (i = 0; i < 3; i++)
2395:task/attitude/eMPL/inv_mpu.c ****         {
2396:task/attitude/eMPL/inv_mpu.c ****             if (fabs(bias_regular[i]) > accel_offset_max)
2397:task/attitude/eMPL/inv_mpu.c ****             {
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 184


2398:task/attitude/eMPL/inv_mpu.c ****                 if (debug)
2399:task/attitude/eMPL/inv_mpu.c ****                     log_i("FAILED: Accel axis:%d = %ld > 500mg\n", i, bias_regular[i]);
2400:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << i; //Error condition
2401:task/attitude/eMPL/inv_mpu.c ****             }
2402:task/attitude/eMPL/inv_mpu.c ****         }
2403:task/attitude/eMPL/inv_mpu.c ****     }
2404:task/attitude/eMPL/inv_mpu.c **** 
2405:task/attitude/eMPL/inv_mpu.c ****     return result;
2406:task/attitude/eMPL/inv_mpu.c **** }
2407:task/attitude/eMPL/inv_mpu.c **** 
2408:task/attitude/eMPL/inv_mpu.c **** static int gyro_6500_self_test(long *bias_regular, long *bias_st, int debug)
2409:task/attitude/eMPL/inv_mpu.c **** {
2410:task/attitude/eMPL/inv_mpu.c ****     int i, result = 0, otp_value_zero = 0;
2411:task/attitude/eMPL/inv_mpu.c ****     float gyro_st_al_max;
2412:task/attitude/eMPL/inv_mpu.c ****     float st_shift_cust[3], st_shift_ratio[3], ct_shift_prod[3], gyro_offset_max;
2413:task/attitude/eMPL/inv_mpu.c ****     unsigned char regs[3];
2414:task/attitude/eMPL/inv_mpu.c **** 
2415:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, REG_6500_XG_ST_DATA, 3, regs))
2416:task/attitude/eMPL/inv_mpu.c ****     {
2417:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2418:task/attitude/eMPL/inv_mpu.c ****             log_i("Reading OTP Register Error.\n");
2419:task/attitude/eMPL/inv_mpu.c ****         return 0x07;
2420:task/attitude/eMPL/inv_mpu.c ****     }
2421:task/attitude/eMPL/inv_mpu.c **** 
2422:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2423:task/attitude/eMPL/inv_mpu.c ****         log_i("Gyro OTP:%d, %d, %d\r\n", regs[0], regs[1], regs[2]);
2424:task/attitude/eMPL/inv_mpu.c **** 
2425:task/attitude/eMPL/inv_mpu.c ****     for (i = 0; i < 3; i++)
2426:task/attitude/eMPL/inv_mpu.c ****     {
2427:task/attitude/eMPL/inv_mpu.c ****         if (regs[i] != 0)
2428:task/attitude/eMPL/inv_mpu.c ****         {
2429:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] = mpu_6500_st_tb[regs[i] - 1];
2430:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] *= 65536.f;
2431:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] /= test.gyro_sens;
2432:task/attitude/eMPL/inv_mpu.c ****         }
2433:task/attitude/eMPL/inv_mpu.c ****         else
2434:task/attitude/eMPL/inv_mpu.c ****         {
2435:task/attitude/eMPL/inv_mpu.c ****             ct_shift_prod[i] = 0;
2436:task/attitude/eMPL/inv_mpu.c ****             otp_value_zero = 1;
2437:task/attitude/eMPL/inv_mpu.c ****         }
2438:task/attitude/eMPL/inv_mpu.c ****     }
2439:task/attitude/eMPL/inv_mpu.c **** 
2440:task/attitude/eMPL/inv_mpu.c ****     if (otp_value_zero == 0)
2441:task/attitude/eMPL/inv_mpu.c ****     {
2442:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2443:task/attitude/eMPL/inv_mpu.c ****             log_i("GYRO:CRITERIA A\n");
2444:task/attitude/eMPL/inv_mpu.c ****         /* Self Test Pass/Fail Criteria A */
2445:task/attitude/eMPL/inv_mpu.c ****         for (i = 0; i < 3; i++)
2446:task/attitude/eMPL/inv_mpu.c ****         {
2447:task/attitude/eMPL/inv_mpu.c ****             st_shift_cust[i] = bias_st[i] - bias_regular[i];
2448:task/attitude/eMPL/inv_mpu.c **** 
2449:task/attitude/eMPL/inv_mpu.c ****             if (debug)
2450:task/attitude/eMPL/inv_mpu.c ****             {
2451:task/attitude/eMPL/inv_mpu.c ****                 log_i("Bias_Shift=%7.4f, Bias_Reg=%7.4f, Bias_HWST=%7.4f\r\n",
2452:task/attitude/eMPL/inv_mpu.c ****                       st_shift_cust[i] / 1.f, bias_regular[i] / 1.f,
2453:task/attitude/eMPL/inv_mpu.c ****                       bias_st[i] / 1.f);
2454:task/attitude/eMPL/inv_mpu.c ****                 log_i("OTP value: %7.4f\r\n", ct_shift_prod[i] / 1.f);
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 185


2455:task/attitude/eMPL/inv_mpu.c ****             }
2456:task/attitude/eMPL/inv_mpu.c **** 
2457:task/attitude/eMPL/inv_mpu.c ****             st_shift_ratio[i] = st_shift_cust[i] / ct_shift_prod[i];
2458:task/attitude/eMPL/inv_mpu.c **** 
2459:task/attitude/eMPL/inv_mpu.c ****             if (debug)
2460:task/attitude/eMPL/inv_mpu.c ****                 log_i("ratio=%7.4f, threshold=%7.4f\r\n", st_shift_ratio[i] / 1.f,
2461:task/attitude/eMPL/inv_mpu.c ****                       test.max_gyro_var / 1.f);
2462:task/attitude/eMPL/inv_mpu.c **** 
2463:task/attitude/eMPL/inv_mpu.c ****             if (fabs(st_shift_ratio[i]) < test.max_gyro_var)
2464:task/attitude/eMPL/inv_mpu.c ****             {
2465:task/attitude/eMPL/inv_mpu.c ****                 if (debug)
2466:task/attitude/eMPL/inv_mpu.c ****                     log_i("Gyro Fail Axis = %d\n", i);
2467:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << i; //Error condition
2468:task/attitude/eMPL/inv_mpu.c ****             }
2469:task/attitude/eMPL/inv_mpu.c ****         }
2470:task/attitude/eMPL/inv_mpu.c ****     }
2471:task/attitude/eMPL/inv_mpu.c ****     else
2472:task/attitude/eMPL/inv_mpu.c ****     {
2473:task/attitude/eMPL/inv_mpu.c ****         /* Self Test Pass/Fail Criteria B */
2474:task/attitude/eMPL/inv_mpu.c ****         gyro_st_al_max = test.max_dps * 65536.f;
2475:task/attitude/eMPL/inv_mpu.c **** 
2476:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2477:task/attitude/eMPL/inv_mpu.c ****         {
2478:task/attitude/eMPL/inv_mpu.c ****             log_i("GYRO:CRITERIA B\r\n");
2479:task/attitude/eMPL/inv_mpu.c ****             log_i("Max DPS: %7.4f\r\n", gyro_st_al_max / 1.f);
2480:task/attitude/eMPL/inv_mpu.c ****         }
2481:task/attitude/eMPL/inv_mpu.c **** 
2482:task/attitude/eMPL/inv_mpu.c ****         for (i = 0; i < 3; i++)
2483:task/attitude/eMPL/inv_mpu.c ****         {
2484:task/attitude/eMPL/inv_mpu.c ****             st_shift_cust[i] = bias_st[i] - bias_regular[i];
2485:task/attitude/eMPL/inv_mpu.c **** 
2486:task/attitude/eMPL/inv_mpu.c ****             if (debug)
2487:task/attitude/eMPL/inv_mpu.c ****                 log_i("Bias_shift=%7.4f, st=%7.4f, reg=%7.4f\n", st_shift_cust[i] / 1.f, bias_st[i]
2488:task/attitude/eMPL/inv_mpu.c ****             if (st_shift_cust[i] < gyro_st_al_max)
2489:task/attitude/eMPL/inv_mpu.c ****             {
2490:task/attitude/eMPL/inv_mpu.c ****                 if (debug)
2491:task/attitude/eMPL/inv_mpu.c ****                     log_i("GYRO FAIL axis:%d greater than 60dps\n", i);
2492:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << i; //Error condition
2493:task/attitude/eMPL/inv_mpu.c ****             }
2494:task/attitude/eMPL/inv_mpu.c ****         }
2495:task/attitude/eMPL/inv_mpu.c ****     }
2496:task/attitude/eMPL/inv_mpu.c **** 
2497:task/attitude/eMPL/inv_mpu.c ****     if (result == 0)
2498:task/attitude/eMPL/inv_mpu.c ****     {
2499:task/attitude/eMPL/inv_mpu.c ****         /* Self Test Pass/Fail Criteria C */
2500:task/attitude/eMPL/inv_mpu.c ****         gyro_offset_max = test.min_dps * 65536.f;
2501:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2502:task/attitude/eMPL/inv_mpu.c ****             log_i("Gyro:CRITERIA C: bias less than %7.4f\n", gyro_offset_max / 1.f);
2503:task/attitude/eMPL/inv_mpu.c ****         for (i = 0; i < 3; i++)
2504:task/attitude/eMPL/inv_mpu.c ****         {
2505:task/attitude/eMPL/inv_mpu.c ****             if (fabs(bias_regular[i]) > gyro_offset_max)
2506:task/attitude/eMPL/inv_mpu.c ****             {
2507:task/attitude/eMPL/inv_mpu.c ****                 if (debug)
2508:task/attitude/eMPL/inv_mpu.c ****                     log_i("FAILED: Gyro axis:%d = %ld > 20dps\n", i, bias_regular[i]);
2509:task/attitude/eMPL/inv_mpu.c ****                 result |= 1 << i; //Error condition
2510:task/attitude/eMPL/inv_mpu.c ****             }
2511:task/attitude/eMPL/inv_mpu.c ****         }
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 186


2512:task/attitude/eMPL/inv_mpu.c ****     }
2513:task/attitude/eMPL/inv_mpu.c ****     return result;
2514:task/attitude/eMPL/inv_mpu.c **** }
2515:task/attitude/eMPL/inv_mpu.c **** 
2516:task/attitude/eMPL/inv_mpu.c **** static int get_st_6500_biases(long *gyro, long *accel, unsigned char hw_test, int debug)
2517:task/attitude/eMPL/inv_mpu.c **** {
2518:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[HWST_MAX_PACKET_LENGTH];
2519:task/attitude/eMPL/inv_mpu.c ****     unsigned char packet_count, ii;
2520:task/attitude/eMPL/inv_mpu.c ****     unsigned short fifo_count;
2521:task/attitude/eMPL/inv_mpu.c ****     int s = 0, read_size = 0, ind;
2522:task/attitude/eMPL/inv_mpu.c **** 
2523:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0x01;
2524:task/attitude/eMPL/inv_mpu.c ****     data[1] = 0;
2525:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 2, data))
2526:task/attitude/eMPL/inv_mpu.c ****         return -1;
2527:task/attitude/eMPL/inv_mpu.c ****     delay_ms(200);
2528:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0;
2529:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->int_enable, 1, data))
2530:task/attitude/eMPL/inv_mpu.c ****         return -1;
2531:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
2532:task/attitude/eMPL/inv_mpu.c ****         return -1;
2533:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
2534:task/attitude/eMPL/inv_mpu.c ****         return -1;
2535:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
2536:task/attitude/eMPL/inv_mpu.c ****         return -1;
2537:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
2538:task/attitude/eMPL/inv_mpu.c ****         return -1;
2539:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_FIFO_RST | BIT_DMP_RST;
2540:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
2541:task/attitude/eMPL/inv_mpu.c ****         return -1;
2542:task/attitude/eMPL/inv_mpu.c ****     delay_ms(15);
2543:task/attitude/eMPL/inv_mpu.c ****     data[0] = st.test->reg_lpf;
2544:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->lpf, 1, data))
2545:task/attitude/eMPL/inv_mpu.c ****         return -1;
2546:task/attitude/eMPL/inv_mpu.c ****     data[0] = st.test->reg_rate_div;
2547:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->rate_div, 1, data))
2548:task/attitude/eMPL/inv_mpu.c ****         return -1;
2549:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
2550:task/attitude/eMPL/inv_mpu.c ****         data[0] = st.test->reg_gyro_fsr | 0xE0;
2551:task/attitude/eMPL/inv_mpu.c ****     else
2552:task/attitude/eMPL/inv_mpu.c ****         data[0] = st.test->reg_gyro_fsr;
2553:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->gyro_cfg, 1, data))
2554:task/attitude/eMPL/inv_mpu.c ****         return -1;
2555:task/attitude/eMPL/inv_mpu.c **** 
2556:task/attitude/eMPL/inv_mpu.c ****     if (hw_test)
2557:task/attitude/eMPL/inv_mpu.c ****         data[0] = st.test->reg_accel_fsr | 0xE0;
2558:task/attitude/eMPL/inv_mpu.c ****     else
2559:task/attitude/eMPL/inv_mpu.c ****         data[0] = test.reg_accel_fsr;
2560:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_cfg, 1, data))
2561:task/attitude/eMPL/inv_mpu.c ****         return -1;
2562:task/attitude/eMPL/inv_mpu.c **** 
2563:task/attitude/eMPL/inv_mpu.c ****     delay_ms(test.wait_ms); //wait 200ms for sensors to stabilize
2564:task/attitude/eMPL/inv_mpu.c **** 
2565:task/attitude/eMPL/inv_mpu.c ****     /* Enable FIFO */
2566:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_FIFO_EN;
2567:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->user_ctrl, 1, data))
2568:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 187


2569:task/attitude/eMPL/inv_mpu.c ****     data[0] = INV_XYZ_GYRO | INV_XYZ_ACCEL;
2570:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
2571:task/attitude/eMPL/inv_mpu.c ****         return -1;
2572:task/attitude/eMPL/inv_mpu.c **** 
2573:task/attitude/eMPL/inv_mpu.c ****     //initialize the bias return values
2574:task/attitude/eMPL/inv_mpu.c ****     gyro[0] = gyro[1] = gyro[2] = 0;
2575:task/attitude/eMPL/inv_mpu.c ****     accel[0] = accel[1] = accel[2] = 0;
2576:task/attitude/eMPL/inv_mpu.c **** 
2577:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2578:task/attitude/eMPL/inv_mpu.c ****         log_i("Starting Bias Loop Reads\n");
2579:task/attitude/eMPL/inv_mpu.c **** 
2580:task/attitude/eMPL/inv_mpu.c ****     //start reading samples
2581:task/attitude/eMPL/inv_mpu.c ****     while (s < test.packet_thresh)
2582:task/attitude/eMPL/inv_mpu.c ****     {
2583:task/attitude/eMPL/inv_mpu.c ****         delay_ms(test.sample_wait_ms); //wait 10ms to fill FIFO
2584:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->fifo_count_h, 2, data))
2585:task/attitude/eMPL/inv_mpu.c ****             return -1;
2586:task/attitude/eMPL/inv_mpu.c ****         fifo_count = (data[0] << 8) | data[1];
2587:task/attitude/eMPL/inv_mpu.c ****         packet_count = fifo_count / MAX_PACKET_LENGTH;
2588:task/attitude/eMPL/inv_mpu.c ****         if ((test.packet_thresh - s) < packet_count)
2589:task/attitude/eMPL/inv_mpu.c ****             packet_count = test.packet_thresh - s;
2590:task/attitude/eMPL/inv_mpu.c ****         read_size = packet_count * MAX_PACKET_LENGTH;
2591:task/attitude/eMPL/inv_mpu.c **** 
2592:task/attitude/eMPL/inv_mpu.c ****         //burst read from FIFO
2593:task/attitude/eMPL/inv_mpu.c ****         if (i2c_read(st.hw->addr, st.reg->fifo_r_w, read_size, data))
2594:task/attitude/eMPL/inv_mpu.c ****             return -1;
2595:task/attitude/eMPL/inv_mpu.c ****         ind = 0;
2596:task/attitude/eMPL/inv_mpu.c ****         for (ii = 0; ii < packet_count; ii++)
2597:task/attitude/eMPL/inv_mpu.c ****         {
2598:task/attitude/eMPL/inv_mpu.c ****             short accel_cur[3], gyro_cur[3];
2599:task/attitude/eMPL/inv_mpu.c ****             accel_cur[0] = ((short)data[ind + 0] << 8) | data[ind + 1];
2600:task/attitude/eMPL/inv_mpu.c ****             accel_cur[1] = ((short)data[ind + 2] << 8) | data[ind + 3];
2601:task/attitude/eMPL/inv_mpu.c ****             accel_cur[2] = ((short)data[ind + 4] << 8) | data[ind + 5];
2602:task/attitude/eMPL/inv_mpu.c ****             accel[0] += (long)accel_cur[0];
2603:task/attitude/eMPL/inv_mpu.c ****             accel[1] += (long)accel_cur[1];
2604:task/attitude/eMPL/inv_mpu.c ****             accel[2] += (long)accel_cur[2];
2605:task/attitude/eMPL/inv_mpu.c ****             gyro_cur[0] = (((short)data[ind + 6] << 8) | data[ind + 7]);
2606:task/attitude/eMPL/inv_mpu.c ****             gyro_cur[1] = (((short)data[ind + 8] << 8) | data[ind + 9]);
2607:task/attitude/eMPL/inv_mpu.c ****             gyro_cur[2] = (((short)data[ind + 10] << 8) | data[ind + 11]);
2608:task/attitude/eMPL/inv_mpu.c ****             gyro[0] += (long)gyro_cur[0];
2609:task/attitude/eMPL/inv_mpu.c ****             gyro[1] += (long)gyro_cur[1];
2610:task/attitude/eMPL/inv_mpu.c ****             gyro[2] += (long)gyro_cur[2];
2611:task/attitude/eMPL/inv_mpu.c ****             ind += MAX_PACKET_LENGTH;
2612:task/attitude/eMPL/inv_mpu.c ****         }
2613:task/attitude/eMPL/inv_mpu.c ****         s += packet_count;
2614:task/attitude/eMPL/inv_mpu.c ****     }
2615:task/attitude/eMPL/inv_mpu.c **** 
2616:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2617:task/attitude/eMPL/inv_mpu.c ****         log_i("Samples: %d\n", s);
2618:task/attitude/eMPL/inv_mpu.c **** 
2619:task/attitude/eMPL/inv_mpu.c ****     //stop FIFO
2620:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0;
2621:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->fifo_en, 1, data))
2622:task/attitude/eMPL/inv_mpu.c ****         return -1;
2623:task/attitude/eMPL/inv_mpu.c **** 
2624:task/attitude/eMPL/inv_mpu.c ****     gyro[0] = (long)(((long long)gyro[0] << 16) / test.gyro_sens / s);
2625:task/attitude/eMPL/inv_mpu.c ****     gyro[1] = (long)(((long long)gyro[1] << 16) / test.gyro_sens / s);
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 188


2626:task/attitude/eMPL/inv_mpu.c ****     gyro[2] = (long)(((long long)gyro[2] << 16) / test.gyro_sens / s);
2627:task/attitude/eMPL/inv_mpu.c ****     accel[0] = (long)(((long long)accel[0] << 16) / test.accel_sens / s);
2628:task/attitude/eMPL/inv_mpu.c ****     accel[1] = (long)(((long long)accel[1] << 16) / test.accel_sens / s);
2629:task/attitude/eMPL/inv_mpu.c ****     accel[2] = (long)(((long long)accel[2] << 16) / test.accel_sens / s);
2630:task/attitude/eMPL/inv_mpu.c ****     /* remove gravity from bias calculation */
2631:task/attitude/eMPL/inv_mpu.c ****     if (accel[2] > 0L)
2632:task/attitude/eMPL/inv_mpu.c ****         accel[2] -= 65536L;
2633:task/attitude/eMPL/inv_mpu.c ****     else
2634:task/attitude/eMPL/inv_mpu.c ****         accel[2] += 65536L;
2635:task/attitude/eMPL/inv_mpu.c **** 
2636:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2637:task/attitude/eMPL/inv_mpu.c ****     {
2638:task/attitude/eMPL/inv_mpu.c ****         log_i("Accel offset data HWST bit=%d: %7.4f %7.4f %7.4f\r\n", hw_test, accel[0] / 65536.f, 
2639:task/attitude/eMPL/inv_mpu.c ****         log_i("Gyro offset data HWST bit=%d: %7.4f %7.4f %7.4f\r\n", hw_test, gyro[0] / 65536.f, gy
2640:task/attitude/eMPL/inv_mpu.c ****     }
2641:task/attitude/eMPL/inv_mpu.c **** 
2642:task/attitude/eMPL/inv_mpu.c ****     return 0;
2643:task/attitude/eMPL/inv_mpu.c **** }
2644:task/attitude/eMPL/inv_mpu.c **** /**
2645:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Trigger gyro/accel/compass self-test for MPU6500/MPU9250
2646:task/attitude/eMPL/inv_mpu.c ****  *  On success/error, the self-test returns a mask representing the sensor(s)
2647:task/attitude/eMPL/inv_mpu.c ****  *  that failed. For each bit, a one (1) represents a "pass" case; conversely,
2648:task/attitude/eMPL/inv_mpu.c ****  *  a zero (0) indicates a failure.
2649:task/attitude/eMPL/inv_mpu.c ****  *
2650:task/attitude/eMPL/inv_mpu.c ****  *  \n The mask is defined as follows:
2651:task/attitude/eMPL/inv_mpu.c ****  *  \n Bit 0:   Gyro.
2652:task/attitude/eMPL/inv_mpu.c ****  *  \n Bit 1:   Accel.
2653:task/attitude/eMPL/inv_mpu.c ****  *  \n Bit 2:   Compass.
2654:task/attitude/eMPL/inv_mpu.c ****  *
2655:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] gyro        Gyro biases in q16 format.
2656:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] accel       Accel biases (if applicable) in q16 format.
2657:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  debug       Debug flag used to print out more detailed logs. Must first set up logg
2658:task/attitude/eMPL/inv_mpu.c ****  *  @return     Result mask (see above).
2659:task/attitude/eMPL/inv_mpu.c ****  */
2660:task/attitude/eMPL/inv_mpu.c **** int mpu_run_6500_self_test(long *gyro, long *accel, unsigned char debug)
2661:task/attitude/eMPL/inv_mpu.c **** {
2662:task/attitude/eMPL/inv_mpu.c ****     const unsigned char tries = 2;
2663:task/attitude/eMPL/inv_mpu.c ****     long gyro_st[3], accel_st[3];
2664:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_result, gyro_result;
2665:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2666:task/attitude/eMPL/inv_mpu.c ****     unsigned char compass_result;
2667:task/attitude/eMPL/inv_mpu.c **** #endif
2668:task/attitude/eMPL/inv_mpu.c ****     int ii;
2669:task/attitude/eMPL/inv_mpu.c **** 
2670:task/attitude/eMPL/inv_mpu.c ****     int result;
2671:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_fsr, fifo_sensors, sensors_on;
2672:task/attitude/eMPL/inv_mpu.c ****     unsigned short gyro_fsr, sample_rate, lpf;
2673:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_was_on;
2674:task/attitude/eMPL/inv_mpu.c **** 
2675:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2676:task/attitude/eMPL/inv_mpu.c ****         log_i("Starting MPU6500 HWST!\r\n");
2677:task/attitude/eMPL/inv_mpu.c **** 
2678:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
2679:task/attitude/eMPL/inv_mpu.c ****     {
2680:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(0);
2681:task/attitude/eMPL/inv_mpu.c ****         dmp_was_on = 1;
2682:task/attitude/eMPL/inv_mpu.c ****     }
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 189


2683:task/attitude/eMPL/inv_mpu.c ****     else
2684:task/attitude/eMPL/inv_mpu.c ****         dmp_was_on = 0;
2685:task/attitude/eMPL/inv_mpu.c **** 
2686:task/attitude/eMPL/inv_mpu.c ****     /* Get initial settings. */
2687:task/attitude/eMPL/inv_mpu.c ****     mpu_get_gyro_fsr(&gyro_fsr);
2688:task/attitude/eMPL/inv_mpu.c ****     mpu_get_accel_fsr(&accel_fsr);
2689:task/attitude/eMPL/inv_mpu.c ****     mpu_get_lpf(&lpf);
2690:task/attitude/eMPL/inv_mpu.c ****     mpu_get_sample_rate(&sample_rate);
2691:task/attitude/eMPL/inv_mpu.c ****     sensors_on = st.chip_cfg.sensors;
2692:task/attitude/eMPL/inv_mpu.c ****     mpu_get_fifo_config(&fifo_sensors);
2693:task/attitude/eMPL/inv_mpu.c **** 
2694:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2695:task/attitude/eMPL/inv_mpu.c ****         log_i("Retrieving Biases\r\n");
2696:task/attitude/eMPL/inv_mpu.c **** 
2697:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < tries; ii++)
2698:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_6500_biases(gyro, accel, 0, debug))
2699:task/attitude/eMPL/inv_mpu.c ****             break;
2700:task/attitude/eMPL/inv_mpu.c ****     if (ii == tries)
2701:task/attitude/eMPL/inv_mpu.c ****     {
2702:task/attitude/eMPL/inv_mpu.c ****         /* If we reach this point, we most likely encountered an I2C error.
2703:task/attitude/eMPL/inv_mpu.c ****          * We'll just report an error for all three sensors.
2704:task/attitude/eMPL/inv_mpu.c ****          */
2705:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2706:task/attitude/eMPL/inv_mpu.c ****             log_i("Retrieving Biases Error - possible I2C error\n");
2707:task/attitude/eMPL/inv_mpu.c **** 
2708:task/attitude/eMPL/inv_mpu.c ****         result = 0;
2709:task/attitude/eMPL/inv_mpu.c ****         goto restore;
2710:task/attitude/eMPL/inv_mpu.c ****     }
2711:task/attitude/eMPL/inv_mpu.c **** 
2712:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2713:task/attitude/eMPL/inv_mpu.c ****         log_i("Retrieving ST Biases\n");
2714:task/attitude/eMPL/inv_mpu.c **** 
2715:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < tries; ii++)
2716:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_6500_biases(gyro_st, accel_st, 1, debug))
2717:task/attitude/eMPL/inv_mpu.c ****             break;
2718:task/attitude/eMPL/inv_mpu.c ****     if (ii == tries)
2719:task/attitude/eMPL/inv_mpu.c ****     {
2720:task/attitude/eMPL/inv_mpu.c **** 
2721:task/attitude/eMPL/inv_mpu.c ****         if (debug)
2722:task/attitude/eMPL/inv_mpu.c ****             log_i("Retrieving ST Biases Error - possible I2C error\n");
2723:task/attitude/eMPL/inv_mpu.c **** 
2724:task/attitude/eMPL/inv_mpu.c ****         /* Again, probably an I2C error. */
2725:task/attitude/eMPL/inv_mpu.c ****         result = 0;
2726:task/attitude/eMPL/inv_mpu.c ****         goto restore;
2727:task/attitude/eMPL/inv_mpu.c ****     }
2728:task/attitude/eMPL/inv_mpu.c **** 
2729:task/attitude/eMPL/inv_mpu.c ****     accel_result = accel_6500_self_test(accel, accel_st, debug);
2730:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2731:task/attitude/eMPL/inv_mpu.c ****         log_i("Accel Self Test Results: %d\n", accel_result);
2732:task/attitude/eMPL/inv_mpu.c **** 
2733:task/attitude/eMPL/inv_mpu.c ****     gyro_result = gyro_6500_self_test(gyro, gyro_st, debug);
2734:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2735:task/attitude/eMPL/inv_mpu.c ****         log_i("Gyro Self Test Results: %d\n", gyro_result);
2736:task/attitude/eMPL/inv_mpu.c **** 
2737:task/attitude/eMPL/inv_mpu.c ****     result = 0;
2738:task/attitude/eMPL/inv_mpu.c ****     if (!gyro_result)
2739:task/attitude/eMPL/inv_mpu.c ****         result |= 0x01;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 190


2740:task/attitude/eMPL/inv_mpu.c ****     if (!accel_result)
2741:task/attitude/eMPL/inv_mpu.c ****         result |= 0x02;
2742:task/attitude/eMPL/inv_mpu.c **** 
2743:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2744:task/attitude/eMPL/inv_mpu.c ****     compass_result = compass_self_test();
2745:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2746:task/attitude/eMPL/inv_mpu.c ****         log_i("Compass Self Test Results: %d\n", compass_result);
2747:task/attitude/eMPL/inv_mpu.c ****     if (!compass_result)
2748:task/attitude/eMPL/inv_mpu.c ****         result |= 0x04;
2749:task/attitude/eMPL/inv_mpu.c **** #else
2750:task/attitude/eMPL/inv_mpu.c ****     result |= 0x04;
2751:task/attitude/eMPL/inv_mpu.c **** #endif
2752:task/attitude/eMPL/inv_mpu.c **** restore:
2753:task/attitude/eMPL/inv_mpu.c ****     if (debug)
2754:task/attitude/eMPL/inv_mpu.c ****         log_i("Exiting HWST\n");
2755:task/attitude/eMPL/inv_mpu.c ****     /* Set to invalid values to ensure no I2C writes are skipped. */
2756:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = 0xFF;
2757:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
2758:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
2759:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
2760:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = 0xFF;
2761:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
2762:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = INV_CLK_PLL;
2763:task/attitude/eMPL/inv_mpu.c ****     mpu_set_gyro_fsr(gyro_fsr);
2764:task/attitude/eMPL/inv_mpu.c ****     mpu_set_accel_fsr(accel_fsr);
2765:task/attitude/eMPL/inv_mpu.c ****     mpu_set_lpf(lpf);
2766:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sample_rate(sample_rate);
2767:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sensors(sensors_on);
2768:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(fifo_sensors);
2769:task/attitude/eMPL/inv_mpu.c **** 
2770:task/attitude/eMPL/inv_mpu.c ****     if (dmp_was_on)
2771:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(1);
2772:task/attitude/eMPL/inv_mpu.c **** 
2773:task/attitude/eMPL/inv_mpu.c ****     return result;
2774:task/attitude/eMPL/inv_mpu.c **** }
2775:task/attitude/eMPL/inv_mpu.c **** #endif
2776:task/attitude/eMPL/inv_mpu.c **** /*
2777:task/attitude/eMPL/inv_mpu.c ****  *  \n This function must be called with the device either face-up or face-down
2778:task/attitude/eMPL/inv_mpu.c ****  *  (z-axis is parallel to gravity).
2779:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] gyro        Gyro biases in q16 format.
2780:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] accel       Accel biases (if applicable) in q16 format.
2781:task/attitude/eMPL/inv_mpu.c ****  *  @return     Result mask (see above).
2782:task/attitude/eMPL/inv_mpu.c ****  */
2783:task/attitude/eMPL/inv_mpu.c **** int mpu_run_self_test(long *gyro, long *accel)
2784:task/attitude/eMPL/inv_mpu.c **** {
2785:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6050
2786:task/attitude/eMPL/inv_mpu.c ****     const unsigned char tries = 2;
2787:task/attitude/eMPL/inv_mpu.c ****     long gyro_st[3], accel_st[3];
2788:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_result, gyro_result;
2789:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2790:task/attitude/eMPL/inv_mpu.c ****     unsigned char compass_result;
2791:task/attitude/eMPL/inv_mpu.c **** #endif
2792:task/attitude/eMPL/inv_mpu.c ****     int ii;
2793:task/attitude/eMPL/inv_mpu.c **** #endif
2794:task/attitude/eMPL/inv_mpu.c ****     int result;
2795:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_fsr, fifo_sensors, sensors_on;
2796:task/attitude/eMPL/inv_mpu.c ****     unsigned short gyro_fsr, sample_rate, lpf;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 191


2797:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_was_on;
2798:task/attitude/eMPL/inv_mpu.c **** 
2799:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on)
2800:task/attitude/eMPL/inv_mpu.c ****     {
2801:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(0);
2802:task/attitude/eMPL/inv_mpu.c ****         dmp_was_on = 1;
2803:task/attitude/eMPL/inv_mpu.c ****     }
2804:task/attitude/eMPL/inv_mpu.c ****     else
2805:task/attitude/eMPL/inv_mpu.c ****         dmp_was_on = 0;
2806:task/attitude/eMPL/inv_mpu.c **** 
2807:task/attitude/eMPL/inv_mpu.c ****     /* Get initial settings. */
2808:task/attitude/eMPL/inv_mpu.c ****     mpu_get_gyro_fsr(&gyro_fsr);
2809:task/attitude/eMPL/inv_mpu.c ****     mpu_get_accel_fsr(&accel_fsr);
2810:task/attitude/eMPL/inv_mpu.c ****     mpu_get_lpf(&lpf);
2811:task/attitude/eMPL/inv_mpu.c ****     mpu_get_sample_rate(&sample_rate);
2812:task/attitude/eMPL/inv_mpu.c ****     sensors_on = st.chip_cfg.sensors;
2813:task/attitude/eMPL/inv_mpu.c ****     mpu_get_fifo_config(&fifo_sensors);
2814:task/attitude/eMPL/inv_mpu.c **** 
2815:task/attitude/eMPL/inv_mpu.c ****     /* For older chips, the self-test will be different. */
2816:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6050
2817:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < tries; ii++)
2818:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
2819:task/attitude/eMPL/inv_mpu.c ****             break;
2820:task/attitude/eMPL/inv_mpu.c ****     if (ii == tries)
2821:task/attitude/eMPL/inv_mpu.c ****     {
2822:task/attitude/eMPL/inv_mpu.c ****         /* If we reach this point, we most likely encountered an I2C error.
2823:task/attitude/eMPL/inv_mpu.c ****          * We'll just report an error for all three sensors.
2824:task/attitude/eMPL/inv_mpu.c ****          */
2825:task/attitude/eMPL/inv_mpu.c ****         result = 0;
2826:task/attitude/eMPL/inv_mpu.c ****         goto restore;
2827:task/attitude/eMPL/inv_mpu.c ****     }
2828:task/attitude/eMPL/inv_mpu.c ****     for (ii = 0; ii < tries; ii++)
2829:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
2830:task/attitude/eMPL/inv_mpu.c ****             break;
2831:task/attitude/eMPL/inv_mpu.c ****     if (ii == tries)
2832:task/attitude/eMPL/inv_mpu.c ****     {
2833:task/attitude/eMPL/inv_mpu.c ****         /* Again, probably an I2C error. */
2834:task/attitude/eMPL/inv_mpu.c ****         result = 0;
2835:task/attitude/eMPL/inv_mpu.c ****         goto restore;
2836:task/attitude/eMPL/inv_mpu.c ****     }
2837:task/attitude/eMPL/inv_mpu.c ****     accel_result = accel_self_test(accel, accel_st);
2838:task/attitude/eMPL/inv_mpu.c ****     gyro_result = gyro_self_test(gyro, gyro_st);
2839:task/attitude/eMPL/inv_mpu.c **** 
2840:task/attitude/eMPL/inv_mpu.c ****     result = 0;
2841:task/attitude/eMPL/inv_mpu.c ****     if (!gyro_result)
2842:task/attitude/eMPL/inv_mpu.c ****         result |= 0x01;
2843:task/attitude/eMPL/inv_mpu.c ****     if (!accel_result)
2844:task/attitude/eMPL/inv_mpu.c ****         result |= 0x02;
2845:task/attitude/eMPL/inv_mpu.c **** 
2846:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
2847:task/attitude/eMPL/inv_mpu.c ****     compass_result = compass_self_test();
2848:task/attitude/eMPL/inv_mpu.c ****     if (!compass_result)
2849:task/attitude/eMPL/inv_mpu.c ****         result |= 0x04;
2850:task/attitude/eMPL/inv_mpu.c **** #else
2851:task/attitude/eMPL/inv_mpu.c ****     result |= 0x04;
2852:task/attitude/eMPL/inv_mpu.c **** #endif
2853:task/attitude/eMPL/inv_mpu.c **** restore:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 192


2854:task/attitude/eMPL/inv_mpu.c **** #elif defined MPU6500
2855:task/attitude/eMPL/inv_mpu.c ****     /* For now, this function will return a "pass" result for all three sensors
2856:task/attitude/eMPL/inv_mpu.c ****      * for compatibility with current test applications.
2857:task/attitude/eMPL/inv_mpu.c ****      */
2858:task/attitude/eMPL/inv_mpu.c ****     get_st_biases(gyro, accel, 0);
2859:task/attitude/eMPL/inv_mpu.c ****     result = 0x7;
2860:task/attitude/eMPL/inv_mpu.c **** #endif
2861:task/attitude/eMPL/inv_mpu.c ****     /* Set to invalid values to ensure no I2C writes are skipped. */
2862:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = 0xFF;
2863:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
2864:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
2865:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
2866:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = 0xFF;
2867:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
2868:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = INV_CLK_PLL;
2869:task/attitude/eMPL/inv_mpu.c ****     mpu_set_gyro_fsr(gyro_fsr);
2870:task/attitude/eMPL/inv_mpu.c ****     mpu_set_accel_fsr(accel_fsr);
2871:task/attitude/eMPL/inv_mpu.c ****     mpu_set_lpf(lpf);
2872:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sample_rate(sample_rate);
2873:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sensors(sensors_on);
2874:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(fifo_sensors);
2875:task/attitude/eMPL/inv_mpu.c **** 
2876:task/attitude/eMPL/inv_mpu.c ****     if (dmp_was_on)
2877:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(1);
2878:task/attitude/eMPL/inv_mpu.c **** 
2879:task/attitude/eMPL/inv_mpu.c ****     return result;
2880:task/attitude/eMPL/inv_mpu.c **** }
2881:task/attitude/eMPL/inv_mpu.c **** 
2882:task/attitude/eMPL/inv_mpu.c **** /**
2883:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Write to the DMP memory.
2884:task/attitude/eMPL/inv_mpu.c ****  *  This function prevents I2C writes past the bank boundaries. The DMP memory
2885:task/attitude/eMPL/inv_mpu.c ****  *  is only accessible when the chip is awake.
2886:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  mem_addr    Memory location (bank << 8 | start address)
2887:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  length      Number of bytes to write.
2888:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  data        Bytes to write to memory.
2889:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
2890:task/attitude/eMPL/inv_mpu.c ****  */
2891:task/attitude/eMPL/inv_mpu.c **** int mpu_write_mem(unsigned short mem_addr, unsigned short length,
2892:task/attitude/eMPL/inv_mpu.c ****                   unsigned char *data)
2893:task/attitude/eMPL/inv_mpu.c **** {
 6500              		.loc 1 2893 1 is_stmt 1 view -0
 6501              		.cfi_startproc
 6502              		@ args = 0, pretend = 0, frame = 8
 6503              		@ frame_needed = 0, uses_anonymous_args = 0
2894:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 6504              		.loc 1 2894 5 view .LVU1927
2895:task/attitude/eMPL/inv_mpu.c **** 
2896:task/attitude/eMPL/inv_mpu.c ****     if (!data)
 6505              		.loc 1 2896 5 view .LVU1928
 6506              		.loc 1 2896 8 is_stmt 0 view .LVU1929
 6507 0000 3AB3     		cbz	r2, .L517
2893:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 6508              		.loc 1 2893 1 view .LVU1930
 6509 0002 70B5     		push	{r4, r5, r6, lr}
 6510              	.LCFI126:
 6511              		.cfi_def_cfa_offset 16
 6512              		.cfi_offset 4, -16
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 193


 6513              		.cfi_offset 5, -12
 6514              		.cfi_offset 6, -8
 6515              		.cfi_offset 14, -4
 6516 0004 82B0     		sub	sp, sp, #8
 6517              	.LCFI127:
 6518              		.cfi_def_cfa_offset 24
 6519 0006 0C46     		mov	r4, r1
 6520 0008 1646     		mov	r6, r2
2897:task/attitude/eMPL/inv_mpu.c ****         return -1;
2898:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 6521              		.loc 1 2898 5 is_stmt 1 view .LVU1931
 6522              		.loc 1 2898 21 is_stmt 0 view .LVU1932
 6523 000a 194B     		ldr	r3, .L527
 6524 000c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 6525              		.loc 1 2898 8 view .LVU1933
 6526 000e 1BB3     		cbz	r3, .L518
2899:task/attitude/eMPL/inv_mpu.c ****         return -1;
2900:task/attitude/eMPL/inv_mpu.c **** 
2901:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = (unsigned char)(mem_addr >> 8);
 6527              		.loc 1 2901 5 is_stmt 1 view .LVU1934
 6528              		.loc 1 2901 14 is_stmt 0 view .LVU1935
 6529 0010 030A     		lsrs	r3, r0, #8
 6530              		.loc 1 2901 12 view .LVU1936
 6531 0012 8DF80430 		strb	r3, [sp, #4]
2902:task/attitude/eMPL/inv_mpu.c ****     tmp[1] = (unsigned char)(mem_addr & 0xFF);
 6532              		.loc 1 2902 5 is_stmt 1 view .LVU1937
 6533              		.loc 1 2902 14 is_stmt 0 view .LVU1938
 6534 0016 C0B2     		uxtb	r0, r0
 6535              	.LVL405:
 6536              		.loc 1 2902 12 view .LVU1939
 6537 0018 8DF80500 		strb	r0, [sp, #5]
2903:task/attitude/eMPL/inv_mpu.c **** 
2904:task/attitude/eMPL/inv_mpu.c ****     /* Check bank boundaries. */
2905:task/attitude/eMPL/inv_mpu.c ****     if (tmp[1] + length > st.hw->bank_size)
 6538              		.loc 1 2905 5 is_stmt 1 view .LVU1940
 6539              		.loc 1 2905 16 is_stmt 0 view .LVU1941
 6540 001c 0844     		add	r0, r0, r1
 6541              		.loc 1 2905 29 view .LVU1942
 6542 001e 144B     		ldr	r3, .L527
 6543 0020 5D68     		ldr	r5, [r3, #4]
 6544              		.loc 1 2905 32 view .LVU1943
 6545 0022 6B89     		ldrh	r3, [r5, #10]
 6546              		.loc 1 2905 8 view .LVU1944
 6547 0024 9842     		cmp	r0, r3
 6548 0026 1ADC     		bgt	.L519
2906:task/attitude/eMPL/inv_mpu.c ****         return -1;
2907:task/attitude/eMPL/inv_mpu.c **** 
2908:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->bank_sel, 2, tmp))
 6549              		.loc 1 2908 5 is_stmt 1 view .LVU1945
 6550              		.loc 1 2908 34 is_stmt 0 view .LVU1946
 6551 0028 114B     		ldr	r3, .L527
 6552 002a 1968     		ldr	r1, [r3]
 6553              	.LVL406:
 6554              		.loc 1 2908 9 view .LVU1947
 6555 002c 01AB     		add	r3, sp, #4
 6556 002e 0222     		movs	r2, #2
 6557              	.LVL407:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 194


 6558              		.loc 1 2908 9 view .LVU1948
 6559 0030 C97E     		ldrb	r1, [r1, #27]	@ zero_extendqisi2
 6560 0032 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 6561 0034 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6562              	.LVL408:
 6563              		.loc 1 2908 8 view .LVU1949
 6564 0038 A0B9     		cbnz	r0, .L520
2909:task/attitude/eMPL/inv_mpu.c ****         return -1;
2910:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->mem_r_w, length, data))
 6565              		.loc 1 2910 5 is_stmt 1 view .LVU1950
 6566              		.loc 1 2910 21 is_stmt 0 view .LVU1951
 6567 003a 0D4B     		ldr	r3, .L527
 6568 003c 5868     		ldr	r0, [r3, #4]
 6569              		.loc 1 2910 34 view .LVU1952
 6570 003e 1968     		ldr	r1, [r3]
 6571              		.loc 1 2910 9 view .LVU1953
 6572 0040 3346     		mov	r3, r6
 6573 0042 2246     		mov	r2, r4
 6574 0044 097E     		ldrb	r1, [r1, #24]	@ zero_extendqisi2
 6575 0046 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6576 0048 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6577              	.LVL409:
 6578              		.loc 1 2910 8 view .LVU1954
 6579 004c 68B9     		cbnz	r0, .L526
 6580              	.L515:
2911:task/attitude/eMPL/inv_mpu.c ****         return -1;
2912:task/attitude/eMPL/inv_mpu.c ****     return 0;
2913:task/attitude/eMPL/inv_mpu.c **** }
 6581              		.loc 1 2913 1 view .LVU1955
 6582 004e 02B0     		add	sp, sp, #8
 6583              	.LCFI128:
 6584              		.cfi_def_cfa_offset 16
 6585              		@ sp needed
 6586 0050 70BD     		pop	{r4, r5, r6, pc}
 6587              	.LVL410:
 6588              	.L517:
 6589              	.LCFI129:
 6590              		.cfi_def_cfa_offset 0
 6591              		.cfi_restore 4
 6592              		.cfi_restore 5
 6593              		.cfi_restore 6
 6594              		.cfi_restore 14
2897:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 6595              		.loc 1 2897 16 view .LVU1956
 6596 0052 4FF0FF30 		mov	r0, #-1
 6597              	.LVL411:
 6598              		.loc 1 2913 1 view .LVU1957
 6599 0056 7047     		bx	lr
 6600              	.LVL412:
 6601              	.L518:
 6602              	.LCFI130:
 6603              		.cfi_def_cfa_offset 24
 6604              		.cfi_offset 4, -16
 6605              		.cfi_offset 5, -12
 6606              		.cfi_offset 6, -8
 6607              		.cfi_offset 14, -4
2899:task/attitude/eMPL/inv_mpu.c **** 
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 195


 6608              		.loc 1 2899 16 view .LVU1958
 6609 0058 4FF0FF30 		mov	r0, #-1
 6610              	.LVL413:
2899:task/attitude/eMPL/inv_mpu.c **** 
 6611              		.loc 1 2899 16 view .LVU1959
 6612 005c F7E7     		b	.L515
 6613              	.L519:
2906:task/attitude/eMPL/inv_mpu.c **** 
 6614              		.loc 1 2906 16 view .LVU1960
 6615 005e 4FF0FF30 		mov	r0, #-1
 6616 0062 F4E7     		b	.L515
 6617              	.LVL414:
 6618              	.L520:
2909:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->mem_r_w, length, data))
 6619              		.loc 1 2909 16 view .LVU1961
 6620 0064 4FF0FF30 		mov	r0, #-1
 6621 0068 F1E7     		b	.L515
 6622              	.L526:
2911:task/attitude/eMPL/inv_mpu.c ****     return 0;
 6623              		.loc 1 2911 16 view .LVU1962
 6624 006a 4FF0FF30 		mov	r0, #-1
 6625 006e EEE7     		b	.L515
 6626              	.L528:
 6627              		.align	2
 6628              	.L527:
 6629 0070 00000000 		.word	.LANCHOR0
 6630              		.cfi_endproc
 6631              	.LFE190:
 6633              		.section	.text.mpu_read_mem,"ax",%progbits
 6634              		.align	1
 6635              		.global	mpu_read_mem
 6636              		.syntax unified
 6637              		.thumb
 6638              		.thumb_func
 6639              		.fpu fpv5-d16
 6641              	mpu_read_mem:
 6642              	.LVL415:
 6643              	.LFB191:
2914:task/attitude/eMPL/inv_mpu.c **** 
2915:task/attitude/eMPL/inv_mpu.c **** /**
2916:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read from the DMP memory.
2917:task/attitude/eMPL/inv_mpu.c ****  *  This function prevents I2C reads past the bank boundaries. The DMP memory
2918:task/attitude/eMPL/inv_mpu.c ****  *  is only accessible when the chip is awake.
2919:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  mem_addr    Memory location (bank << 8 | start address)
2920:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  length      Number of bytes to read.
2921:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] data        Bytes read from memory.
2922:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
2923:task/attitude/eMPL/inv_mpu.c ****  */
2924:task/attitude/eMPL/inv_mpu.c **** int mpu_read_mem(unsigned short mem_addr, unsigned short length,
2925:task/attitude/eMPL/inv_mpu.c ****                  unsigned char *data)
2926:task/attitude/eMPL/inv_mpu.c **** {
 6644              		.loc 1 2926 1 is_stmt 1 view -0
 6645              		.cfi_startproc
 6646              		@ args = 0, pretend = 0, frame = 8
 6647              		@ frame_needed = 0, uses_anonymous_args = 0
2927:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 6648              		.loc 1 2927 5 view .LVU1964
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 196


2928:task/attitude/eMPL/inv_mpu.c **** 
2929:task/attitude/eMPL/inv_mpu.c ****     if (!data)
 6649              		.loc 1 2929 5 view .LVU1965
 6650              		.loc 1 2929 8 is_stmt 0 view .LVU1966
 6651 0000 3AB3     		cbz	r2, .L531
2926:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[2];
 6652              		.loc 1 2926 1 view .LVU1967
 6653 0002 70B5     		push	{r4, r5, r6, lr}
 6654              	.LCFI131:
 6655              		.cfi_def_cfa_offset 16
 6656              		.cfi_offset 4, -16
 6657              		.cfi_offset 5, -12
 6658              		.cfi_offset 6, -8
 6659              		.cfi_offset 14, -4
 6660 0004 82B0     		sub	sp, sp, #8
 6661              	.LCFI132:
 6662              		.cfi_def_cfa_offset 24
 6663 0006 0C46     		mov	r4, r1
 6664 0008 1646     		mov	r6, r2
2930:task/attitude/eMPL/inv_mpu.c ****         return -1;
2931:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 6665              		.loc 1 2931 5 is_stmt 1 view .LVU1968
 6666              		.loc 1 2931 21 is_stmt 0 view .LVU1969
 6667 000a 194B     		ldr	r3, .L541
 6668 000c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 6669              		.loc 1 2931 8 view .LVU1970
 6670 000e 1BB3     		cbz	r3, .L532
2932:task/attitude/eMPL/inv_mpu.c ****         return -1;
2933:task/attitude/eMPL/inv_mpu.c **** 
2934:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = (unsigned char)(mem_addr >> 8);
 6671              		.loc 1 2934 5 is_stmt 1 view .LVU1971
 6672              		.loc 1 2934 14 is_stmt 0 view .LVU1972
 6673 0010 030A     		lsrs	r3, r0, #8
 6674              		.loc 1 2934 12 view .LVU1973
 6675 0012 8DF80430 		strb	r3, [sp, #4]
2935:task/attitude/eMPL/inv_mpu.c ****     tmp[1] = (unsigned char)(mem_addr & 0xFF);
 6676              		.loc 1 2935 5 is_stmt 1 view .LVU1974
 6677              		.loc 1 2935 14 is_stmt 0 view .LVU1975
 6678 0016 C0B2     		uxtb	r0, r0
 6679              	.LVL416:
 6680              		.loc 1 2935 12 view .LVU1976
 6681 0018 8DF80500 		strb	r0, [sp, #5]
2936:task/attitude/eMPL/inv_mpu.c **** 
2937:task/attitude/eMPL/inv_mpu.c ****     /* Check bank boundaries. */
2938:task/attitude/eMPL/inv_mpu.c ****     if (tmp[1] + length > st.hw->bank_size)
 6682              		.loc 1 2938 5 is_stmt 1 view .LVU1977
 6683              		.loc 1 2938 16 is_stmt 0 view .LVU1978
 6684 001c 0844     		add	r0, r0, r1
 6685              		.loc 1 2938 29 view .LVU1979
 6686 001e 144B     		ldr	r3, .L541
 6687 0020 5D68     		ldr	r5, [r3, #4]
 6688              		.loc 1 2938 32 view .LVU1980
 6689 0022 6B89     		ldrh	r3, [r5, #10]
 6690              		.loc 1 2938 8 view .LVU1981
 6691 0024 9842     		cmp	r0, r3
 6692 0026 1ADC     		bgt	.L533
2939:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 197


2940:task/attitude/eMPL/inv_mpu.c **** 
2941:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->bank_sel, 2, tmp))
 6693              		.loc 1 2941 5 is_stmt 1 view .LVU1982
 6694              		.loc 1 2941 34 is_stmt 0 view .LVU1983
 6695 0028 114B     		ldr	r3, .L541
 6696 002a 1968     		ldr	r1, [r3]
 6697              	.LVL417:
 6698              		.loc 1 2941 9 view .LVU1984
 6699 002c 01AB     		add	r3, sp, #4
 6700 002e 0222     		movs	r2, #2
 6701              	.LVL418:
 6702              		.loc 1 2941 9 view .LVU1985
 6703 0030 C97E     		ldrb	r1, [r1, #27]	@ zero_extendqisi2
 6704 0032 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 6705 0034 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6706              	.LVL419:
 6707              		.loc 1 2941 8 view .LVU1986
 6708 0038 A0B9     		cbnz	r0, .L534
2942:task/attitude/eMPL/inv_mpu.c ****         return -1;
2943:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->mem_r_w, length, data))
 6709              		.loc 1 2943 5 is_stmt 1 view .LVU1987
 6710              		.loc 1 2943 20 is_stmt 0 view .LVU1988
 6711 003a 0D4B     		ldr	r3, .L541
 6712 003c 5868     		ldr	r0, [r3, #4]
 6713              		.loc 1 2943 33 view .LVU1989
 6714 003e 1968     		ldr	r1, [r3]
 6715              		.loc 1 2943 9 view .LVU1990
 6716 0040 3346     		mov	r3, r6
 6717 0042 2246     		mov	r2, r4
 6718 0044 097E     		ldrb	r1, [r1, #24]	@ zero_extendqisi2
 6719 0046 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6720 0048 FFF7FEFF 		bl	Sensors_I2C_ReadRegister
 6721              	.LVL420:
 6722              		.loc 1 2943 8 view .LVU1991
 6723 004c 68B9     		cbnz	r0, .L540
 6724              	.L529:
2944:task/attitude/eMPL/inv_mpu.c ****         return -1;
2945:task/attitude/eMPL/inv_mpu.c ****     return 0;
2946:task/attitude/eMPL/inv_mpu.c **** }
 6725              		.loc 1 2946 1 view .LVU1992
 6726 004e 02B0     		add	sp, sp, #8
 6727              	.LCFI133:
 6728              		.cfi_def_cfa_offset 16
 6729              		@ sp needed
 6730 0050 70BD     		pop	{r4, r5, r6, pc}
 6731              	.LVL421:
 6732              	.L531:
 6733              	.LCFI134:
 6734              		.cfi_def_cfa_offset 0
 6735              		.cfi_restore 4
 6736              		.cfi_restore 5
 6737              		.cfi_restore 6
 6738              		.cfi_restore 14
2930:task/attitude/eMPL/inv_mpu.c ****     if (!st.chip_cfg.sensors)
 6739              		.loc 1 2930 16 view .LVU1993
 6740 0052 4FF0FF30 		mov	r0, #-1
 6741              	.LVL422:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 198


 6742              		.loc 1 2946 1 view .LVU1994
 6743 0056 7047     		bx	lr
 6744              	.LVL423:
 6745              	.L532:
 6746              	.LCFI135:
 6747              		.cfi_def_cfa_offset 24
 6748              		.cfi_offset 4, -16
 6749              		.cfi_offset 5, -12
 6750              		.cfi_offset 6, -8
 6751              		.cfi_offset 14, -4
2932:task/attitude/eMPL/inv_mpu.c **** 
 6752              		.loc 1 2932 16 view .LVU1995
 6753 0058 4FF0FF30 		mov	r0, #-1
 6754              	.LVL424:
2932:task/attitude/eMPL/inv_mpu.c **** 
 6755              		.loc 1 2932 16 view .LVU1996
 6756 005c F7E7     		b	.L529
 6757              	.L533:
2939:task/attitude/eMPL/inv_mpu.c **** 
 6758              		.loc 1 2939 16 view .LVU1997
 6759 005e 4FF0FF30 		mov	r0, #-1
 6760 0062 F4E7     		b	.L529
 6761              	.LVL425:
 6762              	.L534:
2942:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->mem_r_w, length, data))
 6763              		.loc 1 2942 16 view .LVU1998
 6764 0064 4FF0FF30 		mov	r0, #-1
 6765 0068 F1E7     		b	.L529
 6766              	.L540:
2944:task/attitude/eMPL/inv_mpu.c ****     return 0;
 6767              		.loc 1 2944 16 view .LVU1999
 6768 006a 4FF0FF30 		mov	r0, #-1
 6769 006e EEE7     		b	.L529
 6770              	.L542:
 6771              		.align	2
 6772              	.L541:
 6773 0070 00000000 		.word	.LANCHOR0
 6774              		.cfi_endproc
 6775              	.LFE191:
 6777              		.section	.text.mpu_load_firmware,"ax",%progbits
 6778              		.align	1
 6779              		.global	mpu_load_firmware
 6780              		.syntax unified
 6781              		.thumb
 6782              		.thumb_func
 6783              		.fpu fpv5-d16
 6785              	mpu_load_firmware:
 6786              	.LVL426:
 6787              	.LFB192:
2947:task/attitude/eMPL/inv_mpu.c **** 
2948:task/attitude/eMPL/inv_mpu.c **** /**
2949:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Load and verify DMP image.
2950:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  length      Length of DMP image.
2951:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  firmware    DMP code.
2952:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  start_addr  Starting address of DMP code memory.
2953:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  sample_rate Fixed sampling rate used when DMP is enabled.
2954:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 199


2955:task/attitude/eMPL/inv_mpu.c ****  */
2956:task/attitude/eMPL/inv_mpu.c **** int mpu_load_firmware(unsigned short length, const unsigned char *firmware,
2957:task/attitude/eMPL/inv_mpu.c ****                       unsigned short start_addr, unsigned short sample_rate)
2958:task/attitude/eMPL/inv_mpu.c **** {
 6788              		.loc 1 2958 1 is_stmt 1 view -0
 6789              		.cfi_startproc
 6790              		@ args = 0, pretend = 0, frame = 8
 6791              		@ frame_needed = 0, uses_anonymous_args = 0
 6792              		.loc 1 2958 1 is_stmt 0 view .LVU2001
 6793 0000 10B5     		push	{r4, lr}
 6794              	.LCFI136:
 6795              		.cfi_def_cfa_offset 8
 6796              		.cfi_offset 4, -8
 6797              		.cfi_offset 14, -4
 6798 0002 82B0     		sub	sp, sp, #8
 6799              	.LCFI137:
 6800              		.cfi_def_cfa_offset 16
 6801 0004 1C46     		mov	r4, r3
2959:task/attitude/eMPL/inv_mpu.c ****     unsigned short ii;
 6802              		.loc 1 2959 5 is_stmt 1 view .LVU2002
2960:task/attitude/eMPL/inv_mpu.c ****     unsigned short this_write;
 6803              		.loc 1 2960 5 view .LVU2003
2961:task/attitude/eMPL/inv_mpu.c ****     /* Must divide evenly into st.hw->bank_size to avoid bank crossings. */
2962:task/attitude/eMPL/inv_mpu.c **** #define LOAD_CHUNK (16)
2963:task/attitude/eMPL/inv_mpu.c ****     unsigned char cur[LOAD_CHUNK], tmp[2];
 6804              		.loc 1 2963 5 view .LVU2004
2964:task/attitude/eMPL/inv_mpu.c **** 
2965:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_loaded)
 6805              		.loc 1 2965 5 view .LVU2005
 6806              		.loc 1 2965 20 is_stmt 0 view .LVU2006
 6807 0006 124B     		ldr	r3, .L549
 6808              	.LVL427:
 6809              		.loc 1 2965 20 view .LVU2007
 6810 0008 93F82530 		ldrb	r3, [r3, #37]	@ zero_extendqisi2
 6811              		.loc 1 2965 8 view .LVU2008
 6812 000c B3B9     		cbnz	r3, .L545
2966:task/attitude/eMPL/inv_mpu.c ****         /* DMP should only be loaded once. */
2967:task/attitude/eMPL/inv_mpu.c ****         return -1;
2968:task/attitude/eMPL/inv_mpu.c **** 
2969:task/attitude/eMPL/inv_mpu.c ****     if (!firmware)
 6813              		.loc 1 2969 5 is_stmt 1 view .LVU2009
 6814              		.loc 1 2969 8 is_stmt 0 view .LVU2010
 6815 000e C1B1     		cbz	r1, .L546
2970:task/attitude/eMPL/inv_mpu.c ****         return -1;
2971:task/attitude/eMPL/inv_mpu.c ****     /*for (ii = 0; ii < length; ii += this_write)
2972:task/attitude/eMPL/inv_mpu.c ****     {
2973:task/attitude/eMPL/inv_mpu.c ****         this_write = min(LOAD_CHUNK, length - ii);
2974:task/attitude/eMPL/inv_mpu.c ****         if (mpu_write_mem(ii, this_write, (unsigned char *)&firmware[ii]))
2975:task/attitude/eMPL/inv_mpu.c ****             return -1;
2976:task/attitude/eMPL/inv_mpu.c ****         if (mpu_read_mem(ii, this_write, cur))
2977:task/attitude/eMPL/inv_mpu.c ****             return -1;
2978:task/attitude/eMPL/inv_mpu.c ****         if (memcmp(firmware + ii, cur, this_write))
2979:task/attitude/eMPL/inv_mpu.c ****             return -2;
2980:task/attitude/eMPL/inv_mpu.c ****     }*/
2981:task/attitude/eMPL/inv_mpu.c **** 
2982:task/attitude/eMPL/inv_mpu.c ****     /* Set program start address. */
2983:task/attitude/eMPL/inv_mpu.c ****     tmp[0] = start_addr >> 8;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 200


 6816              		.loc 1 2983 5 is_stmt 1 view .LVU2011
 6817              		.loc 1 2983 12 is_stmt 0 view .LVU2012
 6818 0010 130A     		lsrs	r3, r2, #8
 6819 0012 8DF80430 		strb	r3, [sp, #4]
2984:task/attitude/eMPL/inv_mpu.c ****     tmp[1] = start_addr & 0xFF;
 6820              		.loc 1 2984 5 is_stmt 1 view .LVU2013
 6821              		.loc 1 2984 12 is_stmt 0 view .LVU2014
 6822 0016 8DF80520 		strb	r2, [sp, #5]
2985:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->prgm_start_h, 2, tmp))
 6823              		.loc 1 2985 5 is_stmt 1 view .LVU2015
 6824              		.loc 1 2985 21 is_stmt 0 view .LVU2016
 6825 001a 0D4B     		ldr	r3, .L549
 6826 001c 5868     		ldr	r0, [r3, #4]
 6827              	.LVL428:
 6828              		.loc 1 2985 34 view .LVU2017
 6829 001e 1968     		ldr	r1, [r3]
 6830              	.LVL429:
 6831              		.loc 1 2985 9 view .LVU2018
 6832 0020 01AB     		add	r3, sp, #4
 6833 0022 0222     		movs	r2, #2
 6834              	.LVL430:
 6835              		.loc 1 2985 9 view .LVU2019
 6836 0024 497F     		ldrb	r1, [r1, #29]	@ zero_extendqisi2
 6837 0026 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6838 0028 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6839              	.LVL431:
 6840              		.loc 1 2985 8 view .LVU2020
 6841 002c 60B9     		cbnz	r0, .L547
2986:task/attitude/eMPL/inv_mpu.c ****         return -1;
2987:task/attitude/eMPL/inv_mpu.c **** 
2988:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_loaded = 1;
 6842              		.loc 1 2988 5 is_stmt 1 view .LVU2021
 6843              		.loc 1 2988 28 is_stmt 0 view .LVU2022
 6844 002e 084B     		ldr	r3, .L549
 6845 0030 0122     		movs	r2, #1
 6846 0032 83F82520 		strb	r2, [r3, #37]
2989:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.dmp_sample_rate = sample_rate;
 6847              		.loc 1 2989 5 is_stmt 1 view .LVU2023
 6848              		.loc 1 2989 33 is_stmt 0 view .LVU2024
 6849 0036 DC84     		strh	r4, [r3, #38]	@ movhi
2990:task/attitude/eMPL/inv_mpu.c ****     return 0;
 6850              		.loc 1 2990 5 is_stmt 1 view .LVU2025
 6851              	.L543:
2991:task/attitude/eMPL/inv_mpu.c **** }
 6852              		.loc 1 2991 1 is_stmt 0 view .LVU2026
 6853 0038 02B0     		add	sp, sp, #8
 6854              	.LCFI138:
 6855              		.cfi_remember_state
 6856              		.cfi_def_cfa_offset 8
 6857              		@ sp needed
 6858 003a 10BD     		pop	{r4, pc}
 6859              	.LVL432:
 6860              	.L545:
 6861              	.LCFI139:
 6862              		.cfi_restore_state
2967:task/attitude/eMPL/inv_mpu.c **** 
 6863              		.loc 1 2967 16 view .LVU2027
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 201


 6864 003c 4FF0FF30 		mov	r0, #-1
 6865              	.LVL433:
2967:task/attitude/eMPL/inv_mpu.c **** 
 6866              		.loc 1 2967 16 view .LVU2028
 6867 0040 FAE7     		b	.L543
 6868              	.LVL434:
 6869              	.L546:
2970:task/attitude/eMPL/inv_mpu.c ****     /*for (ii = 0; ii < length; ii += this_write)
 6870              		.loc 1 2970 16 view .LVU2029
 6871 0042 4FF0FF30 		mov	r0, #-1
 6872              	.LVL435:
2970:task/attitude/eMPL/inv_mpu.c ****     /*for (ii = 0; ii < length; ii += this_write)
 6873              		.loc 1 2970 16 view .LVU2030
 6874 0046 F7E7     		b	.L543
 6875              	.LVL436:
 6876              	.L547:
2986:task/attitude/eMPL/inv_mpu.c **** 
 6877              		.loc 1 2986 16 view .LVU2031
 6878 0048 4FF0FF30 		mov	r0, #-1
 6879 004c F4E7     		b	.L543
 6880              	.L550:
 6881 004e 00BF     		.align	2
 6882              	.L549:
 6883 0050 00000000 		.word	.LANCHOR0
 6884              		.cfi_endproc
 6885              	.LFE192:
 6887              		.section	.text.mpu_set_dmp_state,"ax",%progbits
 6888              		.align	1
 6889              		.global	mpu_set_dmp_state
 6890              		.syntax unified
 6891              		.thumb
 6892              		.thumb_func
 6893              		.fpu fpv5-d16
 6895              	mpu_set_dmp_state:
 6896              	.LVL437:
 6897              	.LFB193:
2992:task/attitude/eMPL/inv_mpu.c **** 
2993:task/attitude/eMPL/inv_mpu.c **** /**
2994:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Enable/disable DMP support.
2995:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  enable  1 to turn on the DMP.
2996:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
2997:task/attitude/eMPL/inv_mpu.c ****  */
2998:task/attitude/eMPL/inv_mpu.c **** int mpu_set_dmp_state(unsigned char enable)
2999:task/attitude/eMPL/inv_mpu.c **** {
 6898              		.loc 1 2999 1 is_stmt 1 view -0
 6899              		.cfi_startproc
 6900              		@ args = 0, pretend = 0, frame = 8
 6901              		@ frame_needed = 0, uses_anonymous_args = 0
3000:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 6902              		.loc 1 3000 5 view .LVU2033
3001:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.dmp_on == enable)
 6903              		.loc 1 3001 5 view .LVU2034
 6904              		.loc 1 3001 20 is_stmt 0 view .LVU2035
 6905 0000 234B     		ldr	r3, .L560
 6906 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 6907              		.loc 1 3001 8 view .LVU2036
 6908 0006 8342     		cmp	r3, r0
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 202


 6909 0008 3CD0     		beq	.L554
2999:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp;
 6910              		.loc 1 2999 1 view .LVU2037
 6911 000a 30B5     		push	{r4, r5, lr}
 6912              	.LCFI140:
 6913              		.cfi_def_cfa_offset 12
 6914              		.cfi_offset 4, -12
 6915              		.cfi_offset 5, -8
 6916              		.cfi_offset 14, -4
 6917 000c 83B0     		sub	sp, sp, #12
 6918              	.LCFI141:
 6919              		.cfi_def_cfa_offset 24
3002:task/attitude/eMPL/inv_mpu.c ****         return 0;
3003:task/attitude/eMPL/inv_mpu.c **** 
3004:task/attitude/eMPL/inv_mpu.c ****     if (enable)
 6920              		.loc 1 3004 5 is_stmt 1 view .LVU2038
 6921              		.loc 1 3004 8 is_stmt 0 view .LVU2039
 6922 000e 18B3     		cbz	r0, .L553
3005:task/attitude/eMPL/inv_mpu.c ****     {
3006:task/attitude/eMPL/inv_mpu.c ****         if (!st.chip_cfg.dmp_loaded)
 6923              		.loc 1 3006 9 is_stmt 1 view .LVU2040
 6924              		.loc 1 3006 25 is_stmt 0 view .LVU2041
 6925 0010 1F4B     		ldr	r3, .L560
 6926 0012 93F82530 		ldrb	r3, [r3, #37]	@ zero_extendqisi2
 6927              		.loc 1 3006 12 view .LVU2042
 6928 0016 002B     		cmp	r3, #0
 6929 0018 36D0     		beq	.L555
3007:task/attitude/eMPL/inv_mpu.c ****             return -1;
3008:task/attitude/eMPL/inv_mpu.c ****         /* Disable data ready interrupt. */
3009:task/attitude/eMPL/inv_mpu.c ****         set_int_enable(0);
 6930              		.loc 1 3009 9 is_stmt 1 view .LVU2043
 6931 001a 0020     		movs	r0, #0
 6932              	.LVL438:
 6933              		.loc 1 3009 9 is_stmt 0 view .LVU2044
 6934 001c FFF7FEFF 		bl	set_int_enable
 6935              	.LVL439:
3010:task/attitude/eMPL/inv_mpu.c ****         /* Disable bypass mode. */
3011:task/attitude/eMPL/inv_mpu.c ****         mpu_set_bypass(0);
 6936              		.loc 1 3011 9 is_stmt 1 view .LVU2045
 6937 0020 0020     		movs	r0, #0
 6938 0022 FFF7FEFF 		bl	mpu_set_bypass
 6939              	.LVL440:
3012:task/attitude/eMPL/inv_mpu.c ****         /* Keep constant sample rate, FIFO rate controlled by DMP. */
3013:task/attitude/eMPL/inv_mpu.c ****         mpu_set_sample_rate(st.chip_cfg.dmp_sample_rate);
 6940              		.loc 1 3013 9 view .LVU2046
 6941 0026 1A4D     		ldr	r5, .L560
 6942 0028 E88C     		ldrh	r0, [r5, #38]
 6943 002a FFF7FEFF 		bl	mpu_set_sample_rate
 6944              	.LVL441:
3014:task/attitude/eMPL/inv_mpu.c ****         /* Remove FIFO elements. */
3015:task/attitude/eMPL/inv_mpu.c ****         tmp = 0;
 6945              		.loc 1 3015 9 view .LVU2047
 6946              		.loc 1 3015 13 is_stmt 0 view .LVU2048
 6947 002e 0024     		movs	r4, #0
 6948 0030 8DF80740 		strb	r4, [sp, #7]
3016:task/attitude/eMPL/inv_mpu.c ****         i2c_write(st.hw->addr, 0x23, 1, &tmp);
 6949              		.loc 1 3016 9 is_stmt 1 view .LVU2049
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 203


 6950              		.loc 1 3016 21 is_stmt 0 view .LVU2050
 6951 0034 6868     		ldr	r0, [r5, #4]
 6952              		.loc 1 3016 9 view .LVU2051
 6953 0036 0DF10703 		add	r3, sp, #7
 6954 003a 0122     		movs	r2, #1
 6955 003c 2321     		movs	r1, #35
 6956 003e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6957 0040 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 6958              	.LVL442:
3017:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.dmp_on = 1;
 6959              		.loc 1 3017 9 is_stmt 1 view .LVU2052
 6960              		.loc 1 3017 28 is_stmt 0 view .LVU2053
 6961 0044 0120     		movs	r0, #1
 6962 0046 85F82400 		strb	r0, [r5, #36]
3018:task/attitude/eMPL/inv_mpu.c ****         /* Enable DMP interrupt. */
3019:task/attitude/eMPL/inv_mpu.c ****         set_int_enable(1);
 6963              		.loc 1 3019 9 is_stmt 1 view .LVU2054
 6964 004a FFF7FEFF 		bl	set_int_enable
 6965              	.LVL443:
3020:task/attitude/eMPL/inv_mpu.c ****         mpu_reset_fifo();
 6966              		.loc 1 3020 9 view .LVU2055
 6967 004e FFF7FEFF 		bl	mpu_reset_fifo
 6968              	.LVL444:
3021:task/attitude/eMPL/inv_mpu.c ****     }
3022:task/attitude/eMPL/inv_mpu.c ****     else
3023:task/attitude/eMPL/inv_mpu.c ****     {
3024:task/attitude/eMPL/inv_mpu.c ****         /* Disable DMP interrupt. */
3025:task/attitude/eMPL/inv_mpu.c ****         set_int_enable(0);
3026:task/attitude/eMPL/inv_mpu.c ****         /* Restore FIFO settings. */
3027:task/attitude/eMPL/inv_mpu.c ****         tmp = st.chip_cfg.fifo_enable;
3028:task/attitude/eMPL/inv_mpu.c ****         i2c_write(st.hw->addr, 0x23, 1, &tmp);
3029:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.dmp_on = 0;
3030:task/attitude/eMPL/inv_mpu.c ****         mpu_reset_fifo();
3031:task/attitude/eMPL/inv_mpu.c ****     }
3032:task/attitude/eMPL/inv_mpu.c ****     return 0;
 6969              		.loc 1 3032 12 is_stmt 0 view .LVU2056
 6970 0052 2046     		mov	r0, r4
 6971              	.L551:
3033:task/attitude/eMPL/inv_mpu.c **** }
 6972              		.loc 1 3033 1 view .LVU2057
 6973 0054 03B0     		add	sp, sp, #12
 6974              	.LCFI142:
 6975              		.cfi_remember_state
 6976              		.cfi_def_cfa_offset 12
 6977              		@ sp needed
 6978 0056 30BD     		pop	{r4, r5, pc}
 6979              	.LVL445:
 6980              	.L553:
 6981              	.LCFI143:
 6982              		.cfi_restore_state
3025:task/attitude/eMPL/inv_mpu.c ****         /* Restore FIFO settings. */
 6983              		.loc 1 3025 9 is_stmt 1 view .LVU2058
 6984 0058 0020     		movs	r0, #0
 6985              	.LVL446:
3025:task/attitude/eMPL/inv_mpu.c ****         /* Restore FIFO settings. */
 6986              		.loc 1 3025 9 is_stmt 0 view .LVU2059
 6987 005a FFF7FEFF 		bl	set_int_enable
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 204


 6988              	.LVL447:
3027:task/attitude/eMPL/inv_mpu.c ****         i2c_write(st.hw->addr, 0x23, 1, &tmp);
 6989              		.loc 1 3027 9 is_stmt 1 view .LVU2060
3027:task/attitude/eMPL/inv_mpu.c ****         i2c_write(st.hw->addr, 0x23, 1, &tmp);
 6990              		.loc 1 3027 26 is_stmt 0 view .LVU2061
 6991 005e 0C4D     		ldr	r5, .L560
 6992 0060 2B7C     		ldrb	r3, [r5, #16]	@ zero_extendqisi2
3027:task/attitude/eMPL/inv_mpu.c ****         i2c_write(st.hw->addr, 0x23, 1, &tmp);
 6993              		.loc 1 3027 13 view .LVU2062
 6994 0062 8DF80730 		strb	r3, [sp, #7]
3028:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.dmp_on = 0;
 6995              		.loc 1 3028 9 is_stmt 1 view .LVU2063
3028:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.dmp_on = 0;
 6996              		.loc 1 3028 21 is_stmt 0 view .LVU2064
 6997 0066 6868     		ldr	r0, [r5, #4]
3028:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.dmp_on = 0;
 6998              		.loc 1 3028 9 view .LVU2065
 6999 0068 0DF10703 		add	r3, sp, #7
 7000 006c 0122     		movs	r2, #1
 7001 006e 2321     		movs	r1, #35
 7002 0070 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 7003 0072 FFF7FEFF 		bl	Sensors_I2C_WriteRegister
 7004              	.LVL448:
3029:task/attitude/eMPL/inv_mpu.c ****         mpu_reset_fifo();
 7005              		.loc 1 3029 9 is_stmt 1 view .LVU2066
3029:task/attitude/eMPL/inv_mpu.c ****         mpu_reset_fifo();
 7006              		.loc 1 3029 28 is_stmt 0 view .LVU2067
 7007 0076 0024     		movs	r4, #0
 7008 0078 85F82440 		strb	r4, [r5, #36]
3030:task/attitude/eMPL/inv_mpu.c ****     }
 7009              		.loc 1 3030 9 is_stmt 1 view .LVU2068
 7010 007c FFF7FEFF 		bl	mpu_reset_fifo
 7011              	.LVL449:
3032:task/attitude/eMPL/inv_mpu.c **** }
 7012              		.loc 1 3032 12 is_stmt 0 view .LVU2069
 7013 0080 2046     		mov	r0, r4
 7014 0082 E7E7     		b	.L551
 7015              	.LVL450:
 7016              	.L554:
 7017              	.LCFI144:
 7018              		.cfi_def_cfa_offset 0
 7019              		.cfi_restore 4
 7020              		.cfi_restore 5
 7021              		.cfi_restore 14
3002:task/attitude/eMPL/inv_mpu.c **** 
 7022              		.loc 1 3002 16 view .LVU2070
 7023 0084 0020     		movs	r0, #0
 7024              	.LVL451:
 7025              		.loc 1 3033 1 view .LVU2071
 7026 0086 7047     		bx	lr
 7027              	.LVL452:
 7028              	.L555:
 7029              	.LCFI145:
 7030              		.cfi_def_cfa_offset 24
 7031              		.cfi_offset 4, -12
 7032              		.cfi_offset 5, -8
 7033              		.cfi_offset 14, -4
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 205


3007:task/attitude/eMPL/inv_mpu.c ****         /* Disable data ready interrupt. */
 7034              		.loc 1 3007 20 view .LVU2072
 7035 0088 4FF0FF30 		mov	r0, #-1
 7036              	.LVL453:
3007:task/attitude/eMPL/inv_mpu.c ****         /* Disable data ready interrupt. */
 7037              		.loc 1 3007 20 view .LVU2073
 7038 008c E2E7     		b	.L551
 7039              	.L561:
 7040 008e 00BF     		.align	2
 7041              	.L560:
 7042 0090 00000000 		.word	.LANCHOR0
 7043              		.cfi_endproc
 7044              	.LFE193:
 7046              		.section	.text.mpu_run_self_test,"ax",%progbits
 7047              		.align	1
 7048              		.global	mpu_run_self_test
 7049              		.syntax unified
 7050              		.thumb
 7051              		.thumb_func
 7052              		.fpu fpv5-d16
 7054              	mpu_run_self_test:
 7055              	.LVL454:
 7056              	.LFB189:
2784:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6050
 7057              		.loc 1 2784 1 is_stmt 1 view -0
 7058              		.cfi_startproc
 7059              		@ args = 0, pretend = 0, frame = 32
 7060              		@ frame_needed = 0, uses_anonymous_args = 0
2784:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6050
 7061              		.loc 1 2784 1 is_stmt 0 view .LVU2075
 7062 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 7063              	.LCFI146:
 7064              		.cfi_def_cfa_offset 24
 7065              		.cfi_offset 4, -24
 7066              		.cfi_offset 5, -20
 7067              		.cfi_offset 6, -16
 7068              		.cfi_offset 7, -12
 7069              		.cfi_offset 8, -8
 7070              		.cfi_offset 14, -4
 7071 0004 88B0     		sub	sp, sp, #32
 7072              	.LCFI147:
 7073              		.cfi_def_cfa_offset 56
 7074 0006 0546     		mov	r5, r0
 7075 0008 0E46     		mov	r6, r1
2786:task/attitude/eMPL/inv_mpu.c ****     long gyro_st[3], accel_st[3];
 7076              		.loc 1 2786 5 is_stmt 1 view .LVU2076
 7077              	.LVL455:
2787:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_result, gyro_result;
 7078              		.loc 1 2787 5 view .LVU2077
2788:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
 7079              		.loc 1 2788 5 view .LVU2078
2792:task/attitude/eMPL/inv_mpu.c **** #endif
 7080              		.loc 1 2792 5 view .LVU2079
2794:task/attitude/eMPL/inv_mpu.c ****     unsigned char accel_fsr, fifo_sensors, sensors_on;
 7081              		.loc 1 2794 5 view .LVU2080
2795:task/attitude/eMPL/inv_mpu.c ****     unsigned short gyro_fsr, sample_rate, lpf;
 7082              		.loc 1 2795 5 view .LVU2081
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 206


2796:task/attitude/eMPL/inv_mpu.c ****     unsigned char dmp_was_on;
 7083              		.loc 1 2796 5 view .LVU2082
2797:task/attitude/eMPL/inv_mpu.c **** 
 7084              		.loc 1 2797 5 view .LVU2083
2799:task/attitude/eMPL/inv_mpu.c ****     {
 7085              		.loc 1 2799 5 view .LVU2084
2799:task/attitude/eMPL/inv_mpu.c ****     {
 7086              		.loc 1 2799 20 is_stmt 0 view .LVU2085
 7087 000a 3E4B     		ldr	r3, .L580
 7088 000c 93F82470 		ldrb	r7, [r3, #36]	@ zero_extendqisi2
2799:task/attitude/eMPL/inv_mpu.c ****     {
 7089              		.loc 1 2799 8 view .LVU2086
 7090 0010 FFB9     		cbnz	r7, .L578
 7091              	.LVL456:
 7092              	.L563:
2808:task/attitude/eMPL/inv_mpu.c ****     mpu_get_accel_fsr(&accel_fsr);
 7093              		.loc 1 2808 5 is_stmt 1 view .LVU2087
 7094 0012 01A8     		add	r0, sp, #4
 7095 0014 FFF7FEFF 		bl	mpu_get_gyro_fsr
 7096              	.LVL457:
2809:task/attitude/eMPL/inv_mpu.c ****     mpu_get_lpf(&lpf);
 7097              		.loc 1 2809 5 view .LVU2088
 7098 0018 0DF10700 		add	r0, sp, #7
 7099 001c FFF7FEFF 		bl	mpu_get_accel_fsr
 7100              	.LVL458:
2810:task/attitude/eMPL/inv_mpu.c ****     mpu_get_sample_rate(&sample_rate);
 7101              		.loc 1 2810 5 view .LVU2089
 7102 0020 6846     		mov	r0, sp
 7103 0022 FFF7FEFF 		bl	mpu_get_lpf
 7104              	.LVL459:
2811:task/attitude/eMPL/inv_mpu.c ****     sensors_on = st.chip_cfg.sensors;
 7105              		.loc 1 2811 5 view .LVU2090
 7106 0026 0DF10200 		add	r0, sp, #2
 7107 002a FFF7FEFF 		bl	mpu_get_sample_rate
 7108              	.LVL460:
2812:task/attitude/eMPL/inv_mpu.c ****     mpu_get_fifo_config(&fifo_sensors);
 7109              		.loc 1 2812 5 view .LVU2091
2812:task/attitude/eMPL/inv_mpu.c ****     mpu_get_fifo_config(&fifo_sensors);
 7110              		.loc 1 2812 16 is_stmt 0 view .LVU2092
 7111 002e 354B     		ldr	r3, .L580
 7112 0030 93F80A80 		ldrb	r8, [r3, #10]	@ zero_extendqisi2
 7113              	.LVL461:
2813:task/attitude/eMPL/inv_mpu.c **** 
 7114              		.loc 1 2813 5 is_stmt 1 view .LVU2093
 7115 0034 0DF10600 		add	r0, sp, #6
 7116 0038 FFF7FEFF 		bl	mpu_get_fifo_config
 7117              	.LVL462:
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
 7118              		.loc 1 2817 5 view .LVU2094
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
 7119              		.loc 1 2817 13 is_stmt 0 view .LVU2095
 7120 003c 0024     		movs	r4, #0
 7121              	.LVL463:
 7122              	.L564:
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
 7123              		.loc 1 2817 18 is_stmt 1 discriminator 1 view .LVU2096
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 207


 7124              		.loc 1 2817 5 is_stmt 0 discriminator 1 view .LVU2097
 7125 003e 012C     		cmp	r4, #1
 7126 0040 0CDC     		bgt	.L565
2818:task/attitude/eMPL/inv_mpu.c ****             break;
 7127              		.loc 1 2818 9 is_stmt 1 view .LVU2098
2818:task/attitude/eMPL/inv_mpu.c ****             break;
 7128              		.loc 1 2818 14 is_stmt 0 view .LVU2099
 7129 0042 0022     		movs	r2, #0
 7130 0044 3146     		mov	r1, r6
 7131 0046 2846     		mov	r0, r5
 7132 0048 FFF7FEFF 		bl	get_st_biases
 7133              	.LVL464:
2818:task/attitude/eMPL/inv_mpu.c ****             break;
 7134              		.loc 1 2818 12 view .LVU2100
 7135 004c 30B1     		cbz	r0, .L565
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
 7136              		.loc 1 2817 30 is_stmt 1 discriminator 2 view .LVU2101
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
 7137              		.loc 1 2817 32 is_stmt 0 discriminator 2 view .LVU2102
 7138 004e 0134     		adds	r4, r4, #1
 7139              	.LVL465:
2817:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro, accel, 0))
 7140              		.loc 1 2817 32 discriminator 2 view .LVU2103
 7141 0050 F5E7     		b	.L564
 7142              	.LVL466:
 7143              	.L578:
2801:task/attitude/eMPL/inv_mpu.c ****         dmp_was_on = 1;
 7144              		.loc 1 2801 9 is_stmt 1 view .LVU2104
 7145 0052 0020     		movs	r0, #0
 7146              	.LVL467:
2801:task/attitude/eMPL/inv_mpu.c ****         dmp_was_on = 1;
 7147              		.loc 1 2801 9 is_stmt 0 view .LVU2105
 7148 0054 FFF7FEFF 		bl	mpu_set_dmp_state
 7149              	.LVL468:
2802:task/attitude/eMPL/inv_mpu.c ****     }
 7150              		.loc 1 2802 9 is_stmt 1 view .LVU2106
2802:task/attitude/eMPL/inv_mpu.c ****     }
 7151              		.loc 1 2802 20 is_stmt 0 view .LVU2107
 7152 0058 0127     		movs	r7, #1
 7153 005a DAE7     		b	.L563
 7154              	.LVL469:
 7155              	.L565:
2820:task/attitude/eMPL/inv_mpu.c ****     {
 7156              		.loc 1 2820 5 is_stmt 1 view .LVU2108
2820:task/attitude/eMPL/inv_mpu.c ****     {
 7157              		.loc 1 2820 8 is_stmt 0 view .LVU2109
 7158 005c 022C     		cmp	r4, #2
 7159 005e 48D0     		beq	.L574
2828:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
 7160              		.loc 1 2828 13 view .LVU2110
 7161 0060 0024     		movs	r4, #0
 7162              	.LVL470:
 7163              	.L568:
2828:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
 7164              		.loc 1 2828 18 is_stmt 1 discriminator 1 view .LVU2111
2828:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
 7165              		.loc 1 2828 5 is_stmt 0 discriminator 1 view .LVU2112
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 208


 7166 0062 012C     		cmp	r4, #1
 7167 0064 07DC     		bgt	.L569
2829:task/attitude/eMPL/inv_mpu.c ****             break;
 7168              		.loc 1 2829 9 is_stmt 1 view .LVU2113
2829:task/attitude/eMPL/inv_mpu.c ****             break;
 7169              		.loc 1 2829 14 is_stmt 0 view .LVU2114
 7170 0066 0122     		movs	r2, #1
 7171 0068 02A9     		add	r1, sp, #8
 7172 006a 05A8     		add	r0, sp, #20
 7173 006c FFF7FEFF 		bl	get_st_biases
 7174              	.LVL471:
2829:task/attitude/eMPL/inv_mpu.c ****             break;
 7175              		.loc 1 2829 12 view .LVU2115
 7176 0070 08B1     		cbz	r0, .L569
2828:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
 7177              		.loc 1 2828 30 is_stmt 1 discriminator 2 view .LVU2116
2828:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
 7178              		.loc 1 2828 32 is_stmt 0 discriminator 2 view .LVU2117
 7179 0072 0134     		adds	r4, r4, #1
 7180              	.LVL472:
2828:task/attitude/eMPL/inv_mpu.c ****         if (!get_st_biases(gyro_st, accel_st, 1))
 7181              		.loc 1 2828 32 discriminator 2 view .LVU2118
 7182 0074 F5E7     		b	.L568
 7183              	.L569:
2831:task/attitude/eMPL/inv_mpu.c ****     {
 7184              		.loc 1 2831 5 is_stmt 1 view .LVU2119
2831:task/attitude/eMPL/inv_mpu.c ****     {
 7185              		.loc 1 2831 8 is_stmt 0 view .LVU2120
 7186 0076 022C     		cmp	r4, #2
 7187 0078 3DD0     		beq	.L575
2837:task/attitude/eMPL/inv_mpu.c ****     gyro_result = gyro_self_test(gyro, gyro_st);
 7188              		.loc 1 2837 5 is_stmt 1 view .LVU2121
2837:task/attitude/eMPL/inv_mpu.c ****     gyro_result = gyro_self_test(gyro, gyro_st);
 7189              		.loc 1 2837 20 is_stmt 0 view .LVU2122
 7190 007a 02A9     		add	r1, sp, #8
 7191 007c 3046     		mov	r0, r6
 7192 007e FFF7FEFF 		bl	accel_self_test
 7193              	.LVL473:
2837:task/attitude/eMPL/inv_mpu.c ****     gyro_result = gyro_self_test(gyro, gyro_st);
 7194              		.loc 1 2837 18 view .LVU2123
 7195 0082 C6B2     		uxtb	r6, r0
 7196              	.LVL474:
2838:task/attitude/eMPL/inv_mpu.c **** 
 7197              		.loc 1 2838 5 is_stmt 1 view .LVU2124
2838:task/attitude/eMPL/inv_mpu.c **** 
 7198              		.loc 1 2838 19 is_stmt 0 view .LVU2125
 7199 0084 05A9     		add	r1, sp, #20
 7200 0086 2846     		mov	r0, r5
 7201 0088 FFF7FEFF 		bl	gyro_self_test
 7202              	.LVL475:
2840:task/attitude/eMPL/inv_mpu.c ****     if (!gyro_result)
 7203              		.loc 1 2840 5 is_stmt 1 view .LVU2126
2841:task/attitude/eMPL/inv_mpu.c ****         result |= 0x01;
 7204              		.loc 1 2841 5 view .LVU2127
2841:task/attitude/eMPL/inv_mpu.c ****         result |= 0x01;
 7205              		.loc 1 2841 8 is_stmt 0 view .LVU2128
 7206 008c 10F0FF0F 		tst	r0, #255
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 209


 7207 0090 2DD0     		beq	.L576
2840:task/attitude/eMPL/inv_mpu.c ****     if (!gyro_result)
 7208              		.loc 1 2840 12 view .LVU2129
 7209 0092 0024     		movs	r4, #0
 7210              	.LVL476:
 7211              	.L571:
2843:task/attitude/eMPL/inv_mpu.c ****         result |= 0x02;
 7212              		.loc 1 2843 5 is_stmt 1 view .LVU2130
2843:task/attitude/eMPL/inv_mpu.c ****         result |= 0x02;
 7213              		.loc 1 2843 8 is_stmt 0 view .LVU2131
 7214 0094 0EB9     		cbnz	r6, .L572
2844:task/attitude/eMPL/inv_mpu.c **** 
 7215              		.loc 1 2844 9 is_stmt 1 view .LVU2132
2844:task/attitude/eMPL/inv_mpu.c **** 
 7216              		.loc 1 2844 16 is_stmt 0 view .LVU2133
 7217 0096 44F00204 		orr	r4, r4, #2
 7218              	.LVL477:
 7219              	.L572:
2851:task/attitude/eMPL/inv_mpu.c **** #endif
 7220              		.loc 1 2851 5 is_stmt 1 view .LVU2134
2851:task/attitude/eMPL/inv_mpu.c **** #endif
 7221              		.loc 1 2851 12 is_stmt 0 view .LVU2135
 7222 009a 44F00404 		orr	r4, r4, #4
 7223              	.LVL478:
 7224              	.L567:
2862:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
 7225              		.loc 1 2862 5 is_stmt 1 view .LVU2136
2862:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
 7226              		.loc 1 2862 26 is_stmt 0 view .LVU2137
 7227 009e 194B     		ldr	r3, .L580
 7228 00a0 FF22     		movs	r2, #255
 7229 00a2 1A72     		strb	r2, [r3, #8]
2863:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
 7230              		.loc 1 2863 5 is_stmt 1 view .LVU2138
2863:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
 7231              		.loc 1 2863 27 is_stmt 0 view .LVU2139
 7232 00a4 5A72     		strb	r2, [r3, #9]
2864:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
 7233              		.loc 1 2864 5 is_stmt 1 view .LVU2140
2864:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
 7234              		.loc 1 2864 21 is_stmt 0 view .LVU2141
 7235 00a6 DA72     		strb	r2, [r3, #11]
2865:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = 0xFF;
 7236              		.loc 1 2865 5 is_stmt 1 view .LVU2142
2865:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = 0xFF;
 7237              		.loc 1 2865 29 is_stmt 0 view .LVU2143
 7238 00a8 4FF6FF71 		movw	r1, #65535
 7239 00ac D981     		strh	r1, [r3, #14]	@ movhi
2866:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
 7240              		.loc 1 2866 5 is_stmt 1 view .LVU2144
2866:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
 7241              		.loc 1 2866 25 is_stmt 0 view .LVU2145
 7242 00ae 9A72     		strb	r2, [r3, #10]
2867:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = INV_CLK_PLL;
 7243              		.loc 1 2867 5 is_stmt 1 view .LVU2146
2867:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = INV_CLK_PLL;
 7244              		.loc 1 2867 29 is_stmt 0 view .LVU2147
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 210


 7245 00b0 1A74     		strb	r2, [r3, #16]
2868:task/attitude/eMPL/inv_mpu.c ****     mpu_set_gyro_fsr(gyro_fsr);
 7246              		.loc 1 2868 5 is_stmt 1 view .LVU2148
2868:task/attitude/eMPL/inv_mpu.c ****     mpu_set_gyro_fsr(gyro_fsr);
 7247              		.loc 1 2868 25 is_stmt 0 view .LVU2149
 7248 00b2 0122     		movs	r2, #1
 7249 00b4 1A73     		strb	r2, [r3, #12]
2869:task/attitude/eMPL/inv_mpu.c ****     mpu_set_accel_fsr(accel_fsr);
 7250              		.loc 1 2869 5 is_stmt 1 view .LVU2150
 7251 00b6 BDF80400 		ldrh	r0, [sp, #4]
 7252 00ba FFF7FEFF 		bl	mpu_set_gyro_fsr
 7253              	.LVL479:
2870:task/attitude/eMPL/inv_mpu.c ****     mpu_set_lpf(lpf);
 7254              		.loc 1 2870 5 view .LVU2151
 7255 00be 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 7256 00c2 FFF7FEFF 		bl	mpu_set_accel_fsr
 7257              	.LVL480:
2871:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sample_rate(sample_rate);
 7258              		.loc 1 2871 5 view .LVU2152
 7259 00c6 BDF80000 		ldrh	r0, [sp]
 7260 00ca FFF7FEFF 		bl	mpu_set_lpf
 7261              	.LVL481:
2872:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sensors(sensors_on);
 7262              		.loc 1 2872 5 view .LVU2153
 7263 00ce BDF80200 		ldrh	r0, [sp, #2]
 7264 00d2 FFF7FEFF 		bl	mpu_set_sample_rate
 7265              	.LVL482:
2873:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(fifo_sensors);
 7266              		.loc 1 2873 5 view .LVU2154
 7267 00d6 4046     		mov	r0, r8
 7268 00d8 FFF7FEFF 		bl	mpu_set_sensors
 7269              	.LVL483:
2874:task/attitude/eMPL/inv_mpu.c **** 
 7270              		.loc 1 2874 5 view .LVU2155
 7271 00dc 9DF80600 		ldrb	r0, [sp, #6]	@ zero_extendqisi2
 7272 00e0 FFF7FEFF 		bl	mpu_configure_fifo
 7273              	.LVL484:
2876:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(1);
 7274              		.loc 1 2876 5 view .LVU2156
2876:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(1);
 7275              		.loc 1 2876 8 is_stmt 0 view .LVU2157
 7276 00e4 4FB9     		cbnz	r7, .L579
 7277              	.L562:
2880:task/attitude/eMPL/inv_mpu.c **** 
 7278              		.loc 1 2880 1 view .LVU2158
 7279 00e6 2046     		mov	r0, r4
 7280 00e8 08B0     		add	sp, sp, #32
 7281              	.LCFI148:
 7282              		.cfi_remember_state
 7283              		.cfi_def_cfa_offset 24
 7284              		@ sp needed
 7285 00ea BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 7286              	.LVL485:
 7287              	.L576:
 7288              	.LCFI149:
 7289              		.cfi_restore_state
2842:task/attitude/eMPL/inv_mpu.c ****     if (!accel_result)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 211


 7290              		.loc 1 2842 16 view .LVU2159
 7291 00ee 0124     		movs	r4, #1
 7292              	.LVL486:
2842:task/attitude/eMPL/inv_mpu.c ****     if (!accel_result)
 7293              		.loc 1 2842 16 view .LVU2160
 7294 00f0 D0E7     		b	.L571
 7295              	.LVL487:
 7296              	.L574:
2825:task/attitude/eMPL/inv_mpu.c ****         goto restore;
 7297              		.loc 1 2825 16 view .LVU2161
 7298 00f2 0024     		movs	r4, #0
 7299              	.LVL488:
2825:task/attitude/eMPL/inv_mpu.c ****         goto restore;
 7300              		.loc 1 2825 16 view .LVU2162
 7301 00f4 D3E7     		b	.L567
 7302              	.LVL489:
 7303              	.L575:
2834:task/attitude/eMPL/inv_mpu.c ****         goto restore;
 7304              		.loc 1 2834 16 view .LVU2163
 7305 00f6 0024     		movs	r4, #0
 7306              	.LVL490:
2834:task/attitude/eMPL/inv_mpu.c ****         goto restore;
 7307              		.loc 1 2834 16 view .LVU2164
 7308 00f8 D1E7     		b	.L567
 7309              	.LVL491:
 7310              	.L579:
2877:task/attitude/eMPL/inv_mpu.c **** 
 7311              		.loc 1 2877 9 is_stmt 1 view .LVU2165
 7312 00fa 0120     		movs	r0, #1
 7313 00fc FFF7FEFF 		bl	mpu_set_dmp_state
 7314              	.LVL492:
2879:task/attitude/eMPL/inv_mpu.c **** }
 7315              		.loc 1 2879 5 view .LVU2166
2879:task/attitude/eMPL/inv_mpu.c **** }
 7316              		.loc 1 2879 12 is_stmt 0 view .LVU2167
 7317 0100 F1E7     		b	.L562
 7318              	.L581:
 7319 0102 00BF     		.align	2
 7320              	.L580:
 7321 0104 00000000 		.word	.LANCHOR0
 7322              		.cfi_endproc
 7323              	.LFE189:
 7325              		.section	.text.mpu_get_dmp_state,"ax",%progbits
 7326              		.align	1
 7327              		.global	mpu_get_dmp_state
 7328              		.syntax unified
 7329              		.thumb
 7330              		.thumb_func
 7331              		.fpu fpv5-d16
 7333              	mpu_get_dmp_state:
 7334              	.LVL493:
 7335              	.LFB194:
3034:task/attitude/eMPL/inv_mpu.c **** 
3035:task/attitude/eMPL/inv_mpu.c **** /**
3036:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get DMP state.
3037:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] enabled 1 if enabled.
3038:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 212


3039:task/attitude/eMPL/inv_mpu.c ****  */
3040:task/attitude/eMPL/inv_mpu.c **** int mpu_get_dmp_state(unsigned char *enabled)
3041:task/attitude/eMPL/inv_mpu.c **** {
 7336              		.loc 1 3041 1 is_stmt 1 view -0
 7337              		.cfi_startproc
 7338              		@ args = 0, pretend = 0, frame = 0
 7339              		@ frame_needed = 0, uses_anonymous_args = 0
 7340              		@ link register save eliminated.
3042:task/attitude/eMPL/inv_mpu.c ****     enabled[0] = st.chip_cfg.dmp_on;
 7341              		.loc 1 3042 5 view .LVU2169
 7342              		.loc 1 3042 29 is_stmt 0 view .LVU2170
 7343 0000 024B     		ldr	r3, .L583
 7344 0002 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 7345              		.loc 1 3042 16 view .LVU2171
 7346 0006 0370     		strb	r3, [r0]
3043:task/attitude/eMPL/inv_mpu.c ****     return 0;
 7347              		.loc 1 3043 5 is_stmt 1 view .LVU2172
3044:task/attitude/eMPL/inv_mpu.c **** }
 7348              		.loc 1 3044 1 is_stmt 0 view .LVU2173
 7349 0008 0020     		movs	r0, #0
 7350              	.LVL494:
 7351              		.loc 1 3044 1 view .LVU2174
 7352 000a 7047     		bx	lr
 7353              	.L584:
 7354              		.align	2
 7355              	.L583:
 7356 000c 00000000 		.word	.LANCHOR0
 7357              		.cfi_endproc
 7358              	.LFE194:
 7360              		.section	.text.mpu_get_compass_reg,"ax",%progbits
 7361              		.align	1
 7362              		.global	mpu_get_compass_reg
 7363              		.syntax unified
 7364              		.thumb
 7365              		.thumb_func
 7366              		.fpu fpv5-d16
 7368              	mpu_get_compass_reg:
 7369              	.LVL495:
 7370              	.LFB195:
3045:task/attitude/eMPL/inv_mpu.c **** 
3046:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
3047:task/attitude/eMPL/inv_mpu.c **** /* This initialization is similar to the one in ak8975.c. */
3048:task/attitude/eMPL/inv_mpu.c **** static int setup_compass(void)
3049:task/attitude/eMPL/inv_mpu.c **** {
3050:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[4], akm_addr;
3051:task/attitude/eMPL/inv_mpu.c **** 
3052:task/attitude/eMPL/inv_mpu.c ****     mpu_set_bypass(1);
3053:task/attitude/eMPL/inv_mpu.c **** 
3054:task/attitude/eMPL/inv_mpu.c ****     /* Find compass. Possible addresses range from 0x0C to 0x0F. */
3055:task/attitude/eMPL/inv_mpu.c ****     for (akm_addr = 0x0C; akm_addr <= 0x0F; akm_addr++)
3056:task/attitude/eMPL/inv_mpu.c ****     {
3057:task/attitude/eMPL/inv_mpu.c ****         int result;
3058:task/attitude/eMPL/inv_mpu.c ****         result = i2c_read(akm_addr, AKM_REG_WHOAMI, 1, data);
3059:task/attitude/eMPL/inv_mpu.c ****         if (!result && (data[0] == AKM_WHOAMI))
3060:task/attitude/eMPL/inv_mpu.c ****             break;
3061:task/attitude/eMPL/inv_mpu.c ****     }
3062:task/attitude/eMPL/inv_mpu.c **** 
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 213


3063:task/attitude/eMPL/inv_mpu.c ****     if (akm_addr > 0x0F)
3064:task/attitude/eMPL/inv_mpu.c ****     {
3065:task/attitude/eMPL/inv_mpu.c ****         /* TODO: Handle this case in all compass-related functions. */
3066:task/attitude/eMPL/inv_mpu.c ****         log_e("Compass not found.\n");
3067:task/attitude/eMPL/inv_mpu.c ****         return -1;
3068:task/attitude/eMPL/inv_mpu.c ****     }
3069:task/attitude/eMPL/inv_mpu.c **** 
3070:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.compass_addr = akm_addr;
3071:task/attitude/eMPL/inv_mpu.c **** 
3072:task/attitude/eMPL/inv_mpu.c ****     data[0] = AKM_POWER_DOWN;
3073:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, data))
3074:task/attitude/eMPL/inv_mpu.c ****         return -1;
3075:task/attitude/eMPL/inv_mpu.c ****     delay_ms(1);
3076:task/attitude/eMPL/inv_mpu.c **** 
3077:task/attitude/eMPL/inv_mpu.c ****     data[0] = AKM_FUSE_ROM_ACCESS;
3078:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, data))
3079:task/attitude/eMPL/inv_mpu.c ****         return -1;
3080:task/attitude/eMPL/inv_mpu.c ****     delay_ms(1);
3081:task/attitude/eMPL/inv_mpu.c **** 
3082:task/attitude/eMPL/inv_mpu.c ****     /* Get sensitivity adjustment data from fuse ROM. */
3083:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_ASAX, 3, data))
3084:task/attitude/eMPL/inv_mpu.c ****         return -1;
3085:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.mag_sens_adj[0] = (long)data[0] + 128;
3086:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.mag_sens_adj[1] = (long)data[1] + 128;
3087:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.mag_sens_adj[2] = (long)data[2] + 128;
3088:task/attitude/eMPL/inv_mpu.c **** 
3089:task/attitude/eMPL/inv_mpu.c ****     data[0] = AKM_POWER_DOWN;
3090:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, data))
3091:task/attitude/eMPL/inv_mpu.c ****         return -1;
3092:task/attitude/eMPL/inv_mpu.c ****     delay_ms(1);
3093:task/attitude/eMPL/inv_mpu.c **** 
3094:task/attitude/eMPL/inv_mpu.c ****     mpu_set_bypass(0);
3095:task/attitude/eMPL/inv_mpu.c **** 
3096:task/attitude/eMPL/inv_mpu.c ****     /* Set up master mode, master clock, and ES bit. */
3097:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0x40;
3098:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_mst, 1, data))
3099:task/attitude/eMPL/inv_mpu.c ****         return -1;
3100:task/attitude/eMPL/inv_mpu.c **** 
3101:task/attitude/eMPL/inv_mpu.c ****     /* Slave 0 reads from AKM data registers. */
3102:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_I2C_READ | st.chip_cfg.compass_addr;
3103:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s0_addr, 1, data))
3104:task/attitude/eMPL/inv_mpu.c ****         return -1;
3105:task/attitude/eMPL/inv_mpu.c **** 
3106:task/attitude/eMPL/inv_mpu.c ****     /* Compass reads start at this register. */
3107:task/attitude/eMPL/inv_mpu.c ****     data[0] = AKM_REG_ST1;
3108:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s0_reg, 1, data))
3109:task/attitude/eMPL/inv_mpu.c ****         return -1;
3110:task/attitude/eMPL/inv_mpu.c **** 
3111:task/attitude/eMPL/inv_mpu.c ****     /* Enable slave 0, 8-byte reads. */
3112:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_SLAVE_EN | 8;
3113:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s0_ctrl, 1, data))
3114:task/attitude/eMPL/inv_mpu.c ****         return -1;
3115:task/attitude/eMPL/inv_mpu.c **** 
3116:task/attitude/eMPL/inv_mpu.c ****     /* Slave 1 changes AKM measurement mode. */
3117:task/attitude/eMPL/inv_mpu.c ****     data[0] = st.chip_cfg.compass_addr;
3118:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_addr, 1, data))
3119:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 214


3120:task/attitude/eMPL/inv_mpu.c **** 
3121:task/attitude/eMPL/inv_mpu.c ****     /* AKM measurement mode register. */
3122:task/attitude/eMPL/inv_mpu.c ****     data[0] = AKM_REG_CNTL;
3123:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_reg, 1, data))
3124:task/attitude/eMPL/inv_mpu.c ****         return -1;
3125:task/attitude/eMPL/inv_mpu.c **** 
3126:task/attitude/eMPL/inv_mpu.c ****     /* Enable slave 1, 1-byte writes. */
3127:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_SLAVE_EN | 1;
3128:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_ctrl, 1, data))
3129:task/attitude/eMPL/inv_mpu.c ****         return -1;
3130:task/attitude/eMPL/inv_mpu.c **** 
3131:task/attitude/eMPL/inv_mpu.c ****     /* Set slave 1 data. */
3132:task/attitude/eMPL/inv_mpu.c ****     data[0] = AKM_SINGLE_MEASUREMENT;
3133:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->s1_do, 1, data))
3134:task/attitude/eMPL/inv_mpu.c ****         return -1;
3135:task/attitude/eMPL/inv_mpu.c **** 
3136:task/attitude/eMPL/inv_mpu.c ****     /* Trigger slave 0 and slave 1 actions at each sample. */
3137:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0x03;
3138:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->i2c_delay_ctrl, 1, data))
3139:task/attitude/eMPL/inv_mpu.c ****         return -1;
3140:task/attitude/eMPL/inv_mpu.c **** 
3141:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU9150
3142:task/attitude/eMPL/inv_mpu.c ****     /* For the MPU9150, the auxiliary I2C bus needs to be set to VDD. */
3143:task/attitude/eMPL/inv_mpu.c ****     data[0] = BIT_I2C_MST_VDDIO;
3144:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->yg_offs_tc, 1, data))
3145:task/attitude/eMPL/inv_mpu.c ****         return -1;
3146:task/attitude/eMPL/inv_mpu.c **** #endif
3147:task/attitude/eMPL/inv_mpu.c **** 
3148:task/attitude/eMPL/inv_mpu.c ****     return 0;
3149:task/attitude/eMPL/inv_mpu.c **** }
3150:task/attitude/eMPL/inv_mpu.c **** #endif
3151:task/attitude/eMPL/inv_mpu.c **** 
3152:task/attitude/eMPL/inv_mpu.c **** /**
3153:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Read raw compass data.
3154:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] data        Raw data in hardware units.
3155:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] timestamp   Timestamp in milliseconds. Null if not needed.
3156:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
3157:task/attitude/eMPL/inv_mpu.c ****  */
3158:task/attitude/eMPL/inv_mpu.c **** int mpu_get_compass_reg(short *data, unsigned long *timestamp)
3159:task/attitude/eMPL/inv_mpu.c **** {
 7371              		.loc 1 3159 1 is_stmt 1 view -0
 7372              		.cfi_startproc
 7373              		@ args = 0, pretend = 0, frame = 0
 7374              		@ frame_needed = 0, uses_anonymous_args = 0
 7375              		@ link register save eliminated.
3160:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
3161:task/attitude/eMPL/inv_mpu.c ****     unsigned char tmp[9];
3162:task/attitude/eMPL/inv_mpu.c **** 
3163:task/attitude/eMPL/inv_mpu.c ****     if (!(st.chip_cfg.sensors & INV_XYZ_COMPASS))
3164:task/attitude/eMPL/inv_mpu.c ****         return -1;
3165:task/attitude/eMPL/inv_mpu.c **** 
3166:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_BYPASS
3167:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.chip_cfg.compass_addr, AKM_REG_ST1, 8, tmp))
3168:task/attitude/eMPL/inv_mpu.c ****         return -1;
3169:task/attitude/eMPL/inv_mpu.c ****     tmp[8] = AKM_SINGLE_MEASUREMENT;
3170:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.chip_cfg.compass_addr, AKM_REG_CNTL, 1, tmp + 8))
3171:task/attitude/eMPL/inv_mpu.c ****         return -1;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 215


3172:task/attitude/eMPL/inv_mpu.c **** #else
3173:task/attitude/eMPL/inv_mpu.c ****     if (i2c_read(st.hw->addr, st.reg->raw_compass, 8, tmp))
3174:task/attitude/eMPL/inv_mpu.c ****         return -1;
3175:task/attitude/eMPL/inv_mpu.c **** #endif
3176:task/attitude/eMPL/inv_mpu.c **** 
3177:task/attitude/eMPL/inv_mpu.c **** #if defined AK8975_SECONDARY
3178:task/attitude/eMPL/inv_mpu.c ****     /* AK8975 doesn't have the overrun error bit. */
3179:task/attitude/eMPL/inv_mpu.c ****     if (!(tmp[0] & AKM_DATA_READY))
3180:task/attitude/eMPL/inv_mpu.c ****         return -2;
3181:task/attitude/eMPL/inv_mpu.c ****     if ((tmp[7] & AKM_OVERFLOW) || (tmp[7] & AKM_DATA_ERROR))
3182:task/attitude/eMPL/inv_mpu.c ****         return -3;
3183:task/attitude/eMPL/inv_mpu.c **** #elif defined AK8963_SECONDARY
3184:task/attitude/eMPL/inv_mpu.c ****     /* AK8963 doesn't have the data read error bit. */
3185:task/attitude/eMPL/inv_mpu.c ****     if (!(tmp[0] & AKM_DATA_READY) || (tmp[0] & AKM_DATA_OVERRUN))
3186:task/attitude/eMPL/inv_mpu.c ****         return -2;
3187:task/attitude/eMPL/inv_mpu.c ****     if (tmp[7] & AKM_OVERFLOW)
3188:task/attitude/eMPL/inv_mpu.c ****         return -3;
3189:task/attitude/eMPL/inv_mpu.c **** #endif
3190:task/attitude/eMPL/inv_mpu.c ****     data[0] = (tmp[2] << 8) | tmp[1];
3191:task/attitude/eMPL/inv_mpu.c ****     data[1] = (tmp[4] << 8) | tmp[3];
3192:task/attitude/eMPL/inv_mpu.c ****     data[2] = (tmp[6] << 8) | tmp[5];
3193:task/attitude/eMPL/inv_mpu.c **** 
3194:task/attitude/eMPL/inv_mpu.c ****     data[0] = ((long)data[0] * st.chip_cfg.mag_sens_adj[0]) >> 8;
3195:task/attitude/eMPL/inv_mpu.c ****     data[1] = ((long)data[1] * st.chip_cfg.mag_sens_adj[1]) >> 8;
3196:task/attitude/eMPL/inv_mpu.c ****     data[2] = ((long)data[2] * st.chip_cfg.mag_sens_adj[2]) >> 8;
3197:task/attitude/eMPL/inv_mpu.c **** 
3198:task/attitude/eMPL/inv_mpu.c ****     if (timestamp)
3199:task/attitude/eMPL/inv_mpu.c ****         get_ms(timestamp);
3200:task/attitude/eMPL/inv_mpu.c ****     return 0;
3201:task/attitude/eMPL/inv_mpu.c **** #else
3202:task/attitude/eMPL/inv_mpu.c ****     return -1;
 7376              		.loc 1 3202 5 view .LVU2176
3203:task/attitude/eMPL/inv_mpu.c **** #endif
3204:task/attitude/eMPL/inv_mpu.c **** }
 7377              		.loc 1 3204 1 is_stmt 0 view .LVU2177
 7378 0000 4FF0FF30 		mov	r0, #-1
 7379              	.LVL496:
 7380              		.loc 1 3204 1 view .LVU2178
 7381 0004 7047     		bx	lr
 7382              		.cfi_endproc
 7383              	.LFE195:
 7385              		.section	.text.mpu_get_compass_fsr,"ax",%progbits
 7386              		.align	1
 7387              		.global	mpu_get_compass_fsr
 7388              		.syntax unified
 7389              		.thumb
 7390              		.thumb_func
 7391              		.fpu fpv5-d16
 7393              	mpu_get_compass_fsr:
 7394              	.LVL497:
 7395              	.LFB196:
3205:task/attitude/eMPL/inv_mpu.c **** 
3206:task/attitude/eMPL/inv_mpu.c **** /**
3207:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Get the compass full-scale range.
3208:task/attitude/eMPL/inv_mpu.c ****  *  @param[out] fsr Current full-scale range.
3209:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
3210:task/attitude/eMPL/inv_mpu.c ****  */
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 216


3211:task/attitude/eMPL/inv_mpu.c **** int mpu_get_compass_fsr(unsigned short *fsr)
3212:task/attitude/eMPL/inv_mpu.c **** {
 7396              		.loc 1 3212 1 is_stmt 1 view -0
 7397              		.cfi_startproc
 7398              		@ args = 0, pretend = 0, frame = 0
 7399              		@ frame_needed = 0, uses_anonymous_args = 0
 7400              		@ link register save eliminated.
3213:task/attitude/eMPL/inv_mpu.c **** #ifdef AK89xx_SECONDARY
3214:task/attitude/eMPL/inv_mpu.c ****     fsr[0] = st.hw->compass_fsr;
3215:task/attitude/eMPL/inv_mpu.c ****     return 0;
3216:task/attitude/eMPL/inv_mpu.c **** #else
3217:task/attitude/eMPL/inv_mpu.c ****     return -1;
 7401              		.loc 1 3217 5 view .LVU2180
3218:task/attitude/eMPL/inv_mpu.c **** #endif
3219:task/attitude/eMPL/inv_mpu.c **** }
 7402              		.loc 1 3219 1 is_stmt 0 view .LVU2181
 7403 0000 4FF0FF30 		mov	r0, #-1
 7404              	.LVL498:
 7405              		.loc 1 3219 1 view .LVU2182
 7406 0004 7047     		bx	lr
 7407              		.cfi_endproc
 7408              	.LFE196:
 7410              		.section	.text.mpu_lp_motion_interrupt,"ax",%progbits
 7411              		.align	1
 7412              		.global	mpu_lp_motion_interrupt
 7413              		.syntax unified
 7414              		.thumb
 7415              		.thumb_func
 7416              		.fpu fpv5-d16
 7418              	mpu_lp_motion_interrupt:
 7419              	.LVL499:
 7420              	.LFB197:
3220:task/attitude/eMPL/inv_mpu.c **** 
3221:task/attitude/eMPL/inv_mpu.c **** /**
3222:task/attitude/eMPL/inv_mpu.c ****  *  @brief      Enters LP accel motion interrupt mode.
3223:task/attitude/eMPL/inv_mpu.c ****  *  The behaviour of this feature is very different between the MPU6050 and the
3224:task/attitude/eMPL/inv_mpu.c ****  *  MPU6500. Each chip's version of this feature is explained below.
3225:task/attitude/eMPL/inv_mpu.c ****  *
3226:task/attitude/eMPL/inv_mpu.c ****  *  \n The hardware motion threshold can be between 32mg and 8160mg in 32mg
3227:task/attitude/eMPL/inv_mpu.c ****  *  increments.
3228:task/attitude/eMPL/inv_mpu.c ****  *
3229:task/attitude/eMPL/inv_mpu.c ****  *  \n Low-power accel mode supports the following frequencies:
3230:task/attitude/eMPL/inv_mpu.c ****  *  \n 1.25Hz, 5Hz, 20Hz, 40Hz
3231:task/attitude/eMPL/inv_mpu.c ****  *
3232:task/attitude/eMPL/inv_mpu.c ****  *  \n MPU6500:
3233:task/attitude/eMPL/inv_mpu.c ****  *  \n Unlike the MPU6050 version, the hardware does not "lock in" a reference
3234:task/attitude/eMPL/inv_mpu.c ****  *  sample. The hardware monitors the accel data and detects any large change
3235:task/attitude/eMPL/inv_mpu.c ****  *  over a short period of time.
3236:task/attitude/eMPL/inv_mpu.c ****  *
3237:task/attitude/eMPL/inv_mpu.c ****  *  \n The hardware motion threshold can be between 4mg and 1020mg in 4mg
3238:task/attitude/eMPL/inv_mpu.c ****  *  increments.
3239:task/attitude/eMPL/inv_mpu.c ****  *
3240:task/attitude/eMPL/inv_mpu.c ****  *  \n MPU6500 Low-power accel mode supports the following frequencies:
3241:task/attitude/eMPL/inv_mpu.c ****  *  \n 1.25Hz, 2.5Hz, 5Hz, 10Hz, 20Hz, 40Hz, 80Hz, 160Hz, 320Hz, 640Hz
3242:task/attitude/eMPL/inv_mpu.c ****  *
3243:task/attitude/eMPL/inv_mpu.c ****  *  \n\n NOTES:
3244:task/attitude/eMPL/inv_mpu.c ****  *  \n The driver will round down @e thresh to the nearest supported value if
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 217


3245:task/attitude/eMPL/inv_mpu.c ****  *  an unsupported threshold is selected.
3246:task/attitude/eMPL/inv_mpu.c ****  *  \n To select a fractional wake-up frequency, round down the value passed to
3247:task/attitude/eMPL/inv_mpu.c ****  *  @e lpa_freq.
3248:task/attitude/eMPL/inv_mpu.c ****  *  \n The MPU6500 does not support a delay parameter. If this function is used
3249:task/attitude/eMPL/inv_mpu.c ****  *  for the MPU6500, the value passed to @e time will be ignored.
3250:task/attitude/eMPL/inv_mpu.c ****  *  \n To disable this mode, set @e lpa_freq to zero. The driver will restore
3251:task/attitude/eMPL/inv_mpu.c ****  *  the previous configuration.
3252:task/attitude/eMPL/inv_mpu.c ****  *
3253:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  thresh      Motion threshold in mg.
3254:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  time        Duration in milliseconds that the accel data must
3255:task/attitude/eMPL/inv_mpu.c ****  *                          exceed @e thresh before motion is reported.
3256:task/attitude/eMPL/inv_mpu.c ****  *  @param[in]  lpa_freq    Minimum sampling rate, or zero to disable.
3257:task/attitude/eMPL/inv_mpu.c ****  *  @return     0 if successful.
3258:task/attitude/eMPL/inv_mpu.c ****  */
3259:task/attitude/eMPL/inv_mpu.c **** int mpu_lp_motion_interrupt(unsigned short thresh, unsigned char time,
3260:task/attitude/eMPL/inv_mpu.c ****                             unsigned short lpa_freq)
3261:task/attitude/eMPL/inv_mpu.c **** {
 7421              		.loc 1 3261 1 is_stmt 1 view -0
 7422              		.cfi_startproc
 7423              		@ args = 0, pretend = 0, frame = 0
 7424              		@ frame_needed = 0, uses_anonymous_args = 0
 7425              		.loc 1 3261 1 is_stmt 0 view .LVU2184
 7426 0000 10B5     		push	{r4, lr}
 7427              	.LCFI150:
 7428              		.cfi_def_cfa_offset 8
 7429              		.cfi_offset 4, -8
 7430              		.cfi_offset 14, -4
3262:task/attitude/eMPL/inv_mpu.c **** 
3263:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6500
3264:task/attitude/eMPL/inv_mpu.c ****     unsigned char data[3];
3265:task/attitude/eMPL/inv_mpu.c **** #endif
3266:task/attitude/eMPL/inv_mpu.c ****     if (lpa_freq)
 7431              		.loc 1 3266 5 is_stmt 1 view .LVU2185
 7432              		.loc 1 3266 8 is_stmt 0 view .LVU2186
 7433 0002 002A     		cmp	r2, #0
 7434 0004 4FD0     		beq	.L595
3267:task/attitude/eMPL/inv_mpu.c ****     {
3268:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6500
3269:task/attitude/eMPL/inv_mpu.c ****         unsigned char thresh_hw;
3270:task/attitude/eMPL/inv_mpu.c **** 
3271:task/attitude/eMPL/inv_mpu.c ****         /* 1LSb = 4mg. */
3272:task/attitude/eMPL/inv_mpu.c ****         if (thresh > 1020)
3273:task/attitude/eMPL/inv_mpu.c ****             thresh_hw = 255;
3274:task/attitude/eMPL/inv_mpu.c ****         else if (thresh < 4)
3275:task/attitude/eMPL/inv_mpu.c ****             thresh_hw = 1;
3276:task/attitude/eMPL/inv_mpu.c ****         else
3277:task/attitude/eMPL/inv_mpu.c ****             thresh_hw = thresh >> 2;
3278:task/attitude/eMPL/inv_mpu.c **** #endif
3279:task/attitude/eMPL/inv_mpu.c **** 
3280:task/attitude/eMPL/inv_mpu.c ****         if (!time)
 7435              		.loc 1 3280 9 is_stmt 1 view .LVU2187
 7436              	.LVL500:
3281:task/attitude/eMPL/inv_mpu.c ****             /* Minimum duration must be 1ms. */
3282:task/attitude/eMPL/inv_mpu.c ****             time = 1;
3283:task/attitude/eMPL/inv_mpu.c **** 
3284:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6500
3285:task/attitude/eMPL/inv_mpu.c ****         if (lpa_freq > 640)
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 218


3286:task/attitude/eMPL/inv_mpu.c ****             /* At this point, the chip has not been re-configured, so the
3287:task/attitude/eMPL/inv_mpu.c ****              * function can safely exit.
3288:task/attitude/eMPL/inv_mpu.c ****              */
3289:task/attitude/eMPL/inv_mpu.c ****             return -1;
3290:task/attitude/eMPL/inv_mpu.c **** #endif
3291:task/attitude/eMPL/inv_mpu.c **** 
3292:task/attitude/eMPL/inv_mpu.c ****         if (!st.chip_cfg.int_motion_only)
 7437              		.loc 1 3292 9 view .LVU2188
 7438              		.loc 1 3292 25 is_stmt 0 view .LVU2189
 7439 0006 304B     		ldr	r3, .L600
 7440 0008 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 7441              		.loc 1 3292 12 view .LVU2190
 7442 000a FBB9     		cbnz	r3, .L589
3293:task/attitude/eMPL/inv_mpu.c ****         {
3294:task/attitude/eMPL/inv_mpu.c ****             /* Store current settings for later. */
3295:task/attitude/eMPL/inv_mpu.c ****             if (st.chip_cfg.dmp_on)
 7443              		.loc 1 3295 13 is_stmt 1 view .LVU2191
 7444              		.loc 1 3295 28 is_stmt 0 view .LVU2192
 7445 000c 2E4B     		ldr	r3, .L600
 7446 000e 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 7447              		.loc 1 3295 16 view .LVU2193
 7448 0012 002B     		cmp	r3, #0
 7449 0014 3FD1     		bne	.L597
3296:task/attitude/eMPL/inv_mpu.c ****             {
3297:task/attitude/eMPL/inv_mpu.c ****                 mpu_set_dmp_state(0);
3298:task/attitude/eMPL/inv_mpu.c ****                 st.chip_cfg.cache.dmp_on = 1;
3299:task/attitude/eMPL/inv_mpu.c ****             }
3300:task/attitude/eMPL/inv_mpu.c ****             else
3301:task/attitude/eMPL/inv_mpu.c ****                 st.chip_cfg.cache.dmp_on = 0;
 7450              		.loc 1 3301 17 is_stmt 1 view .LVU2194
 7451              		.loc 1 3301 42 is_stmt 0 view .LVU2195
 7452 0016 2C4B     		ldr	r3, .L600
 7453 0018 0022     		movs	r2, #0
 7454              	.LVL501:
 7455              		.loc 1 3301 42 view .LVU2196
 7456 001a 83F82020 		strb	r2, [r3, #32]
 7457              	.LVL502:
 7458              	.L591:
3302:task/attitude/eMPL/inv_mpu.c ****             mpu_get_gyro_fsr(&st.chip_cfg.cache.gyro_fsr);
 7459              		.loc 1 3302 13 is_stmt 1 view .LVU2197
 7460 001e 2A4C     		ldr	r4, .L600
 7461 0020 04F11600 		add	r0, r4, #22
 7462 0024 FFF7FEFF 		bl	mpu_get_gyro_fsr
 7463              	.LVL503:
3303:task/attitude/eMPL/inv_mpu.c ****             mpu_get_accel_fsr(&st.chip_cfg.cache.accel_fsr);
 7464              		.loc 1 3303 13 view .LVU2198
 7465 0028 04F11800 		add	r0, r4, #24
 7466 002c FFF7FEFF 		bl	mpu_get_accel_fsr
 7467              	.LVL504:
3304:task/attitude/eMPL/inv_mpu.c ****             mpu_get_lpf(&st.chip_cfg.cache.lpf);
 7468              		.loc 1 3304 13 view .LVU2199
 7469 0030 04F11A00 		add	r0, r4, #26
 7470 0034 FFF7FEFF 		bl	mpu_get_lpf
 7471              	.LVL505:
3305:task/attitude/eMPL/inv_mpu.c ****             mpu_get_sample_rate(&st.chip_cfg.cache.sample_rate);
 7472              		.loc 1 3305 13 view .LVU2200
 7473 0038 04F11C00 		add	r0, r4, #28
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 219


 7474 003c FFF7FEFF 		bl	mpu_get_sample_rate
 7475              	.LVL506:
3306:task/attitude/eMPL/inv_mpu.c ****             st.chip_cfg.cache.sensors_on = st.chip_cfg.sensors;
 7476              		.loc 1 3306 13 view .LVU2201
 7477              		.loc 1 3306 55 is_stmt 0 view .LVU2202
 7478 0040 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 7479              		.loc 1 3306 42 view .LVU2203
 7480 0042 A377     		strb	r3, [r4, #30]
3307:task/attitude/eMPL/inv_mpu.c ****             mpu_get_fifo_config(&st.chip_cfg.cache.fifo_sensors);
 7481              		.loc 1 3307 13 is_stmt 1 view .LVU2204
 7482 0044 04F11F00 		add	r0, r4, #31
 7483 0048 FFF7FEFF 		bl	mpu_get_fifo_config
 7484              	.LVL507:
 7485              	.L589:
3308:task/attitude/eMPL/inv_mpu.c ****         }
3309:task/attitude/eMPL/inv_mpu.c **** 
3310:task/attitude/eMPL/inv_mpu.c **** #if defined MPU6500
3311:task/attitude/eMPL/inv_mpu.c ****         /* Disable hardware interrupts. */
3312:task/attitude/eMPL/inv_mpu.c ****         set_int_enable(0);
3313:task/attitude/eMPL/inv_mpu.c **** 
3314:task/attitude/eMPL/inv_mpu.c ****         /* Enter full-power accel-only mode, no FIFO/DMP. */
3315:task/attitude/eMPL/inv_mpu.c ****         data[0] = 0;
3316:task/attitude/eMPL/inv_mpu.c ****         data[1] = 0;
3317:task/attitude/eMPL/inv_mpu.c ****         data[2] = BIT_STBY_XYZG;
3318:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->user_ctrl, 3, data))
3319:task/attitude/eMPL/inv_mpu.c ****             goto lp_int_restore;
3320:task/attitude/eMPL/inv_mpu.c **** 
3321:task/attitude/eMPL/inv_mpu.c ****         /* Set motion threshold. */
3322:task/attitude/eMPL/inv_mpu.c ****         data[0] = thresh_hw;
3323:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->motion_thr, 1, data))
3324:task/attitude/eMPL/inv_mpu.c ****             goto lp_int_restore;
3325:task/attitude/eMPL/inv_mpu.c **** 
3326:task/attitude/eMPL/inv_mpu.c ****         /* Set wake frequency. */
3327:task/attitude/eMPL/inv_mpu.c ****         if (lpa_freq == 1)
3328:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_1_25HZ;
3329:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq == 2)
3330:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_2_5HZ;
3331:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 5)
3332:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_5HZ;
3333:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 10)
3334:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_10HZ;
3335:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 20)
3336:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_20HZ;
3337:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 40)
3338:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_40HZ;
3339:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 80)
3340:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_80HZ;
3341:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 160)
3342:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_160HZ;
3343:task/attitude/eMPL/inv_mpu.c ****         else if (lpa_freq <= 320)
3344:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_320HZ;
3345:task/attitude/eMPL/inv_mpu.c ****         else
3346:task/attitude/eMPL/inv_mpu.c ****             data[0] = INV_LPA_640HZ;
3347:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->lp_accel_odr, 1, data))
3348:task/attitude/eMPL/inv_mpu.c ****             goto lp_int_restore;
3349:task/attitude/eMPL/inv_mpu.c **** 
3350:task/attitude/eMPL/inv_mpu.c ****         /* Enable motion interrupt (MPU6500 version). */
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 220


3351:task/attitude/eMPL/inv_mpu.c ****         data[0] = BITS_WOM_EN;
3352:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->accel_intel, 1, data))
3353:task/attitude/eMPL/inv_mpu.c ****             goto lp_int_restore;
3354:task/attitude/eMPL/inv_mpu.c **** 
3355:task/attitude/eMPL/inv_mpu.c ****         /* Enable cycle mode. */
3356:task/attitude/eMPL/inv_mpu.c ****         data[0] = BIT_LPA_CYCLE;
3357:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->pwr_mgmt_1, 1, data))
3358:task/attitude/eMPL/inv_mpu.c ****             goto lp_int_restore;
3359:task/attitude/eMPL/inv_mpu.c **** 
3360:task/attitude/eMPL/inv_mpu.c ****         /* Enable interrupt. */
3361:task/attitude/eMPL/inv_mpu.c ****         data[0] = BIT_MOT_INT_EN;
3362:task/attitude/eMPL/inv_mpu.c ****         if (i2c_write(st.hw->addr, st.reg->int_enable, 1, data))
3363:task/attitude/eMPL/inv_mpu.c ****             goto lp_int_restore;
3364:task/attitude/eMPL/inv_mpu.c **** 
3365:task/attitude/eMPL/inv_mpu.c ****         st.chip_cfg.int_motion_only = 1;
3366:task/attitude/eMPL/inv_mpu.c ****         return 0;
3367:task/attitude/eMPL/inv_mpu.c **** #endif
3368:task/attitude/eMPL/inv_mpu.c ****     }
3369:task/attitude/eMPL/inv_mpu.c ****     else
3370:task/attitude/eMPL/inv_mpu.c ****     {
3371:task/attitude/eMPL/inv_mpu.c ****         /* Don't "restore" the previous state if no state has been saved. */
3372:task/attitude/eMPL/inv_mpu.c ****         unsigned int ii;
3373:task/attitude/eMPL/inv_mpu.c ****         char *cache_ptr = (char *)&st.chip_cfg.cache;
3374:task/attitude/eMPL/inv_mpu.c ****         for (ii = 0; ii < sizeof(st.chip_cfg.cache); ii++)
3375:task/attitude/eMPL/inv_mpu.c ****         {
3376:task/attitude/eMPL/inv_mpu.c ****             if (cache_ptr[ii] != 0)
3377:task/attitude/eMPL/inv_mpu.c ****                 goto lp_int_restore;
3378:task/attitude/eMPL/inv_mpu.c ****         }
3379:task/attitude/eMPL/inv_mpu.c ****         /* If we reach this point, motion interrupt mode hasn't been used yet. */
3380:task/attitude/eMPL/inv_mpu.c ****         return -1;
3381:task/attitude/eMPL/inv_mpu.c ****     }
3382:task/attitude/eMPL/inv_mpu.c **** lp_int_restore:
3383:task/attitude/eMPL/inv_mpu.c ****     /* Set to invalid values to ensure no I2C writes are skipped. */
3384:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.gyro_fsr = 0xFF;
 7486              		.loc 1 3384 5 view .LVU2205
 7487              		.loc 1 3384 26 is_stmt 0 view .LVU2206
 7488 004c 1E4C     		ldr	r4, .L600
 7489 004e FF23     		movs	r3, #255
 7490 0050 2372     		strb	r3, [r4, #8]
3385:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.accel_fsr = 0xFF;
 7491              		.loc 1 3385 5 is_stmt 1 view .LVU2207
 7492              		.loc 1 3385 27 is_stmt 0 view .LVU2208
 7493 0052 6372     		strb	r3, [r4, #9]
3386:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.lpf = 0xFF;
 7494              		.loc 1 3386 5 is_stmt 1 view .LVU2209
 7495              		.loc 1 3386 21 is_stmt 0 view .LVU2210
 7496 0054 E372     		strb	r3, [r4, #11]
3387:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sample_rate = 0xFFFF;
 7497              		.loc 1 3387 5 is_stmt 1 view .LVU2211
 7498              		.loc 1 3387 29 is_stmt 0 view .LVU2212
 7499 0056 4FF6FF72 		movw	r2, #65535
 7500 005a E281     		strh	r2, [r4, #14]	@ movhi
3388:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.sensors = 0xFF;
 7501              		.loc 1 3388 5 is_stmt 1 view .LVU2213
 7502              		.loc 1 3388 25 is_stmt 0 view .LVU2214
 7503 005c A372     		strb	r3, [r4, #10]
3389:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.fifo_enable = 0xFF;
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 221


 7504              		.loc 1 3389 5 is_stmt 1 view .LVU2215
 7505              		.loc 1 3389 29 is_stmt 0 view .LVU2216
 7506 005e 2374     		strb	r3, [r4, #16]
3390:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.clk_src = INV_CLK_PLL;
 7507              		.loc 1 3390 5 is_stmt 1 view .LVU2217
 7508              		.loc 1 3390 25 is_stmt 0 view .LVU2218
 7509 0060 0123     		movs	r3, #1
 7510 0062 2373     		strb	r3, [r4, #12]
3391:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sensors(st.chip_cfg.cache.sensors_on);
 7511              		.loc 1 3391 5 is_stmt 1 view .LVU2219
 7512 0064 A07F     		ldrb	r0, [r4, #30]	@ zero_extendqisi2
 7513 0066 FFF7FEFF 		bl	mpu_set_sensors
 7514              	.LVL508:
3392:task/attitude/eMPL/inv_mpu.c ****     mpu_set_gyro_fsr(st.chip_cfg.cache.gyro_fsr);
 7515              		.loc 1 3392 5 view .LVU2220
 7516 006a E08A     		ldrh	r0, [r4, #22]
 7517 006c FFF7FEFF 		bl	mpu_set_gyro_fsr
 7518              	.LVL509:
3393:task/attitude/eMPL/inv_mpu.c ****     mpu_set_accel_fsr(st.chip_cfg.cache.accel_fsr);
 7519              		.loc 1 3393 5 view .LVU2221
 7520 0070 207E     		ldrb	r0, [r4, #24]	@ zero_extendqisi2
 7521 0072 FFF7FEFF 		bl	mpu_set_accel_fsr
 7522              	.LVL510:
3394:task/attitude/eMPL/inv_mpu.c ****     mpu_set_lpf(st.chip_cfg.cache.lpf);
 7523              		.loc 1 3394 5 view .LVU2222
 7524 0076 608B     		ldrh	r0, [r4, #26]
 7525 0078 FFF7FEFF 		bl	mpu_set_lpf
 7526              	.LVL511:
3395:task/attitude/eMPL/inv_mpu.c ****     mpu_set_sample_rate(st.chip_cfg.cache.sample_rate);
 7527              		.loc 1 3395 5 view .LVU2223
 7528 007c A08B     		ldrh	r0, [r4, #28]
 7529 007e FFF7FEFF 		bl	mpu_set_sample_rate
 7530              	.LVL512:
3396:task/attitude/eMPL/inv_mpu.c ****     mpu_configure_fifo(st.chip_cfg.cache.fifo_sensors);
 7531              		.loc 1 3396 5 view .LVU2224
 7532 0082 E07F     		ldrb	r0, [r4, #31]	@ zero_extendqisi2
 7533 0084 FFF7FEFF 		bl	mpu_configure_fifo
 7534              	.LVL513:
3397:task/attitude/eMPL/inv_mpu.c **** 
3398:task/attitude/eMPL/inv_mpu.c ****     if (st.chip_cfg.cache.dmp_on)
 7535              		.loc 1 3398 5 view .LVU2225
 7536              		.loc 1 3398 26 is_stmt 0 view .LVU2226
 7537 0088 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 7538              		.loc 1 3398 8 view .LVU2227
 7539 008c C3B9     		cbnz	r3, .L598
 7540              	.L594:
3399:task/attitude/eMPL/inv_mpu.c ****         mpu_set_dmp_state(1);
3400:task/attitude/eMPL/inv_mpu.c **** 
3401:task/attitude/eMPL/inv_mpu.c **** #ifdef MPU6500
3402:task/attitude/eMPL/inv_mpu.c ****     /* Disable motion interrupt (MPU6500 version). */
3403:task/attitude/eMPL/inv_mpu.c ****     data[0] = 0;
3404:task/attitude/eMPL/inv_mpu.c ****     if (i2c_write(st.hw->addr, st.reg->accel_intel, 1, data))
3405:task/attitude/eMPL/inv_mpu.c ****         goto lp_int_restore;
3406:task/attitude/eMPL/inv_mpu.c **** #endif
3407:task/attitude/eMPL/inv_mpu.c **** 
3408:task/attitude/eMPL/inv_mpu.c ****     st.chip_cfg.int_motion_only = 0;
 7541              		.loc 1 3408 5 is_stmt 1 view .LVU2228
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 222


 7542              		.loc 1 3408 33 is_stmt 0 view .LVU2229
 7543 008e 0020     		movs	r0, #0
 7544 0090 0D4B     		ldr	r3, .L600
 7545 0092 5875     		strb	r0, [r3, #21]
3409:task/attitude/eMPL/inv_mpu.c ****     return 0;
 7546              		.loc 1 3409 5 is_stmt 1 view .LVU2230
 7547              	.L587:
3410:task/attitude/eMPL/inv_mpu.c **** }
 7548              		.loc 1 3410 1 is_stmt 0 view .LVU2231
 7549 0094 10BD     		pop	{r4, pc}
 7550              	.LVL514:
 7551              	.L597:
3297:task/attitude/eMPL/inv_mpu.c ****                 st.chip_cfg.cache.dmp_on = 1;
 7552              		.loc 1 3297 17 is_stmt 1 view .LVU2232
 7553 0096 0020     		movs	r0, #0
 7554              	.LVL515:
3297:task/attitude/eMPL/inv_mpu.c ****                 st.chip_cfg.cache.dmp_on = 1;
 7555              		.loc 1 3297 17 is_stmt 0 view .LVU2233
 7556 0098 FFF7FEFF 		bl	mpu_set_dmp_state
 7557              	.LVL516:
3298:task/attitude/eMPL/inv_mpu.c ****             }
 7558              		.loc 1 3298 17 is_stmt 1 view .LVU2234
3298:task/attitude/eMPL/inv_mpu.c ****             }
 7559              		.loc 1 3298 42 is_stmt 0 view .LVU2235
 7560 009c 0A4B     		ldr	r3, .L600
 7561 009e 0122     		movs	r2, #1
 7562 00a0 83F82020 		strb	r2, [r3, #32]
 7563 00a4 BBE7     		b	.L591
 7564              	.LVL517:
 7565              	.L595:
 7566              	.LBB4:
3374:task/attitude/eMPL/inv_mpu.c ****         {
 7567              		.loc 1 3374 17 view .LVU2236
 7568 00a6 0023     		movs	r3, #0
 7569              	.LVL518:
 7570              	.L588:
3374:task/attitude/eMPL/inv_mpu.c ****         {
 7571              		.loc 1 3374 22 is_stmt 1 discriminator 1 view .LVU2237
3374:task/attitude/eMPL/inv_mpu.c ****         {
 7572              		.loc 1 3374 9 is_stmt 0 discriminator 1 view .LVU2238
 7573 00a8 0B2B     		cmp	r3, #11
 7574 00aa 06D8     		bhi	.L599
3376:task/attitude/eMPL/inv_mpu.c ****                 goto lp_int_restore;
 7575              		.loc 1 3376 13 is_stmt 1 view .LVU2239
3376:task/attitude/eMPL/inv_mpu.c ****                 goto lp_int_restore;
 7576              		.loc 1 3376 26 is_stmt 0 view .LVU2240
 7577 00ac 064A     		ldr	r2, .L600
 7578 00ae 1A44     		add	r2, r2, r3
 7579 00b0 927D     		ldrb	r2, [r2, #22]	@ zero_extendqisi2
3376:task/attitude/eMPL/inv_mpu.c ****                 goto lp_int_restore;
 7580              		.loc 1 3376 16 view .LVU2241
 7581 00b2 002A     		cmp	r2, #0
 7582 00b4 CAD1     		bne	.L589
3374:task/attitude/eMPL/inv_mpu.c ****         {
 7583              		.loc 1 3374 54 is_stmt 1 discriminator 2 view .LVU2242
3374:task/attitude/eMPL/inv_mpu.c ****         {
 7584              		.loc 1 3374 56 is_stmt 0 discriminator 2 view .LVU2243
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 223


 7585 00b6 0133     		adds	r3, r3, #1
 7586              	.LVL519:
3374:task/attitude/eMPL/inv_mpu.c ****         {
 7587              		.loc 1 3374 56 discriminator 2 view .LVU2244
 7588 00b8 F6E7     		b	.L588
 7589              	.L599:
3380:task/attitude/eMPL/inv_mpu.c ****     }
 7590              		.loc 1 3380 16 view .LVU2245
 7591 00ba 4FF0FF30 		mov	r0, #-1
 7592              	.LVL520:
3380:task/attitude/eMPL/inv_mpu.c ****     }
 7593              		.loc 1 3380 16 view .LVU2246
 7594 00be E9E7     		b	.L587
 7595              	.LVL521:
 7596              	.L598:
3380:task/attitude/eMPL/inv_mpu.c ****     }
 7597              		.loc 1 3380 16 view .LVU2247
 7598              	.LBE4:
3399:task/attitude/eMPL/inv_mpu.c **** 
 7599              		.loc 1 3399 9 is_stmt 1 view .LVU2248
 7600 00c0 0120     		movs	r0, #1
 7601 00c2 FFF7FEFF 		bl	mpu_set_dmp_state
 7602              	.LVL522:
 7603 00c6 E2E7     		b	.L594
 7604              	.L601:
 7605              		.align	2
 7606              	.L600:
 7607 00c8 00000000 		.word	.LANCHOR0
 7608              		.cfi_endproc
 7609              	.LFE197:
 7611              		.global	test
 7612              		.global	hw
 7613              		.global	reg
 7614              		.section	.rodata
 7615              		.align	2
 7616              		.set	.LANCHOR1,. + 0
 7617              	.LC1:
 7618 0000 00000000 		.ascii	"\000\000\000\000\000\000"
 7618      0000
 7619              		.section	.data.st,"aw"
 7620              		.align	2
 7621              		.set	.LANCHOR0,. + 0
 7624              	st:
 7625 0000 00000000 		.word	reg
 7626 0004 00000000 		.word	hw
 7627 0008 00000000 		.space	32
 7627      00000000 
 7627      00000000 
 7627      00000000 
 7627      00000000 
 7628 0028 00000000 		.word	test
 7629              		.section	.rodata.hw,"a"
 7630              		.align	2
 7633              	hw:
 7634 0000 68       		.byte	104
 7635 0001 00       		.space	1
 7636 0002 0004     		.short	1024
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 224


 7637 0004 76       		.byte	118
 7638 0005 00       		.space	1
 7639 0006 5401     		.short	340
 7640 0008 F7FD     		.short	-521
 7641 000a 0001     		.short	256
 7642              		.section	.rodata.reg,"a"
 7643              		.align	2
 7646              	reg:
 7647 0000 75       		.byte	117
 7648 0001 19       		.byte	25
 7649 0002 1A       		.byte	26
 7650 0003 0C       		.byte	12
 7651 0004 6A       		.byte	106
 7652 0005 23       		.byte	35
 7653 0006 1B       		.byte	27
 7654 0007 1C       		.byte	28
 7655 0008 0000     		.space	2
 7656 000a 1F       		.byte	31
 7657 000b 20       		.byte	32
 7658 000c 72       		.byte	114
 7659 000d 74       		.byte	116
 7660 000e 43       		.byte	67
 7661 000f 3B       		.byte	59
 7662 0010 41       		.byte	65
 7663 0011 38       		.byte	56
 7664 0012 39       		.byte	57
 7665 0013 3A       		.byte	58
 7666 0014 00       		.space	1
 7667 0015 6B       		.byte	107
 7668 0016 6C       		.byte	108
 7669 0017 37       		.byte	55
 7670 0018 6F       		.byte	111
 7671 0019 06       		.byte	6
 7672 001a 24       		.byte	36
 7673 001b 6D       		.byte	109
 7674 001c 6E       		.byte	110
 7675 001d 70       		.byte	112
 7676              		.section	.rodata.test,"a"
 7677              		.align	2
 7680              	test:
 7681 0000 83000000 		.word	131
 7682 0004 00080000 		.word	2048
 7683 0008 00       		.byte	0
 7684 0009 01       		.byte	1
 7685 000a 00       		.byte	0
 7686 000b 18       		.byte	24
 7687 000c 3200     		.short	50
 7688 000e 05       		.byte	5
 7689 000f 00       		.space	1
 7690 0010 00002041 		.word	1092616192
 7691 0014 0000D242 		.word	1121058816
 7692 0018 295C0F3E 		.word	1041194025
 7693 001c 9A99993E 		.word	1050253722
 7694 0020 3333733F 		.word	1064514355
 7695 0024 295C0F3E 		.word	1041194025
 7696              		.text
 7697              	.Letext0:
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 225


 7698              		.file 2 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\machine\\_def
 7699              		.file 3 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 7700              		.file 4 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_types.h
 7701              		.file 5 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\inclu
 7702              		.file 6 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 7703              		.file 7 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_stdint.
 7704              		.file 8 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\stdlib.h"
 7705              		.file 9 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\math.h"
 7706              		.file 10 "task/attitude/eMPL/inv_mpu.h"
 7707              		.file 11 "Drivers/CMSIS/Include/core_cm7.h"
 7708              		.file 12 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 7709              		.file 13 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/stm32f767xx.h"
 7710              		.file 14 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_def.h"
 7711              		.file 15 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_dma.h"
 7712              		.file 16 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal_i2c.h"
 7713              		.file 17 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal.h"
 7714              		.file 18 "Inc/i2c.h"
 7715              		.file 19 "task/attitude/inc/bsp_i2c.h"
 7716              		.file 20 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 7717              		.file 21 "f:\\prosoft\\gcc_arm_none\\2019q4\\9 2019-q4-major\\arm-none-eabi\\include\\stdio.h"
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 226


DEFINED SYMBOLS
                            *ABS*:00000000 inv_mpu.c
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:17     .text.get_accel_prod_shift:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:24     .text.get_accel_prod_shift:00000000 get_accel_prod_shift
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:181    .text.get_accel_prod_shift:000000b4 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:188    .text.accel_self_test:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:194    .text.accel_self_test:00000000 accel_self_test
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:329    .text.accel_self_test:0000009c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:337    .text.gyro_self_test:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:343    .text.gyro_self_test:00000000 gyro_self_test
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:530    .text.gyro_self_test:000000e8 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:539    .text.set_int_enable:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:545    .text.set_int_enable:00000000 set_int_enable
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:692    .text.set_int_enable:00000094 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:698    .text.get_st_biases:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:704    .text.get_st_biases:00000000 get_st_biases
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1229   .text.get_st_biases:000002cc $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1235   .text.get_st_biases:000002d4 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1466   .rodata.mpu_reg_dump.str1.4:00000000 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1470   .text.mpu_reg_dump:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1477   .text.mpu_reg_dump:00000000 mpu_reg_dump
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1568   .text.mpu_reg_dump:00000050 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1574   .text.mpu_read_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1581   .text.mpu_read_reg:00000000 mpu_read_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1664   .text.mpu_read_reg:0000003c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1669   .text.mpu_get_gyro_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1676   .text.mpu_get_gyro_reg:00000000 mpu_get_gyro_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1780   .text.mpu_get_gyro_reg:0000006c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1785   .text.mpu_get_accel_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1792   .text.mpu_get_accel_reg:00000000 mpu_get_accel_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1896   .text.mpu_get_accel_reg:0000006c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1901   .text.mpu_get_temperature:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:1908   .text.mpu_get_temperature:00000000 mpu_get_temperature
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2028   .text.mpu_get_temperature:00000088 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2034   .text.mpu_read_6500_accel_bias:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2041   .text.mpu_read_6500_accel_bias:00000000 mpu_read_6500_accel_bias
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2153   .text.mpu_read_6500_accel_bias:00000080 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2158   .text.mpu_read_6050_accel_bias:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2165   .text.mpu_read_6050_accel_bias:00000000 mpu_read_6050_accel_bias
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2277   .text.mpu_read_6050_accel_bias:00000080 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2282   .text.mpu_read_6500_gyro_bias:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2289   .text.mpu_read_6500_gyro_bias:00000000 mpu_read_6500_gyro_bias
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2401   .text.mpu_read_6500_gyro_bias:00000080 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2406   .text.mpu_set_gyro_bias_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2413   .text.mpu_set_gyro_bias_reg:00000000 mpu_set_gyro_bias_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2550   .text.mpu_set_gyro_bias_reg:0000008c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2555   .text.mpu_set_accel_bias_6050_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2562   .text.mpu_set_accel_bias_6050_reg:00000000 mpu_set_accel_bias_6050_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2721   .text.mpu_set_accel_bias_6050_reg:000000bc $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2727   .text.mpu_set_accel_bias_6500_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2734   .text.mpu_set_accel_bias_6500_reg:00000000 mpu_set_accel_bias_6500_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2893   .text.mpu_set_accel_bias_6500_reg:000000bc $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2899   .text.mpu_reset_fifo:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:2906   .text.mpu_reset_fifo:00000000 mpu_reset_fifo
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3275   .text.mpu_reset_fifo:000001f4 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3280   .text.mpu_get_gyro_fsr:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3287   .text.mpu_get_gyro_fsr:00000000 mpu_get_gyro_fsr
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 227


C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3303   .text.mpu_get_gyro_fsr:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3307   .text.mpu_get_gyro_fsr:00000010 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3353   .text.mpu_get_gyro_fsr:00000038 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3358   .text.mpu_set_gyro_fsr:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3365   .text.mpu_set_gyro_fsr:00000000 mpu_set_gyro_fsr
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3509   .text.mpu_set_gyro_fsr:00000094 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3514   .text.mpu_get_accel_fsr:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3521   .text.mpu_get_accel_fsr:00000000 mpu_get_accel_fsr
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3537   .text.mpu_get_accel_fsr:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3541   .text.mpu_get_accel_fsr:00000010 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3603   .text.mpu_get_accel_fsr:00000040 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3608   .text.mpu_set_accel_fsr:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3615   .text.mpu_set_accel_fsr:00000000 mpu_set_accel_fsr
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3646   .text.mpu_set_accel_fsr:00000016 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3759   .text.mpu_set_accel_fsr:00000090 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3764   .text.mpu_get_lpf:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3771   .text.mpu_get_lpf:00000000 mpu_get_lpf
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3788   .text.mpu_get_lpf:0000000e $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3794   .text.mpu_get_lpf:00000014 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3854   .text.mpu_get_lpf:00000040 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3859   .text.mpu_set_lpf:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3866   .text.mpu_set_lpf:00000000 mpu_set_lpf
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4012   .text.mpu_set_lpf:00000090 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4017   .text.mpu_get_sample_rate:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4024   .text.mpu_get_sample_rate:00000000 mpu_get_sample_rate
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4060   .text.mpu_get_sample_rate:00000018 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4065   .text.mpu_get_compass_sample_rate:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4072   .text.mpu_get_compass_sample_rate:00000000 mpu_get_compass_sample_rate
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4094   .text.mpu_set_compass_sample_rate:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4101   .text.mpu_set_compass_sample_rate:00000000 mpu_set_compass_sample_rate
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4119   .text.mpu_get_gyro_sens:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4126   .text.mpu_get_gyro_sens:00000000 mpu_get_gyro_sens
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4142   .text.mpu_get_gyro_sens:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4146   .text.mpu_get_gyro_sens:00000010 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4204   .text.mpu_get_gyro_sens:00000038 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4213   .text.mpu_get_accel_sens:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4220   .text.mpu_get_accel_sens:00000000 mpu_get_accel_sens
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4236   .text.mpu_get_accel_sens:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4240   .text.mpu_get_accel_sens:00000010 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4302   .text.mpu_get_accel_sens:00000048 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4307   .text.mpu_get_fifo_config:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4314   .text.mpu_get_fifo_config:00000000 mpu_get_fifo_config
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4337   .text.mpu_get_fifo_config:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4342   .text.mpu_configure_fifo:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4349   .text.mpu_configure_fifo:00000000 mpu_configure_fifo
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4466   .text.mpu_configure_fifo:00000060 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4471   .text.mpu_get_power_state:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4478   .text.mpu_get_power_state:00000000 mpu_get_power_state
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4513   .text.mpu_get_power_state:00000014 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4518   .text.mpu_get_int_status:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4525   .text.mpu_get_int_status:00000000 mpu_get_int_status
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4605   .text.mpu_get_int_status:00000040 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4610   .text.mpu_read_fifo:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:4617   .text.mpu_read_fifo:00000000 mpu_read_fifo
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5037   .text.mpu_read_fifo:000001f4 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5042   .text.mpu_read_fifo_stream:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5049   .text.mpu_read_fifo_stream:00000000 mpu_read_fifo_stream
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 228


C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5245   .text.mpu_read_fifo_stream:000000bc $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5250   .text.mpu_set_bypass:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5257   .text.mpu_set_bypass:00000000 mpu_set_bypass
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5533   .text.mpu_set_bypass:00000164 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5538   .text.mpu_set_int_level:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5545   .text.mpu_set_int_level:00000000 mpu_set_int_level
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5566   .text.mpu_set_int_level:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5571   .text.mpu_set_int_latched:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5578   .text.mpu_set_int_latched:00000000 mpu_set_int_latched
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5694   .text.mpu_set_int_latched:00000070 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5699   .text.mpu_lp_accel_mode:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5706   .text.mpu_lp_accel_mode:00000000 mpu_lp_accel_mode
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5902   .text.mpu_lp_accel_mode:000000d8 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5907   .text.mpu_set_sample_rate:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:5914   .text.mpu_set_sample_rate:00000000 mpu_set_sample_rate
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6058   .text.mpu_set_sample_rate:0000009c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6063   .text.mpu_set_sensors:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6070   .text.mpu_set_sensors:00000000 mpu_set_sensors
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6263   .text.mpu_set_sensors:000000ec $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6268   .text.mpu_init:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6275   .text.mpu_init:00000000 mpu_init
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6485   .text.mpu_init:000000ec $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6490   .text.mpu_write_mem:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6497   .text.mpu_write_mem:00000000 mpu_write_mem
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6629   .text.mpu_write_mem:00000070 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6634   .text.mpu_read_mem:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6641   .text.mpu_read_mem:00000000 mpu_read_mem
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6773   .text.mpu_read_mem:00000070 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6778   .text.mpu_load_firmware:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6785   .text.mpu_load_firmware:00000000 mpu_load_firmware
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6883   .text.mpu_load_firmware:00000050 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6888   .text.mpu_set_dmp_state:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:6895   .text.mpu_set_dmp_state:00000000 mpu_set_dmp_state
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7042   .text.mpu_set_dmp_state:00000090 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7047   .text.mpu_run_self_test:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7054   .text.mpu_run_self_test:00000000 mpu_run_self_test
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7321   .text.mpu_run_self_test:00000104 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7326   .text.mpu_get_dmp_state:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7333   .text.mpu_get_dmp_state:00000000 mpu_get_dmp_state
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7356   .text.mpu_get_dmp_state:0000000c $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7361   .text.mpu_get_compass_reg:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7368   .text.mpu_get_compass_reg:00000000 mpu_get_compass_reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7386   .text.mpu_get_compass_fsr:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7393   .text.mpu_get_compass_fsr:00000000 mpu_get_compass_fsr
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7411   .text.mpu_lp_motion_interrupt:00000000 $t
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7418   .text.mpu_lp_motion_interrupt:00000000 mpu_lp_motion_interrupt
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7607   .text.mpu_lp_motion_interrupt:000000c8 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7680   .rodata.test:00000000 test
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7633   .rodata.hw:00000000 hw
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7646   .rodata.reg:00000000 reg
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7615   .rodata:00000000 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7620   .data.st:00000000 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7624   .data.st:00000000 st
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7630   .rodata.hw:00000000 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7643   .rodata.reg:00000000 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:7677   .rodata.test:00000000 $d
C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3661   .text.mpu_set_accel_fsr:00000025 $d
ARM GAS  C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s 			page 229


C:\Users\Legend\AppData\Local\Temp\cc0l0bpq.s:3661   .text.mpu_set_accel_fsr:00000026 $t

UNDEFINED SYMBOLS
Sensors_I2C_ReadRegister
Sensors_I2C_WriteRegister
__aeabi_ldivmod
vTaskDelay
printf
get_tick_count
